<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
"http://www.w3.org/TR/html4/loose.dtd">
<HTML>
<HEAD>
    <TITLE>Timed Entry Calls</TITLE>
    <META http-equiv="Content-Type" content="text/html; charset=iso-8859-1">
    <META NAME="Author" CONTENT="JTC1/SC22/WG9/ARG, by Randall Brukardt, ARG Editor">
    <META NAME="GENERATOR" CONTENT="Arm_Form.Exe, Ada Reference Manual generator">
    <STYLE type="text/css">
    H4.centered {text-align: center}
    SPAN.swiss {font-family: Arial, Helvetica, sans-serif; font-size: 92%}
    SPAN.roman {font-family: "Times New Roman", Times, serif}
    DIV.paranum {float: left; font-family: Arial, Helvetica, sans-serif; font-size: 64%; width: 2.8em; margin-left: -0.4em; margin-right: -3.0em; margin-top: 0.2em}
    TT {font-family: "Courier New", monospace}
    DT {display: compact}
    SPAN.insert2 {text-decoration: underline; color: rgb(0,102,0) }
    SPAN.delete2 {text-decoration: line-through; color: rgb(0,102,0) }
    DIV.Normal {font-family: "Times New Roman", Times, serif; line-height: 122%; margin-left: 1.2em; margin-bottom: 0.6em}
    DIV.Annotations {font-family: "Times New Roman", Times, serif; font-size: 80%; line-height: 122%; margin-left: 6.2em; margin-bottom: 0.6em}
    DIV.SyntaxIndented {font-family: "Times New Roman", Times, serif; line-height: 122%; margin-left: 3.2em; margin-bottom: 0.4em}
    DIV.Examples {font-family: "Courier New", monospace; font-size: 90%; line-height: 122%; margin-left: 3.4em; margin-bottom: 0.6em}
    </STYLE>
</HEAD>
<BODY TEXT="#000000" BGCOLOR="#FFFFF0" LINK="#000080" VLINK="#330033" ALINK="#0000FF">
<DIV><B><SPAN Style="font-size:200%; color: rgb(0,51,153)">Annotated</SPAN><SPAN Style="font-size:200%; color: rgb(0,0,102)">&nbsp;Ada Reference Manual</SPAN></B> &mdash; <A HREF="AA-TTL.html"><B>Legal Information</B></A></DIV>
<DIV Style="margin-top: 0.6em; margin-bottom: 0.0em"><A HREF="AA-TOC.html"><IMG SRC="cont.gif" ALT="Contents" BORDER=0></A>&nbsp;
&nbsp;<A HREF="AA-0-5.html"><IMG SRC="index.gif" ALT="Index" BORDER=0></A>&nbsp;
&nbsp;<A HREF="AA-STDS.html"><IMG SRC="lib.gif" ALT="References" BORDER=0></A>&nbsp;
&nbsp;<A HREF="AA-SRCH.html"><IMG SRC="find.gif" ALT="Search" BORDER=0></A>&nbsp;
&nbsp;<A HREF="AA-9-7-1.html"><IMG SRC="prev.gif" ALT="Previous" BORDER=0></A>&nbsp;
&nbsp;<A HREF="AA-9-7-3.html"><IMG SRC="next.gif" ALT="Next" BORDER=0></A>&nbsp;
</DIV>
<HR>
<H1>9.7.2 Timed Entry Calls</H1>
<DIV Class="paranum">1/2</DIV>
<DIV Class="Normal">{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AIs/AI-00345.TXT">AI95-00345-01</A></I>} 
[A <SPAN Class="swiss"><A HREF="AA-9-7-2.html#S0219">timed_entry_call</A></SPAN> 
issues an entry call that is cancelled if the call (or a requeue-with-abort 
of the call) is not selected before the expiration time is reached.<SPAN class="insert2">&nbsp;A procedure call may appear rather than an entry call for cases where 
the procedure might be implemented by an entry.</SPAN> <SPAN STYLE="font-size: 80%">{<I>time-out: 
See timed_entry_call</I>}</SPAN> <A NAME="I4216"></A>]</DIV>

<H4 Class="centered">Syntax</H4>
<DIV Class="paranum">2</DIV>
<DIV Class="SyntaxIndented"><SPAN Class="swiss">timed_entry_call</SPAN><A NAME="I4217"></A><A NAME="S0219"></A><SPAN Class="swiss">&nbsp;::=&nbsp;</SPAN><BR>
&nbsp;&nbsp;<B>select</B><BR>
&nbsp;&nbsp;&nbsp;<A NAME="I4218"></A><SPAN Class="swiss"><A HREF="AA-9-7-2.html#S0220">entry_call_alternative</A></SPAN><BR>
&nbsp;&nbsp;<B>or</B><BR>
&nbsp;&nbsp;&nbsp;<A NAME="I4219"></A><SPAN Class="swiss"><A HREF="AA-9-7-1.html#S0217">delay_alternative</A></SPAN><BR>
&nbsp;&nbsp;<B>end&nbsp;select</B>;</DIV>
<DIV Class="paranum">3/2</DIV>
<DIV Class="SyntaxIndented">{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AIs/AI-00345.TXT">AI95-00345-01</A></I>} 
<SPAN Class="swiss">entry_call_alternative</SPAN><A NAME="I4220"></A><A NAME="S0220"></A><SPAN Class="swiss">&nbsp;::=&nbsp;</SPAN><BR>
&nbsp;&nbsp;<SPAN class="insert2"><A NAME="I4221"></A><SPAN Class="swiss"><A HREF="AA-9-7-2.html#S0221">procedure_or_entry_call</A></SPAN></SPAN><SPAN class="delete2"><A NAME="I4222"></A><SPAN Class="swiss"><A HREF="AA-9-5-3.html#S0207">&nbsp;entry_call_statement</A></SPAN></SPAN>&nbsp;[<A NAME="I4223"></A><SPAN Class="swiss"><A HREF="AA-5-1.html#S0130">sequence_of_statements</A></SPAN>]</DIV>
<DIV Class="paranum">3.1/2</DIV>
<DIV Class="SyntaxIndented">{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AIs/AI-00345.TXT">AI95-00345-01</A></I>} 
<SPAN Class="swiss"></SPAN><SPAN class="insert2"><SPAN Class="swiss">procedure_or_entry_call</SPAN></SPAN><SPAN Class="swiss"></SPAN><A NAME="I4224"></A><A NAME="S0221"></A><SPAN class="insert2"><SPAN Class="swiss">&nbsp;::=&nbsp;</SPAN></SPAN><BR>
&nbsp;&nbsp;<SPAN class="insert2"><A NAME="I4225"></A><SPAN Class="swiss"><A HREF="AA-6-4.html#S0163">procedure_call_statement</A></SPAN>&nbsp;|&nbsp;<A NAME="I4226"></A><SPAN Class="swiss"><A HREF="AA-9-5-3.html#S0207">entry_call_statement</A></SPAN></SPAN></DIV>

<H4 Class="centered">Legality Rules</H4>
<DIV Class="paranum">3.2/2</DIV>
<DIV Class="Normal">&nbsp;&nbsp;{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AIs/AI-00345.TXT">AI95-00345-01</A></I>} 
<SPAN class="insert2">If a <SPAN Class="swiss"><A HREF="AA-6-4.html#S0163">procedure_call_statement</A></SPAN> 
is used for a <SPAN Class="swiss"><A HREF="AA-9-7-2.html#S0221">procedure_or_entry_call</A></SPAN>, 
the <I>procedure_</I><SPAN Class="swiss"><A HREF="AA-4-1.html#S0091">name</A></SPAN> 
or <I>procedure_</I><SPAN Class="swiss"><A HREF="AA-4-1.html#S0093">prefix</A></SPAN> 
of the <SPAN Class="swiss"><A HREF="AA-6-4.html#S0163">procedure_call_statement</A></SPAN> 
shall statically denote an entry renamed as a procedure or (a view of) 
a primitive subprogram of a limited interface whose first parameter is 
a controlling parameter (see <A HREF="AA-3-9-2.html">3.9.2</A>).</SPAN> 
</DIV>
<DIV Class="paranum">3.a/2</DIV>
<DIV Class="Annotations"><SPAN class="insert2"><B>Reason:&nbsp;</B>This would 
be a confusing way to call a procedure, so we only allow it when it is 
possible that the procedure is actually an entry. We could have allowed 
formal subprograms here, but we didn't because we'd have to allow all 
formal subprograms, and it would increase the difficulty of generic code 
sharing.</SPAN></DIV>
<DIV Class="paranum">3.b/2</DIV>
<DIV Class="Annotations"><SPAN class="insert2">We say &ldquo;statically 
denotes&rdquo; because an access-to-subprogram cannot be primitive, and 
we don't have anything like access-to-entry. So only names of entries 
or procedures are possible.</SPAN>&nbsp;</DIV>

<H4 Class="centered">Static Semantics</H4>
<DIV Class="paranum">3.3/2</DIV>
<DIV Class="Normal">&nbsp;&nbsp;{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AIs/AI-00345.TXT">AI95-00345-01</A></I>} 
<SPAN class="insert2">If a <SPAN Class="swiss"><A HREF="AA-6-4.html#S0163">procedure_call_statement</A></SPAN> 
is used for a <SPAN Class="swiss"><A HREF="AA-9-7-2.html#S0221">procedure_or_entry_call</A></SPAN>, 
and the procedure is implemented by an entry, then the <I>procedure_</I><SPAN Class="swiss"><A HREF="AA-4-1.html#S0091">name</A></SPAN>, 
or <I>procedure_</I><SPAN Class="swiss"><A HREF="AA-4-1.html#S0093">prefix</A></SPAN> 
and possibly the first parameter of the <SPAN Class="swiss"><A HREF="AA-6-4.html#S0163">procedure_call_statement</A></SPAN>, 
determine the target object of the call and the entry to be called.</SPAN> 
</DIV>
<DIV Class="paranum">3.c/2</DIV>
<DIV Class="Annotations"><SPAN class="insert2"><B>Discussion:&nbsp;</B>The 
above says &ldquo;possibly the first parameter&rdquo;, because Ada allows 
entries to be renamed and passed as formal subprograms. In those cases, 
the task or protected object is implicit in the name of the routine; 
otherwise the object is an explicit parameter to the call.</SPAN>&nbsp;</DIV>

<H4 Class="centered">Dynamic Semantics</H4>
<DIV Class="paranum">4/2</DIV>
<DIV Class="Normal">{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AIs/AI-00345.TXT">AI95-00345-01</A></I>} 
<SPAN STYLE="font-size: 80%">{<I>execution (timed_entry_call)</I> [partial]}</SPAN> 
<A NAME="I4227"></A>For the execution of a <SPAN Class="swiss"><A HREF="AA-9-7-2.html#S0219">timed_entry_call</A></SPAN>, 
the <I>entry_</I><SPAN Class="swiss"><A HREF="AA-4-1.html#S0091">name</A></SPAN><SPAN class="insert2">, 
<I>procedure_</I><SPAN Class="swiss"><A HREF="AA-4-1.html#S0091">name</A></SPAN>, 
or <I>procedure_</I><SPAN Class="swiss"><A HREF="AA-4-1.html#S0093">prefix</A></SPAN>,</SPAN> 
and any actual parameters are evaluated, as for a simple entry call (see 
<A HREF="AA-9-5-3.html">9.5.3</A>)<SPAN class="insert2">&nbsp;or procedure 
call (see <A HREF="AA-6-4.html">6.4</A>)</SPAN>. The expiration time 
(see <A HREF="AA-9-6.html">9.6</A>) for the call is determined by evaluating 
the <I>delay_</I><SPAN Class="swiss"><A HREF="AA-4-4.html#S0115">expression</A></SPAN> 
of the <SPAN Class="swiss"><A HREF="AA-9-7-1.html#S0217">delay_alternative</A></SPAN><SPAN class="insert2">. 
If the call is an entry call or a call on a procedure implemented by 
an entry,</SPAN><SPAN class="delete2">;</SPAN> the entry call is then 
issued.<SPAN class="insert2">&nbsp;Otherwise, the call proceeds as described 
in <A HREF="AA-6-4.html">6.4</A> for a procedure call, followed by the 
<SPAN Class="swiss"><A HREF="AA-5-1.html#S0130">sequence_of_statements</A></SPAN> 
of the <SPAN Class="swiss"><A HREF="AA-9-7-2.html#S0220">entry_call_alternative</A></SPAN>; 
the <SPAN Class="swiss"><A HREF="AA-5-1.html#S0130">sequence_of_statements</A></SPAN> 
of the <SPAN Class="swiss"><A HREF="AA-9-7-1.html#S0217">delay_alternative</A></SPAN> 
is ignored.</SPAN></DIV>
<DIV Class="paranum">5</DIV>
<DIV Class="Normal">If the call is queued (including due to a requeue-with-abort), 
and not selected before the expiration time is reached, an attempt to 
cancel the call is made. If the call completes due to the cancellation, 
the optional <SPAN Class="swiss"><A HREF="AA-5-1.html#S0130">sequence_of_statements</A></SPAN> 
of the <SPAN Class="swiss"><A HREF="AA-9-7-1.html#S0217">delay_alternative</A></SPAN> 
is executed; if the entry call completes normally, the optional <SPAN Class="swiss"><A HREF="AA-5-1.html#S0130">sequence_of_statements</A></SPAN> 
of the <SPAN Class="swiss"><A HREF="AA-9-7-2.html#S0220">entry_call_alternative</A></SPAN> 
is executed.&nbsp;</DIV>
<DIV Class="paranum">5.a/2</DIV>
<DIV Class="Annotations"><SPAN STYLE="font-size: 80%"><I>This paragraph 
was deleted.</I></SPAN><SPAN class="delete2"><B>Ramification:&nbsp;</B></SPAN>{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AIs/AI-00345.TXT">AI95-00345-01</A></I>} 
<SPAN class="delete2">The fact that the syntax calls for an <SPAN Class="swiss"><A HREF="AA-9-5-3.html#S0207">entry_call_statement</A></SPAN> 
means that this fact is used in overload resolution. For example, if 
there is a procedure X and an entry X (both with no parameters), then 
&quot;select X; ...&quot; is legal, because overload resolution knows 
that the entry is the one that was meant.</SPAN>&nbsp;</DIV>

<H4 Class="centered">Examples</H4>
<DIV Class="paranum">6</DIV>
<DIV Class="Normal" Style="margin-bottom: 0.4em"><I>Example of a timed 
entry call:</I>&nbsp;</DIV>
<DIV Class="paranum">7</DIV>
<DIV Class="Examples"><B>select</B><BR>
&nbsp;&nbsp;&nbsp;Controller.Request(Medium)(Some_Item);<BR>
<B>or</B><BR>
&nbsp;&nbsp;&nbsp;<B>delay</B>&nbsp;45.0;<BR>
&nbsp;&nbsp;&nbsp;--<SPAN Class="roman"><I>&nbsp;&nbsp;controller&nbsp;too&nbsp;busy,&nbsp;try&nbsp;something&nbsp;else</I></SPAN><BR>
<B>end</B>&nbsp;<B>select</B>;</DIV>

<H4 Class="centered">Wording Changes from Ada 83</H4>
<DIV Class="paranum">7.a</DIV>
<DIV Class="Annotations">This clause comes before the one for Conditional 
Entry Calls, so we can define conditional entry calls in terms of timed 
entry calls.&nbsp;</DIV>

<H4 Class="centered">Incompatibilities With Ada 95</H4>
<DIV Class="paranum">7.b/2</DIV>
<DIV Class="Annotations">{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AIs/AI-00345.TXT">AI95-00345-01</A></I>} 
<SPAN class="insert2">{<I>incompatibilities with Ada 95</I>} <A NAME="I4228"></A>A 
procedure can be used as the in a timed or conditional entry call, if 
the procedure might actually be an entry. Since the fact that something 
is an entry could be used in resolving these calls in Ada 95, it is possible 
for timed or conditional entry calls that resolved in Ada 95 to be ambiguous 
in Ada 2005. That could happen if both an entry and procedure with the 
same name and profile exist, which should be rare.</SPAN>&nbsp;</DIV>

<HR>
<DIV Style="margin-top: 0.0em; margin-bottom: 0.6em"><A HREF="AA-TOC.html"><IMG SRC="cont.gif" ALT="Contents" BORDER=0></A>&nbsp;
&nbsp;<A HREF="AA-0-5.html"><IMG SRC="index.gif" ALT="Index" BORDER=0></A>&nbsp;
&nbsp;<A HREF="AA-STDS.html"><IMG SRC="lib.gif" ALT="References" BORDER=0></A>&nbsp;
&nbsp;<A HREF="AA-SRCH.html"><IMG SRC="find.gif" ALT="Search" BORDER=0></A>&nbsp;
&nbsp;<A HREF="AA-9-7-1.html"><IMG SRC="prev.gif" ALT="Previous" BORDER=0></A>&nbsp;
&nbsp;<A HREF="AA-9-7-3.html"><IMG SRC="next.gif" ALT="Next" BORDER=0></A>&nbsp;
</DIV>
<DIV Style="margin-top:0.0em"><IMG SRC="AE_logo.gif" height=100 width=113 align=right ALT="Ada-Europe">
<SPAN Style="font-size: 125%">Sponsored by <SPAN Style="font-size: 125%"><A HREF="http://www.ada-europe.org/"><B>Ada-Europe</B></A></SPAN></SPAN></DIV>
</BODY>
</HTML>
