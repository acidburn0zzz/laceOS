<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
"http://www.w3.org/TR/html4/loose.dtd">
<HTML>
<HEAD>
    <TITLE>Inline Expansion of Subprograms</TITLE>
    <META http-equiv="Content-Type" content="text/html; charset=iso-8859-1">
    <META NAME="Author" CONTENT="JTC1/SC22/WG9/ARG, by Randall Brukardt, ARG Editor">
    <META NAME="GENERATOR" CONTENT="Arm_Form.Exe, Ada Reference Manual generator">
    <STYLE type="text/css">
    H4.centered {text-align: center}
    SPAN.swiss {font-family: Arial, Helvetica, sans-serif; font-size: 92%}
    SPAN.roman {font-family: "Times New Roman", Times, serif}
    DIV.paranum {float: left; font-family: Arial, Helvetica, sans-serif; font-size: 64%; width: 2.8em; margin-left: -0.4em; margin-right: -3.0em; margin-top: 0.2em}
    TT {font-family: "Courier New", monospace}
    DT {display: compact}
    SPAN.insert2 {text-decoration: underline; color: rgb(0,102,0) }
    SPAN.delete2 {text-decoration: line-through; color: rgb(0,102,0) }
    DIV.Normal {font-family: "Times New Roman", Times, serif; line-height: 122%; margin-left: 1.2em; margin-bottom: 0.6em}
    DIV.Annotations {font-family: "Times New Roman", Times, serif; font-size: 80%; line-height: 122%; margin-left: 6.2em; margin-bottom: 0.6em}
    DIV.Notes {font-family: "Times New Roman", Times, serif; font-size: 80%; line-height: 122%; margin-left: 3.7em; margin-bottom: 0.6em}
    DIV.NotesHeader {font-family: "Times New Roman", Times, serif; font-size: 80%; line-height: 122%; margin-left: 3.7em}
    DIV.SyntaxIndented {font-family: "Times New Roman", Times, serif; line-height: 122%; margin-left: 3.2em; margin-bottom: 0.4em}
    DIV.SmallExamples {font-family: "Courier New", monospace; font-size: 72%; line-height: 122%; margin-left: 9.6em; margin-bottom: 0.6em}
    </STYLE>
</HEAD>
<BODY TEXT="#000000" BGCOLOR="#FFFFF0" LINK="#000080" VLINK="#330033" ALINK="#0000FF">
<DIV><B><SPAN Style="font-size:200%; color: rgb(0,51,153)">Annotated</SPAN><SPAN Style="font-size:200%; color: rgb(0,0,102)">&nbsp;Ada Reference Manual</SPAN></B> &mdash; <A HREF="AA-TTL.html"><B>Legal Information</B></A></DIV>
<DIV Style="margin-top: 0.6em; margin-bottom: 0.0em"><A HREF="AA-TOC.html"><IMG SRC="cont.gif" ALT="Contents" BORDER=0></A>&nbsp;
&nbsp;<A HREF="AA-0-5.html"><IMG SRC="index.gif" ALT="Index" BORDER=0></A>&nbsp;
&nbsp;<A HREF="AA-STDS.html"><IMG SRC="lib.gif" ALT="References" BORDER=0></A>&nbsp;
&nbsp;<A HREF="AA-SRCH.html"><IMG SRC="find.gif" ALT="Search" BORDER=0></A>&nbsp;
&nbsp;<A HREF="AA-6-3-1.html"><IMG SRC="prev.gif" ALT="Previous" BORDER=0></A>&nbsp;
&nbsp;<A HREF="AA-6-4.html"><IMG SRC="next.gif" ALT="Next" BORDER=0></A>&nbsp;
</DIV>
<HR>
<H1>6.3.2 Inline Expansion of Subprograms</H1>
<DIV Class="paranum">1</DIV>
<DIV Class="Normal">[Subprograms may be expanded in line at the call 
site.]&nbsp;</DIV>

<H4 Class="centered">Syntax</H4>
<DIV Class="paranum">2</DIV>
<DIV Class="SyntaxIndented" Style="margin-bottom: 0.2em"><SPAN STYLE="font-size: 80%">{<I>program 
unit pragma (Inline)</I> [partial]}</SPAN> <A NAME="I3432"></A><SPAN STYLE="font-size: 80%">{<I>pragma, 
program unit (Inline)</I> [partial]}</SPAN> <A NAME="I3433"></A>The form 
of a <SPAN Class="swiss"><A HREF="AA-2-8.html#S0019">pragma</A></SPAN> 
Inline, which is a program unit pragma (see <A HREF="AA-10-1-5.html">10.1.5</A>), 
is as follows:&nbsp;</DIV>
<DIV Class="paranum">3</DIV>
<DIV Class="SyntaxIndented">&nbsp;&nbsp;<B>pragma</B> <A NAME="I3434"></A><A NAME="I3435"></A>Inline(<A NAME="I3436"></A><SPAN Class="swiss"><A HREF="AA-4-1.html#S0091">name</A></SPAN> 
{, <A NAME="I3437"></A><SPAN Class="swiss"><A HREF="AA-4-1.html#S0091">name</A></SPAN>}); 
</DIV>

<H4 Class="centered">Legality Rules</H4>
<DIV Class="paranum">4</DIV>
<DIV Class="Normal">The <SPAN Class="swiss"><A HREF="AA-2-8.html#S0019">pragma</A></SPAN> 
shall apply to one or more callable entities or generic subprograms. 
</DIV>

<H4 Class="centered">Static Semantics</H4>
<DIV Class="paranum">5</DIV>
<DIV Class="Normal">If a <SPAN Class="swiss"><A HREF="AA-2-8.html#S0019">pragma</A></SPAN> 
Inline applies to a callable entity, this indicates that inline expansion 
is desired for all calls to that entity. If a <SPAN Class="swiss"><A HREF="AA-2-8.html#S0019">pragma</A></SPAN> 
Inline applies to a generic subprogram, this indicates that inline expansion 
is desired for all calls to all instances of that generic subprogram. 
</DIV>
<DIV Class="paranum">5.a</DIV>
<DIV Class="Annotations" Style="margin-bottom: 0.4em"><B>Ramification: 
</B>Note that inline expansion is desired no matter what name is used 
in the call. This allows one to request inlining for only one of several 
overloaded subprograms as follows:&nbsp;</DIV>
<DIV Class="paranum">5.b</DIV>
<DIV Class="SmallExamples"><B>package</B>&nbsp;IO&nbsp;<B>is</B><BR>
&nbsp;&nbsp;&nbsp;<B>procedure</B>&nbsp;Put(X&nbsp;:&nbsp;<B>in</B>&nbsp;Integer);<BR>
&nbsp;&nbsp;&nbsp;<B>procedure</B>&nbsp;Put(X&nbsp;:&nbsp;<B>in</B>&nbsp;String);<BR>
&nbsp;&nbsp;&nbsp;<B>procedure</B>&nbsp;Put(X&nbsp;:&nbsp;<B>in</B>&nbsp;Character);<BR>
<B>private</B><BR>
&nbsp;&nbsp;&nbsp;<B>procedure</B>&nbsp;Character_Put(X&nbsp;:&nbsp;<B>in</B>&nbsp;Character)&nbsp;<B>renames</B>&nbsp;Put;<BR>
&nbsp;&nbsp;&nbsp;<B>pragma</B>&nbsp;Inline(Character_Put);<BR>
<B>end</B>&nbsp;IO;</DIV>
<DIV Class="paranum">5.c</DIV>
<DIV Class="SmallExamples"><B>with</B>&nbsp;IO;&nbsp;<B>use</B>&nbsp;IO;<BR>
<B>procedure</B>&nbsp;Main&nbsp;<B>is</B><BR>
&nbsp;&nbsp;&nbsp;I&nbsp;:&nbsp;Integer;<BR>
&nbsp;&nbsp;&nbsp;C&nbsp;:&nbsp;Character;<BR>
<B>begin</B><BR>
&nbsp;&nbsp;&nbsp;...<BR>
&nbsp;&nbsp;&nbsp;Put(C);&nbsp;--<SPAN Class="roman"><I>&nbsp;Inline&nbsp;expansion&nbsp;is&nbsp;desired.</I></SPAN><BR>
&nbsp;&nbsp;&nbsp;Put(I);&nbsp;--<SPAN Class="roman"><I>&nbsp;Inline&nbsp;expansion&nbsp;is&nbsp;NOT&nbsp;desired.</I></SPAN><BR>
<B>end</B>&nbsp;Main;</DIV>
<DIV Class="paranum">5.d</DIV>
<DIV Class="Annotations"><B>Ramification:&nbsp;</B>The meaning of a subprogram 
can be changed by a <SPAN Class="swiss"><A HREF="AA-2-8.html#S0019">pragma</A></SPAN> 
Inline only in the presence of failing checks (see <A HREF="AA-11-6.html">11.6</A>). 
</DIV>

<H4 Class="centered">Implementation Permissions</H4>
<DIV Class="paranum">6</DIV>
<DIV Class="Normal">For each call, an implementation is free to follow 
or to ignore the recommendation expressed by the <SPAN Class="swiss"><A HREF="AA-2-8.html#S0019">pragma</A></SPAN>. 
</DIV>
<DIV Class="paranum">6.a</DIV>
<DIV Class="Annotations"><B>Ramification:&nbsp;</B>Note, in particular, that 
the recommendation cannot always be followed for a recursive call, and 
is often infeasible for entries. Note also that the implementation can 
inline calls even when no such desire was expressed by a pragma, so long 
as the semantics of the program remains unchanged.&nbsp;</DIV>
<DIV Class="paranum">6.1/2</DIV>
<DIV Class="Normal">&nbsp;&nbsp;{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AIs/AI-00309.TXT">AI95-00309-01</A></I>} 
<SPAN class="insert2">An implementation may allow a <SPAN Class="swiss"><A HREF="AA-2-8.html#S0019">pragma</A></SPAN> 
Inline that has an argument which is a <SPAN Class="swiss"><A HREF="AA-4-1.html#S0092">direct_name</A></SPAN> 
denoting a <SPAN Class="swiss"><A HREF="AA-6-3.html#S0162">subprogram_body</A></SPAN> 
of the same <SPAN Class="swiss"><A HREF="AA-3-11.html#S0086">declarative_part</A></SPAN>.</SPAN> 
</DIV>
<DIV Class="paranum">6.b/2</DIV>
<DIV Class="Annotations"><SPAN class="insert2"><B>Reason:&nbsp;</B>This is 
allowed for Ada 83 compatibility. This is only a permission as this usage 
is considered obsolescent.</SPAN>&nbsp;</DIV>
<DIV Class="paranum">6.c/2</DIV>
<DIV Class="Annotations"><SPAN class="insert2"><B>Discussion:&nbsp;</B>We 
only need to allow this in <SPAN Class="swiss"><A HREF="AA-3-11.html#S0086">declarative_part</A></SPAN>s, 
because a body is only allowed in another body, and these all have <SPAN Class="swiss"><A HREF="AA-3-11.html#S0086">declarative_part</A></SPAN>s.</SPAN> 
</DIV>
<DIV Class="NotesHeader">NOTES</DIV>
<DIV Class="paranum">7</DIV>
<DIV Class="Notes">6&nbsp;&nbsp;The <SPAN Class="swiss"><A HREF="AA-4-1.html#S0091">name</A></SPAN> 
in a <SPAN Class="swiss"><A HREF="AA-2-8.html#S0019">pragma</A></SPAN> 
Inline can denote more than one entity in the case of overloading. Such 
a <SPAN Class="swiss"><A HREF="AA-2-8.html#S0019">pragma</A></SPAN> applies 
to all of the denoted entities.&nbsp;</DIV>

<H4 Class="centered">Incompatibilities With Ada 83</H4>
<DIV Class="paranum">7.a/2</DIV>
<DIV Class="Annotations">{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AIs/AI-00309.TXT">AI95-00309-01</A></I>} 
<SPAN class="insert2">{<I>incompatibilities with Ada 83</I>} <A NAME="I3438"></A>A 
pragma Inline cannot refer to a <SPAN Class="swiss"><A HREF="AA-6-3.html#S0162">subprogram_body</A></SPAN> 
outside of that body. The pragma can be given inside of the subprogram 
body. Ada 2005 adds an Implementation Permission to allow this usage 
for compatibility (and Ada 95 implementations also can use this permission), 
but implementations do not have to allow such <SPAN Class="swiss"><A HREF="AA-2-8.html#S0019">pragma</A></SPAN>s.</SPAN> 
</DIV>

<H4 Class="centered">Extensions to Ada 83</H4>
<DIV Class="paranum">7.b</DIV>
<DIV Class="Annotations">{<I>extensions to Ada 83</I>} <A NAME="I3439"></A>A 
<SPAN Class="swiss"><A HREF="AA-2-8.html#S0019">pragma</A></SPAN> Inline 
is allowed inside a <SPAN Class="swiss"><A HREF="AA-6-3.html#S0162">subprogram_body</A></SPAN> 
if there is no corresponding <SPAN Class="swiss"><A HREF="AA-6-1.html#S0148">subprogram_declaration</A></SPAN>. 
This is for uniformity with other program unit pragmas.&nbsp;</DIV>

<H4 Class="centered">Extensions to Ada 95</H4>
<DIV Class="paranum">7.c/2</DIV>
<DIV Class="Annotations">{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AIs/AI-00309.TXT">AI95-00309-01</A></I>} 
<SPAN class="insert2">{<I>extensions to Ada 95</I>} <A NAME="I3440"></A><B>Amendment 
Correction:</B> Implementations are allowed to let <SPAN Class="swiss"><A HREF="AA-2-8.html#S0019">Pragma</A></SPAN> 
Inline apply to a <SPAN Class="swiss"><A HREF="AA-6-3.html#S0162">subprogram_body</A></SPAN>.</SPAN> 
</DIV>

<HR>
<DIV Style="margin-top: 0.0em; margin-bottom: 0.6em"><A HREF="AA-TOC.html"><IMG SRC="cont.gif" ALT="Contents" BORDER=0></A>&nbsp;
&nbsp;<A HREF="AA-0-5.html"><IMG SRC="index.gif" ALT="Index" BORDER=0></A>&nbsp;
&nbsp;<A HREF="AA-STDS.html"><IMG SRC="lib.gif" ALT="References" BORDER=0></A>&nbsp;
&nbsp;<A HREF="AA-SRCH.html"><IMG SRC="find.gif" ALT="Search" BORDER=0></A>&nbsp;
&nbsp;<A HREF="AA-6-3-1.html"><IMG SRC="prev.gif" ALT="Previous" BORDER=0></A>&nbsp;
&nbsp;<A HREF="AA-6-4.html"><IMG SRC="next.gif" ALT="Next" BORDER=0></A>&nbsp;
</DIV>
<DIV Style="margin-top:0.0em"><IMG SRC="AE_logo.gif" height=100 width=113 align=right ALT="Ada-Europe">
<SPAN Style="font-size: 125%">Sponsored by <SPAN Style="font-size: 125%"><A HREF="http://www.ada-europe.org/"><B>Ada-Europe</B></A></SPAN></SPAN></DIV>
</BODY>
</HTML>
