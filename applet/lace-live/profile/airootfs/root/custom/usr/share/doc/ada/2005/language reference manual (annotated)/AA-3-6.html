<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
"http://www.w3.org/TR/html4/loose.dtd">
<HTML>
<HEAD>
    <TITLE>Array Types</TITLE>
    <META http-equiv="Content-Type" content="text/html; charset=iso-8859-1">
    <META NAME="Author" CONTENT="JTC1/SC22/WG9/ARG, by Randall Brukardt, ARG Editor">
    <META NAME="GENERATOR" CONTENT="Arm_Form.Exe, Ada Reference Manual generator">
    <STYLE type="text/css">
    H4.centered {text-align: center}
    SPAN.swiss {font-family: Arial, Helvetica, sans-serif; font-size: 92%}
    SPAN.roman {font-family: "Times New Roman", Times, serif}
    DIV.paranum {float: left; font-family: Arial, Helvetica, sans-serif; font-size: 64%; width: 2.8em; margin-left: -0.4em; margin-right: -3.0em; margin-top: 0.2em}
    TT {font-family: "Courier New", monospace}
    DT {display: compact}
    SPAN.insert1 {text-decoration: underline; color: rgb(0,51,51) }
    SPAN.delete1 {text-decoration: line-through; color: rgb(0,51,51) }
    SPAN.insert2 {text-decoration: underline; color: rgb(0,102,0) }
    SPAN.delete2 {text-decoration: line-through; color: rgb(0,102,0) }
    DIV.Normal {font-family: "Times New Roman", Times, serif; line-height: 122%; margin-left: 1.2em; margin-bottom: 0.6em}
    DIV.Wide {font-family: "Times New Roman", Times, serif; line-height: 122%; margin-left: 1.2em; margin-top: 0.6em; margin-bottom: 0.6em}
    DIV.Annotations {font-family: "Times New Roman", Times, serif; font-size: 80%; line-height: 122%; margin-left: 6.2em; margin-bottom: 0.6em}
    DIV.Notes {font-family: "Times New Roman", Times, serif; font-size: 80%; line-height: 122%; margin-left: 3.7em; margin-bottom: 0.6em}
    DIV.NotesHeader {font-family: "Times New Roman", Times, serif; font-size: 80%; line-height: 122%; margin-left: 3.7em}
    DIV.SyntaxIndented {font-family: "Times New Roman", Times, serif; line-height: 122%; margin-left: 3.2em; margin-bottom: 0.4em}
    DIV.Examples {font-family: "Courier New", monospace; font-size: 90%; line-height: 122%; margin-left: 3.4em; margin-bottom: 0.6em}
    DIV.SmallExamples {font-family: "Courier New", monospace; font-size: 72%; line-height: 122%; margin-left: 9.6em; margin-bottom: 0.6em}
    UL.Bulleted {font-family: "Times New Roman", Times, serif; line-height: 122%; margin-left: 3.2em; margin-right: 2.0em; margin-top: 0em; margin-bottom: 0.5em}
    </STYLE>
</HEAD>
<BODY TEXT="#000000" BGCOLOR="#FFFFF0" LINK="#000080" VLINK="#330033" ALINK="#0000FF">
<DIV><B><SPAN Style="font-size:200%; color: rgb(0,51,153)">Annotated</SPAN><SPAN Style="font-size:200%; color: rgb(0,0,102)">&nbsp;Ada Reference Manual</SPAN></B> &mdash; <A HREF="AA-TTL.html"><B>Legal Information</B></A></DIV>
<DIV Style="margin-top: 0.6em; margin-bottom: 0.0em"><A HREF="AA-TOC.html"><IMG SRC="cont.gif" ALT="Contents" BORDER=0></A>&nbsp;
&nbsp;<A HREF="AA-0-5.html"><IMG SRC="index.gif" ALT="Index" BORDER=0></A>&nbsp;
&nbsp;<A HREF="AA-STDS.html"><IMG SRC="lib.gif" ALT="References" BORDER=0></A>&nbsp;
&nbsp;<A HREF="AA-SRCH.html"><IMG SRC="find.gif" ALT="Search" BORDER=0></A>&nbsp;
&nbsp;<A HREF="AA-3-5-10.html"><IMG SRC="prev.gif" ALT="Previous" BORDER=0></A>&nbsp;
&nbsp;<A HREF="AA-3-6-1.html"><IMG SRC="next.gif" ALT="Next" BORDER=0></A>&nbsp;
</DIV>
<HR>
<H1>3.6 Array Types</H1>
<DIV Class="paranum">1</DIV>
<DIV Class="Normal"><SPAN STYLE="font-size: 80%">{<I>array</I>}</SPAN> 
<A NAME="I1964"></A><SPAN STYLE="font-size: 80%">{<I>array type</I>}</SPAN> 
<A NAME="I1965"></A>An <I>array</I> object is a composite object consisting 
of components which all have the same subtype. The name for a component 
of an array uses one or more index values belonging to specified discrete 
types. The value of an array object is a composite value consisting of 
the values of the components.&nbsp;</DIV>

<H4 Class="centered">Syntax</H4>
<DIV Class="paranum">2</DIV>
<DIV Class="SyntaxIndented"><SPAN Class="swiss">array_type_definition</SPAN><A NAME="I1966"></A><A NAME="S0051"></A><SPAN Class="swiss">&nbsp;::=&nbsp;</SPAN><BR>
&nbsp;&nbsp;&nbsp;<A NAME="I1967"></A><SPAN Class="swiss"><A HREF="AA-3-6.html#S0052">unconstrained_array_definition</A></SPAN>&nbsp;|&nbsp;<A NAME="I1968"></A><SPAN Class="swiss"><A HREF="AA-3-6.html#S0054">constrained_array_definition</A></SPAN></DIV>
<DIV Class="paranum">3</DIV>
<DIV Class="SyntaxIndented"><SPAN Class="swiss">unconstrained_array_definition</SPAN><A NAME="I1969"></A><A NAME="S0052"></A><SPAN Class="swiss">&nbsp;::=&nbsp;</SPAN><BR>
&nbsp;&nbsp;&nbsp;<B>array</B>(<A NAME="I1970"></A><SPAN Class="swiss"><A HREF="AA-3-6.html#S0053">index_subtype_definition</A></SPAN>&nbsp;{,&nbsp;<A NAME="I1971"></A><SPAN Class="swiss"><A HREF="AA-3-6.html#S0053">index_subtype_definition</A></SPAN>})&nbsp;<B>of</B>&nbsp;<A NAME="I1972"></A><SPAN Class="swiss"><A HREF="AA-3-6.html#S0056">component_definition</A></SPAN></DIV>
<DIV Class="paranum">4</DIV>
<DIV Class="SyntaxIndented"><SPAN Class="swiss">index_subtype_definition</SPAN><A NAME="I1973"></A><A NAME="S0053"></A><SPAN Class="swiss">&nbsp;::=&nbsp;</SPAN><A NAME="I1974"></A><SPAN Class="swiss"><A HREF="AA-3-2-2.html#S0028">subtype_mark</A></SPAN>&nbsp;<B>range</B>&nbsp;&lt;&gt;</DIV>
<DIV Class="paranum">5</DIV>
<DIV Class="SyntaxIndented"><SPAN Class="swiss">constrained_array_definition</SPAN><A NAME="I1975"></A><A NAME="S0054"></A><SPAN Class="swiss">&nbsp;::=&nbsp;</SPAN><BR>
&nbsp;&nbsp;&nbsp;<B>array</B>&nbsp;(<A NAME="I1976"></A><SPAN Class="swiss"><A HREF="AA-3-6.html#S0055">discrete_subtype_definition</A></SPAN>&nbsp;{,&nbsp;<A NAME="I1977"></A><SPAN Class="swiss"><A HREF="AA-3-6.html#S0055">discrete_subtype_definition</A></SPAN>})&nbsp;<B>of</B>&nbsp;<A NAME="I1978"></A><SPAN Class="swiss"><A HREF="AA-3-6.html#S0056">component_definition</A></SPAN></DIV>
<DIV Class="paranum">6</DIV>
<DIV Class="SyntaxIndented"><SPAN Class="swiss">discrete_subtype_definition</SPAN><A NAME="I1979"></A><A NAME="S0055"></A><SPAN Class="swiss">&nbsp;::=&nbsp;</SPAN><I>discrete_</I><A NAME="I1980"></A><SPAN Class="swiss"><A HREF="AA-3-2-2.html#S0027">subtype_indication</A></SPAN>&nbsp;|&nbsp;<A NAME="I1981"></A><SPAN Class="swiss"><A HREF="AA-3-5.html#S0037">range</A></SPAN></DIV>
<DIV Class="paranum">7/2</DIV>
<DIV Class="SyntaxIndented">{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AIs/AI-00230.TXT">AI95-00230-01</A></I>} 
{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AIs/AI-00406.TXT">AI95-00406-01</A></I>} 
<SPAN Class="swiss">component_definition</SPAN><A NAME="I1982"></A><A NAME="S0056"></A><SPAN Class="swiss">&nbsp;::=&nbsp;</SPAN><SPAN class="insert2"><BR>
&nbsp;&nbsp;&nbsp;</SPAN>[<B>aliased</B>]&nbsp;<A NAME="I1983"></A><SPAN Class="swiss"><A HREF="AA-3-2-2.html#S0027">subtype_indication</A></SPAN><SPAN class="insert2"><BR>
&nbsp;|&nbsp;[<B>aliased</B>]&nbsp;<A NAME="I1984"></A><SPAN Class="swiss"><A HREF="AA-3-10.html#S0084">access_definition</A></SPAN></SPAN></DIV>

<H4 Class="centered">Name Resolution Rules</H4>
<DIV Class="paranum">8</DIV>
<DIV Class="Normal"><SPAN STYLE="font-size: 80%">{<I>expected type (discrete_subtype_definition 
range)</I> [partial]}</SPAN> <A NAME="I1985"></A>For a <SPAN Class="swiss"><A HREF="AA-3-6.html#S0055">discrete_subtype_definition</A></SPAN> 
that is a <SPAN Class="swiss"><A HREF="AA-3-5.html#S0037">range</A></SPAN>, 
the <SPAN Class="swiss"><A HREF="AA-3-5.html#S0037">range</A></SPAN> 
shall resolve to be of some specific discrete type[; which discrete type 
shall be determined without using any context other than the bounds of 
the <SPAN Class="swiss"><A HREF="AA-3-5.html#S0037">range</A></SPAN> 
itself (plus the preference for <I>root_integer</I> &mdash; see <A HREF="AA-8-6.html">8.6</A>).] 
</DIV>

<H4 Class="centered">Legality Rules</H4>
<DIV Class="paranum">9</DIV>
<DIV Class="Normal"><SPAN STYLE="font-size: 80%">{<I>index subtype</I>}</SPAN> 
<A NAME="I1986"></A>Each <SPAN Class="swiss"><A HREF="AA-3-6.html#S0053">index_subtype_definition</A></SPAN> 
or <SPAN Class="swiss"><A HREF="AA-3-6.html#S0055">discrete_subtype_definition</A></SPAN> 
in an <SPAN Class="swiss"><A HREF="AA-3-6.html#S0051">array_type_definition</A></SPAN> 
defines an <I>index subtype</I>; <SPAN STYLE="font-size: 80%">{<I>index 
type</I>}</SPAN> <A NAME="I1987"></A>its type (the <I>index type</I>) 
shall be discrete.&nbsp;</DIV>
<DIV Class="paranum">9.a</DIV>
<DIV Class="Annotations"><B>Discussion:&nbsp;</B>{<I>index (of an array)</I>} 
<A NAME="I1988"></A>An <I>index</I> is a discrete quantity used to select 
along a given dimension of an array. A component is selected by specifying 
corresponding values for each of the indices.&nbsp;</DIV>
<DIV Class="paranum">10</DIV>
<DIV Class="Normal"><SPAN STYLE="font-size: 80%">{<I>component subtype</I>}</SPAN> 
<A NAME="I1989"></A>The subtype defined by the <SPAN Class="swiss"><A HREF="AA-3-2-2.html#S0027">subtype_indication</A></SPAN> 
of a <SPAN Class="swiss"><A HREF="AA-3-6.html#S0056">component_definition</A></SPAN> 
(the <I>component subtype</I>) shall be a definite subtype.&nbsp;</DIV>
<DIV Class="paranum">10.a</DIV>
<DIV Class="Annotations"><B>Ramification:&nbsp;</B>This applies to all uses 
of <SPAN Class="swiss"><A HREF="AA-3-6.html#S0056">component_definition</A></SPAN>, 
including in <SPAN Class="swiss"><A HREF="AA-3-8.html#S0066">record_type_definition</A></SPAN>s 
and <SPAN Class="swiss"><A HREF="AA-9-4.html#S0195">protected_definition</A></SPAN>s.</DIV>
<DIV Class="paranum">11/2</DIV>
<DIV Class="Normal">&nbsp;<SPAN STYLE="font-size: 80%"><I>This paragraph was 
deleted.</I></SPAN><SPAN class="delete2"></SPAN>{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AIs/AI-00363.TXT">AI95-00363-01</A></I>} 
<SPAN class="delete2">Within the definition of a nonlimited composite 
type (or a limited composite type that later in its immediate scope becomes 
nonlimited &mdash; see <A HREF="AA-7-3-1.html">7.3.1</A> and <A HREF="AA-7-5.html">7.5</A>), 
if a <SPAN Class="swiss"><A HREF="AA-3-6.html#S0056">component_definition</A></SPAN> 
contains the reserved word <B>aliased</B> and the type of the component 
is discriminated, then the nominal subtype of the component shall be 
constrained.</SPAN>&nbsp;</DIV>
<DIV Class="paranum">11.a/2</DIV>
<DIV Class="Annotations"><SPAN class="delete2"><B>Reason:&nbsp;</B>If we allowed 
the subtype to be unconstrained, then the discriminants might change 
because of an assignment to the containing (nonlimited) object, thus 
causing a potential violation of an access subtype constraint of an access 
value designating the aliased component.</SPAN></DIV>
<DIV Class="paranum">11.b/2</DIV>
<DIV Class="Annotations"><SPAN class="delete2">Note that the rule elsewhere 
defining all aliased discriminated objects to be constrained does not 
help &mdash; that rule prevents assignments to the component itself from 
doing any harm, but not assignments to the containing object.</SPAN></DIV>
<DIV Class="paranum">11.c/2</DIV>
<DIV Class="Annotations" Style="margin-bottom: 0.4em"><SPAN class="delete2">We 
allow this for components within limited types since assignment to the 
enclosing object is not a problem. Furthermore, it is important to be 
able to use a default expression for a discriminant in arrays of limited 
components, since that is the only way to give the components different 
values for their discriminants. For example:</SPAN>&nbsp;</DIV>
<DIV Class="paranum">11.d/2</DIV>
<DIV Class="SmallExamples"><SPAN class="delete2"><B>protected</B>&nbsp;<B>type</B>&nbsp;Counter_Type(Initial_Value&nbsp;:&nbsp;Integer&nbsp;:=&nbsp;1)&nbsp;<B>is</B><BR>
&nbsp;&nbsp;&nbsp;<B>procedure</B>&nbsp;Get_Next(Next_Value&nbsp;:&nbsp;<B>out</B>&nbsp;Integer);<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;--<SPAN Class="roman"><I>&nbsp;Returns&nbsp;the&nbsp;next&nbsp;value&nbsp;on&nbsp;each&nbsp;call,&nbsp;bumping&nbsp;Count</I></SPAN><BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;--<SPAN Class="roman"><I>&nbsp;before&nbsp;returning.</I></SPAN><BR>
<B>private</B><BR>
&nbsp;&nbsp;&nbsp;Count&nbsp;:&nbsp;Integer&nbsp;:=&nbsp;Initial_Value;<BR>
<B>end</B>&nbsp;Counter_Type;<BR>
<B>protected</B>&nbsp;<B>body</B>&nbsp;Counter_Type&nbsp;<B>is</B>&nbsp;...</SPAN></DIV>
<DIV Class="paranum">11.e/2</DIV>
<DIV Class="SmallExamples"><SPAN class="delete2"><B>function</B>&nbsp;Next_Id(Counter&nbsp;:&nbsp;<B>access</B>&nbsp;Counter_Type)&nbsp;<B>return</B>&nbsp;Integer&nbsp;<B>is</B><BR>
&nbsp;&nbsp;&nbsp;&nbsp;Result&nbsp;:&nbsp;Integer;<BR>
<B>begin</B><BR>
&nbsp;&nbsp;&nbsp;&nbsp;Counter.Get_Next(Result);<BR>
&nbsp;&nbsp;&nbsp;&nbsp;<B>return</B>&nbsp;Result;<BR>
<B>end</B>&nbsp;Next_Id;</SPAN></DIV>
<DIV Class="paranum">11.f/2</DIV>
<DIV Class="SmallExamples"><SPAN class="delete2">C&nbsp;:&nbsp;<B>aliased</B>&nbsp;Counter_Type;<BR>
<B>task</B>&nbsp;<B>type</B>&nbsp;T(Who_Am_I&nbsp;:&nbsp;Integer&nbsp;:=&nbsp;Next_Id(C'Access));<BR>
<B>task</B>&nbsp;<B>body</B>&nbsp;T&nbsp;<B>is</B>&nbsp;...</SPAN></DIV>
<DIV Class="paranum">11.g/2</DIV>
<DIV Class="SmallExamples"><SPAN class="delete2">Task_Array&nbsp;:&nbsp;<B>array</B>(1..100)&nbsp;<B>of</B>&nbsp;<B>aliased</B>&nbsp;T;<BR>
&nbsp;&nbsp;--<SPAN Class="roman"><I>&nbsp;Array&nbsp;of&nbsp;task&nbsp;elements,&nbsp;each&nbsp;with&nbsp;its&nbsp;own&nbsp;unique&nbsp;ID.</I></SPAN><BR>
&nbsp;&nbsp;--<SPAN Class="roman"><I>&nbsp;We&nbsp;specify&nbsp;&quot;aliased&quot;&nbsp;so&nbsp;we&nbsp;can&nbsp;use&nbsp;Task_Array(I)'Access.</I></SPAN><BR>
&nbsp;&nbsp;--<SPAN Class="roman"><I>&nbsp;This&nbsp;is&nbsp;safe&nbsp;because&nbsp;Task_Array&nbsp;is&nbsp;of&nbsp;a&nbsp;limited&nbsp;type,</I></SPAN><BR>
&nbsp;&nbsp;--<SPAN Class="roman"><I>&nbsp;so&nbsp;there&nbsp;is&nbsp;no&nbsp;way&nbsp;an&nbsp;assignment&nbsp;to&nbsp;it&nbsp;could&nbsp;change</I></SPAN><BR>
&nbsp;&nbsp;--<SPAN Class="roman"><I>&nbsp;the&nbsp;discriminants&nbsp;of&nbsp;one&nbsp;of&nbsp;its&nbsp;components.</I></SPAN></SPAN></DIV>
<DIV Class="paranum">11.h/2</DIV>
<DIV Class="Annotations"><SPAN class="delete2"><B>Ramification:&nbsp;</B>Note 
that this rule applies to array components and record components, but 
not to protected type components (since they are always limited).</SPAN> 
</DIV>

<H4 Class="centered">Static Semantics</H4>
<DIV Class="paranum">12</DIV>
<DIV Class="Normal"><SPAN STYLE="font-size: 80%">{<I>dimensionality (of 
an array)</I>}</SPAN> <A NAME="I1990"></A><SPAN STYLE="font-size: 80%">{<I>one-dimensional 
array</I>}</SPAN> <A NAME="I1991"></A><SPAN STYLE="font-size: 80%">{<I>multi-dimensional 
array</I>}</SPAN> <A NAME="I1992"></A>An array is characterized by the 
number of indices (the <I>dimensionality</I> of the array), the type 
and position of each index, the lower and upper bounds for each index, 
and the subtype of the components. The order of the indices is significant.</DIV>
<DIV Class="paranum">13</DIV>
<DIV Class="Normal">A one-dimensional array has a distinct component 
for each possible index value. A multidimensional array has a distinct 
component for each possible sequence of index values that can be formed 
by selecting one value for each index position (in the given order). 
The possible values for a given index are all the values between the 
lower and upper bounds, inclusive; <SPAN STYLE="font-size: 80%">{<I>index 
range</I>}</SPAN> <A NAME="I1993"></A>this range of values is called 
the <I>index range</I>. <SPAN STYLE="font-size: 80%">{<I>bounds (of an 
array)</I>}</SPAN> <A NAME="I1994"></A>The <I>bounds</I> of an array 
are the bounds of its index ranges. <SPAN STYLE="font-size: 80%">{<I>length 
(of a dimension of an array)</I>}</SPAN> <A NAME="I1995"></A>The <I>length</I> 
of a dimension of an array is the number of values of the index range 
of the dimension (zero for a null range). <SPAN STYLE="font-size: 80%">{<I>length 
(of a one-dimensional array)</I>}</SPAN> <A NAME="I1996"></A>The <I>length</I> 
of a one-dimensional array is the length of its only dimension.</DIV>
<DIV Class="paranum">14</DIV>
<DIV Class="Normal">An <SPAN Class="swiss"><A HREF="AA-3-6.html#S0051">array_type_definition</A></SPAN> 
defines an array type and its first subtype. For each object of this 
array type, the number of indices, the type and position of each index, 
and the subtype of the components are as in the type definition[; the 
values of the lower and upper bounds for each index belong to the corresponding 
index subtype of its type, except for null arrays (see <A HREF="AA-3-6-1.html">3.6.1</A>)].</DIV>
<DIV Class="paranum">15</DIV>
<DIV Class="Normal"><SPAN STYLE="font-size: 80%">{<I>constrained (subtype)</I>}</SPAN> 
<A NAME="I1997"></A><SPAN STYLE="font-size: 80%">{<I>unconstrained (subtype)</I>}</SPAN> 
<A NAME="I1998"></A>An <SPAN Class="swiss"><A HREF="AA-3-6.html#S0052">unconstrained_array_definition</A></SPAN> 
defines an array type with an unconstrained first subtype. Each <SPAN Class="swiss"><A HREF="AA-3-6.html#S0053">index_subtype_definition</A></SPAN> 
defines the corresponding index subtype to be the subtype denoted by 
the <SPAN Class="swiss"><A HREF="AA-3-2-2.html#S0028">subtype_mark</A></SPAN>. 
[<SPAN STYLE="font-size: 80%">{<I>box (compound delimiter)</I> [partial]}</SPAN> 
<A NAME="I1999"></A>The compound delimiter &lt;&gt; (called a <I>box</I>) 
of an <SPAN Class="swiss"><A HREF="AA-3-6.html#S0053">index_subtype_definition</A></SPAN> 
stands for an undefined range (different objects of the type need not 
have the same bounds).]</DIV>
<DIV Class="paranum">16</DIV>
<DIV Class="Normal"><SPAN STYLE="font-size: 80%">{<I>constrained (subtype)</I>}</SPAN> 
<A NAME="I2000"></A><SPAN STYLE="font-size: 80%">{<I>unconstrained (subtype)</I>}</SPAN> 
<A NAME="I2001"></A>A <SPAN Class="swiss"><A HREF="AA-3-6.html#S0054">constrained_array_definition</A></SPAN> 
defines an array type with a constrained first subtype. Each <SPAN Class="swiss"><A HREF="AA-3-6.html#S0055">discrete_subtype_definition</A></SPAN> 
defines the corresponding index subtype, as well as the corresponding 
index range for the constrained first subtype. <SPAN STYLE="font-size: 80%">{<I>constraint 
(of a first array subtype)</I> [partial]}</SPAN> <A NAME="I2002"></A>The 
<I>constraint</I> of the first subtype consists of the bounds of the 
index ranges.&nbsp;</DIV>
<DIV Class="paranum">16.a</DIV>
<DIV Class="Annotations"><B>Discussion:&nbsp;</B>Although there is no namable 
unconstrained array subtype in this case, the predefined slicing and 
concatenation operations can operate on and yield values that do not 
necessarily belong to the first array subtype. This is also true for 
Ada 83.&nbsp;</DIV>
<DIV Class="paranum">17</DIV>
<DIV Class="Normal" Style="margin-bottom: 0.4em">The discrete subtype 
defined by a <SPAN Class="swiss"><A HREF="AA-3-6.html#S0055">discrete_subtype_definition</A></SPAN> 
is either that defined by the <SPAN Class="swiss"><A HREF="AA-3-2-2.html#S0027">subtype_indication</A></SPAN>, 
or a subtype determined by the <SPAN Class="swiss"><A HREF="AA-3-5.html#S0037">range</A></SPAN> 
as follows:&nbsp;</DIV>
<DIV Class="paranum">18</DIV>
<UL Class="Bulleted"><LI TYPE=DISC>If the type of the <SPAN Class="swiss"><A HREF="AA-3-5.html#S0037">range</A></SPAN> 
resolves to <I>root_integer</I>, then the <SPAN Class="swiss"><A HREF="AA-3-6.html#S0055">discrete_subtype_definition</A></SPAN> 
defines a subtype of the predefined type Integer with bounds given by 
a conversion to Integer of the bounds of the <SPAN Class="swiss"><A HREF="AA-3-5.html#S0037">range</A></SPAN>; 
<SPAN STYLE="font-size: 80%">{<I>implicit subtype conversion (bounds 
of a range)</I> [partial]}</SPAN> <A NAME="I2003"></A></LI></UL>
<DIV Class="paranum">18.a</DIV>
<DIV Class="Annotations"><B>Reason:&nbsp;</B>This ensures that indexing over 
the discrete subtype can be performed with regular Integers, rather than 
only <I>universal_integer</I>s.&nbsp;</DIV>
<DIV Class="paranum">18.b</DIV>
<DIV Class="Annotations"><B>Discussion:&nbsp;</B>We considered doing this 
by simply creating a &ldquo;preference&rdquo; for Integer when resolving 
the <SPAN Class="swiss"><A HREF="AA-3-5.html#S0037">range</A></SPAN>. 
{<I>Beaujolais effect</I> [partial]} <A NAME="I2004"></A>However, this 
can introduce <I>Beaujolais</I> effects when the <SPAN Class="swiss"><A HREF="AA-4-4.html#S0117">simple_expression</A></SPAN>s 
involve calls on functions visible due to <B>use</B> clauses.&nbsp;</DIV>
<DIV Class="paranum">19</DIV>
<UL Class="Bulleted"><LI TYPE=DISC>Otherwise, the <SPAN Class="swiss"><A HREF="AA-3-6.html#S0055">discrete_subtype_definition</A></SPAN> 
defines a subtype of the type of the <SPAN Class="swiss"><A HREF="AA-3-5.html#S0037">range</A></SPAN>, 
with the bounds given by the <SPAN Class="swiss"><A HREF="AA-3-5.html#S0037">range</A></SPAN>. 
</LI></UL>
<DIV Class="paranum">20</DIV>
<DIV Class="Normal"><SPAN STYLE="font-size: 80%">{<I>nominal subtype 
(of a component)</I> [partial]}</SPAN> <A NAME="I2005"></A>The <SPAN Class="swiss"><A HREF="AA-3-6.html#S0056">component_definition</A></SPAN> 
of an <SPAN Class="swiss"><A HREF="AA-3-6.html#S0051">array_type_definition</A></SPAN> 
defines the nominal subtype of the components. If the reserved word <B>aliased</B> 
appears in the <SPAN Class="swiss"><A HREF="AA-3-6.html#S0056">component_definition</A></SPAN>, 
then each component of the array is aliased (see <A HREF="AA-3-10.html">3.10</A>). 
</DIV>
<DIV Class="paranum">20.a/2</DIV>
<DIV Class="Annotations"><SPAN class="delete2"><B>Ramification:&nbsp;</B></SPAN>{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AIs/AI-00363.TXT">AI95-00363-01</A></I>} 
<SPAN class="delete2">In this case, the nominal subtype cannot be an 
unconstrained discriminated subtype. See <A HREF="AA-3-8.html">3.8</A>.</SPAN> 
</DIV>

<H4 Class="centered">Dynamic Semantics</H4>
<DIV Class="paranum">21</DIV>
<DIV Class="Normal"><SPAN STYLE="font-size: 80%">{<I>elaboration (array_type_definition)</I> 
[partial]}</SPAN> <A NAME="I2006"></A>The elaboration of an <SPAN Class="swiss"><A HREF="AA-3-6.html#S0051">array_type_definition</A></SPAN> 
creates the array type and its first subtype, and consists of the elaboration 
of any <SPAN Class="swiss"><A HREF="AA-3-6.html#S0055">discrete_subtype_definition</A></SPAN>s 
and the <SPAN Class="swiss"><A HREF="AA-3-6.html#S0056">component_definition</A></SPAN>.</DIV>
<DIV Class="paranum">22/2</DIV>
<DIV Class="Normal">&nbsp;{<I><A HREF="defect1.html#8652/0002">8652/0002</A></I>} 
{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AIs/AI-00171.TXT">AI95-00171-01</A></I>} 
{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AIs/AI-00230.TXT">AI95-00230-01</A></I>} 
<SPAN STYLE="font-size: 80%">{<I>elaboration (discrete_subtype_definition)</I> 
[partial]}</SPAN> <A NAME="I2007"></A>The elaboration of a <SPAN Class="swiss"><A HREF="AA-3-6.html#S0055">discrete_subtype_definition</A></SPAN> 
<SPAN class="insert1">that does not contain any per-object expressions</SPAN> 
creates the discrete subtype, and consists of the elaboration of the 
<SPAN Class="swiss"><A HREF="AA-3-2-2.html#S0027">subtype_indication</A></SPAN> 
or the evaluation of the <SPAN Class="swiss"><A HREF="AA-3-5.html#S0037">range</A></SPAN>. 
<SPAN class="insert1">The elaboration of a <SPAN Class="swiss"><A HREF="AA-3-6.html#S0055">discrete_subtype_definition</A></SPAN> 
that contains one or more per-object expressions is defined in <A HREF="AA-3-8.html">3.8</A>.</SPAN> 
<SPAN STYLE="font-size: 80%">{<I>elaboration (component_definition)</I> 
[partial]}</SPAN> <A NAME="I2008"></A>The elaboration of a <SPAN Class="swiss"><A HREF="AA-3-6.html#S0056">component_definition</A></SPAN> 
in an <SPAN Class="swiss"><A HREF="AA-3-6.html#S0051">array_type_definition</A></SPAN> 
consists of the elaboration of the <SPAN Class="swiss"><A HREF="AA-3-2-2.html#S0027">subtype_indication</A></SPAN><SPAN class="insert2">&nbsp;or <SPAN Class="swiss"><A HREF="AA-3-10.html#S0084">access_definition</A></SPAN></SPAN>. 
The elaboration of any <SPAN Class="swiss"><A HREF="AA-3-6.html#S0055">discrete_subtype_definition</A></SPAN>s 
and the elaboration of the <SPAN Class="swiss"><A HREF="AA-3-6.html#S0056">component_definition</A></SPAN> 
are performed in an arbitrary order.&nbsp;</DIV>
<DIV Class="NotesHeader">NOTES</DIV>
<DIV Class="paranum">23</DIV>
<DIV Class="Notes">43&nbsp;&nbsp;All components of an array have the 
same subtype. In particular, for an array of components that are one-dimensional 
arrays, this means that all components have the same bounds and hence 
the same length.</DIV>
<DIV Class="paranum">24</DIV>
<DIV Class="Notes">44&nbsp;&nbsp;Each elaboration of an <SPAN Class="swiss"><A HREF="AA-3-6.html#S0051">array_type_definition</A></SPAN> 
creates a distinct array type. A consequence of this is that each object 
whose <SPAN Class="swiss"><A HREF="AA-3-3-1.html#S0032">object_declaration</A></SPAN> 
contains an <SPAN Class="swiss"><A HREF="AA-3-6.html#S0051">array_type_definition</A></SPAN> 
is of its own unique type.&nbsp;</DIV>

<H4 Class="centered">Examples</H4>
<DIV Class="paranum">25</DIV>
<DIV Class="Normal" Style="margin-bottom: 0.4em"><I>Examples of type 
declarations with unconstrained array definitions:&nbsp;</I></DIV>
<DIV Class="paranum">26</DIV>
<DIV Class="Examples"><B>type</B>&nbsp;Vector&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<B>is</B>&nbsp;<B>array</B>(Integer&nbsp;&nbsp;<B>range</B>&nbsp;&lt;&gt;)&nbsp;<B>of</B>&nbsp;Real;<BR>
<B>type</B>&nbsp;Matrix&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<B>is</B>&nbsp;<B>array</B>(Integer&nbsp;&nbsp;<B>range</B>&nbsp;&lt;&gt;,&nbsp;Integer&nbsp;<B>range</B>&nbsp;&lt;&gt;)&nbsp;<B>of</B>&nbsp;Real;<BR>
<B>type</B>&nbsp;Bit_Vector&nbsp;<B>is</B>&nbsp;<B>array</B>(Integer&nbsp;&nbsp;<B>range</B>&nbsp;&lt;&gt;)&nbsp;<B>of</B>&nbsp;Boolean;<BR>
<B>type</B>&nbsp;Roman&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<B>is</B>&nbsp;<B>array</B>(Positive&nbsp;<B>range</B>&nbsp;&lt;&gt;)&nbsp;<B>of</B>&nbsp;Roman_Digit;&nbsp;--<SPAN Class="roman"><I>&nbsp;see&nbsp;<A HREF="AA-3-5-2.html">3.5.2</A></I></SPAN></DIV>
<DIV Class="paranum">27</DIV>
<DIV Class="Wide" Style="margin-bottom: 0.4em"><I>Examples of type declarations 
with constrained array definitions:&nbsp;</I></DIV>
<DIV Class="paranum">28</DIV>
<DIV Class="Examples"><B>type</B>&nbsp;Table&nbsp;&nbsp;&nbsp;&nbsp;<B>is</B>&nbsp;<B>array</B>(1&nbsp;..&nbsp;10)&nbsp;<B>of</B>&nbsp;Integer;<BR>
<B>type</B>&nbsp;Schedule&nbsp;<B>is</B>&nbsp;<B>array</B>(Day)&nbsp;<B>of</B>&nbsp;Boolean;<BR>
<B>type</B>&nbsp;Line&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<B>is</B>&nbsp;<B>array</B>(1&nbsp;..&nbsp;Max_Line_Size)&nbsp;<B>of</B>&nbsp;Character;</DIV>
<DIV Class="paranum">29</DIV>
<DIV Class="Wide" Style="margin-bottom: 0.4em"><I>Examples of object 
declarations with array type definitions:&nbsp;</I></DIV>
<DIV Class="paranum">30/2</DIV>
<DIV Class="Examples">{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AIs/AI-00433.TXT">AI95-00433-01</A></I>} 
Grid&nbsp;<SPAN class="insert2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</SPAN>:&nbsp;<B>array</B>(1&nbsp;..&nbsp;80,&nbsp;1&nbsp;..&nbsp;100)&nbsp;<B>of</B>&nbsp;Boolean;<BR>
Mix&nbsp;&nbsp;<SPAN class="insert2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</SPAN>:&nbsp;<B>array</B>(Color&nbsp;<B>range</B>&nbsp;Red&nbsp;..&nbsp;Green)&nbsp;<B>of</B>&nbsp;Boolean;<SPAN class="insert2"><BR>
Msg_Table&nbsp;:&nbsp;<B>constant&nbsp;array</B>(Error_Code)&nbsp;<B>of&nbsp;access&nbsp;constant</B>&nbsp;String&nbsp;:=<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(Too_Big&nbsp;=&gt;&nbsp;<B>new</B>&nbsp;String'(&quot;Result&nbsp;too&nbsp;big&quot;),&nbsp;Too_Small&nbsp;=&gt;&nbsp;...);</SPAN><BR>
Page&nbsp;<SPAN class="insert2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</SPAN>:&nbsp;<B>array</B>(Positive&nbsp;<B>range</B>&nbsp;&lt;&gt;)&nbsp;<B>of</B>&nbsp;Line&nbsp;:=&nbsp;&nbsp;--<SPAN Class="roman"><I>&nbsp;&nbsp;an&nbsp;array&nbsp;of&nbsp;arrays</I></SPAN><BR>
&nbsp;&nbsp;(1&nbsp;|&nbsp;50&nbsp;&nbsp;=&gt;&nbsp;Line'(1&nbsp;|&nbsp;Line'Last&nbsp;=&gt;&nbsp;'+',&nbsp;<B>others</B>&nbsp;=&gt;&nbsp;'-'),&nbsp;&nbsp;--<SPAN Class="roman"><I>&nbsp;see&nbsp;<A HREF="AA-4-3-3.html">4.3.3</A></I></SPAN><BR>
&nbsp;&nbsp;&nbsp;2&nbsp;..&nbsp;49&nbsp;=&gt;&nbsp;Line'(1&nbsp;|&nbsp;Line'Last&nbsp;=&gt;&nbsp;'|',&nbsp;<B>others</B>&nbsp;=&gt;&nbsp;'&nbsp;'));<BR>
&nbsp;&nbsp;&nbsp;&nbsp;--<SPAN Class="roman"><I>&nbsp;Page&nbsp;is&nbsp;constrained&nbsp;by&nbsp;its&nbsp;initial&nbsp;value&nbsp;to&nbsp;(1..50)</I></SPAN></DIV>

<H4 Class="centered">Extensions to Ada 83</H4>
<DIV Class="paranum">30.a</DIV>
<DIV Class="Annotations">{<I>extensions to Ada 83</I>} <A NAME="I2009"></A>The 
syntax rule for <SPAN Class="swiss"><A HREF="AA-3-6.html#S0056">component_definition</A></SPAN> 
is modified to allow the reserved word <B>aliased</B>.</DIV>
<DIV Class="paranum">30.b</DIV>
<DIV Class="Annotations">The syntax rules for <SPAN Class="swiss"><A HREF="AA-3-6.html#S0052">unconstrained_array_definition</A></SPAN> 
and <SPAN Class="swiss"><A HREF="AA-3-6.html#S0054">constrained_array_definition</A></SPAN> 
are modified to use <SPAN Class="swiss"><A HREF="AA-3-6.html#S0056">component_definition</A></SPAN> 
(instead of <I>component_</I><SPAN Class="swiss"><A HREF="AA-3-2-2.html#S0027">subtype_indication</A></SPAN>). 
The effect of this change is to allow the reserved word <B>aliased</B> 
before the component <SPAN Class="swiss"><A HREF="AA-3-2-2.html#S0027">subtype_indication</A></SPAN>.</DIV>
<DIV Class="paranum">30.c</DIV>
<DIV Class="Annotations">A <SPAN Class="swiss"><A HREF="AA-3-5.html#S0037">range</A></SPAN> 
in a <SPAN Class="swiss"><A HREF="AA-3-6.html#S0055">discrete_subtype_definition</A></SPAN> 
may use arbitrary universal expressions for each bound (e.g. &ndash;1 
.. 3+5), rather than strictly &quot;implicitly convertible&quot; operands. 
The subtype defined will still be a subtype of Integer.&nbsp;</DIV>

<H4 Class="centered">Wording Changes from Ada 83</H4>
<DIV Class="paranum">30.d</DIV>
<DIV Class="Annotations">We introduce a new syntactic category, <SPAN Class="swiss"><A HREF="AA-3-6.html#S0055">discrete_subtype_definition</A></SPAN>, 
as distinct from <SPAN Class="swiss"><A HREF="AA-3-6-1.html#S0058">discrete_range</A></SPAN>. 
These two constructs have the same syntax, but their semantics are quite 
different (one defines a subtype, with a preference for Integer subtypes, 
while the other just selects a subrange of an existing subtype). We use 
this new syntactic category in <B>for</B> loops and entry families.</DIV>
<DIV Class="paranum">30.e</DIV>
<DIV Class="Annotations">The syntax for <SPAN Class="swiss"><A HREF="AA-3-6-1.html#S0057">index_constraint</A></SPAN> 
and <SPAN Class="swiss"><A HREF="AA-3-6-1.html#S0058">discrete_range</A></SPAN> 
have been moved to their own subclause, since they are no longer used 
here.</DIV>
<DIV Class="paranum">30.f</DIV>
<DIV Class="Annotations">The syntax rule for <SPAN Class="swiss"><A HREF="AA-3-6.html#S0056">component_definition</A></SPAN> 
(formerly <SPAN Class="swiss">component_subtype_definition</SPAN>) is 
moved here from RM83-3.7.&nbsp;</DIV>

<H4 Class="centered">Extensions to Ada 95</H4>
<DIV Class="paranum">30.g/2</DIV>
<DIV Class="Annotations">{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AIs/AI-00230.TXT">AI95-00230-01</A></I>} 
<SPAN class="insert2"></SPAN>{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AIs/AI-00406.TXT">AI95-00406-01</A></I>} 
<SPAN class="insert2">{<I>extensions to Ada 95</I>} <A NAME="I2010"></A>Array 
components can have an anonymous access type.</SPAN></DIV>
<DIV Class="paranum">30.h/2</DIV>
<DIV Class="Annotations">{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AIs/AI-00363.TXT">AI95-00363-01</A></I>} 
<SPAN class="insert2">The prohibition against unconstrained discriminated 
aliased components has been lifted. It has been replaced by a prohibition 
against the actual troublemakers: general access discriminant constraints 
(see <A HREF="AA-3-7-1.html">3.7.1</A>).</SPAN>&nbsp;</DIV>

<H4 Class="centered">Wording Changes from Ada 95</H4>
<DIV Class="paranum">30.i/2</DIV>
<DIV Class="Annotations">{<I><A HREF="defect1.html#8652/0002">8652/0002</A></I>} 
<SPAN class="insert2"></SPAN>{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AIs/AI-00171.TXT">AI95-00171-01</A></I>} 
<SPAN class="insert2"><B>Corrigendum:</B> Added wording to allow the 
elaboration of per-object constraints for constrained arrays.</SPAN> 
</DIV>

<HR>
<DIV Style="margin-top: 0.0em; margin-bottom: 0.6em"><A HREF="AA-TOC.html"><IMG SRC="cont.gif" ALT="Contents" BORDER=0></A>&nbsp;
&nbsp;<A HREF="AA-0-5.html"><IMG SRC="index.gif" ALT="Index" BORDER=0></A>&nbsp;
&nbsp;<A HREF="AA-STDS.html"><IMG SRC="lib.gif" ALT="References" BORDER=0></A>&nbsp;
&nbsp;<A HREF="AA-SRCH.html"><IMG SRC="find.gif" ALT="Search" BORDER=0></A>&nbsp;
&nbsp;<A HREF="AA-3-5-10.html"><IMG SRC="prev.gif" ALT="Previous" BORDER=0></A>&nbsp;
&nbsp;<A HREF="AA-3-6-1.html"><IMG SRC="next.gif" ALT="Next" BORDER=0></A>&nbsp;
</DIV>
<DIV Style="margin-top:0.0em"><IMG SRC="AE_logo.gif" height=100 width=113 align=right ALT="Ada-Europe">
<SPAN Style="font-size: 125%">Sponsored by <SPAN Style="font-size: 125%"><A HREF="http://www.ada-europe.org/"><B>Ada-Europe</B></A></SPAN></SPAN></DIV>
</BODY>
</HTML>
