<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
"http://www.w3.org/TR/html4/loose.dtd">
<HTML>
<HEAD>
    <TITLE>Formal Subprograms</TITLE>
    <META http-equiv="Content-Type" content="text/html; charset=iso-8859-1">
    <META NAME="Author" CONTENT="JTC1/SC22/WG9/ARG, by Randall Brukardt, ARG Editor">
    <META NAME="GENERATOR" CONTENT="Arm_Form.Exe, Ada Reference Manual generator">
    <STYLE type="text/css">
    H4.centered {text-align: center}
    SPAN.swiss {font-family: Arial, Helvetica, sans-serif; font-size: 92%}
    SPAN.roman {font-family: "Times New Roman", Times, serif}
    DIV.paranum {float: left; font-family: Arial, Helvetica, sans-serif; font-size: 64%; width: 2.8em; margin-left: -0.4em; margin-right: -3.0em; margin-top: 0.2em}
    TT {font-family: "Courier New", monospace}
    DT {display: compact}
    SPAN.insert2 {text-decoration: underline; color: rgb(0,102,0) }
    SPAN.delete2 {text-decoration: line-through; color: rgb(0,102,0) }
    DIV.Normal {font-family: "Times New Roman", Times, serif; line-height: 122%; margin-left: 1.2em; margin-bottom: 0.6em}
    DIV.Annotations {font-family: "Times New Roman", Times, serif; font-size: 80%; line-height: 122%; margin-left: 6.2em; margin-bottom: 0.6em}
    DIV.Notes {font-family: "Times New Roman", Times, serif; font-size: 80%; line-height: 122%; margin-left: 3.7em; margin-bottom: 0.6em}
    DIV.NotesHeader {font-family: "Times New Roman", Times, serif; font-size: 80%; line-height: 122%; margin-left: 3.7em}
    DIV.SyntaxIndented {font-family: "Times New Roman", Times, serif; line-height: 122%; margin-left: 3.2em; margin-bottom: 0.4em}
    DIV.Examples {font-family: "Courier New", monospace; font-size: 90%; line-height: 122%; margin-left: 3.4em; margin-bottom: 0.6em}
    DIV.SmallExamples {font-family: "Courier New", monospace; font-size: 72%; line-height: 122%; margin-left: 9.6em; margin-bottom: 0.6em}
    UL.Bulleted {font-family: "Times New Roman", Times, serif; line-height: 122%; margin-left: 3.2em; margin-right: 2.0em; margin-top: 0em; margin-bottom: 0.5em}
    </STYLE>
</HEAD>
<BODY TEXT="#000000" BGCOLOR="#FFFFF0" LINK="#000080" VLINK="#330033" ALINK="#0000FF">
<DIV><B><SPAN Style="font-size:200%; color: rgb(0,51,153)">Annotated</SPAN><SPAN Style="font-size:200%; color: rgb(0,0,102)">&nbsp;Ada Reference Manual</SPAN></B> &mdash; <A HREF="AA-TTL.html"><B>Legal Information</B></A></DIV>
<DIV Style="margin-top: 0.6em; margin-bottom: 0.0em"><A HREF="AA-TOC.html"><IMG SRC="cont.gif" ALT="Contents" BORDER=0></A>&nbsp;
&nbsp;<A HREF="AA-0-5.html"><IMG SRC="index.gif" ALT="Index" BORDER=0></A>&nbsp;
&nbsp;<A HREF="AA-STDS.html"><IMG SRC="lib.gif" ALT="References" BORDER=0></A>&nbsp;
&nbsp;<A HREF="AA-SRCH.html"><IMG SRC="find.gif" ALT="Search" BORDER=0></A>&nbsp;
&nbsp;<A HREF="AA-12-5-5.html"><IMG SRC="prev.gif" ALT="Previous" BORDER=0></A>&nbsp;
&nbsp;<A HREF="AA-12-7.html"><IMG SRC="next.gif" ALT="Next" BORDER=0></A>&nbsp;
</DIV>
<HR>
<H1>12.6 Formal Subprograms</H1>
<DIV Class="paranum">1</DIV>
<DIV Class="Normal">[<SPAN STYLE="font-size: 80%">{<I>generic formal 
subprogram</I>}</SPAN> <A NAME="I4839"></A><SPAN STYLE="font-size: 80%">{<I>formal 
subprogram, generic</I>}</SPAN> <A NAME="I4840"></A>Formal subprograms 
can be used to pass callable entities to a generic unit.]&nbsp;</DIV>

<H4 Class="centered">Language Design Principles</H4>
<DIV Class="paranum">1.a</DIV>
<DIV Class="Annotations">Generic formal subprograms are like renames 
of the <SPAN Class="swiss"><A HREF="AA-12-3.html#S0260">explicit_generic_actual_parameter</A></SPAN>. 
</DIV>

<H4 Class="centered">Syntax</H4>
<DIV Class="paranum">2/2</DIV>
<DIV Class="SyntaxIndented">{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AIs/AI-10260.TXT">AI95-00260-02</A></I>} 
<SPAN Class="swiss">formal_subprogram_declaration</SPAN><A NAME="I4841"></A><A NAME="S0275"></A><SPAN Class="swiss">&nbsp;::=&nbsp;</SPAN><SPAN class="insert2"><A NAME="I4842"></A><SPAN Class="swiss"><A HREF="AA-12-6.html#S0276">formal_concrete_subprogram_declaration</A></SPAN><BR>
&nbsp;&nbsp;&nbsp;&nbsp;|&nbsp;<A NAME="I4843"></A><SPAN Class="swiss"><A HREF="AA-12-6.html#S0277">formal_abstract_subprogram_declaration</A></SPAN></SPAN><SPAN class="delete2"><B>&nbsp;with</B>&nbsp;<A NAME="I4844"></A><SPAN Class="swiss"><A HREF="AA-6-1.html#S0149">subprogram_specification</A></SPAN>&nbsp;[<B>is</B>&nbsp;<A NAME="I4845"></A><SPAN Class="swiss"><A HREF="AA-12-6.html#S0278">subprogram_default</A></SPAN>];</SPAN></DIV>
<DIV Class="paranum">2.1/2</DIV>
<DIV Class="SyntaxIndented">{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AIs/AI-10260.TXT">AI95-00260-02</A></I>} 
<SPAN Class="swiss"></SPAN><SPAN class="insert2"><SPAN Class="swiss">formal_concrete_subprogram_declaration</SPAN></SPAN><SPAN Class="swiss"></SPAN><A NAME="I4846"></A><A NAME="S0276"></A><SPAN class="insert2"><SPAN Class="swiss">&nbsp;::=&nbsp;</SPAN></SPAN><SPAN class="insert2"><BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<B>with</B>&nbsp;<A NAME="I4847"></A><SPAN Class="swiss"><A HREF="AA-6-1.html#S0149">subprogram_specification</A></SPAN>&nbsp;[<B>is</B>&nbsp;<A NAME="I4848"></A><SPAN Class="swiss"><A HREF="AA-12-6.html#S0278">subprogram_default</A></SPAN>];</SPAN></DIV>
<DIV Class="paranum">2.2/2</DIV>
<DIV Class="SyntaxIndented">{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AIs/AI-10260.TXT">AI95-00260-02</A></I>} 
<SPAN Class="swiss"></SPAN><SPAN class="insert2"><SPAN Class="swiss">formal_abstract_subprogram_declaration</SPAN></SPAN><SPAN Class="swiss"></SPAN><A NAME="I4849"></A><A NAME="S0277"></A><SPAN class="insert2"><SPAN Class="swiss">&nbsp;::=&nbsp;</SPAN></SPAN><SPAN class="insert2"><BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<B>with</B>&nbsp;<A NAME="I4850"></A><SPAN Class="swiss"><A HREF="AA-6-1.html#S0149">subprogram_specification</A></SPAN>&nbsp;<B>is&nbsp;abstract</B>&nbsp;[<A NAME="I4851"></A><SPAN Class="swiss"><A HREF="AA-12-6.html#S0278">subprogram_default</A></SPAN>];</SPAN></DIV>
<DIV Class="paranum">3/2</DIV>
<DIV Class="SyntaxIndented">{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AIs/AI-00348.TXT">AI95-00348-01</A></I>} 
<SPAN Class="swiss">subprogram_default</SPAN><A NAME="I4852"></A><A NAME="S0278"></A><SPAN Class="swiss">&nbsp;::=&nbsp;</SPAN><A NAME="I4853"></A><SPAN Class="swiss"><A HREF="AA-12-6.html#S0279">default_name</A></SPAN>&nbsp;|&nbsp;&lt;&gt;<SPAN class="insert2">&nbsp;|&nbsp;<B>null</B></SPAN></DIV>
<DIV Class="paranum">4</DIV>
<DIV Class="SyntaxIndented"><SPAN Class="swiss">default_name</SPAN><A NAME="I4854"></A><A NAME="S0279"></A><SPAN Class="swiss">&nbsp;::=&nbsp;</SPAN><A NAME="I4855"></A><SPAN Class="swiss"><A HREF="AA-4-1.html#S0091">name</A></SPAN></DIV>
<DIV Class="paranum">4.1/2</DIV>
<DIV Class="SyntaxIndented">{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AIs/AI-10260.TXT">AI95-00260-02</A></I>} 
<SPAN class="insert2"></SPAN>{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AIs/AI-00348.TXT">AI95-00348-01</A></I>} 
<SPAN class="insert2">A <SPAN Class="swiss"><A HREF="AA-12-6.html#S0278">subprogram_default</A></SPAN> 
of <B>null</B> shall not be specified for a formal function or for a 
<SPAN Class="swiss"><A HREF="AA-12-6.html#S0277">formal_abstract_subprogram_declaration</A></SPAN>.</SPAN> 
</DIV>
<DIV Class="paranum">4.a/2</DIV>
<DIV Class="Annotations"><SPAN class="insert2"><B>Reason:&nbsp;</B>There are 
no null functions because the return value has to be constructed somehow. 
We don't allow null for abstract formal procedures, as the operation 
is dispatching. It doesn't seem appropriate (or useful) to say that the 
implementation of something is null in the formal type and all possible 
descendants of that type. This also would define a dispatching operation 
that doesn't correspond to a slot in the tag of the controlling type, 
which would be a new concept. Finally, additional rules would be needed 
to define the meaning of a dispatching null procedure (for instance, 
the convention of such a subprogram should be intrinsic, but that's not 
what the language says). It doesn't seem worth the effort.</SPAN>&nbsp;</DIV>

<H4 Class="centered">Name Resolution Rules</H4>
<DIV Class="paranum">5</DIV>
<DIV Class="Normal"><SPAN STYLE="font-size: 80%">{<I>expected profile 
(formal subprogram default_name)</I> [partial]}</SPAN> <A NAME="I4856"></A>The 
expected profile for the <SPAN Class="swiss"><A HREF="AA-12-6.html#S0279">default_name</A></SPAN>, 
if any, is that of the formal subprogram.&nbsp;</DIV>
<DIV Class="paranum">5.a</DIV>
<DIV Class="Annotations"><B>Ramification:&nbsp;</B>This rule, unlike others 
in this clause, is observed at compile time of the <SPAN Class="swiss"><A HREF="AA-12-1.html#S0252">generic_declaration</A></SPAN>.</DIV>
<DIV Class="paranum">5.b</DIV>
<DIV Class="Annotations">The evaluation of the <SPAN Class="swiss"><A HREF="AA-12-6.html#S0279">default_name</A></SPAN> 
takes place during the elaboration of each instantiation that uses the 
default, as defined in <A HREF="AA-12-3.html">12.3</A>, &ldquo;<A HREF="AA-12-3.html">Generic 
Instantiation</A>&rdquo;.&nbsp;</DIV>
<DIV Class="paranum">6</DIV>
<DIV Class="Normal"><SPAN STYLE="font-size: 80%">{<I>expected profile 
(formal subprogram actual)</I> [partial]}</SPAN> <A NAME="I4857"></A>For 
a generic formal subprogram, the expected profile for the actual is that 
of the formal subprogram.&nbsp;</DIV>

<H4 Class="centered">Legality Rules</H4>
<DIV Class="paranum">7</DIV>
<DIV Class="Normal">The profiles of the formal and any named default 
shall be mode-conformant. <SPAN STYLE="font-size: 80%">{<I>mode conformance 
(required)</I>}</SPAN> <A NAME="I4858"></A></DIV>
<DIV Class="paranum">7.a</DIV>
<DIV Class="Annotations"><B>Ramification:&nbsp;</B>This rule, unlike others 
in this clause, is checked at compile time of the <SPAN Class="swiss"><A HREF="AA-12-1.html#S0252">generic_declaration</A></SPAN>. 
</DIV>
<DIV Class="paranum">8</DIV>
<DIV Class="Normal">The profiles of the formal and actual shall be mode-conformant. 
<SPAN STYLE="font-size: 80%">{<I>mode conformance (required)</I>}</SPAN> 
<A NAME="I4859"></A></DIV>
<DIV Class="paranum">8.1/2</DIV>
<DIV Class="Normal" Style="margin-bottom: 0.4em">&nbsp;&nbsp;{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AIs/AI-00423.TXT">AI95-00423-01</A></I>} 
<SPAN class="insert2">For a parameter or result subtype of a <SPAN Class="swiss"><A HREF="AA-12-6.html#S0275">formal_subprogram_declaration</A></SPAN> 
that has an explicit <SPAN Class="swiss"><A HREF="AA-3-10.html#S0083">null_exclusion</A></SPAN>:</SPAN></DIV>
<DIV Class="paranum">8.2/2</DIV>
<UL Class="Bulleted"><LI TYPE=DISC><SPAN class="insert2">if the actual 
matching the <SPAN Class="swiss"><A HREF="AA-12-6.html#S0275">formal_subprogram_declaration</A></SPAN> 
denotes a generic formal object of another generic unit <I>G</I>, and 
the instantiation containing the actual that occurs within the body of 
a generic unit <I>G</I> or within the body of a generic unit declared 
within the declarative region of the generic unit <I>G</I>, then the 
corresponding parameter or result type of the formal subprogram of <I>G</I> 
shall have a <SPAN Class="swiss"><A HREF="AA-3-10.html#S0083">null_exclusion</A></SPAN>;</SPAN></LI></UL>
<DIV Class="paranum">8.3/2</DIV>
<UL Class="Bulleted"><LI TYPE=DISC><SPAN class="insert2">otherwise, the 
subtype of the corresponding parameter or result type of the actual matching 
the <SPAN Class="swiss"><A HREF="AA-12-6.html#S0275">formal_subprogram_declaration</A></SPAN> 
shall exclude null. <SPAN STYLE="font-size: 80%">{<I>generic contract 
issue</I> [partial]}</SPAN> <A NAME="I4860"></A>In addition to the places 
where Legality Rules normally apply (see <A HREF="AA-12-3.html">12.3</A>), 
this rule applies also in the private part of an instance of a generic 
unit.</SPAN>&nbsp;</LI></UL>
<DIV Class="paranum">8.a/2</DIV>
<DIV Class="Annotations" Style="margin-bottom: 0.4em"><SPAN class="insert2"><B>Reason: 
</B>This rule prevents &ldquo;lying&rdquo;. <B>Null</B> must never be 
the value of a parameter or result with an explicit <SPAN Class="swiss"><A HREF="AA-3-10.html#S0083">null_exclusion</A></SPAN>. 
The first bullet is an assume-the-worst rule which prevents trouble in 
generic bodies (including bodies of child generics) when the formal subtype 
excludes null implicitly.</SPAN>&nbsp;</DIV>
<DIV Class="paranum">8.4/2</DIV>
<DIV Class="Normal">&nbsp;&nbsp;{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AIs/AI-10260.TXT">AI95-00260-02</A></I>} 
<SPAN class="insert2">If a formal parameter of a <SPAN Class="swiss"><A HREF="AA-12-6.html#S0277">formal_abstract_subprogram_declaration</A></SPAN> 
is of a specific tagged type <I>T</I> or of an anonymous access type 
designating a specific tagged type <I>T</I>, <I>T</I> is called a <I>controlling 
type</I> of the <SPAN Class="swiss"><A HREF="AA-12-6.html#S0277">formal_abstract_subprogram_declaration</A></SPAN>. 
Similarly, if the result of a <SPAN Class="swiss"><A HREF="AA-12-6.html#S0277">formal_abstract_subprogram_declaration</A></SPAN> 
for a function is of a specific tagged type <I>T</I> or of an anonymous 
access type designating a specific tagged type <I>T</I>, <I>T</I> is 
called a controlling type of the <SPAN Class="swiss"><A HREF="AA-12-6.html#S0277">formal_abstract_subprogram_declaration</A></SPAN>. 
A <SPAN Class="swiss"><A HREF="AA-12-6.html#S0277">formal_abstract_subprogram_declaration</A></SPAN> 
shall have exactly one controlling type. <SPAN STYLE="font-size: 80%">{<I>controlling 
type (of a formal_abstract_subprogram_declaration)</I>}</SPAN> <A NAME="I4861"></A></SPAN></DIV>
<DIV Class="paranum">8.b/2</DIV>
<DIV Class="Annotations"><SPAN class="insert2"><B>Ramification:&nbsp;</B>The 
specific tagged type could be any of a formal tagged private type, a 
formal derived type, a formal interface type, or a normal tagged type. 
While the last case doesn't seem to be very useful, there isn't any good 
reason for disallowing it. This rule ensures that the operation is a 
dispatching operation of some type, and that we unambiguously know what 
that type is.</SPAN></DIV>
<DIV Class="paranum">8.c/2</DIV>
<DIV Class="Annotations"><SPAN class="insert2">We informally call a subprogram 
declared by a <SPAN Class="swiss"><A HREF="AA-12-6.html#S0277">formal_abstract_subprogram_declaration</A></SPAN> 
an <I>abstract formal subprogram</I>, but we do not use this term in 
normative wording. {<I>abstract formal subprogram</I>} <A NAME="I4862"></A>(We 
do use it often in these notes.)</SPAN>&nbsp;</DIV>
<DIV Class="paranum">8.5/2</DIV>
<DIV Class="Normal">&nbsp;&nbsp;{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AIs/AI-10260.TXT">AI95-00260-02</A></I>} 
<SPAN class="insert2">The actual subprogram for a <SPAN Class="swiss"><A HREF="AA-12-6.html#S0277">formal_abstract_subprogram_declaration</A></SPAN> 
shall be a dispatching operation of the controlling type or of the actual 
type corresponding to the controlling type.</SPAN></DIV>
<DIV Class="paranum">8.d/2</DIV>
<DIV Class="Annotations"><SPAN class="insert2"><B>To be honest:&nbsp;</B>We 
mean the controlling type of the <SPAN Class="swiss"><A HREF="AA-12-6.html#S0277">formal_abstract_subprogram_declaration</A></SPAN>, 
of course. Saying that gets unwieldy and redundant (so says at least 
one reviewer, anyway).</SPAN>&nbsp;</DIV>
<DIV Class="paranum">8.e/2</DIV>
<DIV Class="Annotations" Style="margin-bottom: 0.4em"><SPAN class="insert2"><B>Ramification: 
</B>This means that the actual is either a primitive operation of the 
controlling type, or an abstract formal subprogram. Also note that this 
prevents the controlling type from being class-wide (with one exception 
explained below), as only specific types have primitive operations (and 
a formal subprogram eventually has to have an actual that is a primitive 
of some type). This could happen in a case like:</SPAN>&nbsp;</DIV>
<DIV Class="paranum">8.f/2</DIV>
<DIV Class="SmallExamples"><SPAN class="insert2"><B>generic</B><BR>
&nbsp;&nbsp;&nbsp;<B>type</B>&nbsp;T(&lt;&gt;)&nbsp;<B>is&nbsp;tagged&nbsp;private</B>;<BR>
&nbsp;&nbsp;&nbsp;<B>with&nbsp;procedure</B>&nbsp;Foo&nbsp;(Obj&nbsp;:&nbsp;<B>in</B>&nbsp;T)&nbsp;<B>is&nbsp;abstract</B>;<BR>
<B>package</B>&nbsp;P&nbsp;...</SPAN></DIV>
<DIV Class="paranum">8.g/2</DIV>
<DIV Class="SmallExamples"><SPAN class="insert2"><B>package</B>&nbsp;New_P&nbsp;<B>is&nbsp;new</B>&nbsp;P&nbsp;(Something'Class,&nbsp;Some_Proc);</SPAN></DIV>
<DIV Class="paranum">8.h/2</DIV>
<DIV Class="Annotations"><SPAN class="insert2">The instantiation here 
is always illegal, because Some_Proc could never be a primitive operation 
of Something'Class (there are no such operations). That's good, because 
we want calls to Foo always to be dispatching calls.</SPAN></DIV>
<DIV Class="paranum">8.i/2</DIV>
<DIV Class="Annotations" Style="margin-bottom: 0.4em"><SPAN class="insert2">Since 
it is possible for a formal tagged type to be instantiated with a class-wide 
type, it is possible for the (real) controlling type to be class-wide 
in one unusual case:</SPAN></DIV>
<DIV Class="paranum">8.j/2</DIV>
<DIV Class="SmallExamples"><SPAN class="insert2"><B>generic</B><BR>
&nbsp;&nbsp;&nbsp;<B>type</B>&nbsp;NT(&lt;&gt;)&nbsp;<B>is&nbsp;new</B>&nbsp;T&nbsp;<B>with&nbsp;private</B>;<BR>
&nbsp;&nbsp;&nbsp;--&nbsp;<SPAN Class="roman"><I>Presume&nbsp;that&nbsp;T&nbsp;has&nbsp;the&nbsp;following&nbsp;primitive&nbsp;operation:</I></SPAN><BR>
&nbsp;&nbsp;&nbsp;--&nbsp;<B>with&nbsp;procedure</B>&nbsp;Bar&nbsp;(Obj&nbsp;:&nbsp;<B>in</B>&nbsp;T);<BR>
<B>package</B>&nbsp;Gr&nbsp;...</SPAN></DIV>
<DIV Class="paranum">8.k/2</DIV>
<DIV Class="SmallExamples"><SPAN class="insert2"><B>package&nbsp;body</B>&nbsp;Gr&nbsp;<B>is</B><BR>
&nbsp;&nbsp;&nbsp;<B>package</B>&nbsp;New_P2&nbsp;<B>is&nbsp;new</B>&nbsp;P&nbsp;(NT,&nbsp;Foo&nbsp;=&gt;&nbsp;Bar);<BR>
<B>end</B>&nbsp;Gr;</SPAN></DIV>
<DIV Class="paranum">8.l/2</DIV>
<DIV Class="SmallExamples"><SPAN class="insert2"><B>package</B>&nbsp;New_Gr&nbsp;<B>is&nbsp;new</B>&nbsp;Gr&nbsp;(Something'Class);</SPAN></DIV>
<DIV Class="paranum">8.m/2</DIV>
<DIV Class="Annotations"><SPAN class="insert2">The instantiation of New_P2 
is legal, since Bar is a dispatching operation of the actual type of 
the controlling type of the abstract formal subprogram Foo. This is not 
a problem, since the rules given in <A HREF="AA-12-5-1.html">12.5.1</A> 
explain how this routine dispatches even though its parameter is class-wide.</SPAN></DIV>
<DIV Class="paranum">8.n/2</DIV>
<DIV Class="Annotations"><SPAN class="insert2">Note that this legality 
rule never needs to be rechecked in an instance (that contains a nested 
instantiation). The rule only talks about the actual type of the instantiation; 
it does not require looking further; if the actual type is in fact a 
formal type, we do not intend looking at the actual for that formal.</SPAN> 
</DIV>

<H4 Class="centered">Static Semantics</H4>
<DIV Class="paranum">9</DIV>
<DIV Class="Normal">A <SPAN Class="swiss"><A HREF="AA-12-6.html#S0275">formal_subprogram_declaration</A></SPAN> 
declares a generic formal subprogram. The types of the formal parameters 
and result, if any, of the formal subprogram are those determined by 
the <SPAN Class="swiss"><A HREF="AA-3-2-2.html#S0028">subtype_mark</A></SPAN>s 
given in the <SPAN Class="swiss"><A HREF="AA-12-6.html#S0275">formal_subprogram_declaration</A></SPAN>; 
however, independent of the particular subtypes that are denoted by the 
<SPAN Class="swiss"><A HREF="AA-3-2-2.html#S0028">subtype_mark</A></SPAN>s, 
the nominal subtypes of the formal parameters and result, if any, are 
defined to be nonstatic, and unconstrained if of an array type [(no applicable 
index constraint is provided in a call on a formal subprogram)]. In an 
instance, a <SPAN Class="swiss"><A HREF="AA-12-6.html#S0275">formal_subprogram_declaration</A></SPAN> 
declares a view of the actual. The profile of this view takes its subtypes 
and calling convention from the original profile of the actual entity, 
while taking the formal parameter <SPAN Class="swiss"><A HREF="AA-4-1.html#S0091">name</A></SPAN>s 
and <SPAN Class="swiss"><A HREF="AA-3-7.html#S0063">default_expression</A></SPAN>s 
from the profile given in the <SPAN Class="swiss"><A HREF="AA-12-6.html#S0275">formal_subprogram_declaration</A></SPAN>. 
The view is a function or procedure, never an entry.&nbsp;</DIV>
<DIV Class="paranum">9.a</DIV>
<DIV Class="Annotations"><B>Discussion:&nbsp;</B>This rule is intended to 
be the same as the one for renamings-as-declarations, where the <SPAN Class="swiss"><A HREF="AA-12-6.html#S0275">formal_subprogram_declaration</A></SPAN> 
is analogous to a renaming-as-declaration, and the actual is analogous 
to the renamed view.&nbsp;</DIV>
<DIV Class="paranum">10</DIV>
<DIV Class="Normal">If a generic unit has a <SPAN Class="swiss"><A HREF="AA-12-6.html#S0278">subprogram_default</A></SPAN> 
specified by a box, and the corresponding actual parameter is omitted, 
then it is equivalent to an explicit actual parameter that is a usage 
name identical to the defining name of the formal.</DIV>
<DIV Class="paranum">10.1/2</DIV>
<DIV Class="Normal">&nbsp;&nbsp;&nbsp;{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AIs/AI-00348.TXT">AI95-00348-01</A></I>} 
<SPAN class="insert2">If a generic unit has a <SPAN Class="swiss"><A HREF="AA-12-6.html#S0278">subprogram_default</A></SPAN> 
specified by the reserved word <B>null</B>, and the corresponding actual 
parameter is omitted, then it is equivalent to an explicit actual parameter 
that is a null procedure having the profile given in the <SPAN Class="swiss"><A HREF="AA-12-6.html#S0275">formal_subprogram_declaration</A></SPAN>.</SPAN></DIV>
<DIV Class="paranum">10.2/2</DIV>
<DIV Class="Normal">&nbsp;&nbsp;&nbsp;{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AIs/AI-10260.TXT">AI95-00260-02</A></I>} 
<SPAN class="insert2">The subprogram declared by a <SPAN Class="swiss"><A HREF="AA-12-6.html#S0277">formal_abstract_subprogram_declaration</A></SPAN> 
with a controlling type <I>T</I> is a dispatching operation of type <I>T</I>.</SPAN> 
</DIV>
<DIV Class="paranum">10.a.1/2</DIV>
<DIV Class="Annotations"><SPAN class="insert2"><B>Reason:&nbsp;</B>This is 
necessary to trigger all of the dispatching operation rules. It otherwise 
would not be considered a dispatching operation, as formal subprograms 
are never primitive operations.</SPAN>&nbsp;</DIV>
<DIV Class="NotesHeader">NOTES</DIV>
<DIV Class="paranum">11</DIV>
<DIV Class="Notes">13&nbsp;&nbsp;The matching rules for formal subprograms 
state requirements that are similar to those applying to <SPAN Class="swiss"><A HREF="AA-8-5-4.html#S0186">subprogram_renaming_declaration</A></SPAN>s 
(see <A HREF="AA-8-5-4.html">8.5.4</A>). In particular, the name of a 
parameter of the formal subprogram need not be the same as that of the 
corresponding parameter of the actual subprogram; similarly, for these 
parameters, <SPAN Class="swiss"><A HREF="AA-3-7.html#S0063">default_expression</A></SPAN>s 
need not correspond.</DIV>
<DIV Class="paranum">12</DIV>
<DIV Class="Notes">14&nbsp;&nbsp;The constraints that apply to a parameter 
of a formal subprogram are those of the corresponding formal parameter 
of the matching actual subprogram (not those implied by the corresponding 
<SPAN Class="swiss"><A HREF="AA-3-2-2.html#S0028">subtype_mark</A></SPAN> 
in the <SPAN Class="swiss">_specification</SPAN> of the formal subprogram). 
A similar remark applies to the result of a function. Therefore, to avoid 
confusion, it is recommended that the <SPAN Class="swiss"><A HREF="AA-4-1.html#S0091">name</A></SPAN> 
of a first subtype be used in any declaration of a formal subprogram.</DIV>
<DIV Class="paranum">13</DIV>
<DIV Class="Notes">15&nbsp;&nbsp;The subtype specified for a formal parameter 
of a generic formal subprogram can be any visible subtype, including 
a generic formal subtype of the same <SPAN Class="swiss"><A HREF="AA-12-1.html#S0255">generic_formal_part</A></SPAN>.</DIV>
<DIV Class="paranum">14</DIV>
<DIV Class="Notes">16&nbsp;&nbsp;A formal subprogram is matched by an 
attribute of a type if the attribute is a function with a matching specification. 
An enumeration literal of a given type matches a parameterless formal 
function whose result type is the given type.</DIV>
<DIV Class="paranum">15</DIV>
<DIV Class="Notes">17&nbsp;&nbsp;A <SPAN Class="swiss"><A HREF="AA-12-6.html#S0279">default_name</A></SPAN> 
denotes an entity that is visible or directly visible at the place of 
the <SPAN Class="swiss"><A HREF="AA-12-1.html#S0252">generic_declaration</A></SPAN>; 
a box used as a default is equivalent to a name that denotes an entity 
that is directly visible at the place of the <SPAN Class="swiss">_instantiation</SPAN>. 
</DIV>
<DIV Class="paranum">15.a</DIV>
<DIV Class="Annotations"><B>Proof:&nbsp;</B>Visibility and name resolution 
are applied to the equivalent explicit actual parameter.&nbsp;</DIV>
<DIV Class="paranum">16/2</DIV>
<DIV Class="Notes">18&nbsp;&nbsp;{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AIs/AI-10260.TXT">AI95-00260-02</A></I>} 
The actual subprogram cannot be abstract<SPAN class="insert2">&nbsp;unless 
the formal subprogram is a <SPAN Class="swiss"><A HREF="AA-12-6.html#S0277">formal_abstract_subprogram_declaration</A></SPAN></SPAN> 
(see <A HREF="AA-3-9-3.html">3.9.3</A>).</DIV>
<DIV Class="paranum">16.1/2</DIV>
<DIV Class="Notes">19&nbsp;&nbsp;{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AIs/AI-10260.TXT">AI95-00260-02</A></I>} 
<SPAN class="insert2">The subprogram declared by a <SPAN Class="swiss"><A HREF="AA-12-6.html#S0277">formal_abstract_subprogram_declaration</A></SPAN> 
is an abstract subprogram. All calls on a subprogram declared by a <SPAN Class="swiss"><A HREF="AA-12-6.html#S0277">formal_abstract_subprogram_declaration</A></SPAN> 
must be dispatching calls. See <A HREF="AA-3-9-3.html">3.9.3</A>.</SPAN></DIV>
<DIV Class="paranum">16.2/2</DIV>
<DIV Class="Notes">20&nbsp;&nbsp;{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AIs/AI-00348.TXT">AI95-00348-01</A></I>} 
<SPAN class="insert2">A null procedure as a subprogram default has convention 
Intrinsic (see <A HREF="AA-6-3-1.html">6.3.1</A>).</SPAN>&nbsp;</DIV>
<DIV Class="paranum">16.a.1/2</DIV>
<DIV Class="Annotations"><SPAN class="insert2"><B>Proof:&nbsp;</B>This is 
an implicitly declared subprogram, so it has convention Intrinsic as 
defined in <A HREF="AA-6-3-1.html">6.3.1</A>.</SPAN>&nbsp;</DIV>

<H4 Class="centered">Examples</H4>
<DIV Class="paranum">17</DIV>
<DIV Class="Normal" Style="margin-bottom: 0.4em"><I>Examples of generic 
formal subprograms:</I>&nbsp;</DIV>
<DIV Class="paranum">18/2</DIV>
<DIV Class="Examples">{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AIs/AI-00433.TXT">AI95-00433-01</A></I>} 
<B>with</B>&nbsp;<B>function</B>&nbsp;&quot;+&quot;(X,&nbsp;Y&nbsp;:&nbsp;Item)&nbsp;<B>return</B>&nbsp;Item&nbsp;<B>is</B>&nbsp;&lt;&gt;;<BR>
<B>with</B>&nbsp;<B>function</B>&nbsp;Image(X&nbsp;:&nbsp;Enum)&nbsp;<B>return</B>&nbsp;String&nbsp;<B>is</B>&nbsp;Enum'Image;<BR>
<B>with</B>&nbsp;<B>procedure</B>&nbsp;Update&nbsp;<B>is</B>&nbsp;Default_Update;<SPAN class="insert2"><BR>
<B>with</B>&nbsp;<B>procedure</B>&nbsp;Pre_Action(X&nbsp;:&nbsp;<B>in</B>&nbsp;Item)&nbsp;<B>is&nbsp;null</B>;&nbsp;&nbsp;--<SPAN Class="roman"><I>&nbsp;defaults&nbsp;to&nbsp;no&nbsp;action</I></SPAN><BR>
<B>with</B>&nbsp;<B>procedure</B>&nbsp;Write(S&nbsp;&nbsp;&nbsp;&nbsp;:&nbsp;<B>not&nbsp;null&nbsp;access</B>&nbsp;Root_Stream_Type'Class;<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Desc&nbsp;:&nbsp;Descriptor)<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<B>is&nbsp;abstract</B>&nbsp;Descriptor'Write;&nbsp;&nbsp;--<SPAN Class="roman"><I>&nbsp;see&nbsp;<A HREF="AA-13-13-2.html">13.13.2</A></I></SPAN><BR>
--<SPAN Class="roman"><I>&nbsp;Dispatching&nbsp;operation&nbsp;on&nbsp;Descriptor&nbsp;with&nbsp;default</I></SPAN></SPAN></DIV>
<DIV Class="paranum">19</DIV>
<DIV Class="Examples">--<SPAN Class="roman"><I>&nbsp;&nbsp;given&nbsp;the&nbsp;generic&nbsp;procedure&nbsp;declaration&nbsp;</I></SPAN></DIV>
<DIV Class="paranum">20</DIV>
<DIV Class="Examples"><B>generic</B><BR>
&nbsp;&nbsp;&nbsp;<B>with</B>&nbsp;<B>procedure</B>&nbsp;Action&nbsp;(X&nbsp;:&nbsp;<B>in</B>&nbsp;Item);<BR>
<B>procedure</B>&nbsp;Iterate(Seq&nbsp;:&nbsp;<B>in</B>&nbsp;Item_Sequence);</DIV>
<DIV Class="paranum">21</DIV>
<DIV Class="Examples">--<SPAN Class="roman"><I>&nbsp;&nbsp;and&nbsp;the&nbsp;procedure&nbsp;</I></SPAN></DIV>
<DIV Class="paranum">22</DIV>
<DIV Class="Examples"><B>procedure</B>&nbsp;Put_Item(X&nbsp;:&nbsp;<B>in</B>&nbsp;Item);</DIV>
<DIV Class="paranum">23</DIV>
<DIV Class="Examples">--<SPAN Class="roman"><I>&nbsp;&nbsp;the&nbsp;following&nbsp;instantiation&nbsp;is&nbsp;possible&nbsp;</I></SPAN></DIV>
<DIV Class="paranum">24</DIV>
<DIV Class="Examples"><B>procedure</B>&nbsp;Put_List&nbsp;<B>is</B>&nbsp;<B>new</B>&nbsp;Iterate(Action&nbsp;=&gt;&nbsp;Put_Item);</DIV>

<H4 Class="centered">Extensions to Ada 95</H4>
<DIV Class="paranum">24.a/2</DIV>
<DIV Class="Annotations">{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AIs/AI-10260.TXT">AI95-00260-02</A></I>} 
<SPAN class="insert2">{<I>extensions to Ada 95</I>} <A NAME="I4863"></A>The 
<SPAN Class="swiss"><A HREF="AA-12-6.html#S0277">formal_abstract_subprogram_declaration</A></SPAN> 
is new. It allows the passing of dispatching operations to generic units.</SPAN></DIV>
<DIV Class="paranum">24.b/2</DIV>
<DIV Class="Annotations">{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AIs/AI-00348.TXT">AI95-00348-01</A></I>} 
<SPAN class="insert2">The formal subprogram default of <B>null</B> is 
new. It allows the default of a generic procedure to do nothing, such 
as for passing a debugging routine.</SPAN>&nbsp;</DIV>

<H4 Class="centered">Wording Changes from Ada 95</H4>
<DIV Class="paranum">24.c/2</DIV>
<DIV Class="Annotations">{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AIs/AI-00423.TXT">AI95-00423-01</A></I>} 
<SPAN class="insert2">Added matching rules for <SPAN Class="swiss"><A HREF="AA-3-10.html#S0083">null_exclusion</A></SPAN>s.</SPAN> 
</DIV>

<HR>
<DIV Style="margin-top: 0.0em; margin-bottom: 0.6em"><A HREF="AA-TOC.html"><IMG SRC="cont.gif" ALT="Contents" BORDER=0></A>&nbsp;
&nbsp;<A HREF="AA-0-5.html"><IMG SRC="index.gif" ALT="Index" BORDER=0></A>&nbsp;
&nbsp;<A HREF="AA-STDS.html"><IMG SRC="lib.gif" ALT="References" BORDER=0></A>&nbsp;
&nbsp;<A HREF="AA-SRCH.html"><IMG SRC="find.gif" ALT="Search" BORDER=0></A>&nbsp;
&nbsp;<A HREF="AA-12-5-5.html"><IMG SRC="prev.gif" ALT="Previous" BORDER=0></A>&nbsp;
&nbsp;<A HREF="AA-12-7.html"><IMG SRC="next.gif" ALT="Next" BORDER=0></A>&nbsp;
</DIV>
<DIV Style="margin-top:0.0em"><IMG SRC="AE_logo.gif" height=100 width=113 align=right ALT="Ada-Europe">
<SPAN Style="font-size: 125%">Sponsored by <SPAN Style="font-size: 125%"><A HREF="http://www.ada-europe.org/"><B>Ada-Europe</B></A></SPAN></SPAN></DIV>
</BODY>
</HTML>
