<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
"http://www.w3.org/TR/html4/loose.dtd">
<HTML>
<HEAD>
    <TITLE>External Files and File Objects</TITLE>
    <META http-equiv="Content-Type" content="text/html; charset=iso-8859-1">
    <META NAME="Author" CONTENT="JTC1/SC22/WG9/ARG, by Randall Brukardt, ARG Editor">
    <META NAME="GENERATOR" CONTENT="Arm_Form.Exe, Ada Reference Manual generator">
    <STYLE type="text/css">
    H4.centered {text-align: center}
    SPAN.swiss {font-family: Arial, Helvetica, sans-serif; font-size: 92%}
    SPAN.roman {font-family: "Times New Roman", Times, serif}
    DIV.paranum {float: left; font-family: Arial, Helvetica, sans-serif; font-size: 64%; width: 2.8em; margin-left: -0.4em; margin-right: -3.0em; margin-top: 0.2em}
    TT {font-family: "Courier New", monospace}
    DT {display: compact}
    SPAN.insert2 {text-decoration: underline; color: rgb(0,102,0) }
    SPAN.delete2 {text-decoration: line-through; color: rgb(0,102,0) }
    DIV.Normal {font-family: "Times New Roman", Times, serif; line-height: 122%; margin-left: 1.2em; margin-bottom: 0.6em}
    DIV.Annotations {font-family: "Times New Roman", Times, serif; font-size: 80%; line-height: 122%; margin-left: 6.2em; margin-bottom: 0.6em}
    DIV.Notes {font-family: "Times New Roman", Times, serif; font-size: 80%; line-height: 122%; margin-left: 3.7em; margin-bottom: 0.6em}
    DIV.NotesHeader {font-family: "Times New Roman", Times, serif; font-size: 80%; line-height: 122%; margin-left: 3.7em}
    DIV.CodeIndented {font-family: "Times New Roman", Times, serif; line-height: 122%; margin-left: 5.2em; margin-bottom: 0.6em}
    DIV.Examples {font-family: "Courier New", monospace; font-size: 90%; line-height: 122%; margin-left: 3.4em; margin-bottom: 0.6em}
    </STYLE>
</HEAD>
<BODY TEXT="#000000" BGCOLOR="#FFFFF0" LINK="#000080" VLINK="#330033" ALINK="#0000FF">
<DIV><B><SPAN Style="font-size:200%; color: rgb(0,51,153)">Annotated</SPAN><SPAN Style="font-size:200%; color: rgb(0,0,102)">&nbsp;Ada Reference Manual</SPAN></B> &mdash; <A HREF="AA-TTL.html"><B>Legal Information</B></A></DIV>
<DIV Style="margin-top: 0.6em; margin-bottom: 0.0em"><A HREF="AA-TOC.html"><IMG SRC="cont.gif" ALT="Contents" BORDER=0></A>&nbsp;
&nbsp;<A HREF="AA-0-5.html"><IMG SRC="index.gif" ALT="Index" BORDER=0></A>&nbsp;
&nbsp;<A HREF="AA-STDS.html"><IMG SRC="lib.gif" ALT="References" BORDER=0></A>&nbsp;
&nbsp;<A HREF="AA-SRCH.html"><IMG SRC="find.gif" ALT="Search" BORDER=0></A>&nbsp;
&nbsp;<A HREF="AA-A-6.html"><IMG SRC="prev.gif" ALT="Previous" BORDER=0></A>&nbsp;
&nbsp;<A HREF="AA-A-8.html"><IMG SRC="next.gif" ALT="Next" BORDER=0></A>&nbsp;
</DIV>
<HR>
<H1>A.7 External Files and File Objects</H1>

<H4 Class="centered">Static Semantics</H4>
<DIV Class="paranum">1</DIV>
<DIV Class="Normal"><SPAN STYLE="font-size: 80%">{<I>external file</I>}</SPAN> 
<A NAME="I6130"></A><SPAN STYLE="font-size: 80%">{<I>name (of an external 
file)</I>}</SPAN> <A NAME="I6131"></A><SPAN STYLE="font-size: 80%">{<I>form 
(of an external file)</I>}</SPAN> <A NAME="I6132"></A>Values input from 
the external environment of the program, or output to the external environment, 
are considered to occupy <I>external files</I>. An external file can 
be anything external to the program that can produce a value to be read 
or receive a value to be written. An external file is identified by a 
string (the <I>name</I>). A second string (the <I>form</I>) gives further 
system-dependent characteristics that may be associated with the file, 
such as the physical organization or access rights. The conventions governing 
the interpretation of such strings shall be documented.</DIV>
<DIV Class="paranum">2</DIV>
<DIV Class="Normal"><SPAN STYLE="font-size: 80%">{<I>file (as file object)</I>}</SPAN> 
<A NAME="I6133"></A>Input and output operations are expressed as operations 
on objects of some <I>file type</I>, rather than directly in terms of 
the external files. In the remainder of this section, the term <I>file</I> 
is always used to refer to a file object; the term <I>external file</I> 
is used otherwise.</DIV>
<DIV Class="paranum">3</DIV>
<DIV Class="Normal">Input-output for sequential files of values of a 
single element type is defined by means of the generic package Sequential_IO. 
In order to define sequential input-output for a given element type, 
an instantiation of this generic unit, with the given type as actual 
parameter, has to be declared. The resulting package contains the declaration 
of a file type (called File_Type) for files of such elements, as well 
as the operations applicable to these files, such as the Open, Read, 
and Write procedures.</DIV>
<DIV Class="paranum">4/2</DIV>
<DIV Class="Normal">{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AIs/AI-00285.TXT">AI95-00285-01</A></I>} 
Input-output for direct access files is likewise defined by a generic 
package called Direct_IO. Input-output in human-readable form is defined 
by the (nongeneric) packages Text_IO for Character and String data, <SPAN class="delete2">and 
</SPAN>Wide_Text_IO for Wide_Character and Wide_String data<SPAN class="insert2">, 
and Wide_Wide_Text_IO for Wide_Wide_Character and Wide_Wide_String data</SPAN>. 
Input-output for files containing streams of elements representing values 
of possibly different types is defined by means of the (nongeneric) package 
Streams.Stream_IO.</DIV>
<DIV Class="paranum">5</DIV>
<DIV Class="Normal">Before input or output operations can be performed 
on a file, the file first has to be associated with an external file. 
While such an association is in effect, the file is said to be <I>open</I>, 
and otherwise the file is said to be <I>closed</I>.</DIV>
<DIV Class="paranum">6</DIV>
<DIV Class="Normal">The language does not define what happens to external 
files after the completion of the main program and all the library tasks 
(in particular, if corresponding files have not been closed). <SPAN STYLE="font-size: 80%">{<I>access 
types (input-output unspecified)</I>}</SPAN> <A NAME="I6134"></A><SPAN STYLE="font-size: 80%">{<I>input-output 
(unspecified for access types)</I>}</SPAN> <A NAME="I6135"></A><SPAN STYLE="font-size: 80%">{<I>unspecified</I> 
[partial]}</SPAN> <A NAME="I6136"></A>The effect of input-output for 
access types is unspecified.</DIV>
<DIV Class="paranum">7</DIV>
<DIV Class="Normal" Style="margin-bottom: 0.4em"><SPAN STYLE="font-size: 80%">{<I>current 
mode (of an open file)</I>}</SPAN> <A NAME="I6137"></A>An open file has 
a <I>current mode</I>, which is a value of one of the following enumeration 
types:&nbsp;</DIV>
<DIV Class="paranum">8</DIV>
<DIV Class="Examples"><B>type</B>&nbsp;File_Mode&nbsp;<B>is</B>&nbsp;(In_File,&nbsp;Inout_File,&nbsp;Out_File);&nbsp;&nbsp;--<SPAN Class="roman"><I>&nbsp;&nbsp;for&nbsp;Direct_IO</I></SPAN></DIV>
<DIV Class="paranum">9</DIV>
<DIV Class="CodeIndented">These values correspond respectively to the 
cases where only reading, both reading and writing, or only writing are 
to be performed.&nbsp;</DIV>
<DIV Class="paranum">10/2</DIV>
<DIV Class="Examples">{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AIs/AI-00285.TXT">AI95-00285-01</A></I>} 
<B>type</B>&nbsp;File_Mode&nbsp;<B>is</B>&nbsp;(In_File,&nbsp;Out_File,&nbsp;Append_File);<BR>
--<SPAN Class="roman"><I>&nbsp;&nbsp;for&nbsp;Sequential_IO,&nbsp;Text_IO,&nbsp;Wide_Text_IO,&nbsp;</I></SPAN><SPAN class="insert2"><SPAN Class="roman"><I>Wide_Wide_Text_IO,&nbsp;</I></SPAN></SPAN><SPAN Class="roman"><I>and&nbsp;Stream_IO</I></SPAN></DIV>
<DIV Class="paranum">11</DIV>
<DIV Class="CodeIndented">These values correspond respectively to the 
cases where only reading, only writing, or only appending are to be performed.</DIV>
<DIV Class="paranum">12</DIV>
<DIV Class="CodeIndented" Style="margin-bottom: 0.9em">The mode of a 
file can be changed.&nbsp;</DIV>
<DIV Class="paranum">13/2</DIV>
<DIV Class="Normal">&nbsp;{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AIs/AI-00285.TXT">AI95-00285-01</A></I>} 
Several file management operations are common to Sequential_IO, Direct_IO, 
Text_IO, <SPAN class="delete2">and&nbsp;</SPAN>Wide_Text_IO<SPAN class="insert2">, 
and Wide_Wide_Text_IO</SPAN>. These operations are described in subclause 
<A HREF="AA-A-8-2.html">A.8.2</A> for sequential and direct files. Any 
additional effects concerning text input-output are described in subclause 
<A HREF="AA-A-10-2.html">A.10.2</A>.</DIV>
<DIV Class="paranum">14</DIV>
<DIV Class="Normal">The exceptions that can be propagated by the execution 
of an input-output subprogram are defined in the package IO_Exceptions; 
the situations in which they can be propagated are described following 
the description of the subprogram (and in clause <A HREF="AA-A-13.html">A.13</A>). 
<SPAN STYLE="font-size: 80%">{<I>Storage_Error (raised by failure of 
run-time check)</I>}</SPAN> <A NAME="I6138"></A><SPAN STYLE="font-size: 80%">{<I>Program_Error 
(raised by failure of run-time check)</I>}</SPAN> <A NAME="I6139"></A>The 
exceptions Storage_Error and Program_Error may be propagated. (Program_Error 
can only be propagated due to errors made by the caller of the subprogram.) 
Finally, exceptions can be propagated in certain implementation-defined 
situations.&nbsp;</DIV>
<DIV Class="paranum">14.a/2</DIV>
<DIV Class="Annotations"><SPAN STYLE="font-size: 80%"><I>This paragraph 
was deleted.</I></SPAN><SPAN class="delete2"><B>Implementation defined: 
</B></SPAN><SPAN class="delete2">Any implementation-defined characteristics 
of the input-output packages.</SPAN></DIV>
<DIV Class="paranum">14.b/2</DIV>
<DIV Class="Annotations"><SPAN class="insert2"><B>Discussion:&nbsp;</B>The 
last sentence here is referring to the documentation requirements in 
<A HREF="AA-A-13.html">A.13</A>, &ldquo;<A HREF="AA-A-13.html">Exceptions 
in Input-Output</A>&rdquo;, and the documentation summary item is provided 
there.</SPAN>&nbsp;</DIV>
<DIV Class="NotesHeader">NOTES</DIV>
<DIV Class="paranum">15/2</DIV>
<DIV Class="Notes">19&nbsp;&nbsp;{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AIs/AI-00285.TXT">AI95-00285-01</A></I>} 
Each instantiation of the generic packages Sequential_IO and Direct_IO 
declares a different type File_Type. In the case of Text_IO, Wide_Text_IO, 
<SPAN class="insert2">Wide_Wide_Text_IO,&nbsp;</SPAN>and Streams.Stream_IO, 
the corresponding type File_Type is unique.</DIV>
<DIV Class="paranum">16</DIV>
<DIV Class="Notes">20&nbsp;&nbsp;A bidirectional device can often be 
modeled as two sequential files associated with the device, one of mode 
In_File, and one of mode Out_File. An implementation may restrict the 
number of files that may be associated with a given external file.&nbsp;</DIV>

<H4 Class="centered">Wording Changes from Ada 95</H4>
<DIV Class="paranum">16.a/2</DIV>
<DIV Class="Annotations">{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AIs/AI-00285.TXT">AI95-00285-01</A></I>} 
<SPAN class="insert2">Included package Wide_Wide_Text_IO in this description.</SPAN> 
</DIV>

<HR>
<DIV Style="margin-top: 0.0em; margin-bottom: 0.6em"><A HREF="AA-TOC.html"><IMG SRC="cont.gif" ALT="Contents" BORDER=0></A>&nbsp;
&nbsp;<A HREF="AA-0-5.html"><IMG SRC="index.gif" ALT="Index" BORDER=0></A>&nbsp;
&nbsp;<A HREF="AA-STDS.html"><IMG SRC="lib.gif" ALT="References" BORDER=0></A>&nbsp;
&nbsp;<A HREF="AA-SRCH.html"><IMG SRC="find.gif" ALT="Search" BORDER=0></A>&nbsp;
&nbsp;<A HREF="AA-A-6.html"><IMG SRC="prev.gif" ALT="Previous" BORDER=0></A>&nbsp;
&nbsp;<A HREF="AA-A-8.html"><IMG SRC="next.gif" ALT="Next" BORDER=0></A>&nbsp;
</DIV>
<DIV Style="margin-top:0.0em"><IMG SRC="AE_logo.gif" height=100 width=113 align=right ALT="Ada-Europe">
<SPAN Style="font-size: 125%">Sponsored by <SPAN Style="font-size: 125%"><A HREF="http://www.ada-europe.org/"><B>Ada-Europe</B></A></SPAN></SPAN></DIV>
</BODY>
</HTML>
