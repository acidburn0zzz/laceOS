<HTML><HEAD>
<a href="http://sw-eng.falls-church.va.us/AdaIC/"><IMG SRC="small_adaic_logo.gif" ALT="[Ada Information Clearinghouse]"></a>
<hr>
<TITLE>Ada '83 Rationale, Sec 10.4: The Program Library</TITLE>
</HEAD>

<BODY>
<center><h2>"Rationale for the Design of the<BR>
Ada&#174; Programming Language"</H2>
<H3>[Ada '83 Rationale, HTML Version]</h3>
<h6><i><a href="ratl-00.html#copyright">Copyright</a> &#169;1986
owned by the United States Government. All rights reserved.<BR>
Direct inquiries to the <a href="http://sw-eng.falls-church.va.us/AdaIC/">Ada Information Clearinghouse</a>
at <A HREF="mailto://adainfo@sw-eng.falls-church.va.us">adainfo@sw-eng.falls-church.va.us</A>.</i></h6></center>
<hr>

<H2>CHAPTER 10: Separate Compilation and Libraries</H2>

<H3><a name="10.4">10.4 The Program Library</a></H3>

The program  units that form a given Ada program are said to belong to
what is  called a  program library. A program library may contain only
the units necessary for a single main program, but it may also contain
the units  of several main programs, especially in the case of related
projects. Finally  it may  contain generally  usable packages  and the
predefined units.
<p>
Associated with each program library there must be a file that records
information relative  to the compilations that have already been done.
In particular,  this file  must contain  symbol tables  for separately
compiled package specifications. It must also record compilation dates
and dependence  relations between  compilation units: this information
is used  by the  compiler  for  checking  compilation  order  and  for
deciding which compilation units are affected by given recompilations.
<p>
When submitting  a compilation  unit to  the compiler,  the programmer
provides:
<ul>
<li>the source text of the compilation unit, and

<li>the name of the program library to which the unit is to belong.
</ul>

It is  this second  item -  the  program  library  -  that  makes  the
compilation separate  but  not  independent:  The  compiler  uses  the
information contained  in the program library to perform type checking
across compilation  units exactly as it normally would within a single
compilation unit.  The effect  of the  compilation is  as  usual  (the
production of  listings, object  codes, messages,  and so  on), but it
also results  in an  update of  the  program  library  (an  update  of
compilation dates,  the recording of new or updated symbol tables, and
so on).
<p>
For each Ada program we consider a single program library. In practice
a given  program library will often be formed from components obtained
from other  program libraries.  The means  for transferring components
from one  library to another are not properly within the domain of the
Ada  language   but  rather   within  that  of  its  possible  support
environments <a href="ratl-BIB.html">[DoD 80]</a>. The following facilities are expected:
<p>
<DL>
<DT><b>Library creation</b>
<p>
<DD>There should  be commands  for creating the program library of a given
program, or of a given family of programs.
<p>

<DT><b>Inclusion of library units</b>
<p>
<DD>There should  be a  command to  include a  unit of  one library within
another library. This process is similar to what is traditionally done
for  transferring   the  object  code  of  a  software  component;  in
particular it  can imply either making a copy or creating a new access
path to  a single  (shared) copy.  The only difference is that for Ada
compilation units  the information  transferred  includes  descriptive
information such  as symbol  tables, compilation dates, and dependence
relations on  other software  components, and  checks are made that no
Ada rule is violated.
<p>
After its  inclusion, a  unit should  be indistinguishable  from other
units of  the library.  Inclusion of  a  given  compilation  unit  may
require further  inclusion of  other compilation units that are needed
by the given unit.
<p>

<DT><b>Deletion of library units</b>
<p>
<DD>Conversely there  should be  a command  to delete  a unit from a given
library.
<p>

<DT><b>Completion check</b>
<p>
<DD>There should  be a  command by which a user states that the program is
considered to be complete: all units should have been compiled by that
time. The  compiler will  check  that  this  is  the  case  and  issue
appropriate error messages otherwise.
<p>

<DT><b>Status checks</b>
<p>
<DD>There should  be commands  to display  global  information  about  the
current state  of the program library: which units have been compiled,
which subunits  have never  been compiled,  which  units  need  to  be
recompiled, and so on.
</DL>

Completion and  status checks  are quite  useful since  a library  may
contain  obsolete   units  at   intermediate  stages  of  the  program
development.
<p>
Since the  compiler is  able to detect the need for recompilations, it
could conceivably  do these  automatically upon  detection of  such  a
need. However,  changes are  often done  for several units at the same
time. A compiler that performed recompilations after each change might
perform more  recompilations  than  necessary  unless  it  had  global
knowledge of all changes submitted.
<p>
Assume for  example that  the specifications  of the  packages A and B
were modified.  If all units that see A were automatically recompiled,
then if  some of  them also  see B,  they would be recompiled a second
time after the compilation of B.
<p>
Hence  it   is  certainly  preferable  to  let  the  user  manage  the
recompilations. However,  this means  that tools  for  displaying  the
current status  of compilation  units of a program should be provided.
Similarly it  means that  the user  should be  able to  state  that  a
program is  complete and  let the compiler check that this is actually
the case.

<p>
<center>
<hr width=60%>
&#128; <a href="ratl-10-05.html#10.5"><b>NEXT</b></a>
&#128; <a href="ratl-10-03.html#10.3"><b>PREVIOUS</b></a>
&#128; <a href="ratl-10.html#10"><b>UP</b></a>
&#128; <a href="ratl-TOC.html"><b>TOC</b></a>
&#128; <a href="ratl-IDX.html"><b>INDEX</b></a>
&#128;
<hr width=60%>
<address>Address any questions or comments to
<A HREF="mailto://adainfo@sw-eng.falls-church.va.us">adainfo@sw-eng.falls-church.va.us</A>.</address></center>
<p>
</BODY></HTML>

