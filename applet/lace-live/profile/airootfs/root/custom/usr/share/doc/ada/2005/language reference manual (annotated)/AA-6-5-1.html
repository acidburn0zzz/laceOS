<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
"http://www.w3.org/TR/html4/loose.dtd">
<HTML>
<HEAD>
    <TITLE>Pragma No_Return</TITLE>
    <META http-equiv="Content-Type" content="text/html; charset=iso-8859-1">
    <META NAME="Author" CONTENT="JTC1/SC22/WG9/ARG, by Randall Brukardt, ARG Editor">
    <META NAME="GENERATOR" CONTENT="Arm_Form.Exe, Ada Reference Manual generator">
    <STYLE type="text/css">
    H4.centered {text-align: center}
    SPAN.swiss {font-family: Arial, Helvetica, sans-serif; font-size: 92%}
    SPAN.roman {font-family: "Times New Roman", Times, serif}
    DIV.paranum {float: left; font-family: Arial, Helvetica, sans-serif; font-size: 64%; width: 2.8em; margin-left: -0.4em; margin-right: -3.0em; margin-top: 0.2em}
    TT {font-family: "Courier New", monospace}
    DT {display: compact}
    SPAN.insert2 {text-decoration: underline; color: rgb(0,102,0) }
    SPAN.delete2 {text-decoration: line-through; color: rgb(0,102,0) }
    DIV.Normal {font-family: "Times New Roman", Times, serif; line-height: 122%; margin-left: 1.2em; margin-bottom: 0.6em}
    DIV.Annotations {font-family: "Times New Roman", Times, serif; font-size: 80%; line-height: 122%; margin-left: 6.2em; margin-bottom: 0.6em}
    DIV.SyntaxIndented {font-family: "Times New Roman", Times, serif; line-height: 122%; margin-left: 3.2em; margin-bottom: 0.4em}
    DIV.Examples {font-family: "Courier New", monospace; font-size: 90%; line-height: 122%; margin-left: 3.4em; margin-bottom: 0.6em}
    </STYLE>
</HEAD>
<BODY TEXT="#000000" BGCOLOR="#FFFFF0" LINK="#000080" VLINK="#330033" ALINK="#0000FF">
<DIV><B><SPAN Style="font-size:200%; color: rgb(0,51,153)">Annotated</SPAN><SPAN Style="font-size:200%; color: rgb(0,0,102)">&nbsp;Ada Reference Manual</SPAN></B> &mdash; <A HREF="AA-TTL.html"><B>Legal Information</B></A></DIV>
<DIV Style="margin-top: 0.6em; margin-bottom: 0.0em"><A HREF="AA-TOC.html"><IMG SRC="cont.gif" ALT="Contents" BORDER=0></A>&nbsp;
&nbsp;<A HREF="AA-0-5.html"><IMG SRC="index.gif" ALT="Index" BORDER=0></A>&nbsp;
&nbsp;<A HREF="AA-STDS.html"><IMG SRC="lib.gif" ALT="References" BORDER=0></A>&nbsp;
&nbsp;<A HREF="AA-SRCH.html"><IMG SRC="find.gif" ALT="Search" BORDER=0></A>&nbsp;
&nbsp;<A HREF="AA-6-5.html"><IMG SRC="prev.gif" ALT="Previous" BORDER=0></A>&nbsp;
&nbsp;<A HREF="AA-6-6.html"><IMG SRC="next.gif" ALT="Next" BORDER=0></A>&nbsp;
</DIV>
<HR>
<H1>&nbsp;6.5.1 <SPAN class="insert2">Pragma No_Return</SPAN> <SPAN class="delete2"></SPAN></H1>
<DIV Class="paranum">1/2</DIV>
<DIV Class="Normal">{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AIs/AI-00329.TXT">AI95-00329-01</A></I>} 
<SPAN class="insert2"></SPAN>{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AIs/AI-00414.TXT">AI95-00414-01</A></I>} 
<SPAN class="insert2">A <SPAN Class="swiss"><A HREF="AA-2-8.html#S0019">pragma</A></SPAN> 
No_Return indicates that a procedure cannot return normally[; it may 
propagate an exception or loop forever].</SPAN>&nbsp;</DIV>
<DIV Class="paranum">1.a/2</DIV>
<DIV Class="Annotations"><SPAN class="insert2"><B>Discussion:&nbsp;</B><SPAN Class="swiss"><A HREF="AA-2-8.html#S0019">Pragma</A></SPAN> 
No_Deposit will have to wait for Ada 2017. :-)</SPAN>&nbsp;</DIV>

<H4 Class="centered">Syntax</H4>
<DIV Class="paranum">2/2</DIV>
<DIV Class="SyntaxIndented">{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AIs/AI-00329.TXT">AI95-00329-01</A></I>} 
<SPAN class="insert2"></SPAN>{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AIs/AI-00414.TXT">AI95-00414-01</A></I>} 
<SPAN class="insert2">The form of a <SPAN Class="swiss"><A HREF="AA-2-8.html#S0019">pragma</A></SPAN> 
No_Return, which is a representation pragma (see <A HREF="AA-13-1.html">13.1</A>), 
is as follows:</SPAN>&nbsp;</DIV>
<DIV Class="paranum">3/2</DIV>
<DIV Class="SyntaxIndented"><SPAN class="insert2">&nbsp;&nbsp;<B>pragma</B> 
<A NAME="I3529"></A><A NAME="I3530"></A>No_Return(<I>procedure_</I><A NAME="I3531"></A><SPAN Class="swiss"><A HREF="AA-13-1.html#S0285">local_name</A></SPAN>{, 
<I>procedure_</I><A NAME="I3532"></A><SPAN Class="swiss"><A HREF="AA-13-1.html#S0285">local_name</A></SPAN>});</SPAN> 
</DIV>

<H4 Class="centered">Legality Rules</H4>
<DIV Class="paranum">4/2</DIV>
<DIV Class="Normal">{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AIs/AI-00329.TXT">AI95-00329-01</A></I>} 
<SPAN class="insert2"></SPAN>{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AIs/AI-00414.TXT">AI95-00414-01</A></I>} 
<SPAN class="insert2"><SPAN STYLE="font-size: 80%">{<I>non-returning</I>}</SPAN> 
<A NAME="I3533"></A>Each <I>procedure_</I><SPAN Class="swiss"><A HREF="AA-13-1.html#S0285">local_name</A></SPAN> 
shall denote one or more procedures or generic procedures; the denoted 
entities are <I>non-returning</I>. The <I>procedure_</I><SPAN Class="swiss"><A HREF="AA-13-1.html#S0285">local_name</A></SPAN> 
shall not denote a null procedure nor an instance of a generic unit.</SPAN></DIV>
<DIV Class="paranum">4.a/2</DIV>
<DIV Class="Annotations"><SPAN class="insert2"><B>Reason:&nbsp;</B>A null 
procedure cannot have the appropriate non-returning semantics, as it 
does not raise an exception or loop forever.</SPAN>&nbsp;</DIV>
<DIV Class="paranum">4.b/2</DIV>
<DIV Class="Annotations"><SPAN class="insert2"><B>Ramification:&nbsp;</B>The 
procedure can be abstract. The denoted declaration can be a <SPAN Class="swiss"><A HREF="AA-8-5.html#S0182">renaming_declaration</A></SPAN> 
if it obeys the usual rules for representation pragmas: the renaming 
has to occur immediately within the same declarative region as the renamed 
subprogram. If a non-returning procedure is renamed (anywhere) calls 
through the new name still have the non-returning semantics.</SPAN>&nbsp;</DIV>
<DIV Class="paranum">5/2</DIV>
<DIV Class="Normal">{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AIs/AI-00329.TXT">AI95-00329-01</A></I>} 
<SPAN class="insert2"></SPAN>{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AIs/AI-00414.TXT">AI95-00414-01</A></I>} 
<SPAN class="insert2">A return statement shall not apply to a non-returning 
procedure or generic procedure.</SPAN></DIV>
<DIV Class="paranum">6/2</DIV>
<DIV Class="Normal">{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AIs/AI-00414.TXT">AI95-00414-01</A></I>} 
<SPAN class="insert2">A procedure shall be non-returning if it overrides 
a dispatching non-returning procedure. <SPAN STYLE="font-size: 80%">{<I>generic 
contract issue</I> [partial]}</SPAN> <A NAME="I3534"></A>In addition 
to the places where Legality Rules normally apply (see <A HREF="AA-12-3.html">12.3</A>), 
this rule applies also in the private part of an instance of a generic 
unit.</SPAN></DIV>
<DIV Class="paranum">6.a/2</DIV>
<DIV Class="Annotations"><SPAN class="insert2"><B>Reason:&nbsp;</B>This ensures 
that dispatching calls to non-returning procedures will, in fact, not 
return.</SPAN>&nbsp;</DIV>
<DIV Class="paranum">7/2</DIV>
<DIV Class="Normal">{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AIs/AI-00414.TXT">AI95-00414-01</A></I>} 
<SPAN class="insert2">If a renaming-as-body completes a non-returning 
procedure declaration, then the renamed procedure shall be non-returning.</SPAN></DIV>
<DIV Class="paranum">7.a/2</DIV>
<DIV Class="Annotations"><SPAN class="insert2"><B>Reason:&nbsp;</B>This ensures 
that no extra code is needed to implement the renames (that is, no wrapper 
is needed) as the body has the same property.</SPAN>&nbsp;</DIV>

<H4 Class="centered">Static Semantics</H4>
<DIV Class="paranum">8/2</DIV>
<DIV Class="Normal">{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AIs/AI-00329.TXT">AI95-00329-01</A></I>} 
<SPAN class="insert2"></SPAN>{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AIs/AI-00414.TXT">AI95-00414-01</A></I>} 
<SPAN class="insert2">If a generic procedure is non-returning, then so 
are its instances. If a procedure declared within a generic unit is non-returning, 
then so are the corresponding copies of that procedure in instances.</SPAN> 
</DIV>

<H4 Class="centered">Dynamic Semantics</H4>
<DIV Class="paranum">9/2</DIV>
<DIV Class="Normal">{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AIs/AI-00329.TXT">AI95-00329-01</A></I>} 
<SPAN class="insert2"></SPAN>{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AIs/AI-00414.TXT">AI95-00414-01</A></I>} 
<SPAN class="insert2">If the body of a non-returning procedure completes 
normally, Program_Error is raised at the point of the call. <SPAN STYLE="font-size: 80%">{<I>Program_Error 
(raised by failure of run-time check)</I>}</SPAN> <A NAME="I3535"></A></SPAN></DIV>
<DIV Class="paranum">9.a/2</DIV>
<DIV Class="Annotations"><SPAN class="insert2"><B>Discussion:&nbsp;</B>Note 
that there is no name for suppressing this check, since the check represents 
a bug, imposes no time overhead, and minimal space overhead (since it 
can usually be statically eliminated as dead code).</SPAN>&nbsp;</DIV>
<DIV Class="paranum">9.b/2</DIV>
<DIV Class="Annotations"><SPAN class="insert2"><B>Implementation Note: 
</B>If a non-returning procedure tries to return, we raise Program_Error. 
This is stated as happening at the call site, because we do not wish 
to allow the procedure to handle the exception (and then, perhaps, try 
to return again!). However, the expected run-time model is that the compiler 
will generate <B>raise</B> Program_Error at the end of the procedure 
body (but not handleable by the procedure itself), as opposed to doing 
it at the call site. (This is just like the typical run-time model for 
functions that fall off the end without returning a value). The reason 
is indirect calls: in P.<B>all</B>(...);, the compiler cannot know whether 
P designates a non-returning procedure or a normal one. Putting the <B>raise</B> 
Program_Error in the procedure's generated code solves this problem neatly.</SPAN></DIV>
<DIV Class="paranum">9.c/2</DIV>
<DIV Class="Annotations"><SPAN class="insert2">Similarly, if one passes 
a non-returning procedure to a generic formal parameter, the compiler 
cannot know this at call sites (in shared code implementations); the 
raise-in-body solution deals with this neatly.</SPAN>&nbsp;</DIV>

<H4 Class="centered">Examples</H4>
<DIV Class="paranum">10/2</DIV>
<DIV Class="Examples">{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AIs/AI-00433.TXT">AI95-00433-01</A></I>} 
<SPAN class="insert2"><B>procedure</B>&nbsp;Fail(Msg&nbsp;:&nbsp;String);&nbsp;&nbsp;--<SPAN Class="roman"><I>&nbsp;raises&nbsp;Fatal_Error&nbsp;exception</I></SPAN><BR>
<B>pragma</B>&nbsp;No_Return(Fail);<BR>
&nbsp;&nbsp;&nbsp;--<SPAN Class="roman"><I>&nbsp;Inform&nbsp;compiler&nbsp;and&nbsp;reader&nbsp;that&nbsp;procedure&nbsp;never&nbsp;returns&nbsp;normally</I></SPAN></SPAN></DIV>

<H4 Class="centered">Extensions to Ada 95</H4>
<DIV Class="paranum">10.a/2</DIV>
<DIV Class="Annotations">{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AIs/AI-00329.TXT">AI95-00329-01</A></I>} 
<SPAN class="insert2"></SPAN>{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AIs/AI-00414.TXT">AI95-00414-01</A></I>} 
<SPAN class="insert2">{<I>extensions to Ada 95</I>} <A NAME="I3536"></A><SPAN Class="swiss"><A HREF="AA-2-8.html#S0019">Pragma</A></SPAN> 
No_Return is new.</SPAN>&nbsp;</DIV>

<HR>
<DIV Style="margin-top: 0.0em; margin-bottom: 0.6em"><A HREF="AA-TOC.html"><IMG SRC="cont.gif" ALT="Contents" BORDER=0></A>&nbsp;
&nbsp;<A HREF="AA-0-5.html"><IMG SRC="index.gif" ALT="Index" BORDER=0></A>&nbsp;
&nbsp;<A HREF="AA-STDS.html"><IMG SRC="lib.gif" ALT="References" BORDER=0></A>&nbsp;
&nbsp;<A HREF="AA-SRCH.html"><IMG SRC="find.gif" ALT="Search" BORDER=0></A>&nbsp;
&nbsp;<A HREF="AA-6-5.html"><IMG SRC="prev.gif" ALT="Previous" BORDER=0></A>&nbsp;
&nbsp;<A HREF="AA-6-6.html"><IMG SRC="next.gif" ALT="Next" BORDER=0></A>&nbsp;
</DIV>
<DIV Style="margin-top:0.0em"><IMG SRC="AE_logo.gif" height=100 width=113 align=right ALT="Ada-Europe">
<SPAN Style="font-size: 125%">Sponsored by <SPAN Style="font-size: 125%"><A HREF="http://www.ada-europe.org/"><B>Ada-Europe</B></A></SPAN></SPAN></DIV>
</BODY>
</HTML>
