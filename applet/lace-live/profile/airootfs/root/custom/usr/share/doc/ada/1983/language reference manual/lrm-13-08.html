<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML><HEAD>
<TITLE>Ada 83 LRM, Sec 13.8: Machine Code Insertions</TITLE>
</HEAD><BODY>
<hr><a href="ada_lrm.html"><IMG SRC="adass.gif" align=LEFT hspace=6 vspace=6 alt="Lady Ada"></a><H1>Ada '83 Language Reference Manual</H1>
<h6><a href="ada_legal.html">Copyright</a> 1980, 1982, 1983 owned by the United States Government. Direct reproduction and usage requests to the <a href="mailto://adainfo@sw-eng.falls-church.va.us">Ada Information Clearinghouse</a>.</h6>
<br clear=LEFT>
<hr>

<H2><A NAME="13.8">13.8</A>.  Machine Code Insertions</H2>
<A HREF="lrm-13-07.html#13.7"><img src="lrm-prev.gif" alt="[PREVIOUS]"></A><A HREF="lrm-13.html#13"><img src="lrm-up.gif" alt="[UP]"></A><A HREF="lrm-13-09.html#13.9"><img src="lrm-next.gif" alt="[NEXT]"></A>
<P>
A machine code insertion can be achieved by a call to a procedure whose 
sequence of statements contains code statements.
<pre>
      code_statement ::= type_mark'record_aggregate;
</pre>
<P>
A code statement is only allowed in the sequence of statements of a 
procedure body.  If a procedure body contains code statements, then within 
this procedure body the only allowed form of statement is a code statement 
(labeled or not), the only allowed declarative items are use clauses, and 
no exception handler is allowed (comments and pragmas are allowed as 
usual).  
<P>
Each machine instruction appears as a record aggregate of a record type 
that defines the corresponding instruction.  The base type of the type mark 
of a code statement must be declared within the predefined library package 
called MACHINE_CODE; this package must be named by a with clause that 
applies to the compilation unit in which the code statement occurs.  An
implementation is not required to provide such a package.
<P>
An implementation is allowed to impose further restrictions on the record 
aggregates allowed in code statements.  For example, it may require that 
expressions contained in such aggregates be static expressions.  
<P>
An implementation may provide machine-dependent pragmas specifying register 
conventions and calling conventions.  Such pragmas must be documented in 
<a href="lrm-F.html#F">Appendix F</a>.
<P>
Example:
<pre>
      M : MASK
      procedure SET_MASK; pragma INLINE(SET_MASK);

      procedure SET_MASK is 
        use MACHINE_CODE;
      begin
        SI_FORMAT'(CODE =&gt; SSM, B =&gt; M'BASE_REG, D =&gt; M'DISP);
        --  M'BASE_REG and M'DISP are implementation-specific predefined 
            attributes
      end; 
</pre>
<P>
<b>References:</b> <A HREF="lrm-01-06.html#1.6">allow</A>,
<A HREF="lrm-10-01.html#10.1.1">apply</A>,
<A HREF="lrm-02-07.html#2.7">comment</A>,
<A HREF="lrm-10-01.html#10.1">compilation unit</A>,
<A HREF="lrm-03-09.html#3.9">declarative item</A>,
<A HREF="lrm-11-02.html#11.2">exception handler</A>,
<A HREF="lrm-06-03.html#6.3.2">inline pragma</A>,
<A HREF="lrm-05-01.html#5.1">labeled  statement</A>,
<A HREF="lrm-10-01.html#10.1">library unit</A>,
<A HREF="lrm-07.html#7">package</A>,
<A HREF="lrm-02-08.html#2.8">pragma</A>,
<A HREF="lrm-06.html#6">procedure</A>,
 and <A HREF="lrm-06-01.html#6.1">6.1</A>,
<A HREF="lrm-06-03.html#6.3">procedure body</A>,
<A HREF="lrm-04-03.html#4.3.1">record aggregate</A>,
<A HREF="lrm-03-07.html#3.7">record type</A>,
<A HREF="lrm-05-01.html#5.1">sequence of  statements</A>,
<A HREF="lrm-05.html#5">statement</A>,
<A HREF="lrm-04-09.html#4.9">static expression</A>,
<A HREF="lrm-05-04.html#5.4">use clause</A>,
<A HREF="lrm-10-01.html#10.1.1">with  clause</A>.
<P>

<b>Rationale references:</b> 
<a href="http://archive.adaic.com/standards/83rat/html/ratl-15-07.html#15.7">15.7&nbsp;Interface with Other Languages</a>
<p>

<b>Style Guide references:</b> 
	<A HREF="http://archive.adaic.com/docs/style-guide/83style/html/sty-07-01.html#7.1.5">7.1.5&nbsp;Encapsulating Implementation Dependencies</a>, 
	<A HREF="http://archive.adaic.com/docs/style-guide/83style/html/sty-07-06.html#7.6.3">7.6.3&nbsp;Machine Code Inserts</a>
<p>

<A HREF="lrm-IDX.html"><img src="lrm-idx.gif" alt="[INDEX]"></A><A HREF="lrm-TOC.html"><img src="lrm-toc.gif" alt="[CONTENTS]"></A>

<hr>
<address><a href="http://sw-eng.falls-church.va.us/AdaIC/"><IMG SRC="small_adaic_logo.gif" ALT="[Ada Information Clearinghouse]"></a><p>
Address any questions or comments to
<A HREF="mailto://adainfo@sw-eng.falls-church.va.us">adainfo@sw-eng.falls-church.va.us</A>.</address>
</BODY></HTML>
