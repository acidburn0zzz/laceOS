<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
"http://www.w3.org/TR/html4/loose.dtd">
<HTML>
<HEAD>
    <TITLE>Limited Types</TITLE>
    <META http-equiv="Content-Type" content="text/html; charset=iso-8859-1">
    <META NAME="Author" CONTENT="JTC1/SC22/WG9/ARG, by Randall Brukardt, ARG Editor">
    <META NAME="GENERATOR" CONTENT="Arm_Form.Exe, Ada Reference Manual generator">
    <STYLE type="text/css">
    H4.centered {text-align: center}
    SPAN.swiss {font-family: Arial, Helvetica, sans-serif; font-size: 92%}
    SPAN.roman {font-family: "Times New Roman", Times, serif}
    DIV.paranum {float: left; font-family: Arial, Helvetica, sans-serif; font-size: 64%; width: 2.8em; margin-left: -0.4em; margin-right: -3.0em; margin-top: 0.2em}
    TT {font-family: "Courier New", monospace}
    DT {display: compact}
    SPAN.insert2 {text-decoration: underline; color: rgb(0,102,0) }
    SPAN.delete2 {text-decoration: line-through; color: rgb(0,102,0) }
    DIV.Normal {font-family: "Times New Roman", Times, serif; line-height: 122%; margin-left: 1.2em; margin-bottom: 0.6em}
    DIV.Annotations {font-family: "Times New Roman", Times, serif; font-size: 80%; line-height: 122%; margin-left: 6.2em; margin-bottom: 0.6em}
    DIV.Notes {font-family: "Times New Roman", Times, serif; font-size: 80%; line-height: 122%; margin-left: 3.7em; margin-bottom: 0.6em}
    DIV.NotesHeader {font-family: "Times New Roman", Times, serif; font-size: 80%; line-height: 122%; margin-left: 3.7em}
    DIV.Examples {font-family: "Courier New", monospace; font-size: 90%; line-height: 122%; margin-left: 3.4em; margin-bottom: 0.6em}
    DIV.SmallExamples {font-family: "Courier New", monospace; font-size: 72%; line-height: 122%; margin-left: 9.6em; margin-bottom: 0.6em}
    UL.Bulleted {font-family: "Times New Roman", Times, serif; line-height: 122%; margin-left: 3.2em; margin-right: 2.0em; margin-top: 0em; margin-bottom: 0.5em}
    UL.NotesBulleted {font-family: "Times New Roman", Times, serif; font-size: 80%; line-height: 122%; margin-left: 6.2em; margin-right: 2.5em; margin-top: 0em; margin-bottom: 0.5em}
    </STYLE>
</HEAD>
<BODY TEXT="#000000" BGCOLOR="#FFFFF0" LINK="#000080" VLINK="#330033" ALINK="#0000FF">
<DIV><B><SPAN Style="font-size:200%; color: rgb(0,51,153)">Annotated</SPAN><SPAN Style="font-size:200%; color: rgb(0,0,102)">&nbsp;Ada Reference Manual</SPAN></B> &mdash; <A HREF="AA-TTL.html"><B>Legal Information</B></A></DIV>
<DIV Style="margin-top: 0.6em; margin-bottom: 0.0em"><A HREF="AA-TOC.html"><IMG SRC="cont.gif" ALT="Contents" BORDER=0></A>&nbsp;
&nbsp;<A HREF="AA-0-5.html"><IMG SRC="index.gif" ALT="Index" BORDER=0></A>&nbsp;
&nbsp;<A HREF="AA-STDS.html"><IMG SRC="lib.gif" ALT="References" BORDER=0></A>&nbsp;
&nbsp;<A HREF="AA-SRCH.html"><IMG SRC="find.gif" ALT="Search" BORDER=0></A>&nbsp;
&nbsp;<A HREF="AA-7-4.html"><IMG SRC="prev.gif" ALT="Previous" BORDER=0></A>&nbsp;
&nbsp;<A HREF="AA-7-6.html"><IMG SRC="next.gif" ALT="Next" BORDER=0></A>&nbsp;
</DIV>
<HR>
<H1>7.5 Limited Types</H1>
<DIV Class="paranum">1/2</DIV>
<DIV Class="Normal">{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AIs/AI-00287.TXT">AI95-00287-01</A></I>} 
[A limited type is (a view of) a type for which <SPAN class="insert2">copying 
(such as for an <SPAN Class="swiss"><A HREF="AA-5-2.html#S0137">assignment_statement</A></SPAN>)</SPAN><SPAN class="delete2">&nbsp;the 
assignment operation</SPAN> is not allowed. A nonlimited type is a (view 
of a) type for which <SPAN class="insert2">copying</SPAN><SPAN class="delete2">&nbsp;the 
assignment operation</SPAN> is allowed.]&nbsp;</DIV>
<DIV Class="paranum">1.a</DIV>
<DIV Class="Annotations"><B>Discussion:&nbsp;</B>The concept of the <I>value</I> 
of a limited type is difficult to define, since the abstract value of 
a limited type often extends beyond its physical representation. In some 
sense, values of a limited type cannot be divorced from their object. 
The value <I>is</I> the object.</DIV>
<DIV Class="paranum">1.b/2</DIV>
<DIV Class="Annotations">{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AIs/AI-10318.TXT">AI95-00318-02</A></I>} 
In Ada 83, in the two places where limited types were defined by the 
language, namely tasks and files, an implicit level of indirection was 
implied by the semantics to avoid the separation of the value from an 
associated object. In Ada 95, most limited types are passed by reference, 
and even return-ed by reference.<SPAN class="insert2">&nbsp;In Ada 2005, most 
limited types are built-in-place upon return, rather than returned by 
reference. Thus the object &ldquo;identity&rdquo; is part of the logical 
value of most limited types.</SPAN>&nbsp;</DIV>
<DIV Class="paranum">1.c/2</DIV>
<DIV Class="Annotations"><B>To be honest:&nbsp;</B>{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AIs/AI-00287.TXT">AI95-00287-01</A></I>} 
{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AIs/AI-00419.TXT">AI95-00419-01</A></I>} 
For a limited partial view whose full view is nonlimited, <SPAN class="insert2">copying</SPAN><SPAN class="delete2">&nbsp;assignment</SPAN> 
is possible on parameter passing and function return. To prevent any 
copying whatsoever, one should make both the partial <I>and</I> full 
views limited.&nbsp;</DIV>
<DIV Class="paranum">1.d/2</DIV>
<DIV Class="Annotations"><B>Glossary entry:&nbsp;</B>{<I>Limited type</I>} 
A limited type is <SPAN class="delete2">(a view of)&nbsp;</SPAN>a type for 
which <SPAN class="insert2">copying (such as in an <SPAN Class="swiss"><A HREF="AA-5-2.html#S0137">assignment_statement</A></SPAN>)</SPAN><SPAN class="delete2">&nbsp;the 
assignment operation</SPAN> is not allowed. A nonlimited type is a <SPAN class="delete2">(view 
of a)&nbsp;</SPAN>type for which <SPAN class="insert2">copying</SPAN><SPAN class="delete2">&nbsp;the 
assignment operation</SPAN> is allowed.</DIV>

<H4 Class="centered">Legality Rules</H4>
<DIV Class="paranum">2/2</DIV>
<DIV Class="Normal">{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AIs/AI-00419.TXT">AI95-00419-01</A></I>} 
If a tagged record type has any limited components, then the reserved 
word <B>limited</B> shall appear in its <SPAN Class="swiss"><A HREF="AA-3-8.html#S0066">record_type_definition</A></SPAN>.<SPAN class="insert2">&nbsp;[If the reserved word <B>limited</B> appears in the definition of a <SPAN Class="swiss"><A HREF="AA-3-4.html#S0035">derived_type_definition</A></SPAN>, 
its parent type and any progenitor interfaces shall be limited.]</SPAN> 
</DIV>
<DIV Class="paranum">2.a.1/2</DIV>
<DIV Class="Annotations"><SPAN class="insert2"><B>Proof:&nbsp;</B></SPAN>{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AIs/AI-00419.TXT">AI95-00419-01</A></I>} 
<SPAN class="insert2">The rule about the parent type being required to 
be limited can be found in <A HREF="AA-3-4.html">3.4</A>. Rules about 
progenitor interfaces can be found in <A HREF="AA-3-9-4.html">3.9.4</A>, 
specifically, a nonlimited interface can appear only on a nonlimited 
type. We repeat these rules here to gather these scattered rules in one 
obvious place.</SPAN>&nbsp;</DIV>
<DIV Class="paranum">2.a</DIV>
<DIV Class="Annotations" Style="margin-bottom: 0.4em"><B>Reason:&nbsp;</B>This 
prevents tagged limited types from becoming nonlimited. Otherwise, the 
following could happen:&nbsp;</DIV>
<DIV Class="paranum">2.b</DIV>
<DIV Class="SmallExamples"><B>package</B>&nbsp;P&nbsp;<B>is</B><BR>
&nbsp;&nbsp;&nbsp;&nbsp;<B>type</B>&nbsp;T&nbsp;<B>is</B>&nbsp;<B>limited</B>&nbsp;<B>private</B>;<BR>
&nbsp;&nbsp;&nbsp;&nbsp;<B>type</B>&nbsp;R&nbsp;<B>is</B>&nbsp;<B>tagged</B><BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<B>record</B>&nbsp;--<SPAN Class="roman"><I>&nbsp;Illegal!</I></SPAN><BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;--<SPAN Class="roman"><I>&nbsp;This&nbsp;should&nbsp;say&nbsp;&ldquo;<B>limited&nbsp;record</B>&rdquo;.</I></SPAN><BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;X&nbsp;:&nbsp;T;<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<B>end</B>&nbsp;<B>record</B>;<BR>
<B>private</B><BR>
&nbsp;&nbsp;&nbsp;&nbsp;<B>type</B>&nbsp;T&nbsp;<B>is</B>&nbsp;<B>new</B>&nbsp;Integer;&nbsp;--<SPAN Class="roman"><I>&nbsp;R&nbsp;becomes&nbsp;nonlimited&nbsp;here.</I></SPAN><BR>
<B>end</B>&nbsp;P;</DIV>
<DIV Class="paranum">2.c/2</DIV>
<DIV Class="SmallExamples"><B>package</B>&nbsp;Q&nbsp;<B>is</B><BR>
&nbsp;&nbsp;&nbsp;&nbsp;<B>type</B>&nbsp;R2<SPAN class="delete2">(Access_Discrim&nbsp;:&nbsp;<B>access</B>&nbsp;...)</SPAN>&nbsp;<B>is</B>&nbsp;<B>new</B>&nbsp;R&nbsp;<B>with</B><BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<B>record</B><BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Y&nbsp;:&nbsp;Some_Task_Type;<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<B>end</B>&nbsp;<B>record</B>;<BR>
<B>end</B>&nbsp;Q;</DIV>
<DIV Class="paranum">2.d/2</DIV>
<DIV Class="Annotations">{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AIs/AI-00230.TXT">AI95-00230-01</A></I>} 
If the above were legal, then assignment would be defined for R'Class 
in the body of P, which is bad news, given <SPAN class="delete2">the 
access discriminant and&nbsp;</SPAN>the task.&nbsp;</DIV>
<DIV Class="paranum">2.1/2</DIV>
<DIV Class="Normal" Style="margin-bottom: 0.4em">&nbsp;&nbsp;{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AIs/AI-00287.TXT">AI95-00287-01</A></I>} 
<SPAN class="insert2"></SPAN>{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AIs/AI-10318.TXT">AI95-00318-02</A></I>} 
<SPAN class="insert2">In the following contexts, an <SPAN Class="swiss"><A HREF="AA-4-4.html#S0115">expression</A></SPAN> 
of a limited type is not permitted unless it is an <SPAN Class="swiss"><A HREF="AA-4-3.html#S0104">aggregate</A></SPAN>, 
a <SPAN Class="swiss"><A HREF="AA-6-4.html#S0164">function_call</A></SPAN>, 
or a parenthesized <SPAN Class="swiss"><A HREF="AA-4-4.html#S0115">expression</A></SPAN> 
or <SPAN Class="swiss"><A HREF="AA-4-7.html#S0128">qualified_expression</A></SPAN> 
whose operand is permitted by this rule:</SPAN>&nbsp;</DIV>
<DIV Class="paranum">2.2/2</DIV>
<UL Class="Bulleted"><LI TYPE=DISC><SPAN class="insert2">the initialization 
<SPAN Class="swiss"><A HREF="AA-4-4.html#S0115">expression</A></SPAN> 
of an <SPAN Class="swiss"><A HREF="AA-3-3-1.html#S0032">object_declaration</A></SPAN> 
(see <A HREF="AA-3-3-1.html">3.3.1</A>)</SPAN></LI></UL>
<DIV Class="paranum">2.3/2</DIV>
<UL Class="Bulleted"><LI TYPE=DISC><SPAN class="insert2">the <SPAN Class="swiss"><A HREF="AA-3-7.html#S0063">default_expression</A></SPAN> 
of a <SPAN Class="swiss"><A HREF="AA-3-8.html#S0070">component_declaration</A></SPAN> 
(see <A HREF="AA-3-8.html">3.8</A>)</SPAN></LI></UL>
<DIV Class="paranum">2.4/2</DIV>
<UL Class="Bulleted"><LI TYPE=DISC><SPAN class="insert2">the <SPAN Class="swiss"><A HREF="AA-4-4.html#S0115">expression</A></SPAN> 
of a <SPAN Class="swiss"><A HREF="AA-4-3-1.html#S0107">record_component_association</A></SPAN> 
(see <A HREF="AA-4-3-1.html">4.3.1</A>)</SPAN></LI></UL>
<DIV Class="paranum">2.5/2</DIV>
<UL Class="Bulleted"><LI TYPE=DISC><SPAN class="insert2">the <SPAN Class="swiss"><A HREF="AA-4-4.html#S0115">expression</A></SPAN> 
for an <SPAN Class="swiss"><A HREF="AA-4-3-2.html#S0110">ancestor_part</A></SPAN> 
of an <SPAN Class="swiss"><A HREF="AA-4-3-2.html#S0109">extension_aggregate</A></SPAN> 
(see <A HREF="AA-4-3-2.html">4.3.2</A>)</SPAN></LI></UL>
<DIV Class="paranum">2.6/2</DIV>
<UL Class="Bulleted"><LI TYPE=DISC><SPAN class="insert2">an <SPAN Class="swiss"><A HREF="AA-4-4.html#S0115">expression</A></SPAN> 
of a <SPAN Class="swiss"><A HREF="AA-4-3-3.html#S0112">positional_array_aggregate</A></SPAN> 
or the <SPAN Class="swiss"><A HREF="AA-4-4.html#S0115">expression</A></SPAN> 
of an <SPAN Class="swiss"><A HREF="AA-4-3-3.html#S0114">array_component_association</A></SPAN> 
(see <A HREF="AA-4-3-3.html">4.3.3</A>)</SPAN></LI></UL>
<DIV Class="paranum">2.7/2</DIV>
<UL Class="Bulleted"><LI TYPE=DISC><SPAN class="insert2">the <SPAN Class="swiss"><A HREF="AA-4-7.html#S0128">qualified_expression</A></SPAN> 
of an initialized allocator (see <A HREF="AA-4-8.html">4.8</A>)</SPAN></LI></UL>
<DIV Class="paranum">2.8/2</DIV>
<UL Class="Bulleted"><LI TYPE=DISC><SPAN class="insert2">the <SPAN Class="swiss"><A HREF="AA-4-4.html#S0115">expression</A></SPAN> 
of a return statement (see <A HREF="AA-6-5.html">6.5</A>)</SPAN></LI></UL>
<DIV Class="paranum">2.9/2</DIV>
<UL Class="Bulleted"><LI TYPE=DISC><SPAN class="insert2">the <SPAN Class="swiss"><A HREF="AA-3-7.html#S0063">default_expression</A></SPAN> 
or actual parameter for a formal object of mode <B>in</B> (see <A HREF="AA-12-4.html">12.4</A>)</SPAN></LI></UL>
<DIV Class="paranum">2.e/2</DIV>
<DIV Class="Annotations"><SPAN class="insert2"><B>Discussion:&nbsp;</B>All 
of these contexts normally require copying; by restricting the uses as 
above, we can require the new object to be built-in-place.</SPAN>&nbsp;</DIV>

<H4 Class="centered">Static Semantics</H4>
<DIV Class="paranum">3/2</DIV>
<DIV Class="Normal" Style="margin-bottom: 0.4em">{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AIs/AI-00419.TXT">AI95-00419-01</A></I>} 
<SPAN STYLE="font-size: 80%">{<I>limited type</I>}</SPAN> <A NAME="I3618"></A>A 
type is <I>limited</I> if it is <SPAN class="delete2">a descendant of 
</SPAN>one of the following:&nbsp;</DIV>
<DIV Class="paranum">4/2</DIV>
<UL Class="Bulleted"><LI TYPE=DISC>{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AIs/AI-00411.TXT">AI95-00411-01</A></I>} 
{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AIs/AI-00419.TXT">AI95-00419-01</A></I>} 
a type with the reserved word <B>limited</B><SPAN class="insert2">, <B>synchronized</B>, 
<B>task</B>, or <B>protected</B>&nbsp;</SPAN>in its definition;&nbsp;</LI></UL>
<DIV Class="paranum">4.a</DIV>
<DIV Class="Annotations"><B>Ramification:&nbsp;</B>Note that there is always 
a &ldquo;definition,&rdquo; conceptually, even if there is no syntactic 
category called &ldquo;..._definition&rdquo;.</DIV>
<DIV Class="paranum">4.b/2</DIV>
<DIV Class="Annotations">{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AIs/AI-00419.TXT">AI95-00419-01</A></I>} 
<SPAN class="insert2">This includes interfaces of the above kinds, derived 
types with the reserved word <B>limited</B>, as well as task and protected 
types.</SPAN>&nbsp;</DIV>
<DIV Class="paranum">5/2</DIV>
<UL Class="Bulleted"><LI TYPE=DISC><SPAN STYLE="font-size: 80%"><I>This 
paragraph was deleted.</I></SPAN><SPAN class="delete2"></SPAN>{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AIs/AI-00419.TXT">AI95-00419-01</A></I>} 
<SPAN class="delete2">a task or protected type;</SPAN></LI></UL>
<DIV Class="paranum">6/2</DIV>
<UL Class="Bulleted"><LI TYPE=DISC>{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AIs/AI-00419.TXT">AI95-00419-01</A></I>} 
a composite type with a limited component<SPAN class="insert2">;</SPAN><SPAN class="delete2">.</SPAN></LI></UL>
<DIV Class="paranum">6.1/2</DIV>
<UL Class="Bulleted"><LI TYPE=DISC>{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AIs/AI-00419.TXT">AI95-00419-01</A></I>} 
<SPAN class="insert2">a derived type whose parent is limited and is not 
an interface.</SPAN></LI></UL>
<DIV Class="paranum">6.a/2</DIV>
<DIV Class="Annotations"><SPAN class="insert2"><B>Ramification:&nbsp;</B></SPAN>{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AIs/AI-00419.TXT">AI95-00419-01</A></I>} 
<SPAN class="insert2">Limitedness is not inherited from interfaces; it 
must be explicitly specified when the parent is an interface.</SPAN> 
</DIV>
<DIV Class="paranum">6.b/2</DIV>
<DIV Class="Annotations"><SPAN class="insert2"><B>To be honest:&nbsp;</B></SPAN>{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AIs/AI-00419.TXT">AI95-00419-01</A></I>} 
<SPAN class="insert2">A derived type can become nonlimited if <B>limited</B> 
does not appear and the derivation takes place in the visible part of 
a child package, and the parent type is nonlimited as viewed from the 
private part or body of the child package.</SPAN>&nbsp;</DIV>
<DIV Class="paranum">6.c/2</DIV>
<DIV Class="Annotations"><SPAN class="insert2"><B>Reason:&nbsp;</B></SPAN>{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AIs/AI-00419.TXT">AI95-00419-01</A></I>} 
<SPAN class="insert2">We considered a rule where limitedness was always 
inherited from the parent for derived types, but in the case of a type 
whose parent is an interface, this meant that the first interface is 
treated differently than other interfaces. It also would have forced 
users to declare dummy nonlimited interfaces just to get the limitedness 
right. We also considered a syntax like <B>not limited</B> to specify 
nonlimitedness when the parent was limited, but that was unsavory. The 
rule given is more uniform and simpler to understand.</SPAN></DIV>
<DIV Class="paranum">6.d/2</DIV>
<DIV Class="Annotations">{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AIs/AI-00419.TXT">AI95-00419-01</A></I>} 
<SPAN class="insert2">The rules for interfaces are asymmetrical, but 
the language is not: if the parent interface is limited, the presence 
of the word <B>limited</B> determines the limitedness, and nonlimited 
progenitors are illegal by the rules in <A HREF="AA-3-9-4.html">3.9.4</A>. 
If the parent interface is nonlimited, the word <B>limited</B> is illegal 
by the rules in <A HREF="AA-3-4.html">3.4</A>. The net effect is that 
the order of the interfaces doesn't matter.</SPAN>&nbsp;</DIV>
<DIV Class="paranum">7</DIV>
<DIV Class="Normal"><SPAN STYLE="font-size: 80%">{<I>nonlimited type</I>}</SPAN> 
<A NAME="I3619"></A>Otherwise, the type is nonlimited.</DIV>
<DIV Class="paranum">8</DIV>
<DIV Class="Normal">[There are no predefined equality operators for a 
limited type.]&nbsp;</DIV>

<H4 Class="centered">Implementation Requirements</H4>
<DIV Class="paranum">8.1/2</DIV>
<DIV Class="Normal">&nbsp;&nbsp;{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AIs/AI-00287.TXT">AI95-00287-01</A></I>} 
<SPAN class="insert2"></SPAN>{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AIs/AI-10318.TXT">AI95-00318-02</A></I>} 
<SPAN class="insert2">For an <SPAN Class="swiss"><A HREF="AA-4-3.html#S0104">aggregate</A></SPAN> 
of a limited type used to initialize an object as allowed above, the 
implementation shall not create a separate anonymous object for the <SPAN Class="swiss"><A HREF="AA-4-3.html#S0104">aggregate</A></SPAN>. 
For a <SPAN Class="swiss"><A HREF="AA-6-4.html#S0164">function_call</A></SPAN> 
of a type with a part that is of a task, protected, or explicitly limited 
record type that is used to initialize an object as allowed above, the 
implementation shall not create a separate return object (see 6.5) for 
the <SPAN Class="swiss"><A HREF="AA-6-4.html#S0164">function_call</A></SPAN>. 
The <SPAN Class="swiss"><A HREF="AA-4-3.html#S0104">aggregate</A></SPAN> 
or <SPAN Class="swiss"><A HREF="AA-6-4.html#S0164">function_call</A></SPAN> 
shall be constructed directly in the new object.</SPAN>&nbsp;</DIV>
<DIV Class="paranum">8.a/2</DIV>
<DIV Class="Annotations"><SPAN class="insert2"><B>Discussion:&nbsp;</B></SPAN>{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AIs/AI-10318.TXT">AI95-00318-02</A></I>} 
<SPAN class="insert2">For a <SPAN Class="swiss"><A HREF="AA-6-4.html#S0164">function_call</A></SPAN>, 
we only require <I>build-in-place</I>{<I>build-in-place</I> [partial]} 
<A NAME="I3620"></A>for a limited type that would have been a return-by-reference 
type in Ada 95. We do this because we want to minimize disruption to 
Ada 95 implementations and users.</SPAN>&nbsp;</DIV>
<DIV Class="NotesHeader">NOTES</DIV>
<DIV Class="paranum">9/2</DIV>
<DIV Class="Notes">14&nbsp;&nbsp;{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AIs/AI-00287.TXT">AI95-00287-01</A></I>} 
{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AIs/AI-10318.TXT">AI95-00318-02</A></I>} 
<SPAN class="insert2">While it is allowed to write initializations of 
limited objects, such initializations never copy a limited object. The 
source of such an assignment operation must be an <SPAN Class="swiss"><A HREF="AA-4-3.html#S0104">aggregate</A></SPAN> 
or <SPAN Class="swiss"><A HREF="AA-6-4.html#S0164">function_call</A></SPAN>, 
and such <SPAN Class="swiss"><A HREF="AA-4-3.html#S0104">aggregate</A></SPAN>s 
and <SPAN Class="swiss"><A HREF="AA-6-4.html#S0164">function_call</A></SPAN>s 
must be built directly in the target object.</SPAN><SPAN class="delete2">&nbsp;The 
following are consequences of the rules for limited types:</SPAN>&nbsp;</DIV>
<DIV Class="paranum">9.a/2</DIV>
<DIV Class="Annotations"><SPAN class="insert2"><B>To be honest:&nbsp;</B>This 
isn't quite true if the type can become nonlimited (see below); <SPAN Class="swiss"><A HREF="AA-6-4.html#S0164">function_call</A></SPAN>s 
only are required to be build-in-place for &ldquo;really&rdquo; limited 
types.</SPAN>&nbsp;</DIV>
<DIV Class="Notes"><SPAN class="insert2"><SPAN STYLE="font-size: 80%"><I>Paragraphs 
10 through 15 were deleted.</I></SPAN></SPAN>&nbsp;</DIV>
<DIV Class="paranum">10/2</DIV>
<UL Class="NotesBulleted"><LI TYPE=DISC>{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AIs/AI-00287.TXT">AI95-00287-01</A></I>} 
<SPAN class="delete2">An initialization expression is not allowed in 
an <SPAN Class="swiss"><A HREF="AA-3-3-1.html#S0032">object_declaration</A></SPAN> 
if the type of the object is limited.</SPAN></LI></UL>
<DIV Class="paranum">11/2</DIV>
<UL Class="NotesBulleted"><LI TYPE=DISC>{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AIs/AI-00287.TXT">AI95-00287-01</A></I>} 
<SPAN class="delete2">A default expression is not allowed in a <SPAN Class="swiss"><A HREF="AA-3-8.html#S0070">component_declaration</A></SPAN> 
if the type of the record component is limited.</SPAN></LI></UL>
<DIV Class="paranum">12/2</DIV>
<UL Class="NotesBulleted"><LI TYPE=DISC>{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AIs/AI-00287.TXT">AI95-00287-01</A></I>} 
<SPAN class="delete2">An initialized allocator is not allowed if the 
designated type is limited.</SPAN></LI></UL>
<DIV Class="paranum">13/2</DIV>
<UL Class="NotesBulleted"><LI TYPE=DISC>{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AIs/AI-00287.TXT">AI95-00287-01</A></I>} 
<SPAN class="delete2">A generic formal parameter of mode <B>in</B> must 
not be of a limited type.</SPAN>&nbsp;</LI></UL>
<DIV Class="paranum">14/2</DIV>
<DIV Class="Notes">15&nbsp;&nbsp;{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AIs/AI-00287.TXT">AI95-00287-01</A></I>} 
<SPAN class="delete2"><SPAN Class="swiss"><A HREF="AA-4-3.html#S0104">Aggregate</A></SPAN>s 
are not available for a limited composite type. Concatenation is not 
available for a limited array type.</SPAN></DIV>
<DIV Class="paranum">15/2</DIV>
<DIV Class="Notes">16&nbsp;&nbsp;{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AIs/AI-00287.TXT">AI95-00287-01</A></I>} 
<SPAN class="delete2">The rules do not exclude a <SPAN Class="swiss"><A HREF="AA-3-7.html#S0063">default_expression</A></SPAN> 
for a formal parameter of a limited type; they do not exclude a deferred 
constant of a limited type if the full declaration of the constant is 
of a nonlimited type.</SPAN></DIV>
<DIV Class="paranum">16</DIV>
<DIV Class="Notes">17&nbsp;&nbsp;<SPAN STYLE="font-size: 80%">{<I>become 
nonlimited</I>}</SPAN> <A NAME="I3621"></A><SPAN STYLE="font-size: 80%">{<I>nonlimited 
type (becoming nonlimited)</I>}</SPAN> <A NAME="I3622"></A><SPAN STYLE="font-size: 80%">{<I>limited 
type (becoming nonlimited)</I>}</SPAN> <A NAME="I3623"></A>As illustrated 
in <A HREF="AA-7-3-1.html">7.3.1</A>, an untagged limited type can become 
nonlimited under certain circumstances.&nbsp;</DIV>
<DIV Class="paranum">16.a</DIV>
<DIV Class="Annotations"><B>Ramification:&nbsp;</B>Limited private types do 
not become nonlimited; instead, their full view can be nonlimited, which 
has a similar effect.</DIV>
<DIV Class="paranum">16.b</DIV>
<DIV Class="Annotations">It is important to remember that a single nonprivate 
type can be both limited and nonlimited in different parts of its scope. 
In other words, &ldquo;limited&rdquo; is a property that depends on where 
you are in the scope of the type. We don't call this a &ldquo;view property&rdquo; 
because there is no particular declaration to declare the nonlimited 
view.</DIV>
<DIV Class="paranum">16.c</DIV>
<DIV Class="Annotations">Tagged types never become nonlimited.&nbsp;</DIV>

<H4 Class="centered">Examples</H4>
<DIV Class="paranum">17</DIV>
<DIV Class="Normal" Style="margin-bottom: 0.4em"><I>Example of a package 
with a limited type:</I>&nbsp;</DIV>
<DIV Class="paranum">18</DIV>
<DIV Class="Examples"><B>package</B>&nbsp;IO_Package&nbsp;<B>is</B><BR>
&nbsp;&nbsp;&nbsp;<B>type</B>&nbsp;File_Name&nbsp;<B>is</B>&nbsp;<B>limited</B>&nbsp;<B>private</B>;</DIV>
<DIV Class="paranum">19</DIV>
<DIV Class="Examples">&nbsp;&nbsp;&nbsp;<B>procedure</B>&nbsp;Open&nbsp;(F&nbsp;:&nbsp;<B>in</B>&nbsp;<B>out</B>&nbsp;File_Name);<BR>
&nbsp;&nbsp;&nbsp;<B>procedure</B>&nbsp;Close(F&nbsp;:&nbsp;<B>in</B>&nbsp;<B>out</B>&nbsp;File_Name);<BR>
&nbsp;&nbsp;&nbsp;<B>procedure</B>&nbsp;Read&nbsp;(F&nbsp;:&nbsp;<B>in</B>&nbsp;File_Name;&nbsp;Item&nbsp;:&nbsp;<B>out</B>&nbsp;Integer);<BR>
&nbsp;&nbsp;&nbsp;<B>procedure</B>&nbsp;Write(F&nbsp;:&nbsp;<B>in</B>&nbsp;File_Name;&nbsp;Item&nbsp;:&nbsp;<B>in</B>&nbsp;&nbsp;Integer);<BR>
<B>private</B><BR>
&nbsp;&nbsp;&nbsp;<B>type</B>&nbsp;File_Name&nbsp;<B>is</B><BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<B>limited</B>&nbsp;<B>record</B><BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Internal_Name&nbsp;:&nbsp;Integer&nbsp;:=&nbsp;0;<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<B>end</B>&nbsp;<B>record</B>;<BR>
<B>end</B>&nbsp;IO_Package;</DIV>
<DIV Class="paranum">20</DIV>
<DIV Class="Examples"><B>package</B>&nbsp;<B>body</B>&nbsp;IO_Package&nbsp;<B>is</B><BR>
&nbsp;&nbsp;&nbsp;Limit&nbsp;:&nbsp;<B>constant</B>&nbsp;:=&nbsp;200;<BR>
&nbsp;&nbsp;&nbsp;<B>type</B>&nbsp;File_Descriptor&nbsp;<B>is</B>&nbsp;<B>record</B>&nbsp;&nbsp;...&nbsp;&nbsp;<B>end</B>&nbsp;<B>record</B>;<BR>
&nbsp;&nbsp;&nbsp;Directory&nbsp;:&nbsp;<B>array</B>&nbsp;(1&nbsp;..&nbsp;Limit)&nbsp;<B>of</B>&nbsp;File_Descriptor;<BR>
&nbsp;&nbsp;&nbsp;...<BR>
&nbsp;&nbsp;&nbsp;<B>procedure</B>&nbsp;Open&nbsp;(F&nbsp;:&nbsp;<B>in</B>&nbsp;<B>out</B>&nbsp;File_Name)&nbsp;<B>is</B>&nbsp;&nbsp;...&nbsp;&nbsp;<B>end</B>;<BR>
&nbsp;&nbsp;&nbsp;<B>procedure</B>&nbsp;Close(F&nbsp;:&nbsp;<B>in</B>&nbsp;<B>out</B>&nbsp;File_Name)&nbsp;<B>is</B>&nbsp;&nbsp;...&nbsp;&nbsp;<B>end</B>;<BR>
&nbsp;&nbsp;&nbsp;<B>procedure</B>&nbsp;Read&nbsp;(F&nbsp;:&nbsp;<B>in</B>&nbsp;File_Name;&nbsp;Item&nbsp;:&nbsp;<B>out</B>&nbsp;Integer)&nbsp;<B>is</B>&nbsp;...&nbsp;<B>end</B>;<BR>
&nbsp;&nbsp;&nbsp;<B>procedure</B>&nbsp;Write(F&nbsp;:&nbsp;<B>in</B>&nbsp;File_Name;&nbsp;Item&nbsp;:&nbsp;<B>in</B>&nbsp;&nbsp;Integer)&nbsp;<B>is</B>&nbsp;...&nbsp;<B>end</B>;<BR>
<B>begin</B><BR>
&nbsp;&nbsp;&nbsp;...<BR>
<B>end</B>&nbsp;IO_Package;</DIV>
<DIV Class="NotesHeader">NOTES</DIV>
<DIV Class="paranum">21</DIV>
<DIV Class="Notes">18&nbsp;&nbsp;<I>Notes on the example:</I> In the 
example above, an outside subprogram making use of IO_Package may obtain 
a file name by calling Open and later use it in calls to Read and Write. 
Thus, outside the package, a file name obtained from Open acts as a kind 
of password; its internal properties (such as containing a numeric value) 
are not known and no other operations (such as addition or comparison 
of internal names) can be performed on a file name. Most importantly, 
clients of the package cannot make copies of objects of type File_Name.</DIV>
<DIV Class="paranum">22</DIV>
<DIV Class="Notes">This example is characteristic of any case where complete 
control over the operations of a type is desired. Such packages serve 
a dual purpose. They prevent a user from making use of the internal structure 
of the type. They also implement the notion of an encapsulated data type 
where the only operations on the type are those given in the package 
specification.</DIV>
<DIV Class="paranum">23/2</DIV>
<DIV Class="Notes">{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AIs/AI-10318.TXT">AI95-00318-02</A></I>} 
The fact that the full view of File_Name is explicitly declared <B>limited</B> 
means that parameter passing <SPAN class="delete2">and function return 
</SPAN>will always be by reference<SPAN class="insert2">&nbsp;and function 
results will always be built directly in the result object</SPAN> (see 
<A HREF="AA-6-2.html">6.2</A> and <A HREF="AA-6-5.html">6.5</A>).</DIV>

<H4 Class="centered">Extensions to Ada 83</H4>
<DIV Class="paranum">23.a</DIV>
<DIV Class="Annotations">{<I>extensions to Ada 83</I>} <A NAME="I3624"></A>The 
restrictions in RM83-7.4.4(4), which disallowed <B>out</B> parameters 
of limited types in certain cases, are removed.&nbsp;</DIV>

<H4 Class="centered">Wording Changes from Ada 83</H4>
<DIV Class="paranum">23.b</DIV>
<DIV Class="Annotations">Since limitedness and privateness are orthogonal 
in Ada 95 (and to some extent in Ada 83), this is now its own clause 
rather than being a subclause of <A HREF="AA-7-3.html">7.3</A>, &ldquo;<A HREF="AA-7-3.html">Private 
Types and Private Extensions</A>&rdquo;.&nbsp;</DIV>

<H4 Class="centered">Extensions to Ada 95</H4>
<DIV Class="paranum">23.c/2</DIV>
<DIV Class="Annotations">{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AIs/AI-00287.TXT">AI95-00287-01</A></I>} 
<SPAN class="insert2"></SPAN>{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AIs/AI-10318.TXT">AI95-00318-02</A></I>} 
<SPAN class="insert2">{<I>extensions to Ada 95</I>} <A NAME="I3625"></A>Limited 
types now have an assignment operation, but its use is restricted such 
that all uses are build-in-place. This is accomplished by restricting 
uses to <SPAN Class="swiss"><A HREF="AA-4-3.html#S0104">aggregate</A></SPAN>s 
and <SPAN Class="swiss"><A HREF="AA-6-4.html#S0164">function_call</A></SPAN>s. 
<SPAN Class="swiss"><A HREF="AA-4-3.html#S0104">Aggregate</A></SPAN>s 
were not allowed to have a limited type in Ada 95, which causes a compatibility 
issue discussed in <A HREF="AA-4-3.html">4.3</A>, &ldquo;<A HREF="AA-4-3.html">Aggregates</A>&rdquo;. 
Compatibility issues with return statements for limited <SPAN Class="swiss"><A HREF="AA-6-4.html#S0164">function_call</A></SPAN>s 
are discussed in <A HREF="AA-6-5.html">6.5</A>, &ldquo;<A HREF="AA-6-5.html">Return 
Statements</A>&rdquo;.</SPAN>&nbsp;</DIV>

<H4 Class="centered">Wording Changes from Ada 95</H4>
<DIV Class="paranum">23.d/2</DIV>
<DIV Class="Annotations">{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AIs/AI-00411.TXT">AI95-00411-01</A></I>} 
<SPAN class="insert2"></SPAN>{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AIs/AI-00419.TXT">AI95-00419-01</A></I>} 
<SPAN class="insert2">Rewrote the definition of limited to ensure that 
interfaces are covered, but that limitedness is not inherited from interfaces. 
Derived types that explicitly include <B>limited</B> are now also covered.</SPAN> 
</DIV>

<HR>
<DIV Style="margin-top: 0.0em; margin-bottom: 0.6em"><A HREF="AA-TOC.html"><IMG SRC="cont.gif" ALT="Contents" BORDER=0></A>&nbsp;
&nbsp;<A HREF="AA-0-5.html"><IMG SRC="index.gif" ALT="Index" BORDER=0></A>&nbsp;
&nbsp;<A HREF="AA-STDS.html"><IMG SRC="lib.gif" ALT="References" BORDER=0></A>&nbsp;
&nbsp;<A HREF="AA-SRCH.html"><IMG SRC="find.gif" ALT="Search" BORDER=0></A>&nbsp;
&nbsp;<A HREF="AA-7-4.html"><IMG SRC="prev.gif" ALT="Previous" BORDER=0></A>&nbsp;
&nbsp;<A HREF="AA-7-6.html"><IMG SRC="next.gif" ALT="Next" BORDER=0></A>&nbsp;
</DIV>
<DIV Style="margin-top:0.0em"><IMG SRC="AE_logo.gif" height=100 width=113 align=right ALT="Ada-Europe">
<SPAN Style="font-size: 125%">Sponsored by <SPAN Style="font-size: 125%"><A HREF="http://www.ada-europe.org/"><B>Ada-Europe</B></A></SPAN></SPAN></DIV>
</BODY>
</HTML>
