<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
"http://www.w3.org/TR/html4/loose.dtd">
<HTML>
<HEAD>
    <TITLE>Record Aggregates</TITLE>
    <META http-equiv="Content-Type" content="text/html; charset=iso-8859-1">
    <META NAME="Author" CONTENT="JTC1/SC22/WG9/ARG, by Randall Brukardt, ARG Editor">
    <META NAME="GENERATOR" CONTENT="Arm_Form.Exe, Ada Reference Manual generator">
    <STYLE type="text/css">
    H4.centered {text-align: center}
    SPAN.swiss {font-family: Arial, Helvetica, sans-serif; font-size: 92%}
    SPAN.roman {font-family: "Times New Roman", Times, serif}
    DIV.paranum {float: left; font-family: Arial, Helvetica, sans-serif; font-size: 64%; width: 2.8em; margin-left: -0.4em; margin-right: -3.0em; margin-top: 0.2em}
    TT {font-family: "Courier New", monospace}
    DT {display: compact}
    SPAN.insert2 {text-decoration: underline; color: rgb(0,102,0) }
    SPAN.delete2 {text-decoration: line-through; color: rgb(0,102,0) }
    DIV.Normal {font-family: "Times New Roman", Times, serif; line-height: 122%; margin-left: 1.2em; margin-bottom: 0.6em}
    DIV.Wide {font-family: "Times New Roman", Times, serif; line-height: 122%; margin-left: 1.2em; margin-top: 0.6em; margin-bottom: 0.6em}
    DIV.Annotations {font-family: "Times New Roman", Times, serif; font-size: 80%; line-height: 122%; margin-left: 6.2em; margin-bottom: 0.6em}
    DIV.Notes {font-family: "Times New Roman", Times, serif; font-size: 80%; line-height: 122%; margin-left: 3.7em; margin-bottom: 0.6em}
    DIV.NotesHeader {font-family: "Times New Roman", Times, serif; font-size: 80%; line-height: 122%; margin-left: 3.7em}
    DIV.SyntaxIndented {font-family: "Times New Roman", Times, serif; line-height: 122%; margin-left: 3.2em; margin-bottom: 0.4em}
    DIV.Examples {font-family: "Courier New", monospace; font-size: 90%; line-height: 122%; margin-left: 3.4em; margin-bottom: 0.6em}
    UL.Bulleted {font-family: "Times New Roman", Times, serif; line-height: 122%; margin-left: 3.2em; margin-right: 2.0em; margin-top: 0em; margin-bottom: 0.5em}
    </STYLE>
</HEAD>
<BODY TEXT="#000000" BGCOLOR="#FFFFF0" LINK="#000080" VLINK="#330033" ALINK="#0000FF">
<DIV><B><SPAN Style="font-size:200%; color: rgb(0,51,153)">Annotated</SPAN><SPAN Style="font-size:200%; color: rgb(0,0,102)">&nbsp;Ada Reference Manual</SPAN></B> &mdash; <A HREF="AA-TTL.html"><B>Legal Information</B></A></DIV>
<DIV Style="margin-top: 0.6em; margin-bottom: 0.0em"><A HREF="AA-TOC.html"><IMG SRC="cont.gif" ALT="Contents" BORDER=0></A>&nbsp;
&nbsp;<A HREF="AA-0-5.html"><IMG SRC="index.gif" ALT="Index" BORDER=0></A>&nbsp;
&nbsp;<A HREF="AA-STDS.html"><IMG SRC="lib.gif" ALT="References" BORDER=0></A>&nbsp;
&nbsp;<A HREF="AA-SRCH.html"><IMG SRC="find.gif" ALT="Search" BORDER=0></A>&nbsp;
&nbsp;<A HREF="AA-4-3.html"><IMG SRC="prev.gif" ALT="Previous" BORDER=0></A>&nbsp;
&nbsp;<A HREF="AA-4-3-2.html"><IMG SRC="next.gif" ALT="Next" BORDER=0></A>&nbsp;
</DIV>
<HR>
<H1>4.3.1 Record Aggregates</H1>
<DIV Class="paranum">1</DIV>
<DIV Class="Normal">[In a <SPAN Class="swiss"><A HREF="AA-4-3-1.html#S0105">record_aggregate</A></SPAN>, 
a value is specified for each component of the record or record extension 
value, using either a named or a positional association.]&nbsp;</DIV>

<H4 Class="centered">Syntax</H4>
<DIV Class="paranum">2</DIV>
<DIV Class="SyntaxIndented"><SPAN Class="swiss">record_aggregate</SPAN><A NAME="I2605"></A><A NAME="S0105"></A><SPAN Class="swiss">&nbsp;::=&nbsp;</SPAN>(<A NAME="I2606"></A><SPAN Class="swiss"><A HREF="AA-4-3-1.html#S0106">record_component_association_list</A></SPAN>)</DIV>
<DIV Class="paranum">3</DIV>
<DIV Class="SyntaxIndented"><SPAN Class="swiss">record_component_association_list</SPAN><A NAME="I2607"></A><A NAME="S0106"></A><SPAN Class="swiss">&nbsp;::=&nbsp;</SPAN><BR>
&nbsp;&nbsp;&nbsp;&nbsp;<A NAME="I2608"></A><SPAN Class="swiss"><A HREF="AA-4-3-1.html#S0107">record_component_association</A></SPAN>&nbsp;{,&nbsp;<A NAME="I2609"></A><SPAN Class="swiss"><A HREF="AA-4-3-1.html#S0107">record_component_association</A></SPAN>}<BR>
&nbsp;&nbsp;|&nbsp;<B>null&nbsp;record</B></DIV>
<DIV Class="paranum">4/2</DIV>
<DIV Class="SyntaxIndented">{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AIs/AI-00287.TXT">AI95-00287-01</A></I>} 
<SPAN Class="swiss">record_component_association</SPAN><A NAME="I2610"></A><A NAME="S0107"></A><SPAN Class="swiss">&nbsp;::=&nbsp;</SPAN><BR>
&nbsp;&nbsp;&nbsp;&nbsp;[<A NAME="I2611"></A><SPAN Class="swiss"><A HREF="AA-4-3-1.html#S0108">component_choice_list</A></SPAN>&nbsp;=&gt;]&nbsp;<A NAME="I2612"></A><SPAN Class="swiss"><A HREF="AA-4-4.html#S0115">expression</A></SPAN><SPAN class="insert2"><BR>
&nbsp;&nbsp;&nbsp;|&nbsp;<A NAME="I2613"></A><SPAN Class="swiss"><A HREF="AA-4-3-1.html#S0108">component_choice_list</A></SPAN>&nbsp;=&gt;&nbsp;&lt;&gt;</SPAN></DIV>
<DIV Class="paranum">5</DIV>
<DIV Class="SyntaxIndented"><SPAN Class="swiss">component_choice_list</SPAN><A NAME="I2614"></A><A NAME="S0108"></A><SPAN Class="swiss">&nbsp;::=&nbsp;</SPAN><BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<I>component_</I><A NAME="I2615"></A><SPAN Class="swiss"><A HREF="AA-4-1-3.html#S0099">selector_name</A></SPAN>&nbsp;{|&nbsp;<I>component_</I><A NAME="I2616"></A><SPAN Class="swiss"><A HREF="AA-4-1-3.html#S0099">selector_name</A></SPAN>}<BR>
&nbsp;&nbsp;&nbsp;|&nbsp;<B>others</B></DIV>
<DIV Class="paranum">6</DIV>
<DIV Class="SyntaxIndented"><SPAN STYLE="font-size: 80%">{<I>named component 
association</I>}</SPAN> <A NAME="I2617"></A>A <SPAN Class="swiss"><A HREF="AA-4-3-1.html#S0107">record_component_association</A></SPAN> 
is a <I>named component association</I> if it has a <SPAN Class="swiss"><A HREF="AA-4-3-1.html#S0108">component_choice_list</A></SPAN>; 
<SPAN STYLE="font-size: 80%">{<I>positional component association</I>}</SPAN> 
<A NAME="I2618"></A>otherwise, it is a <I>positional component association</I>. 
Any positional component associations shall precede any named component 
associations. If there is a named association with a <SPAN Class="swiss"><A HREF="AA-4-3-1.html#S0108">component_choice_list</A></SPAN> 
of <B>others</B>, it shall come last.&nbsp;</DIV>
<DIV Class="paranum">6.a</DIV>
<DIV Class="Annotations"><B>Discussion:&nbsp;</B>These rules were implied 
by the BNF in an early version of the RM9X, but it made the grammar harder 
to read, and was inconsistent with how we handle discriminant constraints. 
Note that for array aggregates we still express some of the rules in 
the grammar, but array aggregates are significantly different because 
an array aggregate is either all positional (with a possible <B>others</B> 
at the end), or all named.&nbsp;</DIV>
<DIV Class="paranum">7</DIV>
<DIV Class="SyntaxIndented">In the <SPAN Class="swiss"><A HREF="AA-4-3-1.html#S0106">record_component_association_list</A></SPAN> 
for a <SPAN Class="swiss"><A HREF="AA-4-3-1.html#S0105">record_aggregate</A></SPAN>, 
if there is only one association, it shall be a named association.&nbsp;</DIV>
<DIV Class="paranum">7.a</DIV>
<DIV Class="Annotations"><B>Reason:&nbsp;</B>Otherwise the construct would 
be interpreted as a parenthesized expression. This is considered a syntax 
rule, since it is relevant to overload resolution. We choose not to express 
it with BNF so we can share the definition of <SPAN Class="swiss"><A HREF="AA-4-3-1.html#S0106">record_component_association_list</A></SPAN> 
in both <SPAN Class="swiss"><A HREF="AA-4-3-1.html#S0105">record_aggregate</A></SPAN> 
and <SPAN Class="swiss"><A HREF="AA-4-3-2.html#S0109">extension_aggregate</A></SPAN>. 
</DIV>
<DIV Class="paranum">7.b</DIV>
<DIV Class="Annotations"><B>Ramification:&nbsp;</B>The <SPAN Class="swiss"><A HREF="AA-4-3-1.html#S0106">record_component_association_list</A></SPAN> 
of an <SPAN Class="swiss"><A HREF="AA-4-3-2.html#S0109">extension_aggregate</A></SPAN> 
does not have such a restriction.&nbsp;</DIV>

<H4 Class="centered">Name Resolution Rules</H4>
<DIV Class="paranum">8/2</DIV>
<DIV Class="Normal">{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AIs/AI-00287.TXT">AI95-00287-01</A></I>} 
<SPAN STYLE="font-size: 80%">{<I>expected type (record_aggregate)</I> 
[partial]}</SPAN> <A NAME="I2619"></A>The expected type for a <SPAN Class="swiss"><A HREF="AA-4-3-1.html#S0105">record_aggregate</A></SPAN> 
shall be a single <SPAN class="delete2">nonlimited&nbsp;</SPAN>record type 
or record extension.&nbsp;</DIV>
<DIV Class="paranum">8.a</DIV>
<DIV Class="Annotations"><B>Ramification:&nbsp;</B>This rule is used to resolve 
whether an <SPAN Class="swiss"><A HREF="AA-4-3.html#S0104">aggregate</A></SPAN> 
is an <SPAN Class="swiss"><A HREF="AA-4-3-3.html#S0111">array_aggregate</A></SPAN> 
or a <SPAN Class="swiss"><A HREF="AA-4-3-1.html#S0105">record_aggregate</A></SPAN>. 
The presence of a <B>with</B> is used to resolve between a <SPAN Class="swiss"><A HREF="AA-4-3-1.html#S0105">record_aggregate</A></SPAN> 
and an <SPAN Class="swiss"><A HREF="AA-4-3-2.html#S0109">extension_aggregate</A></SPAN>. 
</DIV>
<DIV Class="paranum">9</DIV>
<DIV Class="Normal"><SPAN STYLE="font-size: 80%">{<I>needed component 
(record_aggregate record_component_association_list)</I>}</SPAN> <A NAME="I2620"></A>For 
the <SPAN Class="swiss"><A HREF="AA-4-3-1.html#S0106">record_component_association_list</A></SPAN> 
of a <SPAN Class="swiss"><A HREF="AA-4-3-1.html#S0105">record_aggregate</A></SPAN>, 
all components of the composite value defined by the aggregate are <I>needed</I>[; 
for the association list of an <SPAN Class="swiss"><A HREF="AA-4-3-2.html#S0109">extension_aggregate</A></SPAN>, 
only those components not determined by the ancestor expression or subtype 
are needed (see <A HREF="AA-4-3-2.html">4.3.2</A>).] Each <SPAN Class="swiss"><A HREF="AA-4-1-3.html#S0099">selector_name</A></SPAN> 
in a <SPAN Class="swiss"><A HREF="AA-4-3-1.html#S0107">record_component_association</A></SPAN> 
shall denote a needed component [(including possibly a discriminant)]. 
</DIV>
<DIV Class="paranum">9.a</DIV>
<DIV Class="Annotations"><B>Ramification:&nbsp;</B>For the association list 
of a <SPAN Class="swiss"><A HREF="AA-4-3-1.html#S0105">record_aggregate</A></SPAN>, 
&ldquo;needed components&rdquo; includes every component of the composite 
value, but does not include those in unchosen <SPAN Class="swiss"><A HREF="AA-3-8-1.html#S0072">variant</A></SPAN>s 
(see AI83-309). If there are <SPAN Class="swiss"><A HREF="AA-3-8-1.html#S0072">variant</A></SPAN>s, 
then the value specified for the discriminant that governs them determines 
which <SPAN Class="swiss"><A HREF="AA-3-8-1.html#S0072">variant</A></SPAN> 
is chosen, and hence which components are needed.</DIV>
<DIV Class="paranum">9.b</DIV>
<DIV Class="Annotations">If an extension defines a new <SPAN Class="swiss"><A HREF="AA-3-7.html#S0061">known_discriminant_part</A></SPAN>, 
then all of its discriminants are needed in the component association 
list of an extension aggregate for that type, even if the discriminants 
have the same names and types as discriminants of the type of the ancestor 
expression. This is necessary to ensure that the positions in the <SPAN Class="swiss"><A HREF="AA-4-3-1.html#S0106">record_component_association_list</A></SPAN> 
are well defined, and that discriminants that govern <SPAN Class="swiss"><A HREF="AA-3-8-1.html#S0071">variant_part</A></SPAN>s 
can be given by static expressions.&nbsp;</DIV>
<DIV Class="paranum">10</DIV>
<DIV Class="Normal" Style="margin-bottom: 0.4em"><SPAN STYLE="font-size: 80%">{<I>expected 
type (record_component_association expression)</I> [partial]}</SPAN> 
<A NAME="I2621"></A>The expected type for the <SPAN Class="swiss"><A HREF="AA-4-4.html#S0115">expression</A></SPAN> 
of a <SPAN Class="swiss"><A HREF="AA-4-3-1.html#S0107">record_component_association</A></SPAN> 
is the type of the <I>associated</I> component(s); <SPAN STYLE="font-size: 80%">{<I>associated 
components (of a record_component_association)</I>}</SPAN> <A NAME="I2622"></A>the 
associated component(s) are as follows:&nbsp;</DIV>
<DIV Class="paranum">11</DIV>
<UL Class="Bulleted"><LI TYPE=DISC>For a positional association, the 
component [(including possibly a discriminant)] in the corresponding 
relative position (in the declarative region of the type), counting only 
the needed components;&nbsp;</LI></UL>
<DIV Class="paranum">11.a</DIV>
<DIV Class="Annotations"><B>Ramification:&nbsp;</B>This means that for an 
association list of an <SPAN Class="swiss"><A HREF="AA-4-3-2.html#S0109">extension_aggregate</A></SPAN>, 
only noninherited components are counted to determine the position.&nbsp;</DIV>
<DIV Class="paranum">12</DIV>
<UL Class="Bulleted"><LI TYPE=DISC>For a named association with one or 
more <I>component_</I><SPAN Class="swiss"><A HREF="AA-4-1-3.html#S0099">selector_name</A></SPAN>s, 
the named component(s);</LI></UL>
<DIV Class="paranum">13</DIV>
<UL Class="Bulleted"><LI TYPE=DISC>For a named association with the reserved 
word <B>others</B>, all needed components that are not associated with 
some previous association.&nbsp;</LI></UL>

<H4 Class="centered">Legality Rules</H4>
<DIV Class="paranum">14</DIV>
<DIV Class="Normal">If the type of a <SPAN Class="swiss"><A HREF="AA-4-3-1.html#S0105">record_aggregate</A></SPAN> 
is a record extension, then it shall be a descendant of a record type, 
through one or more record extensions (and no private extensions).</DIV>
<DIV Class="paranum">15</DIV>
<DIV Class="Normal">If there are no components needed in a given <SPAN Class="swiss"><A HREF="AA-4-3-1.html#S0106">record_component_association_list</A></SPAN>, 
then the reserved words <B>null record</B> shall appear rather than a 
list of <SPAN Class="swiss"><A HREF="AA-4-3-1.html#S0107">record_component_association</A></SPAN>s. 
</DIV>
<DIV Class="paranum">15.a</DIV>
<DIV Class="Annotations"><B>Ramification:&nbsp;</B>For example, &quot;(<B>null 
record</B>)&quot; is a <SPAN Class="swiss"><A HREF="AA-4-3-1.html#S0105">record_aggregate</A></SPAN> 
for a null record type. Similarly, &quot;(T'(A) <B>with null record</B>)&quot; 
is an <SPAN Class="swiss"><A HREF="AA-4-3-2.html#S0109">extension_aggregate</A></SPAN> 
for a type defined as a null record extension of T.&nbsp;</DIV>
<DIV Class="paranum">16/2</DIV>
<DIV Class="Normal">&nbsp;{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AIs/AI-00287.TXT">AI95-00287-01</A></I>} 
Each <SPAN Class="swiss"><A HREF="AA-4-3-1.html#S0107">record_component_association</A></SPAN><SPAN class="insert2">&nbsp;other than an <B>others</B> choice with a &lt;&gt;</SPAN> shall have 
at least one associated component, and each needed component shall be 
associated with exactly one <SPAN Class="swiss"><A HREF="AA-4-3-1.html#S0107">record_component_association</A></SPAN>. 
If a <SPAN Class="swiss"><A HREF="AA-4-3-1.html#S0107">record_component_association</A></SPAN> 
<SPAN class="insert2">with an <SPAN Class="swiss"><A HREF="AA-4-4.html#S0115">expression</A></SPAN> 
</SPAN>has two or more associated components, all of them shall be of 
the same type.&nbsp;</DIV>
<DIV Class="paranum">16.a/2</DIV>
<DIV Class="Annotations"><B>Ramification:&nbsp;</B>{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AIs/AI-00287.TXT">AI95-00287-01</A></I>} 
These rules apply to an association with an <B>others</B> choice<SPAN class="insert2">&nbsp;with an expression. An <B>others</B> choice with a &lt;&gt; can match 
zero components or several components with different types.</SPAN>.&nbsp;</DIV>
<DIV Class="paranum">16.b/2</DIV>
<DIV Class="Annotations"><B>Reason:&nbsp;</B>{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AIs/AI-00287.TXT">AI95-00287-01</A></I>} 
Without these rules, there would be no way to know what was the expected 
type for the <SPAN Class="swiss"><A HREF="AA-4-4.html#S0115">expression</A></SPAN> 
of the association. <SPAN class="insert2">Note that some of the rules 
do not apply to &lt;&gt; associations, as we do not need to resolve anything. 
We allow <B>others</B> =&gt; &lt;&gt; to match no components as this 
is similar to array aggregates. That means that (<B>others</B> =&gt; 
&lt;&gt;) always represents a default-initialized record or array value.</SPAN> 
</DIV>
<DIV Class="paranum">16.c</DIV>
<DIV Class="Annotations"><B>Discussion:&nbsp;</B>AI83-00244 also requires 
that the <SPAN Class="swiss"><A HREF="AA-4-4.html#S0115">expression</A></SPAN> 
shall be legal for each associated component. This is because even though 
two components have the same type, they might have different subtypes. 
Therefore, the legality of the <SPAN Class="swiss"><A HREF="AA-4-4.html#S0115">expression</A></SPAN>, 
particularly if it is an array aggregate, might differ depending on the 
associated component's subtype. However, we have relaxed the rules on 
array aggregates slightly for Ada 95, so the staticness of an applicable 
index constraint has no effect on the legality of the array aggregate 
to which it applies. See <A HREF="AA-4-3-3.html">4.3.3</A>. This was 
the only case (that we know of) where a subtype provided by context affected 
the legality of an <SPAN Class="swiss"><A HREF="AA-4-4.html#S0115">expression</A></SPAN>. 
</DIV>
<DIV Class="paranum">16.d</DIV>
<DIV Class="Annotations"><B>Ramification:&nbsp;</B>The rule that requires 
at least one associated component for each <SPAN Class="swiss"><A HREF="AA-4-3-1.html#S0107">record_component_association</A></SPAN> 
implies that there can be no extra associations for components that don't 
exist in the composite value, or that are already determined by the ancestor 
expression or subtype of an <SPAN Class="swiss"><A HREF="AA-4-3-2.html#S0109">extension_aggregate</A></SPAN>.</DIV>
<DIV Class="paranum">16.e</DIV>
<DIV Class="Annotations">The second part of the first sentence ensures 
that no needed components are left out, nor specified twice.&nbsp;</DIV>
<DIV Class="paranum">17</DIV>
<DIV Class="Normal">If the components of a <SPAN Class="swiss"><A HREF="AA-3-8-1.html#S0071">variant_part</A></SPAN> 
are needed, then the value of a discriminant that governs the <SPAN Class="swiss"><A HREF="AA-3-8-1.html#S0071">variant_part</A></SPAN> 
shall be given by a static expression.&nbsp;</DIV>
<DIV Class="paranum">17.a</DIV>
<DIV Class="Annotations"><B>Ramification:&nbsp;</B>This expression might either 
be given within the aggregate itself, or in a constraint on the parent 
subtype in a <SPAN Class="swiss"><A HREF="AA-3-4.html#S0035">derived_type_definition</A></SPAN> 
for some ancestor of the type of the aggregate.&nbsp;</DIV>
<DIV Class="paranum">17.1/2</DIV>
<DIV Class="Normal">&nbsp;&nbsp;&nbsp;{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AIs/AI-00287.TXT">AI95-00287-01</A></I>} 
<SPAN class="insert2">A <SPAN Class="swiss"><A HREF="AA-4-3-1.html#S0107">record_component_association</A></SPAN> 
for a discriminant without a <SPAN Class="swiss"><A HREF="AA-3-7.html#S0063">default_expression</A></SPAN> 
shall have an <SPAN Class="swiss"><A HREF="AA-4-4.html#S0115">expression</A></SPAN> 
rather than &lt;&gt;.</SPAN>&nbsp;</DIV>
<DIV Class="paranum">17.b/2</DIV>
<DIV Class="Annotations"><SPAN class="insert2"><B>Reason:&nbsp;</B>A discriminant 
must always have a defined value, but &lt;&gt; means uninitialized for 
a discrete type unless the component has a default value.</SPAN>&nbsp;</DIV>

<H4 Class="centered">Dynamic Semantics</H4>
<DIV Class="paranum">18</DIV>
<DIV Class="Normal"><SPAN STYLE="font-size: 80%">{<I>evaluation (record_aggregate)</I> 
[partial]}</SPAN> <A NAME="I2623"></A>The evaluation of a <SPAN Class="swiss"><A HREF="AA-4-3-1.html#S0105">record_aggregate</A></SPAN> 
consists of the evaluation of the <SPAN Class="swiss"><A HREF="AA-4-3-1.html#S0106">record_component_association_list</A></SPAN>.</DIV>
<DIV Class="paranum">19</DIV>
<DIV Class="Normal"><SPAN STYLE="font-size: 80%">{<I>evaluation (record_component_association_list)</I> 
[partial]}</SPAN> <A NAME="I2624"></A>For the evaluation of a <SPAN Class="swiss"><A HREF="AA-4-3-1.html#S0106">record_component_association_list</A></SPAN>, 
any per-object constraints (see <A HREF="AA-3-8.html">3.8</A>) for components 
specified in the association list are elaborated and any <SPAN Class="swiss"><A HREF="AA-4-4.html#S0115">expression</A></SPAN>s 
are evaluated and converted to the subtype of the associated component. 
<SPAN STYLE="font-size: 80%">{<I>implicit subtype conversion (expressions 
in aggregate)</I> [partial]}</SPAN> <A NAME="I2625"></A>Any constraint 
elaborations and <SPAN Class="swiss"><A HREF="AA-4-4.html#S0115">expression</A></SPAN> 
evaluations (and conversions) occur in an arbitrary order, except that 
the <SPAN Class="swiss"><A HREF="AA-4-4.html#S0115">expression</A></SPAN> 
for a discriminant is evaluated (and converted) prior to the elaboration 
of any per-object constraint that depends on it, which in turn occurs 
prior to the evaluation and conversion of the <SPAN Class="swiss"><A HREF="AA-4-4.html#S0115">expression</A></SPAN> 
for the component with the per-object constraint.&nbsp;</DIV>
<DIV Class="paranum">19.a</DIV>
<DIV Class="Annotations"><B>Ramification:&nbsp;</B>The conversion in the first 
rule might raise Constraint_Error.&nbsp;</DIV>
<DIV Class="paranum">19.b</DIV>
<DIV Class="Annotations"><B>Discussion:&nbsp;</B>This check in the first rule 
presumably happened as part of the dependent compatibility check in Ada 
83.&nbsp;</DIV>
<DIV Class="paranum">19.1/2</DIV>
<DIV Class="Normal">&nbsp;&nbsp;&nbsp;{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AIs/AI-00287.TXT">AI95-00287-01</A></I>} 
<SPAN class="insert2">For a <SPAN Class="swiss"><A HREF="AA-4-3-1.html#S0107">record_component_association</A></SPAN> 
with an <SPAN Class="swiss"><A HREF="AA-4-4.html#S0115">expression</A></SPAN>, 
the <SPAN Class="swiss"><A HREF="AA-4-4.html#S0115">expression</A></SPAN> 
defines the value for the associated component(s). For a <SPAN Class="swiss"><A HREF="AA-4-3-1.html#S0107">record_component_association</A></SPAN> 
with &lt;&gt;, if the <SPAN Class="swiss"><A HREF="AA-3-8.html#S0070">component_declaration</A></SPAN> 
has a <SPAN Class="swiss"><A HREF="AA-3-7.html#S0063">default_expression</A></SPAN>, 
that <SPAN Class="swiss"><A HREF="AA-3-7.html#S0063">default_expression</A></SPAN> 
defines the value for the associated component(s); otherwise, the associated 
component(s) are initialized by default as for a stand-alone object of 
the component subtype (see <A HREF="AA-3-3-1.html">3.3.1</A>).</SPAN></DIV>
<DIV Class="paranum">20</DIV>
<DIV Class="Normal">The <SPAN Class="swiss"><A HREF="AA-4-4.html#S0115">expression</A></SPAN> 
of a <SPAN Class="swiss"><A HREF="AA-4-3-1.html#S0107">record_component_association</A></SPAN> 
is evaluated (and converted) once for each associated component.</DIV>
<DIV Class="NotesHeader">NOTES</DIV>
<DIV Class="paranum">21</DIV>
<DIV Class="Notes">7&nbsp;&nbsp;For a <SPAN Class="swiss"><A HREF="AA-4-3-1.html#S0105">record_aggregate</A></SPAN> 
with positional associations, expressions specifying discriminant values 
appear first since the <SPAN Class="swiss"><A HREF="AA-3-7.html#S0061">known_discriminant_part</A></SPAN> 
is given first in the declaration of the type; they have to be in the 
same order as in the <SPAN Class="swiss"><A HREF="AA-3-7.html#S0061">known_discriminant_part</A></SPAN>. 
</DIV>

<H4 Class="centered">Examples</H4>
<DIV Class="paranum">22</DIV>
<DIV Class="Normal" Style="margin-bottom: 0.4em"><I>Example of a record 
aggregate with positional associations:</I>&nbsp;</DIV>
<DIV Class="paranum">23</DIV>
<DIV Class="Examples">(4,&nbsp;July,&nbsp;1776)&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;--<SPAN Class="roman"><I>&nbsp;&nbsp;see&nbsp;<A HREF="AA-3-8.html">3.8</A>&nbsp;</I></SPAN></DIV>
<DIV Class="paranum">24</DIV>
<DIV Class="Wide" Style="margin-bottom: 0.4em"><I>Examples of record 
aggregates with named associations:</I>&nbsp;</DIV>
<DIV Class="paranum">25</DIV>
<DIV Class="Examples">(Day&nbsp;=&gt;&nbsp;4,&nbsp;Month&nbsp;=&gt;&nbsp;July,&nbsp;Year&nbsp;=&gt;&nbsp;1776)<BR>
(Month&nbsp;=&gt;&nbsp;July,&nbsp;Day&nbsp;=&gt;&nbsp;4,&nbsp;Year&nbsp;=&gt;&nbsp;1776)</DIV>
<DIV Class="paranum">26</DIV>
<DIV Class="Examples">(Disk,&nbsp;Closed,&nbsp;Track&nbsp;=&gt;&nbsp;5,&nbsp;Cylinder&nbsp;=&gt;&nbsp;12)&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;--<SPAN Class="roman"><I>&nbsp;&nbsp;see&nbsp;<A HREF="AA-3-8-1.html">3.8.1</A></I></SPAN><BR>
(Unit&nbsp;=&gt;&nbsp;Disk,&nbsp;Status&nbsp;=&gt;&nbsp;Closed,&nbsp;Cylinder&nbsp;=&gt;&nbsp;9,&nbsp;Track&nbsp;=&gt;&nbsp;1)</DIV>
<DIV Class="paranum">27/2</DIV>
<DIV Class="Wide" Style="margin-bottom: 0.4em">&nbsp;{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AIs/AI-00287.TXT">AI95-00287-01</A></I>} 
<I></I><SPAN class="insert2"><I>Examples</I></SPAN><I></I><SPAN class="delete2"><I>&nbsp;Example</I></SPAN><I>&nbsp;of component&nbsp;</I><SPAN class="insert2"><I>associations</I></SPAN><I></I><SPAN class="delete2"><I>&nbsp;association</I></SPAN><I>&nbsp;with several choices:</I>&nbsp;</DIV>
<DIV Class="paranum">28</DIV>
<DIV Class="Examples">(Value&nbsp;=&gt;&nbsp;0,&nbsp;Succ|Pred&nbsp;=&gt;&nbsp;<B>new</B>&nbsp;Cell'(0,&nbsp;<B>null</B>,&nbsp;<B>null</B>))&nbsp;&nbsp;&nbsp;--<SPAN Class="roman"><I>&nbsp;&nbsp;see&nbsp;<A HREF="AA-3-10-1.html">3.10.1</A></I></SPAN></DIV>
<DIV Class="paranum">29</DIV>
<DIV Class="Examples">&nbsp;--<SPAN Class="roman"><I>&nbsp;&nbsp;The&nbsp;allocator&nbsp;is&nbsp;evaluated&nbsp;twice:&nbsp;Succ&nbsp;and&nbsp;Pred&nbsp;designate&nbsp;different&nbsp;cells</I></SPAN></DIV>
<DIV Class="paranum">29.1/2</DIV>
<DIV Class="Examples"><SPAN class="insert2">(Value&nbsp;=&gt;&nbsp;0,&nbsp;Succ|Pred&nbsp;=&gt;&nbsp;&lt;&gt;)&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;--<SPAN Class="roman"><I>&nbsp;&nbsp;see&nbsp;<A HREF="AA-3-10-1.html">3.10.1</A></I></SPAN></SPAN></DIV>
<DIV Class="paranum">29.2/2</DIV>
<DIV Class="Examples"><SPAN class="insert2">&nbsp;--<SPAN Class="roman"><I>&nbsp;&nbsp;Succ&nbsp;and&nbsp;Pred&nbsp;will&nbsp;be&nbsp;set&nbsp;to&nbsp;<B>null</B></I></SPAN></SPAN></DIV>
<DIV Class="paranum">30</DIV>
<DIV Class="Wide" Style="margin-bottom: 0.4em"><I>Examples of record 
aggregates for tagged types (see <A HREF="AA-3-9.html">3.9</A> and <A HREF="AA-3-9-1.html">3.9.1</A>):</I> 
</DIV>
<DIV Class="paranum">31</DIV>
<DIV Class="Examples">Expression'(<B>null&nbsp;record</B>)<BR>
Literal'(Value&nbsp;=&gt;&nbsp;0.0)<BR>
Painted_Point'(0.0,&nbsp;Pi/2.0,&nbsp;Paint&nbsp;=&gt;&nbsp;Red)</DIV>

<H4 Class="centered">Extensions to Ada 83</H4>
<DIV Class="paranum">31.a</DIV>
<DIV Class="Annotations">{<I>extensions to Ada 83</I>} <A NAME="I2626"></A>Null 
record aggregates may now be specified, via &quot;(<B>null record</B>)&quot;. 
However, this syntax is more useful for null record extensions in extension 
aggregates.&nbsp;</DIV>

<H4 Class="centered">Wording Changes from Ada 83</H4>
<DIV Class="paranum">31.b</DIV>
<DIV Class="Annotations">Various AIs have been incorporated (AI83-00189, 
AI83-00244, and AI83-00309). In particular, Ada 83 did not explicitly 
disallow extra values in a record aggregate. Now we do.&nbsp;</DIV>

<H4 Class="centered">Extensions to Ada 95</H4>
<DIV Class="paranum">31.c/2</DIV>
<DIV Class="Annotations">{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AIs/AI-00287.TXT">AI95-00287-01</A></I>} 
<SPAN class="insert2">{<I>extensions to Ada 95</I>} <A NAME="I2627"></A>&lt;&gt; 
can be used in place of an <SPAN Class="swiss"><A HREF="AA-4-4.html#S0115">expression</A></SPAN> 
in a <SPAN Class="swiss"><A HREF="AA-4-3-1.html#S0105">record_aggregate</A></SPAN>, 
default initializing the component.</SPAN>&nbsp;</DIV>

<H4 Class="centered">Wording Changes from Ada 95</H4>
<DIV Class="paranum">31.d/2</DIV>
<DIV Class="Annotations">{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AIs/AI-00287.TXT">AI95-00287-01</A></I>} 
<SPAN class="insert2">Limited <SPAN Class="swiss"><A HREF="AA-4-3-1.html#S0105">record_aggregate</A></SPAN>s 
are allowed (since all kinds of aggregates can now be limited, see <A HREF="AA-4-3.html">4.3</A>).</SPAN> 
</DIV>

<HR>
<DIV Style="margin-top: 0.0em; margin-bottom: 0.6em"><A HREF="AA-TOC.html"><IMG SRC="cont.gif" ALT="Contents" BORDER=0></A>&nbsp;
&nbsp;<A HREF="AA-0-5.html"><IMG SRC="index.gif" ALT="Index" BORDER=0></A>&nbsp;
&nbsp;<A HREF="AA-STDS.html"><IMG SRC="lib.gif" ALT="References" BORDER=0></A>&nbsp;
&nbsp;<A HREF="AA-SRCH.html"><IMG SRC="find.gif" ALT="Search" BORDER=0></A>&nbsp;
&nbsp;<A HREF="AA-4-3.html"><IMG SRC="prev.gif" ALT="Previous" BORDER=0></A>&nbsp;
&nbsp;<A HREF="AA-4-3-2.html"><IMG SRC="next.gif" ALT="Next" BORDER=0></A>&nbsp;
</DIV>
<DIV Style="margin-top:0.0em"><IMG SRC="AE_logo.gif" height=100 width=113 align=right ALT="Ada-Europe">
<SPAN Style="font-size: 125%">Sponsored by <SPAN Style="font-size: 125%"><A HREF="http://www.ada-europe.org/"><B>Ada-Europe</B></A></SPAN></SPAN></DIV>
</BODY>
</HTML>
