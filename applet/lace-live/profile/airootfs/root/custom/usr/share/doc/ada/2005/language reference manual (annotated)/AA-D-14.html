<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
"http://www.w3.org/TR/html4/loose.dtd">
<HTML>
<HEAD>
    <TITLE>Execution Time</TITLE>
    <META http-equiv="Content-Type" content="text/html; charset=iso-8859-1">
    <META NAME="Author" CONTENT="JTC1/SC22/WG9/ARG, by Randall Brukardt, ARG Editor">
    <META NAME="GENERATOR" CONTENT="Arm_Form.Exe, Ada Reference Manual generator">
    <STYLE type="text/css">
    H4.centered {text-align: center}
    SPAN.swiss {font-family: Arial, Helvetica, sans-serif; font-size: 92%}
    SPAN.roman {font-family: "Times New Roman", Times, serif}
    DIV.paranum {float: left; font-family: Arial, Helvetica, sans-serif; font-size: 64%; width: 2.8em; margin-left: -0.4em; margin-right: -3.0em; margin-top: 0.2em}
    TT {font-family: "Courier New", monospace}
    DT {display: compact}
    SPAN.insert2 {text-decoration: underline; color: rgb(0,102,0) }
    SPAN.delete2 {text-decoration: line-through; color: rgb(0,102,0) }
    DIV.Normal {font-family: "Times New Roman", Times, serif; line-height: 122%; margin-left: 1.2em; margin-bottom: 0.6em}
    DIV.Annotations {font-family: "Times New Roman", Times, serif; font-size: 80%; line-height: 122%; margin-left: 6.2em; margin-bottom: 0.6em}
    DIV.Examples {font-family: "Courier New", monospace; font-size: 90%; line-height: 122%; margin-left: 3.4em; margin-bottom: 0.6em}
    UL.Bulleted {font-family: "Times New Roman", Times, serif; line-height: 122%; margin-left: 3.2em; margin-right: 2.0em; margin-top: 0em; margin-bottom: 0.5em}
    </STYLE>
</HEAD>
<BODY TEXT="#000000" BGCOLOR="#FFFFF0" LINK="#000080" VLINK="#330033" ALINK="#0000FF">
<DIV><B><SPAN Style="font-size:200%; color: rgb(0,51,153)">Annotated</SPAN><SPAN Style="font-size:200%; color: rgb(0,0,102)">&nbsp;Ada Reference Manual</SPAN></B> &mdash; <A HREF="AA-TTL.html"><B>Legal Information</B></A></DIV>
<DIV Style="margin-top: 0.6em; margin-bottom: 0.0em"><A HREF="AA-TOC.html"><IMG SRC="cont.gif" ALT="Contents" BORDER=0></A>&nbsp;
&nbsp;<A HREF="AA-0-5.html"><IMG SRC="index.gif" ALT="Index" BORDER=0></A>&nbsp;
&nbsp;<A HREF="AA-STDS.html"><IMG SRC="lib.gif" ALT="References" BORDER=0></A>&nbsp;
&nbsp;<A HREF="AA-SRCH.html"><IMG SRC="find.gif" ALT="Search" BORDER=0></A>&nbsp;
&nbsp;<A HREF="AA-D-13-1.html"><IMG SRC="prev.gif" ALT="Previous" BORDER=0></A>&nbsp;
&nbsp;<A HREF="AA-D-14-1.html"><IMG SRC="next.gif" ALT="Next" BORDER=0></A>&nbsp;
</DIV>
<HR>
<H1>&nbsp;D.14 <SPAN class="insert2">Execution Time</SPAN> <SPAN class="delete2"></SPAN></H1>
<DIV Class="paranum">1/2</DIV>
<DIV Class="Normal">{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AIs/AI-00307.TXT">AI95-00307-01</A></I>} 
<SPAN class="insert2">This clause describes a language-defined package 
to measure execution time.</SPAN>&nbsp;</DIV>

<H4 Class="centered">Static Semantics</H4>
<DIV Class="paranum">2/2</DIV>
<DIV Class="Normal" Style="margin-bottom: 0.4em">{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AIs/AI-00307.TXT">AI95-00307-01</A></I>} 
<SPAN class="insert2">The following language-defined library package 
exists:</SPAN>&nbsp;</DIV>
<DIV Class="paranum">3/2</DIV>
<DIV Class="Examples"><SPAN class="insert2"><B>with</B>&nbsp;Ada.Task_Identification;<BR>
<B>with</B>&nbsp;Ada.Real_Time;&nbsp;<B>use</B>&nbsp;Ada.Real_Time;<BR>
<B>package</B>&nbsp;Ada.Execution_Time&nbsp;<B>is</B><A NAME="I7628"></A></SPAN></DIV>
<DIV Class="paranum">4/2</DIV>
<DIV Class="Examples"><SPAN class="insert2">&nbsp;&nbsp;&nbsp;<B>type</B>&nbsp;<A NAME="I7629"></A>CPU_Time&nbsp;<B>is&nbsp;private</B>;<BR>
&nbsp;&nbsp;&nbsp;<A NAME="I7630"></A>CPU_Time_First&nbsp;:&nbsp;<B>constant</B>&nbsp;CPU_Time;<BR>
&nbsp;&nbsp;&nbsp;<A NAME="I7631"></A>CPU_Time_Last&nbsp;&nbsp;:&nbsp;<B>constant</B>&nbsp;CPU_Time;<BR>
&nbsp;&nbsp;&nbsp;<A NAME="I7632"></A>CPU_Time_Unit&nbsp;&nbsp;:&nbsp;<B>constant</B>&nbsp;:=&nbsp;<SPAN Class="roman"><I>implementation-defined-real-number</I></SPAN>;<BR>
&nbsp;&nbsp;&nbsp;<A NAME="I7633"></A>CPU_Tick&nbsp;:&nbsp;<B>constant</B>&nbsp;Time_Span;</SPAN></DIV>
<DIV Class="paranum">5/2</DIV>
<DIV Class="Examples"><SPAN class="insert2">&nbsp;&nbsp;&nbsp;<B>function</B>&nbsp;<A NAME="I7634"></A>Clock<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(T&nbsp;:&nbsp;Ada.Task_Identification.Task_Id<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:=&nbsp;Ada.Task_Identification.Current_Task)<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<B>return</B>&nbsp;CPU_Time;</SPAN></DIV>
<DIV Class="paranum">6/2</DIV>
<DIV Class="Examples"><SPAN class="insert2">&nbsp;&nbsp;&nbsp;<B>function</B>&nbsp;&quot;+&quot;&nbsp;&nbsp;(Left&nbsp;:&nbsp;CPU_Time;&nbsp;Right&nbsp;:&nbsp;Time_Span)&nbsp;<B>return</B>&nbsp;CPU_Time;<BR>
&nbsp;&nbsp;&nbsp;<B>function</B>&nbsp;&quot;+&quot;&nbsp;&nbsp;(Left&nbsp;:&nbsp;Time_Span;&nbsp;Right&nbsp;:&nbsp;CPU_Time)&nbsp;<B>return</B>&nbsp;CPU_Time;<BR>
&nbsp;&nbsp;&nbsp;<B>function</B>&nbsp;&quot;-&quot;&nbsp;&nbsp;(Left&nbsp;:&nbsp;CPU_Time;&nbsp;Right&nbsp;:&nbsp;Time_Span)&nbsp;<B>return</B>&nbsp;CPU_Time;<BR>
&nbsp;&nbsp;&nbsp;<B>function</B>&nbsp;&quot;-&quot;&nbsp;&nbsp;(Left&nbsp;:&nbsp;CPU_Time;&nbsp;Right&nbsp;:&nbsp;CPU_Time)&nbsp;&nbsp;<B>return</B>&nbsp;Time_Span;</SPAN></DIV>
<DIV Class="paranum">7/2</DIV>
<DIV Class="Examples"><SPAN class="insert2">&nbsp;&nbsp;&nbsp;<B>function</B>&nbsp;&quot;&lt;&quot;&nbsp;&nbsp;(Left,&nbsp;Right&nbsp;:&nbsp;CPU_Time)&nbsp;<B>return</B>&nbsp;Boolean;<BR>
&nbsp;&nbsp;&nbsp;<B>function</B>&nbsp;&quot;&lt;=&quot;&nbsp;(Left,&nbsp;Right&nbsp;:&nbsp;CPU_Time)&nbsp;<B>return</B>&nbsp;Boolean;<BR>
&nbsp;&nbsp;&nbsp;<B>function</B>&nbsp;&quot;&gt;&quot;&nbsp;&nbsp;(Left,&nbsp;Right&nbsp;:&nbsp;CPU_Time)&nbsp;<B>return</B>&nbsp;Boolean;<BR>
&nbsp;&nbsp;&nbsp;<B>function</B>&nbsp;&quot;&gt;=&quot;&nbsp;(Left,&nbsp;Right&nbsp;:&nbsp;CPU_Time)&nbsp;<B>return</B>&nbsp;Boolean;</SPAN></DIV>
<DIV Class="paranum">8/2</DIV>
<DIV Class="Examples"><SPAN class="insert2">&nbsp;&nbsp;&nbsp;<B>procedure</B>&nbsp;<A NAME="I7635"></A>Split<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(T&nbsp;:&nbsp;<B>in</B>&nbsp;CPU_Time;&nbsp;SC&nbsp;:&nbsp;<B>out</B>&nbsp;Seconds_Count;&nbsp;TS&nbsp;:&nbsp;<B>out</B>&nbsp;Time_Span);</SPAN></DIV>
<DIV Class="paranum">9/2</DIV>
<DIV Class="Examples"><SPAN class="insert2">&nbsp;&nbsp;&nbsp;<B>function</B>&nbsp;<A NAME="I7636"></A>Time_Of&nbsp;(SC&nbsp;:&nbsp;Seconds_Count;<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;TS&nbsp;:&nbsp;Time_Span&nbsp;:=&nbsp;Time_Span_Zero)&nbsp;<B>return</B>&nbsp;CPU_Time;</SPAN></DIV>
<DIV Class="paranum">10/2</DIV>
<DIV Class="Examples"><SPAN class="insert2"><B>private</B><BR>
&nbsp;&nbsp;&nbsp;...&nbsp;--&nbsp;<SPAN Class="roman"><I>not&nbsp;specified&nbsp;by&nbsp;the&nbsp;language</I></SPAN><BR>
<B>end</B>&nbsp;Ada.Execution_Time;</SPAN></DIV>
<DIV Class="paranum">11/2</DIV>
<DIV Class="Normal">&nbsp;{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AIs/AI-00307.TXT">AI95-00307-01</A></I>} 
<SPAN class="insert2"><SPAN STYLE="font-size: 80%">{<I>execution time 
(of a task)</I>}</SPAN> <A NAME="I7637"></A><SPAN STYLE="font-size: 80%">{<I>CPU 
time (of a task)</I>}</SPAN> <A NAME="I7638"></A>The <I>execution time</I> 
or CPU time of a given task is defined as the time spent by the system 
executing that task, including the time spent executing run-time or system 
services on its behalf. The mechanism used to measure execution time 
is implementation defined. It is implementation defined which task, if 
any, is charged the execution time that is consumed by interrupt handlers 
and run-time services on behalf of the system.</SPAN>&nbsp;</DIV>
<DIV Class="paranum">11.a/2</DIV>
<DIV Class="Annotations"><SPAN class="insert2"><B>Discussion:&nbsp;</B>The 
implementation-defined properties above and of the values declared in 
the package are repeated in Documentation Requirements, so we don't mark 
them as implementation-defined.</SPAN>&nbsp;</DIV>
<DIV Class="paranum">12/2</DIV>
<DIV Class="Normal">&nbsp;{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AIs/AI-00307.TXT">AI95-00307-01</A></I>} 
<SPAN class="insert2">The type CPU_Time represents the execution time 
of a task. The set of values of this type corresponds one-to-one with 
an implementation-defined range of mathematical integers.</SPAN></DIV>
<DIV Class="paranum">13/2</DIV>
<DIV Class="Normal">&nbsp;{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AIs/AI-00307.TXT">AI95-00307-01</A></I>} 
<SPAN class="insert2">The CPU_Time value I represents the half-open execution-time 
interval that starts with I*CPU_Time_Unit and is limited by (I+1)*CPU_Time_Unit, 
where CPU_Time_Unit is an implementation-defined real number. For each 
task, the execution time value is set to zero at the creation of the 
task.</SPAN></DIV>
<DIV Class="paranum">13.a/2</DIV>
<DIV Class="Annotations"><SPAN class="insert2"><B>Ramification:&nbsp;</B>Since 
it is implementation-defined which task is charged execution time for 
system services, the execution time value may become non-zero even before 
the start of the activation of the task.</SPAN>&nbsp;</DIV>
<DIV Class="paranum">14/2</DIV>
<DIV Class="Normal">&nbsp;{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AIs/AI-00307.TXT">AI95-00307-01</A></I>} 
<SPAN class="insert2">CPU_Time_First and CPU_Time_Last are the smallest 
and largest values of the CPU_Time type, respectively.</SPAN>&nbsp;</DIV>

<H4 Class="centered">Dynamic Semantics</H4>
<DIV Class="paranum">15/2</DIV>
<DIV Class="Normal">&nbsp;{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AIs/AI-00307.TXT">AI95-00307-01</A></I>} 
<SPAN class="insert2"><SPAN STYLE="font-size: 80%">{<I>CPU clock tick</I>}</SPAN> 
<A NAME="I7639"></A>CPU_Time_Unit is the smallest amount of execution 
time representable by the CPU_Time type; it is expressed in seconds. 
A <I>CPU clock tick</I> is an execution time interval during which the 
clock value (as observed by calling the Clock function) remains constant. 
CPU_Tick is the average length of such intervals.</SPAN></DIV>
<DIV Class="paranum">16/2</DIV>
<DIV Class="Normal">&nbsp;{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AIs/AI-00307.TXT">AI95-00307-01</A></I>} 
<SPAN class="insert2">The effects of the operators on CPU_Time and Time_Span 
are as for the operators defined for integer types.</SPAN></DIV>
<DIV Class="paranum">17/2</DIV>
<DIV Class="Normal">&nbsp;{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AIs/AI-00307.TXT">AI95-00307-01</A></I>} 
<SPAN class="insert2">The function Clock returns the current execution 
time of the task identified by T; Tasking_Error is raised if that task 
has terminated; Program_Error is raised if the value of T is Task_Identification.Null_Task_Id.</SPAN></DIV>
<DIV Class="paranum">18/2</DIV>
<DIV Class="Normal">&nbsp;{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AIs/AI-00307.TXT">AI95-00307-01</A></I>} 
<SPAN class="insert2">The effects of the Split and Time_Of operations 
are defined as follows, treating values of type CPU_Time, Time_Span, 
and Seconds_Count as mathematical integers. The effect of Split (T, SC, 
TS) is to set SC and TS to values such that T*CPU_Time_Unit = SC*1.0 
+ TS*CPU_Time_Unit, and 0.0 &lt;= TS*CPU_Time_Unit &lt; 1.0. The value 
returned by Time_Of(SC,TS) is the execution-time value T such that T*CPU_Time_Unit=SC*1.0 
+ TS*CPU_Time_Unit.</SPAN></DIV>

<H4 Class="centered">Erroneous Execution</H4>
<DIV Class="paranum">19/2</DIV>
<DIV Class="Normal">&nbsp;{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AIs/AI-00307.TXT">AI95-00307-01</A></I>} 
<SPAN class="insert2"><SPAN STYLE="font-size: 80%">{<I>erroneous execution 
(cause)</I> [partial]}</SPAN> <A NAME="I7640"></A>For a call of Clock, 
if the task identified by T no longer exists, the execution of the program 
is erroneous.</SPAN>&nbsp;</DIV>

<H4 Class="centered">Implementation Requirements</H4>
<DIV Class="paranum">20/2</DIV>
<DIV Class="Normal">&nbsp;{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AIs/AI-00307.TXT">AI95-00307-01</A></I>} 
<SPAN class="insert2">The range of CPU_Time values shall be sufficient 
to uniquely represent the range of execution times from the task start-up 
to 50 years of execution time later. CPU_Tick shall be no greater than 
1 millisecond.</SPAN>&nbsp;</DIV>

<H4 Class="centered">Documentation Requirements</H4>
<DIV Class="paranum">21/2</DIV>
<DIV Class="Normal">&nbsp;{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AIs/AI-00307.TXT">AI95-00307-01</A></I>} 
<SPAN class="insert2">The implementation shall document the values of 
CPU_Time_First, CPU_Time_Last, CPU_Time_Unit, and CPU_Tick.</SPAN>&nbsp;</DIV>
<DIV Class="paranum">21.a/2</DIV>
<DIV Class="Annotations"><SPAN class="insert2"><B>Documentation Requirement: 
</B></SPAN><SPAN class="insert2">The values of CPU_Time_First, CPU_Time_Last, 
CPU_Time_Unit, and CPU_Tick of package Execution_Time.</SPAN></DIV>
<DIV Class="paranum">22/2</DIV>
<DIV Class="Normal">&nbsp;{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AIs/AI-00307.TXT">AI95-00307-01</A></I>} 
<SPAN class="insert2">The implementation shall document the properties 
of the underlying mechanism used to measure execution times, such as 
the range of values supported and any relevant aspects of the underlying 
hardware or operating system facilities used.</SPAN>&nbsp;</DIV>
<DIV Class="paranum">22.a/2</DIV>
<DIV Class="Annotations"><SPAN class="insert2"><B>Documentation Requirement: 
</B></SPAN><SPAN class="insert2">The properties of the mechanism used 
to implement package Execution_Time.</SPAN></DIV>

<H4 Class="centered">Metrics</H4>
<DIV Class="paranum">23/2</DIV>
<DIV Class="Normal" Style="margin-bottom: 0.4em">&nbsp;{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AIs/AI-00307.TXT">AI95-00307-01</A></I>} 
<SPAN class="insert2">The implementation shall document the following 
metrics:</SPAN></DIV>
<DIV Class="paranum">24/2</DIV>
<UL Class="Bulleted"><LI TYPE=DISC><SPAN class="insert2">An upper bound 
on the execution-time duration of a clock tick. This is a value D such 
that if t1 and t2 are any execution times of a given task such that t1 
&lt; t2 and Clock<SUB><SPAN STYLE="font-size: 140%"><SPAN STYLE="font-size: 64%">t1</SPAN></SPAN></SUB> 
= Clock<SUB><SPAN STYLE="font-size: 140%"><SPAN STYLE="font-size: 64%">t2</SPAN></SPAN></SUB> 
then t2 &ndash; t1 &lt;= D.</SPAN></LI></UL>
<DIV Class="paranum">25/2</DIV>
<UL Class="Bulleted"><LI TYPE=DISC><SPAN class="insert2">An upper bound 
on the size of a clock jump. A clock jump is the difference between two 
successive distinct values of an execution-time clock (as observed by 
calling the Clock function with the same Task_Id).</SPAN></LI></UL>
<DIV Class="paranum">26/2</DIV>
<UL Class="Bulleted"><LI TYPE=DISC><SPAN class="insert2">An upper bound 
on the execution time of a call to the Clock function, in processor clock 
cycles.</SPAN></LI></UL>
<DIV Class="paranum">27/2</DIV>
<UL Class="Bulleted"><LI TYPE=DISC><SPAN class="insert2">Upper bounds 
on the execution times of the operators of the type CPU_Time, in processor 
clock cycles.</SPAN>&nbsp;</LI></UL>
<DIV Class="paranum">27.a/2</DIV>
<DIV Class="Annotations"><SPAN class="insert2"><B>Documentation Requirement: 
</B></SPAN><SPAN class="insert2">The metrics for execution time.</SPAN></DIV>

<H4 Class="centered">Implementation Permissions</H4>
<DIV Class="paranum">28/2</DIV>
<DIV Class="Normal">&nbsp;{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AIs/AI-00307.TXT">AI95-00307-01</A></I>} 
<SPAN class="insert2">Implementations targeted to machines with word 
size smaller than 32 bits need not support the full range and granularity 
of the CPU_Time type.</SPAN></DIV>

<H4 Class="centered">Implementation Advice</H4>
<DIV Class="paranum">29/2</DIV>
<DIV Class="Normal">&nbsp;{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AIs/AI-00307.TXT">AI95-00307-01</A></I>} 
<SPAN class="insert2">When appropriate, implementations should provide 
configuration mechanisms to change the value of CPU_Tick.</SPAN>&nbsp;</DIV>
<DIV Class="paranum">29.a/2</DIV>
<DIV Class="Annotations"><SPAN class="insert2"><B>Implementation Advice: 
</B></SPAN><SPAN class="insert2">When appropriate, implementations should 
provide configuration mechanisms to change the value of Execution_Time.CPU_Tick.</SPAN></DIV>

<H4 Class="centered">Extensions to Ada 95</H4>
<DIV Class="paranum">29.b/2</DIV>
<DIV Class="Annotations">{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AIs/AI-00307.TXT">AI95-00307-01</A></I>} 
<SPAN class="insert2">{<I>extensions to Ada 95</I>} <A NAME="I7641"></A>The 
package Execution_Time is new.</SPAN>&nbsp;</DIV>

<HR>
<DIV Style="margin-top: 0.0em; margin-bottom: 0.6em"><A HREF="AA-TOC.html"><IMG SRC="cont.gif" ALT="Contents" BORDER=0></A>&nbsp;
&nbsp;<A HREF="AA-0-5.html"><IMG SRC="index.gif" ALT="Index" BORDER=0></A>&nbsp;
&nbsp;<A HREF="AA-STDS.html"><IMG SRC="lib.gif" ALT="References" BORDER=0></A>&nbsp;
&nbsp;<A HREF="AA-SRCH.html"><IMG SRC="find.gif" ALT="Search" BORDER=0></A>&nbsp;
&nbsp;<A HREF="AA-D-13-1.html"><IMG SRC="prev.gif" ALT="Previous" BORDER=0></A>&nbsp;
&nbsp;<A HREF="AA-D-14-1.html"><IMG SRC="next.gif" ALT="Next" BORDER=0></A>&nbsp;
</DIV>
<DIV Style="margin-top:0.0em"><IMG SRC="AE_logo.gif" height=100 width=113 align=right ALT="Ada-Europe">
<SPAN Style="font-size: 125%">Sponsored by <SPAN Style="font-size: 125%"><A HREF="http://www.ada-europe.org/"><B>Ada-Europe</B></A></SPAN></SPAN></DIV>
</BODY>
</HTML>
