<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
"http://www.w3.org/TR/html4/loose.dtd">
<HTML>
<HEAD>
    <TITLE>Context Clauses - With Clauses</TITLE>
    <META http-equiv="Content-Type" content="text/html; charset=iso-8859-1">
    <META NAME="Author" CONTENT="JTC1/SC22/WG9/ARG, by Randall Brukardt, ARG Editor">
    <META NAME="GENERATOR" CONTENT="Arm_Form.Exe, Ada Reference Manual generator">
    <STYLE type="text/css">
    H4.centered {text-align: center}
    SPAN.swiss {font-family: Arial, Helvetica, sans-serif; font-size: 92%}
    SPAN.roman {font-family: "Times New Roman", Times, serif}
    DIV.paranum {float: left; font-family: Arial, Helvetica, sans-serif; font-size: 64%; width: 2.8em; margin-left: -0.4em; margin-right: -3.0em; margin-top: 0.2em}
    TT {font-family: "Courier New", monospace}
    DT {display: compact}
    SPAN.insert2 {text-decoration: underline; color: rgb(0,102,0) }
    SPAN.delete2 {text-decoration: line-through; color: rgb(0,102,0) }
    DIV.Normal {font-family: "Times New Roman", Times, serif; line-height: 122%; margin-left: 1.2em; margin-bottom: 0.6em}
    DIV.Annotations {font-family: "Times New Roman", Times, serif; font-size: 80%; line-height: 122%; margin-left: 6.2em; margin-bottom: 0.6em}
    DIV.Notes {font-family: "Times New Roman", Times, serif; font-size: 80%; line-height: 122%; margin-left: 3.7em; margin-bottom: 0.6em}
    DIV.NotesHeader {font-family: "Times New Roman", Times, serif; font-size: 80%; line-height: 122%; margin-left: 3.7em}
    DIV.SyntaxIndented {font-family: "Times New Roman", Times, serif; line-height: 122%; margin-left: 3.2em; margin-bottom: 0.4em}
    DIV.Examples {font-family: "Courier New", monospace; font-size: 90%; line-height: 122%; margin-left: 3.4em; margin-bottom: 0.6em}
    DIV.SmallExamples {font-family: "Courier New", monospace; font-size: 72%; line-height: 122%; margin-left: 9.6em; margin-bottom: 0.6em}
    UL.Bulleted {font-family: "Times New Roman", Times, serif; line-height: 122%; margin-left: 3.2em; margin-right: 2.0em; margin-top: 0em; margin-bottom: 0.5em}
    </STYLE>
</HEAD>
<BODY TEXT="#000000" BGCOLOR="#FFFFF0" LINK="#000080" VLINK="#330033" ALINK="#0000FF">
<DIV><B><SPAN Style="font-size:200%; color: rgb(0,51,153)">Annotated</SPAN><SPAN Style="font-size:200%; color: rgb(0,0,102)">&nbsp;Ada Reference Manual</SPAN></B> &mdash; <A HREF="AA-TTL.html"><B>Legal Information</B></A></DIV>
<DIV Style="margin-top: 0.6em; margin-bottom: 0.0em"><A HREF="AA-TOC.html"><IMG SRC="cont.gif" ALT="Contents" BORDER=0></A>&nbsp;
&nbsp;<A HREF="AA-0-5.html"><IMG SRC="index.gif" ALT="Index" BORDER=0></A>&nbsp;
&nbsp;<A HREF="AA-STDS.html"><IMG SRC="lib.gif" ALT="References" BORDER=0></A>&nbsp;
&nbsp;<A HREF="AA-SRCH.html"><IMG SRC="find.gif" ALT="Search" BORDER=0></A>&nbsp;
&nbsp;<A HREF="AA-10-1-1.html"><IMG SRC="prev.gif" ALT="Previous" BORDER=0></A>&nbsp;
&nbsp;<A HREF="AA-10-1-3.html"><IMG SRC="next.gif" ALT="Next" BORDER=0></A>&nbsp;
</DIV>
<HR>
<H1>10.1.2 Context Clauses - With Clauses</H1>
<DIV Class="paranum">1</DIV>
<DIV Class="Normal">[A <SPAN Class="swiss"><A HREF="AA-10-1-2.html#S0235">context_clause</A></SPAN> 
is used to specify the <SPAN Class="swiss"><A HREF="AA-10-1-1.html#S0230">library_item</A></SPAN>s 
whose names are needed within a compilation unit.]&nbsp;</DIV>

<H4 Class="centered">Language Design Principles</H4>
<DIV Class="paranum">1.a</DIV>
<DIV Class="Annotations">{<I>one-pass context_clauses</I>} <A NAME="I4353"></A>The 
reader should be able to understand a <SPAN Class="swiss"><A HREF="AA-10-1-2.html#S0235">context_clause</A></SPAN> 
without looking ahead. Similarly, when compiling a <SPAN Class="swiss"><A HREF="AA-10-1-2.html#S0235">context_clause</A></SPAN>, 
the compiler should not have to look ahead at subsequent <SPAN Class="swiss"><A HREF="AA-10-1-2.html#S0236">context_item</A></SPAN>s, 
nor at the compilation unit to which the <SPAN Class="swiss"><A HREF="AA-10-1-2.html#S0235">context_clause</A></SPAN> 
is attached. (We have not completely achieved this.)</DIV>
<DIV Class="paranum">1.b/2</DIV>
<DIV Class="Annotations">{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AIs/AI-50217.TXT">AI95-00217-06</A></I>} 
<SPAN class="insert2">{<I>ripple effect</I>} <A NAME="I4354"></A>A <I>ripple 
effect</I> occurs when the legality of a compilation unit could be affected 
by adding or removing an otherwise unneeded <SPAN Class="swiss"><A HREF="AA-10-1-2.html#S0237">with_clause</A></SPAN> 
on some compilation unit on which the unit depends, directly or indirectly. 
We try to avoid ripple effects because they make understanding and maintenance 
more difficult. However, ripple effects can occur because of direct visibility 
(as in child units); this seems impossible to eliminate. The ripple effect 
for <SPAN Class="swiss"><A HREF="AA-10-1-2.html#S0237">with_clause</A></SPAN>s 
is somewhat similar to the Beaujolais effect (see <A HREF="AA-8-4.html">8.4</A>) 
for <SPAN Class="swiss"><A HREF="AA-8-4.html#S0179">use_clause</A></SPAN>s, 
which we also try to avoid.</SPAN>&nbsp;</DIV>

<H4 Class="centered">Syntax</H4>
<DIV Class="paranum">2</DIV>
<DIV Class="SyntaxIndented"><SPAN Class="swiss">context_clause</SPAN><A NAME="I4355"></A><A NAME="S0235"></A><SPAN Class="swiss">&nbsp;::=&nbsp;</SPAN>{<A NAME="I4356"></A><SPAN Class="swiss"><A HREF="AA-10-1-2.html#S0236">context_item</A></SPAN>}</DIV>
<DIV Class="paranum">3</DIV>
<DIV Class="SyntaxIndented"><SPAN Class="swiss">context_item</SPAN><A NAME="I4357"></A><A NAME="S0236"></A><SPAN Class="swiss">&nbsp;::=&nbsp;</SPAN><A NAME="I4358"></A><SPAN Class="swiss"><A HREF="AA-10-1-2.html#S0237">with_clause</A></SPAN>&nbsp;|&nbsp;<A NAME="I4359"></A><SPAN Class="swiss"><A HREF="AA-8-4.html#S0179">use_clause</A></SPAN></DIV>
<DIV Class="paranum">4/2</DIV>
<DIV Class="SyntaxIndented">{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AIs/AI-50217.TXT">AI95-00217-06</A></I>} 
{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AIs/AI-00262.TXT">AI95-00262-01</A></I>} 
<SPAN Class="swiss">with_clause</SPAN><A NAME="I4360"></A><A NAME="S0237"></A><SPAN Class="swiss">&nbsp;::=&nbsp;</SPAN><SPAN class="insert2"><A NAME="I4361"></A><SPAN Class="swiss"><A HREF="AA-10-1-2.html#S0238">limited_with_clause</A></SPAN>&nbsp;|&nbsp;<A NAME="I4362"></A><SPAN Class="swiss"><A HREF="AA-10-1-2.html#S0239">nonlimited_with_clause</A></SPAN></SPAN><SPAN class="delete2"><B>&nbsp;with</B>&nbsp;<I>library_unit_</I><A NAME="I4363"></A><SPAN Class="swiss"><A HREF="AA-4-1.html#S0091">name</A></SPAN>&nbsp;{,&nbsp;<I>library_unit_</I><A NAME="I4364"></A><SPAN Class="swiss"><A HREF="AA-4-1.html#S0091">name</A></SPAN>};</SPAN></DIV>
<DIV Class="paranum">4.1/2</DIV>
<DIV Class="SyntaxIndented"><SPAN Class="swiss"></SPAN><SPAN class="insert2"><SPAN Class="swiss">limited_with_clause</SPAN></SPAN><SPAN Class="swiss"></SPAN><A NAME="I4365"></A><A NAME="S0238"></A><SPAN class="insert2"><SPAN Class="swiss">&nbsp;::=&nbsp;</SPAN></SPAN><SPAN class="insert2"><B>limited</B>&nbsp;[<B>private</B>]&nbsp;<B>with</B>&nbsp;<I>library_unit_</I><A NAME="I4366"></A><SPAN Class="swiss"><A HREF="AA-4-1.html#S0091">name</A></SPAN>&nbsp;{,&nbsp;<I>library_unit_</I><A NAME="I4367"></A><SPAN Class="swiss"><A HREF="AA-4-1.html#S0091">name</A></SPAN>};</SPAN></DIV>
<DIV Class="paranum">4.2/2</DIV>
<DIV Class="SyntaxIndented"><SPAN Class="swiss"></SPAN><SPAN class="insert2"><SPAN Class="swiss">nonlimited_with_clause</SPAN></SPAN><SPAN Class="swiss"></SPAN><A NAME="I4368"></A><A NAME="S0239"></A><SPAN class="insert2"><SPAN Class="swiss">&nbsp;::=&nbsp;</SPAN></SPAN><SPAN class="insert2">[<B>private</B>]&nbsp;<B>with</B>&nbsp;<I>library_unit_</I><A NAME="I4369"></A><SPAN Class="swiss"><A HREF="AA-4-1.html#S0091">name</A></SPAN>&nbsp;{,&nbsp;<I>library_unit_</I><A NAME="I4370"></A><SPAN Class="swiss"><A HREF="AA-4-1.html#S0091">name</A></SPAN>};</SPAN></DIV>
<DIV Class="paranum">4.a/2</DIV>
<DIV Class="Annotations"><SPAN class="insert2"><B>Discussion:&nbsp;</B></SPAN>{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AIs/AI-50217.TXT">AI95-00217-06</A></I>} 
<SPAN class="insert2">A <SPAN Class="swiss"><A HREF="AA-10-1-2.html#S0238">limited_with_clause</A></SPAN> 
makes a limited view of a unit visible.</SPAN></DIV>
<DIV Class="paranum">4.b/2</DIV>
<DIV Class="Annotations">{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AIs/AI-00262.TXT">AI95-00262-01</A></I>} 
<SPAN class="insert2">{<I>private with_clause</I>} <A NAME="I4371"></A>A 
<SPAN Class="swiss"><A HREF="AA-10-1-2.html#S0237">with_clause</A></SPAN> 
containing the reserved word <B>private</B> is called a <I>private with_clause</I>. 
It can be thought of as making items visible only in the private part, 
although it really makes items visible everywhere except the visible 
part. It can be used both for documentation purposes (to say that a unit 
is not used in the visible part), and to allow access to private units 
that otherwise would be prohibited.</SPAN>&nbsp;</DIV>

<H4 Class="centered">Name Resolution Rules</H4>
<DIV Class="paranum">5</DIV>
<DIV Class="Normal"><SPAN STYLE="font-size: 80%">{<I>scope (of a with_clause)</I>}</SPAN> 
<A NAME="I4372"></A>The <I>scope</I> of a <SPAN Class="swiss"><A HREF="AA-10-1-2.html#S0237">with_clause</A></SPAN> 
that appears on a <SPAN Class="swiss"><A HREF="AA-10-1-1.html#S0231">library_unit_declaration</A></SPAN> 
or <SPAN Class="swiss"><A HREF="AA-10-1-1.html#S0232">library_unit_renaming_declaration</A></SPAN> 
consists of the entire declarative region of the declaration[, which 
includes all children and subunits]. The scope of a <SPAN Class="swiss"><A HREF="AA-10-1-2.html#S0237">with_clause</A></SPAN> 
that appears on a body consists of the body[, which includes all subunits]. 
</DIV>
<DIV Class="paranum">5.a/2</DIV>
<DIV Class="Annotations"><B>Discussion:&nbsp;</B>{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AIs/AI-00262.TXT">AI95-00262-01</A></I>} 
Suppose a <SPAN class="insert2">non-private&nbsp;</SPAN> <SPAN Class="swiss"><A HREF="AA-10-1-2.html#S0237">with_clause</A></SPAN> 
of a public library unit mentions one of its private siblings. (This 
is only allowed on the body of the public library unit.) We considered 
making the scope of that <SPAN Class="swiss"><A HREF="AA-10-1-2.html#S0237">with_clause</A></SPAN> 
not include the visible part of the public library unit. (This would 
only matter for a <SPAN Class="swiss"><A HREF="AA-6-3.html#S0162">subprogram_body</A></SPAN>, 
since those are the only kinds of body that have a visible part, and 
only if the <SPAN Class="swiss"><A HREF="AA-6-3.html#S0162">subprogram_body</A></SPAN> 
completes a <SPAN Class="swiss"><A HREF="AA-6-1.html#S0148">subprogram_declaration</A></SPAN>, 
since otherwise the <SPAN Class="swiss"><A HREF="AA-10-1-2.html#S0237">with_clause</A></SPAN> 
would be illegal.) We did not put in such a rule for two reasons: (1) 
It would complicate the wording of the rules, because we would have to 
split each <SPAN Class="swiss"><A HREF="AA-10-1-2.html#S0237">with_clause</A></SPAN> 
into pieces, in order to correctly handle &ldquo;<B>with</B> P, Q;&rdquo; 
where P is public and Q is private. (2) The conformance rules prevent 
any problems. It doesn't matter if a type name in the spec of the body 
denotes the completion of a <SPAN Class="swiss"><A HREF="AA-7-3.html#S0176">private_type_declaration</A></SPAN>.</DIV>
<DIV Class="paranum">5.b</DIV>
<DIV Class="Annotations">A <SPAN Class="swiss"><A HREF="AA-10-1-2.html#S0237">with_clause</A></SPAN> 
also affects visibility within subsequent <SPAN Class="swiss"><A HREF="AA-8-4.html#S0179">use_clause</A></SPAN>s 
and <SPAN Class="swiss"><A HREF="AA-2-8.html#S0019">pragma</A></SPAN>s 
of the same <SPAN Class="swiss"><A HREF="AA-10-1-2.html#S0235">context_clause</A></SPAN>, 
even though those are not in the scope of the <SPAN Class="swiss"><A HREF="AA-10-1-2.html#S0237">with_clause</A></SPAN>. 
</DIV>
<DIV Class="paranum">6/2</DIV>
<DIV Class="Normal">{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AIs/AI-50217.TXT">AI95-00217-06</A></I>} 
<SPAN STYLE="font-size: 80%">{<I>Term=[mentioned],Sec=[in a with_clause]</I>}</SPAN> 
<A NAME="I4373"></A><SPAN STYLE="font-size: 80%">{<I>with_clause (mentioned 
in)</I>}</SPAN> <A NAME="I4374"></A>A <SPAN Class="swiss"><A HREF="AA-10-1-1.html#S0230">library_item</A></SPAN> 
<SPAN class="insert2">(and the corresponding library unit)&nbsp;</SPAN>is 
<SPAN class="insert2"><I>named</I> <SPAN STYLE="font-size: 80%">{<I>named 
(in a with_clause)</I>}</SPAN> <A NAME="I4375"></A><SPAN STYLE="font-size: 80%">{<I>with_clause 
(named in)</I>}</SPAN> <A NAME="I4376"></A></SPAN><SPAN class="delete2"><I>mentioned</I> 
</SPAN>in a <SPAN Class="swiss"><A HREF="AA-10-1-2.html#S0237">with_clause</A></SPAN> 
if it is denoted by a <I>library_unit_</I><SPAN Class="swiss"><A HREF="AA-4-1.html#S0091">name</A></SPAN> 
<SPAN class="delete2">or a <SPAN Class="swiss"><A HREF="AA-4-1.html#S0093">prefix</A></SPAN> 
</SPAN>in the <SPAN Class="swiss"><A HREF="AA-10-1-2.html#S0237">with_clause</A></SPAN>. 
<SPAN class="insert2">A <SPAN Class="swiss"><A HREF="AA-10-1-1.html#S0230">library_item</A></SPAN> 
(and the corresponding library unit) is <I>mentioned</I> in a <SPAN Class="swiss"><A HREF="AA-10-1-2.html#S0237">with_clause</A></SPAN> 
if it is named in the <SPAN Class="swiss"><A HREF="AA-10-1-2.html#S0237">with_clause</A></SPAN> 
or if it is denoted by a <SPAN Class="swiss"><A HREF="AA-4-1.html#S0093">prefix</A></SPAN> 
in the <SPAN Class="swiss"><A HREF="AA-10-1-2.html#S0237">with_clause</A></SPAN>.</SPAN></DIV>
<DIV Class="paranum">6.a</DIV>
<DIV Class="Annotations"><B>Discussion:&nbsp;</B><SPAN Class="swiss"><A HREF="AA-10-1-2.html#S0237">With_clause</A></SPAN>s 
control the visibility of declarations or renamings of library units. 
Mentioning a root library unit in a <SPAN Class="swiss"><A HREF="AA-10-1-2.html#S0237">with_clause</A></SPAN> 
makes its declaration directly visible. Mentioning a non-root library 
unit makes its declaration visible. See Section 8 for details.</DIV>
<DIV Class="paranum">6.b/2</DIV>
<DIV Class="Annotations">{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AIs/AI-00114.TXT">AI95-00114-01</A></I>} 
Note that this rule implies that &ldquo;<B>with</B> A.B.C;&rdquo; is 
<SPAN class="insert2">almost&nbsp;</SPAN>equivalent to &ldquo;<B>with</B> 
A, A.B, A.B.C;&rdquo;<SPAN class="insert2">.</SPAN> The reason for making 
a <SPAN Class="swiss"><A HREF="AA-10-1-2.html#S0237">with_clause</A></SPAN> 
apply to all the ancestor units is to avoid &ldquo;visibility holes&rdquo; 
&mdash; situations in which an inner program unit is visible while an 
outer one is not. Visibility holes would cause semantic complexity and 
implementation difficulty.<SPAN class="insert2">&nbsp;(This is not exactly 
equivalent because the latter <SPAN Class="swiss"><A HREF="AA-10-1-2.html#S0237">with_clause</A></SPAN> 
names A and A.B, while the previous one does not. Whether a unit is &ldquo;named&rdquo; 
does not have any effect on visibility, however, so it is equivalent 
for visibility purposes.))</SPAN></DIV>
<DIV Class="paranum">7</DIV>
<DIV Class="Normal">[Outside its own declarative region, the declaration 
or renaming of a library unit can be visible only within the scope of 
a <SPAN Class="swiss"><A HREF="AA-10-1-2.html#S0237">with_clause</A></SPAN> 
that mentions it. The visibility of the declaration or renaming of a 
library unit otherwise follows from its placement in the environment.] 
</DIV>

<H4 Class="centered">Legality Rules</H4>
<DIV Class="paranum">8/2</DIV>
<DIV Class="Normal">{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AIs/AI-00262.TXT">AI95-00262-01</A></I>} 
If a <SPAN Class="swiss"><A HREF="AA-10-1-2.html#S0237">with_clause</A></SPAN> 
of a given <SPAN Class="swiss"><A HREF="AA-10-1-1.html#S0229">compilation_unit</A></SPAN> 
mentions a private child of some library unit, then the given <SPAN Class="swiss"><A HREF="AA-10-1-1.html#S0229">compilation_unit</A></SPAN> 
shall be <SPAN class="insert2">one of:</SPAN><SPAN class="delete2">&nbsp;either 
the declaration of a private descendant of that library unit or the body 
or subunit of a [(public or private)] descendant of that library unit.</SPAN> 
</DIV>
<DIV Class="paranum">9/2</DIV>
<UL Class="Bulleted"><LI TYPE=DISC>{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AIs/AI-00262.TXT">AI95-00262-01</A></I>} 
<SPAN class="insert2">the declaration, body, or subunit of a private 
descendant of that library unit;</SPAN></LI></UL>
<DIV Class="paranum">10/2</DIV>
<UL Class="Bulleted"><LI TYPE=DISC>{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AIs/AI-00220.TXT">AI95-00220-01</A></I>} 
<SPAN class="insert2"></SPAN>{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AIs/AI-00262.TXT">AI95-00262-01</A></I>} 
<SPAN class="insert2">the body or subunit of a public descendant of that 
library unit, but not a subprogram body acting as a subprogram declaration 
(see <A HREF="AA-10-1-4.html">10.1.4</A>); or</SPAN></LI></UL>
<DIV Class="paranum">11/2</DIV>
<UL Class="Bulleted"><LI TYPE=DISC>{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AIs/AI-00262.TXT">AI95-00262-01</A></I>} 
<SPAN class="insert2">the declaration of a public descendant of that 
library unit, in which case the <SPAN Class="swiss"><A HREF="AA-10-1-2.html#S0237">with_clause</A></SPAN> 
shall include the reserved word <B>private</B>.</SPAN>&nbsp;</LI></UL>
<DIV Class="paranum">11.a/2</DIV>
<DIV Class="Annotations"><B>Reason:&nbsp;</B>{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AIs/AI-00262.TXT">AI95-00262-01</A></I>} 
The purpose of this rule is to prevent a private child from being visible 
<SPAN class="delete2">(or even semantically depended-on)&nbsp;</SPAN>from 
outside the subsystem rooted at its parent. <SPAN class="insert2">A private 
child can be semantically depended-on without violating this principle 
if it is used in a private <SPAN Class="swiss"><A HREF="AA-10-1-2.html#S0237">with_clause</A></SPAN>.</SPAN> 
</DIV>
<DIV Class="paranum">11.b</DIV>
<DIV Class="Annotations"><B>Discussion:&nbsp;</B>This rule violates the one-pass 
<SPAN Class="swiss"><A HREF="AA-10-1-2.html#S0235">context_clause</A></SPAN>s 
Language Design Principle. We rationalize this by saying that at least 
that Language Design Principle works for legal compilation units.</DIV>
<DIV Class="paranum">11.c</DIV>
<DIV Class="Annotations" Style="margin-bottom: 0.4em">Example:&nbsp;</DIV>
<DIV Class="paranum">11.d</DIV>
<DIV Class="SmallExamples"><B>package</B>&nbsp;A&nbsp;<B>is</B><BR>
<B>end</B>&nbsp;A;</DIV>
<DIV Class="paranum">11.e</DIV>
<DIV Class="SmallExamples"><B>package</B>&nbsp;A.B&nbsp;<B>is</B><BR>
<B>end</B>&nbsp;A.B;</DIV>
<DIV Class="paranum">11.f</DIV>
<DIV Class="SmallExamples"><B>private</B>&nbsp;<B>package</B>&nbsp;A.B.C&nbsp;<B>is</B><BR>
<B>end</B>&nbsp;A.B.C;</DIV>
<DIV Class="paranum">11.g</DIV>
<DIV Class="SmallExamples"><B>package</B>&nbsp;A.B.C.D&nbsp;<B>is</B><BR>
<B>end</B>&nbsp;A.B.C.D;</DIV>
<DIV Class="paranum">11.h</DIV>
<DIV Class="SmallExamples"><B>with</B>&nbsp;A.B.C;&nbsp;--&nbsp;<SPAN Class="roman"><I>(1)</I></SPAN><BR>
<B>private</B>&nbsp;<B>package</B>&nbsp;A.B.X&nbsp;<B>is</B><BR>
<B>end</B>&nbsp;A.B.X;</DIV>
<DIV Class="paranum">11.i</DIV>
<DIV Class="SmallExamples"><B>package</B>&nbsp;A.B.Y&nbsp;<B>is</B><BR>
<B>end</B>&nbsp;A.B.Y;</DIV>
<DIV Class="paranum">11.j</DIV>
<DIV Class="SmallExamples"><B>with</B>&nbsp;A.B.C;&nbsp;--&nbsp;<SPAN Class="roman"><I>(2)</I></SPAN><BR>
<B>package</B>&nbsp;<B>body</B>&nbsp;A.B.Y&nbsp;<B>is</B><BR>
<B>end</B>&nbsp;A.B.Y;</DIV>
<DIV Class="paranum">11.j.1/2</DIV>
<DIV Class="SmallExamples"><SPAN class="insert2"><B>private</B>&nbsp;<B>with</B>&nbsp;A.B.C;&nbsp;--&nbsp;<SPAN Class="roman"><I>(3)</I></SPAN><BR>
<B>package</B>&nbsp;A.B.Z&nbsp;<B>is</B><BR>
<B>end</B>&nbsp;A.B.Z;</SPAN></DIV>
<DIV Class="paranum">11.k/2</DIV>
<DIV Class="Annotations">{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AIs/AI-00262.TXT">AI95-00262-01</A></I>} 
(1) is OK because it's a private child of A.B &mdash; it would be illegal 
if we made A.B.X a public child of A.B. (2) is OK because it's the body 
of a child of A.B. <SPAN class="insert2">(3) is OK because it's a child 
of A.B, and it is a private <SPAN Class="swiss"><A HREF="AA-10-1-2.html#S0237">with_clause</A></SPAN>.</SPAN> 
It would be illegal to say &ldquo;<B>with</B> A.B.C;&rdquo; on any <SPAN Class="swiss"><A HREF="AA-10-1-1.html#S0230">library_item</A></SPAN> 
whose name does not start with &ldquo;A.B&rdquo;. Note that mentioning 
A.B.C.D in a <SPAN Class="swiss"><A HREF="AA-10-1-2.html#S0237">with_clause</A></SPAN> 
automatically mentions A.B.C as well, so &ldquo;<B>with</B> A.B.C.D;&rdquo; 
is illegal in the same places as &ldquo;<B>with</B> A.B.C;&rdquo;.&nbsp;</DIV>
<DIV Class="paranum">11.l/2</DIV>
<DIV Class="Annotations"><B>To be honest:&nbsp;</B>{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AIs/AI-00262.TXT">AI95-00262-01</A></I>} 
For the purposes of this rule, if a <SPAN Class="swiss"><A HREF="AA-6-3.html#S0162">subprogram_body</A></SPAN> 
has no preceding <SPAN Class="swiss"><A HREF="AA-6-1.html#S0148">subprogram_declaration</A></SPAN>, 
the <SPAN Class="swiss"><A HREF="AA-6-3.html#S0162">subprogram_body</A></SPAN> 
should be considered a declaration and not a body. Thus, it is illegal 
for such a <SPAN Class="swiss"><A HREF="AA-6-3.html#S0162">subprogram_body</A></SPAN> 
to mention one of its siblings in a <SPAN class="insert2">non-private 
</SPAN><SPAN Class="swiss"><A HREF="AA-10-1-2.html#S0237">with_clause</A></SPAN> 
if the sibling is a private library unit.&nbsp;</DIV>
<DIV Class="paranum">12/2</DIV>
<DIV Class="Normal" Style="margin-bottom: 0.4em">&nbsp;{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AIs/AI-00262.TXT">AI95-00262-01</A></I>} 
<SPAN class="insert2">A <SPAN Class="swiss"><A HREF="AA-4-1.html#S0091">name</A></SPAN> 
denoting a library item that is visible only due to being mentioned in 
one or more <SPAN Class="swiss"><A HREF="AA-10-1-2.html#S0237">with_clause</A></SPAN>s 
that include the reserved word <B>private</B> shall appear only within:</SPAN> 
</DIV>
<DIV Class="paranum">13/2</DIV>
<UL Class="Bulleted"><LI TYPE=DISC><SPAN class="insert2">a private part;</SPAN></LI></UL>
<DIV Class="paranum">14/2</DIV>
<UL Class="Bulleted"><LI TYPE=DISC><SPAN class="insert2">a body, but 
not within the <SPAN Class="swiss"><A HREF="AA-6-1.html#S0149">subprogram_specification</A></SPAN> 
of a library subprogram body;</SPAN></LI></UL>
<DIV Class="paranum">15/2</DIV>
<UL Class="Bulleted"><LI TYPE=DISC><SPAN class="insert2">a private descendant 
of the unit on which one of these <SPAN Class="swiss"><A HREF="AA-10-1-2.html#S0237">with_clause</A></SPAN>s 
appear; or</SPAN></LI></UL>
<DIV Class="paranum">16/2</DIV>
<UL Class="Bulleted"><LI TYPE=DISC><SPAN class="insert2">a pragma within 
a context clause.</SPAN>&nbsp;</LI></UL>
<DIV Class="paranum">16.a/2</DIV>
<DIV Class="Annotations"><SPAN class="insert2"><B>Ramification:&nbsp;</B>These 
rules apply only if all of the <SPAN Class="swiss"><A HREF="AA-10-1-2.html#S0237">with_clause</A></SPAN>s 
that mention the name include the reserved word <B>private</B>. They 
do not apply if the name is mentioned in any <SPAN Class="swiss"><A HREF="AA-10-1-2.html#S0237">with_clause</A></SPAN> 
that does not include <B>private</B>.</SPAN>&nbsp;</DIV>
<DIV Class="paranum">16.b/2</DIV>
<DIV Class="Annotations"><SPAN class="insert2"><B>Reason:&nbsp;</B>These rules 
make the library item visible anywhere that is not visible outside the 
subsystem rooted at the <SPAN Class="swiss"><A HREF="AA-10-1-1.html#S0229">compilation_unit</A></SPAN> 
having the private <SPAN Class="swiss"><A HREF="AA-10-1-2.html#S0237">with_clause</A></SPAN>, 
including private parts of packages nested in the visible part, private 
parts of child packages, the visible part of private children, and context 
clause pragmas like Elaborate_All.</SPAN></DIV>
<DIV Class="paranum">16.c/2</DIV>
<DIV Class="Annotations"><SPAN class="insert2">We considered having the 
scope of a private <SPAN Class="swiss"><A HREF="AA-10-1-2.html#S0237">with_clause</A></SPAN> 
not include the visible part. However, that rule would mean that moving 
a declaration between the visible part and the private part could change 
its meaning from one legal interpretation to a different legal interpretation. 
For example:</SPAN>&nbsp;</DIV>
<DIV Class="paranum">16.d/2</DIV>
<DIV Class="SmallExamples"><SPAN class="insert2"><B>package</B>&nbsp;A&nbsp;<B>is</B><BR>
&nbsp;&nbsp;&nbsp;&nbsp;<B>function</B>&nbsp;B&nbsp;<B>return</B>&nbsp;Integer;<BR>
<B>end</B>&nbsp;A;</SPAN></DIV>
<DIV Class="paranum">16.e/2</DIV>
<DIV Class="SmallExamples"><SPAN class="insert2"><B>function</B>&nbsp;B&nbsp;<B>return</B>&nbsp;Integer;</SPAN></DIV>
<DIV Class="paranum">16.f/2</DIV>
<DIV Class="SmallExamples"><SPAN class="insert2"><B>with</B>&nbsp;A;<BR>
<B>private</B>&nbsp;<B>with</B>&nbsp;B;<BR>
<B>package</B>&nbsp;C&nbsp;<B>is</B><BR>
&nbsp;&nbsp;&nbsp;&nbsp;<B>use</B>&nbsp;A;<BR>
&nbsp;&nbsp;&nbsp;&nbsp;V1&nbsp;:&nbsp;Integer&nbsp;:=&nbsp;B;&nbsp;--&nbsp;(1)<BR>
<B>private</B><BR>
&nbsp;&nbsp;&nbsp;&nbsp;V2&nbsp;:&nbsp;Integer&nbsp;:=&nbsp;B;&nbsp;--&nbsp;(2)<BR>
<B>end</B>&nbsp;C;</SPAN></DIV>
<DIV Class="paranum">16.g/2</DIV>
<DIV Class="Annotations"><SPAN class="insert2">If we say that library 
subprogram B is not in scope in the visible part of C, then the B at 
(1) resolves to A.B, while (2) resolves to library unit B. Simply moving 
a declaration could silently change its meaning. With the legality rule 
defined above, the B at (1) is illegal. If the user really meant A.B, 
they still can say that.</SPAN>&nbsp;</DIV>
<DIV Class="paranum">17/2</DIV>
<DIV Class="Normal">&nbsp;{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AIs/AI-50217.TXT">AI95-00217-06</A></I>} 
<SPAN class="insert2">[A <SPAN Class="swiss"><A HREF="AA-10-1-1.html#S0230">library_item</A></SPAN> 
mentioned in a <SPAN Class="swiss"><A HREF="AA-10-1-2.html#S0238">limited_with_clause</A></SPAN> 
shall be the implicit declaration of the limited view of a library package, 
not the declaration of a subprogram, generic unit, generic instance, 
or a renaming.]</SPAN></DIV>
<DIV Class="paranum">17.a/2</DIV>
<DIV Class="Annotations"><SPAN class="insert2"><B>Proof:&nbsp;</B>This is 
redundant because only such implicit declarations are visible in a <SPAN Class="swiss"><A HREF="AA-10-1-2.html#S0238">limited_with_clause</A></SPAN>. 
See <A HREF="AA-10-1-6.html">10.1.6</A>.</SPAN>&nbsp;</DIV>
<DIV Class="paranum">18/2</DIV>
<DIV Class="Normal">&nbsp;{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AIs/AI-50217.TXT">AI95-00217-06</A></I>} 
<SPAN class="insert2"></SPAN>{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AIs/AI-00412.TXT">AI95-00412-01</A></I>} 
<SPAN class="insert2">A <SPAN Class="swiss"><A HREF="AA-10-1-2.html#S0238">limited_with_clause</A></SPAN> 
shall not appear on a <SPAN Class="swiss"><A HREF="AA-10-1-1.html#S0233">library_unit_body</A></SPAN>, 
<SPAN Class="swiss"><A HREF="AA-10-1-3.html#S0245">subunit</A></SPAN>, 
or <SPAN Class="swiss"><A HREF="AA-10-1-1.html#S0232">library_unit_renaming_declaration</A></SPAN>.</SPAN></DIV>
<DIV Class="paranum">18.a/2</DIV>
<DIV Class="Annotations"><SPAN class="insert2"><B>Reason:&nbsp;</B></SPAN>{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AIs/AI-00412.TXT">AI95-00412-01</A></I>} 
<SPAN class="insert2">We don't allow a <SPAN Class="swiss"><A HREF="AA-10-1-2.html#S0238">limited_with_clause</A></SPAN> 
on a <SPAN Class="swiss"><A HREF="AA-10-1-1.html#S0232">library_unit_renaming_declaration</A></SPAN> 
because it would be useless and therefore probably is a mistake. A renaming 
cannot appear in a <SPAN Class="swiss"><A HREF="AA-10-1-2.html#S0238">limited_with_clause</A></SPAN> 
(by the rule prior to this one), and a renaming of a limited view cannot 
appear in a <SPAN Class="swiss"><A HREF="AA-10-1-2.html#S0239">nonlimited_with_clause</A></SPAN> 
(because the name would not be within the scope of a <SPAN Class="swiss"><A HREF="AA-10-1-2.html#S0237">with_clause</A></SPAN> 
denoting the package, see <A HREF="AA-8-5-3.html">8.5.3</A>). Nor could 
it be the parent of another unit. That doesn't leave anywhere that the 
name of such a renaming <B>could</B> appear, so we simply make writing 
it illegal.</SPAN>&nbsp;</DIV>
<DIV Class="paranum">19/2</DIV>
<DIV Class="Normal" Style="margin-bottom: 0.4em">&nbsp;{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AIs/AI-50217.TXT">AI95-00217-06</A></I>} 
<SPAN class="insert2">A <SPAN Class="swiss"><A HREF="AA-10-1-2.html#S0238">limited_with_clause</A></SPAN> 
that names a library package shall not appear:</SPAN></DIV>
<DIV Class="paranum">20/2</DIV>
<UL Class="Bulleted"><LI TYPE=DISC>{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AIs/AI-50217.TXT">AI95-00217-06</A></I>} 
<SPAN class="insert2">in the <SPAN Class="swiss"><A HREF="AA-10-1-2.html#S0235">context_clause</A></SPAN> 
for the explicit declaration of the named library package;</SPAN></LI></UL>
<DIV Class="paranum">20.a/2</DIV>
<DIV Class="Annotations"><SPAN class="insert2"><B>Reason:&nbsp;</B>We have 
to explicitly disallow</SPAN>&nbsp;</DIV>
<DIV Class="paranum">20.b/2</DIV>
<DIV Class="SmallExamples"><SPAN class="insert2"><B>limited</B>&nbsp;<B>with</B>&nbsp;P;<BR>
<B>package</B>&nbsp;P&nbsp;<B>is</B>&nbsp;...</SPAN></DIV>
<DIV Class="paranum">20.c/2</DIV>
<DIV Class="Annotations"><SPAN class="insert2">as we can't depend on 
the semantic dependence rules to do it for us as with regular withs. 
This says &ldquo;named&rdquo; and not &ldquo;mentioned&rdquo; in order 
that</SPAN>&nbsp;</DIV>
<DIV Class="paranum">20.d/2</DIV>
<DIV Class="SmallExamples"><SPAN class="insert2"><B>limited</B>&nbsp;<B>private</B>&nbsp;<B>with</B>&nbsp;P.Child;<BR>
<B>package</B>&nbsp;P&nbsp;<B>is</B>&nbsp;...</SPAN></DIV>
<DIV Class="paranum">20.e/2</DIV>
<DIV Class="Annotations"><SPAN class="insert2">can be used to allow a 
mutual dependence between the private part of P and the private child 
P.Child, which occurs in interfacing and other problems. Since the child 
always semantically depends on the parent, this is the only way such 
a dependence can be broken.</SPAN>&nbsp;</DIV>
<DIV Class="paranum">21/2</DIV>
<UL Class="Bulleted"><LI TYPE=DISC>{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AIs/AI-50217.TXT">AI95-00217-06</A></I>} 
<SPAN class="insert2">in the same <SPAN Class="swiss"><A HREF="AA-10-1-2.html#S0235">context_clause</A></SPAN> 
as, or within the scope of, a <SPAN Class="swiss"><A HREF="AA-10-1-2.html#S0239">nonlimited_with_clause</A></SPAN> 
that mentions the same library package; or</SPAN></LI></UL>
<DIV Class="paranum">21.a/2</DIV>
<DIV Class="Annotations"><SPAN class="insert2"><B>Reason:&nbsp;</B>Such a 
<SPAN Class="swiss"><A HREF="AA-10-1-2.html#S0238">limited_with_clause</A></SPAN> 
could have no effect, and would be confusing. If it is within the scope 
of a <SPAN Class="swiss"><A HREF="AA-10-1-2.html#S0239">nonlimited_with_clause</A></SPAN>, 
or if such a clause is in the <SPAN Class="swiss"><A HREF="AA-10-1-2.html#S0235">context_clause</A></SPAN>, 
the full view is available, which strictly provides more information 
than the limited view.</SPAN>&nbsp;</DIV>
<DIV Class="paranum">22/2</DIV>
<UL Class="Bulleted"><LI TYPE=DISC>{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AIs/AI-50217.TXT">AI95-00217-06</A></I>} 
<SPAN class="insert2">in the same <SPAN Class="swiss"><A HREF="AA-10-1-2.html#S0235">context_clause</A></SPAN> 
as, or within the scope of, a <SPAN Class="swiss"><A HREF="AA-8-4.html#S0179">use_clause</A></SPAN> 
that names an entity declared within the declarative region of the library 
package.</SPAN></LI></UL>
<DIV Class="paranum">22.a/2</DIV>
<DIV Class="Annotations"><SPAN class="insert2"><B>Reason:&nbsp;</B>This prevents 
visibility issues, where whether an entity is an incomplete or full view 
depends on how the name of the entity is written. The <SPAN Class="swiss"><A HREF="AA-10-1-2.html#S0238">limited_with_clause</A></SPAN> 
cannot be useful, as we must have the full view available in the parent 
in order for the <SPAN Class="swiss"><A HREF="AA-8-4.html#S0179">use_clause</A></SPAN> 
to be legal.</SPAN>&nbsp;</DIV>
<DIV Class="NotesHeader">NOTES</DIV>
<DIV Class="paranum">23/2</DIV>
<DIV Class="Notes">3&nbsp;&nbsp;{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AIs/AI-50217.TXT">AI95-00217-06</A></I>} 
A <SPAN Class="swiss"><A HREF="AA-10-1-1.html#S0230">library_item</A></SPAN> 
mentioned in a <SPAN class="insert2"><SPAN Class="swiss"><A HREF="AA-10-1-2.html#S0239">nonlimited_with_clause</A></SPAN></SPAN><SPAN class="delete2"><SPAN Class="swiss"><A HREF="AA-10-1-2.html#S0237">&nbsp;with_clause</A></SPAN></SPAN> 
of a compilation unit is visible within the compilation unit and hence 
acts just like an ordinary declaration. Thus, within a compilation unit 
that mentions its declaration, the name of a library package can be given 
in <SPAN Class="swiss"><A HREF="AA-8-4.html#S0179">use_clause</A></SPAN>s 
and can be used to form expanded names, a library subprogram can be called, 
and instances of a generic library unit can be declared. If a child of 
a parent generic package is mentioned in a <SPAN class="insert2"><SPAN Class="swiss"><A HREF="AA-10-1-2.html#S0239">nonlimited_with_clause</A></SPAN></SPAN><SPAN class="delete2"><SPAN Class="swiss"><A HREF="AA-10-1-2.html#S0237">&nbsp;with_clause</A></SPAN></SPAN>, 
then the corresponding declaration nested within each visible instance 
is visible within the compilation unit.<SPAN class="insert2">&nbsp;Similarly, 
a <SPAN Class="swiss"><A HREF="AA-10-1-1.html#S0230">library_item</A></SPAN> 
mentioned in a <SPAN Class="swiss"><A HREF="AA-10-1-2.html#S0238">limited_with_clause</A></SPAN> 
of a compilation unit is visible within the compilation unit and thus 
can be used to form expanded names.</SPAN></DIV>
<DIV Class="paranum">23.a</DIV>
<DIV Class="Annotations"><B>Ramification:&nbsp;</B>The rules given for <SPAN Class="swiss"><A HREF="AA-10-1-2.html#S0237">with_clause</A></SPAN>s 
are such that the same effect is obtained whether the name of a library 
unit is mentioned once or more than once by the applicable <SPAN Class="swiss"><A HREF="AA-10-1-2.html#S0237">with_clause</A></SPAN>s, 
or even within a given <SPAN Class="swiss"><A HREF="AA-10-1-2.html#S0237">with_clause</A></SPAN>.</DIV>
<DIV Class="paranum">23.b</DIV>
<DIV Class="Annotations">If a <SPAN Class="swiss"><A HREF="AA-10-1-2.html#S0237">with_clause</A></SPAN> 
mentions a <SPAN Class="swiss"><A HREF="AA-10-1-1.html#S0232">library_unit_renaming_declaration</A></SPAN>, 
it only &ldquo;mentions&rdquo; the <SPAN Class="swiss"><A HREF="AA-4-1.html#S0093">prefix</A></SPAN>es 
appearing explicitly in the <SPAN Class="swiss"><A HREF="AA-10-1-2.html#S0237">with_clause</A></SPAN> 
(and the renamed view itself); the <SPAN Class="swiss"><A HREF="AA-10-1-2.html#S0237">with_clause</A></SPAN> 
is not defined to mention the ancestors of the renamed entity. Thus, 
if X renames Y.Z, then &ldquo;with X;&rdquo; does not make the declarations 
of Y or Z visible. Note that this does not cause the dreaded visibility 
holes mentioned above.&nbsp;</DIV>

<H4 Class="centered">Examples</H4>
<DIV Class="paranum">24/2</DIV>
<DIV Class="Examples">{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AIs/AI-00433.TXT">AI95-00433-01</A></I>} 
<SPAN class="insert2"><B>package</B>&nbsp;Office&nbsp;<B>is</B><BR>
<B>end</B>&nbsp;Office;</SPAN></DIV>
<DIV Class="paranum">25/2</DIV>
<DIV Class="Examples">{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AIs/AI-00433.TXT">AI95-00433-01</A></I>} 
<SPAN class="insert2"><B>with</B>&nbsp;Ada.Strings.Unbounded;<BR>
<B>package</B>&nbsp;Office.Locations&nbsp;<B>is</B><BR>
&nbsp;&nbsp;&nbsp;<B>type</B>&nbsp;Location&nbsp;<B>is&nbsp;new</B>&nbsp;Ada.Strings.Unbounded.Unbounded_String;<BR>
<B>end</B>&nbsp;Office.Locations;</SPAN></DIV>
<DIV Class="paranum">26/2</DIV>
<DIV Class="Examples">{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AIs/AI-00433.TXT">AI95-00433-01</A></I>} 
<SPAN class="insert2"><B>limited&nbsp;with</B>&nbsp;Office.Departments;&nbsp;&nbsp;--<SPAN Class="roman"><I>&nbsp;types&nbsp;are&nbsp;incomplete</I></SPAN><BR>
<B>private&nbsp;with</B>&nbsp;Office.Locations;&nbsp;&nbsp;&nbsp;&nbsp;--<SPAN Class="roman"><I>&nbsp;only&nbsp;visible&nbsp;in&nbsp;private&nbsp;part</I></SPAN><BR>
<B>package</B>&nbsp;Office.Employees&nbsp;<B>is</B><BR>
&nbsp;&nbsp;&nbsp;<B>type</B>&nbsp;Employee&nbsp;<B>is&nbsp;private</B>;</SPAN></DIV>
<DIV Class="paranum">27/2</DIV>
<DIV Class="Examples"><SPAN class="insert2">&nbsp;&nbsp;&nbsp;<B>function</B>&nbsp;Dept_Of(Emp&nbsp;:&nbsp;Employee)&nbsp;<B>return&nbsp;access</B>&nbsp;Departments.Department;<BR>
&nbsp;&nbsp;&nbsp;<B>procedure</B>&nbsp;Assign_Dept(Emp&nbsp;&nbsp;:&nbsp;<B>in&nbsp;out</B>&nbsp;Employee;<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Dept&nbsp;:&nbsp;<B>access</B>&nbsp;Departments.Department);</SPAN></DIV>
<DIV Class="paranum">28/2</DIV>
<DIV Class="Examples"><SPAN class="insert2">&nbsp;&nbsp;&nbsp;...<BR>
<B>private<BR>
&nbsp;&nbsp;&nbsp;type</B>&nbsp;Employee&nbsp;<B>is<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;record</B><BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Dept&nbsp;:&nbsp;<B>access</B>&nbsp;Departments.Department;<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Loc&nbsp;:&nbsp;Locations.Location;<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;...<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<B>end&nbsp;record</B>;<BR>
<B>end</B>&nbsp;Office.Employees;</SPAN></DIV>
<DIV Class="paranum">29/2</DIV>
<DIV Class="Examples"><SPAN class="insert2"><B>limited&nbsp;with</B>&nbsp;Office.Employees;<BR>
<B>package</B>&nbsp;Office.Departments&nbsp;<B>is</B><BR>
&nbsp;&nbsp;&nbsp;<B>type</B>&nbsp;Department&nbsp;<B>is&nbsp;private</B>;</SPAN></DIV>
<DIV Class="paranum">30/2</DIV>
<DIV Class="Examples"><SPAN class="insert2">&nbsp;&nbsp;&nbsp;<B>function</B>&nbsp;Manager_Of(Dept&nbsp;:&nbsp;Department)&nbsp;<B>return&nbsp;access</B>&nbsp;Employees.Employee;<BR>
&nbsp;&nbsp;&nbsp;<B>procedure</B>&nbsp;Assign_Manager(Dept&nbsp;:&nbsp;<B>in&nbsp;out</B>&nbsp;Department;<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Mgr&nbsp;&nbsp;:&nbsp;<B>access</B>&nbsp;Employees.Employee);<BR>
&nbsp;&nbsp;&nbsp;...<BR>
<B>end</B>&nbsp;Office.Departments;</SPAN></DIV>
<DIV Class="paranum">31/2</DIV>
<DIV Class="Normal">&nbsp;{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AIs/AI-00433.TXT">AI95-00433-01</A></I>} 
<SPAN class="insert2">The <SPAN Class="swiss"><A HREF="AA-10-1-2.html#S0238">limited_with_clause</A></SPAN> 
may be used to support mutually dependent abstractions that are split 
across multiple packages. In this case, an employee is assigned to a 
department, and a department has a manager who is an employee. If a <SPAN Class="swiss"><A HREF="AA-10-1-2.html#S0237">with_clause</A></SPAN> 
with the reserved word <B>private</B> appears on one library unit and 
mentions a second library unit, it provides visibility to the second 
library unit, but restricts that visibility to the private part and body 
of the first unit. The compiler checks that no use is made of the second 
unit in the visible part of the first unit.</SPAN></DIV>

<H4 Class="centered">Extensions to Ada 83</H4>
<DIV Class="paranum">31.a</DIV>
<DIV Class="Annotations">{<I>extensions to Ada 83</I>} <A NAME="I4377"></A>The 
syntax rule for <SPAN Class="swiss"><A HREF="AA-10-1-2.html#S0237">with_clause</A></SPAN> 
is modified to allow expanded name notation.</DIV>
<DIV Class="paranum">31.b</DIV>
<DIV Class="Annotations">A <SPAN Class="swiss"><A HREF="AA-8-4.html#S0179">use_clause</A></SPAN> 
in a <SPAN Class="swiss"><A HREF="AA-10-1-2.html#S0235">context_clause</A></SPAN> 
may be for a package (or type) nested in a library package.&nbsp;</DIV>

<H4 Class="centered">Wording Changes from Ada 83</H4>
<DIV Class="paranum">31.c</DIV>
<DIV Class="Annotations">The syntax rule for <SPAN Class="swiss"><A HREF="AA-10-1-2.html#S0235">context_clause</A></SPAN> 
is modified to more closely reflect the semantics. The Ada 83 syntax 
rule implies that the <SPAN Class="swiss"><A HREF="AA-8-4.html#S0179">use_clause</A></SPAN>s 
that appear immediately after a particular <SPAN Class="swiss"><A HREF="AA-10-1-2.html#S0237">with_clause</A></SPAN> 
are somehow attached to that <SPAN Class="swiss"><A HREF="AA-10-1-2.html#S0237">with_clause</A></SPAN>, 
which is not true. The new syntax allows a <SPAN Class="swiss"><A HREF="AA-8-4.html#S0179">use_clause</A></SPAN> 
to appear first, but that is prevented by a textual rule that already 
exists in Ada 83.</DIV>
<DIV Class="paranum">31.d</DIV>
<DIV Class="Annotations">The concept of &ldquo;scope of a <SPAN Class="swiss"><A HREF="AA-10-1-2.html#S0237">with_clause</A></SPAN>&rdquo; 
(which is a region of text) replaces RM83's notion of &ldquo;apply to&rdquo; 
(a <SPAN Class="swiss"><A HREF="AA-10-1-2.html#S0237">with_clause</A></SPAN> 
applies to a <SPAN Class="swiss"><A HREF="AA-10-1-1.html#S0230">library_item</A></SPAN>) 
The visibility rules are interested in a region of text, not in a set 
of compilation units.</DIV>
<DIV Class="paranum">31.e</DIV>
<DIV Class="Annotations">No need to define &ldquo;apply to&rdquo; for 
<SPAN Class="swiss"><A HREF="AA-8-4.html#S0179">use_clause</A></SPAN>s. 
Their semantics are fully covered by the &ldquo;scope (of a <SPAN Class="swiss"><A HREF="AA-8-4.html#S0179">use_clause</A></SPAN>)&rdquo; 
definition in <A HREF="AA-8-4.html">8.4</A>.&nbsp;</DIV>

<H4 Class="centered">Incompatibilities With Ada 95</H4>
<DIV Class="paranum">31.f/2</DIV>
<DIV Class="Annotations">{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AIs/AI-00220.TXT">AI95-00220-01</A></I>} 
<SPAN class="insert2">{<I>incompatibilities with Ada 95</I>} <A NAME="I4378"></A><B>Amendment 
Correction:</B> A subprogram body acting as a declaration cannot <B>with</B> 
a private child unit. This would allow public export of types declared 
in private child packages, and thus cannot be allowed. This was allowed 
by mistake in Ada 95; a subprogram that does this will now be illegal.</SPAN> 
</DIV>

<H4 Class="centered">Extensions to Ada 95</H4>
<DIV Class="paranum">31.g/2</DIV>
<DIV Class="Annotations">{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AIs/AI-50217.TXT">AI95-00217-06</A></I>} 
<SPAN class="insert2">{<I>extensions to Ada 95</I>} <A NAME="I4379"></A><SPAN Class="swiss"><A HREF="AA-10-1-2.html#S0238">limited_with_clause</A></SPAN>s 
are new. They make a limited view of a package visible, where all of 
the types in the package are incomplete. They facilitate construction 
of mutually recursive types in multiple packages.</SPAN></DIV>
<DIV Class="paranum">31.h/2</DIV>
<DIV Class="Annotations">{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AIs/AI-00262.TXT">AI95-00262-01</A></I>} 
<SPAN class="insert2">{<I>extensions to Ada 95</I>} <A NAME="I4380"></A>The 
syntax rules for <SPAN Class="swiss"><A HREF="AA-10-1-2.html#S0237">with_clause</A></SPAN> 
are modified to allow the reserved word <B>private</B>. Private <SPAN Class="swiss"><A HREF="AA-10-1-2.html#S0237">with_clause</A></SPAN>s 
do not allow the use of their library item in the visible part of their 
<SPAN Class="swiss"><A HREF="AA-10-1-1.html#S0229">compilation_unit</A></SPAN>. 
They also allow using private units in more locations than in Ada 95.</SPAN> 
</DIV>

<HR>
<DIV Style="margin-top: 0.0em; margin-bottom: 0.6em"><A HREF="AA-TOC.html"><IMG SRC="cont.gif" ALT="Contents" BORDER=0></A>&nbsp;
&nbsp;<A HREF="AA-0-5.html"><IMG SRC="index.gif" ALT="Index" BORDER=0></A>&nbsp;
&nbsp;<A HREF="AA-STDS.html"><IMG SRC="lib.gif" ALT="References" BORDER=0></A>&nbsp;
&nbsp;<A HREF="AA-SRCH.html"><IMG SRC="find.gif" ALT="Search" BORDER=0></A>&nbsp;
&nbsp;<A HREF="AA-10-1-1.html"><IMG SRC="prev.gif" ALT="Previous" BORDER=0></A>&nbsp;
&nbsp;<A HREF="AA-10-1-3.html"><IMG SRC="next.gif" ALT="Next" BORDER=0></A>&nbsp;
</DIV>
<DIV Style="margin-top:0.0em"><IMG SRC="AE_logo.gif" height=100 width=113 align=right ALT="Ada-Europe">
<SPAN Style="font-size: 125%">Sponsored by <SPAN Style="font-size: 125%"><A HREF="http://www.ada-europe.org/"><B>Ada-Europe</B></A></SPAN></SPAN></DIV>
</BODY>
</HTML>
