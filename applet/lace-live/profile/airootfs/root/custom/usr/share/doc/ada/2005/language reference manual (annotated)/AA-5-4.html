<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
"http://www.w3.org/TR/html4/loose.dtd">
<HTML>
<HEAD>
    <TITLE>Case Statements</TITLE>
    <META http-equiv="Content-Type" content="text/html; charset=iso-8859-1">
    <META NAME="Author" CONTENT="JTC1/SC22/WG9/ARG, by Randall Brukardt, ARG Editor">
    <META NAME="GENERATOR" CONTENT="Arm_Form.Exe, Ada Reference Manual generator">
    <STYLE type="text/css">
    H4.centered {text-align: center}
    SPAN.swiss {font-family: Arial, Helvetica, sans-serif; font-size: 92%}
    SPAN.roman {font-family: "Times New Roman", Times, serif}
    DIV.paranum {float: left; font-family: Arial, Helvetica, sans-serif; font-size: 64%; width: 2.8em; margin-left: -0.4em; margin-right: -3.0em; margin-top: 0.2em}
    TT {font-family: "Courier New", monospace}
    DT {display: compact}
    SPAN.insert1 {text-decoration: underline; color: rgb(0,51,51) }
    SPAN.delete1 {text-decoration: line-through; color: rgb(0,51,51) }
    SPAN.insert2 {text-decoration: underline; color: rgb(0,102,0) }
    SPAN.delete2 {text-decoration: line-through; color: rgb(0,102,0) }
    DIV.Normal {font-family: "Times New Roman", Times, serif; line-height: 122%; margin-left: 1.2em; margin-bottom: 0.6em}
    DIV.Annotations {font-family: "Times New Roman", Times, serif; font-size: 80%; line-height: 122%; margin-left: 6.2em; margin-bottom: 0.6em}
    DIV.Notes {font-family: "Times New Roman", Times, serif; font-size: 80%; line-height: 122%; margin-left: 3.7em; margin-bottom: 0.6em}
    DIV.NotesHeader {font-family: "Times New Roman", Times, serif; font-size: 80%; line-height: 122%; margin-left: 3.7em}
    DIV.SyntaxIndented {font-family: "Times New Roman", Times, serif; line-height: 122%; margin-left: 3.2em; margin-bottom: 0.4em}
    DIV.Examples {font-family: "Courier New", monospace; font-size: 90%; line-height: 122%; margin-left: 3.4em; margin-bottom: 0.6em}
    DIV.SmallExamples {font-family: "Courier New", monospace; font-size: 72%; line-height: 122%; margin-left: 9.6em; margin-bottom: 0.6em}
    UL.Bulleted {font-family: "Times New Roman", Times, serif; line-height: 122%; margin-left: 3.2em; margin-right: 2.0em; margin-top: 0em; margin-bottom: 0.5em}
    UL.SmallBulleted {font-family: "Times New Roman", Times, serif; font-size: 80%; line-height: 122%; margin-left: 8.7em; margin-right: 2.5em; margin-top: 0em; margin-bottom: 0.5em}
    </STYLE>
</HEAD>
<BODY TEXT="#000000" BGCOLOR="#FFFFF0" LINK="#000080" VLINK="#330033" ALINK="#0000FF">
<DIV><B><SPAN Style="font-size:200%; color: rgb(0,51,153)">Annotated</SPAN><SPAN Style="font-size:200%; color: rgb(0,0,102)">&nbsp;Ada Reference Manual</SPAN></B> &mdash; <A HREF="AA-TTL.html"><B>Legal Information</B></A></DIV>
<DIV Style="margin-top: 0.6em; margin-bottom: 0.0em"><A HREF="AA-TOC.html"><IMG SRC="cont.gif" ALT="Contents" BORDER=0></A>&nbsp;
&nbsp;<A HREF="AA-0-5.html"><IMG SRC="index.gif" ALT="Index" BORDER=0></A>&nbsp;
&nbsp;<A HREF="AA-STDS.html"><IMG SRC="lib.gif" ALT="References" BORDER=0></A>&nbsp;
&nbsp;<A HREF="AA-SRCH.html"><IMG SRC="find.gif" ALT="Search" BORDER=0></A>&nbsp;
&nbsp;<A HREF="AA-5-3.html"><IMG SRC="prev.gif" ALT="Previous" BORDER=0></A>&nbsp;
&nbsp;<A HREF="AA-5-5.html"><IMG SRC="next.gif" ALT="Next" BORDER=0></A>&nbsp;
</DIV>
<HR>
<H1>5.4 Case Statements</H1>
<DIV Class="paranum">1</DIV>
<DIV Class="Normal">[A <SPAN Class="swiss"><A HREF="AA-5-4.html#S0140">case_statement</A></SPAN> 
selects for execution one of a number of alternative <SPAN Class="swiss">sequences_of_statements</SPAN>; 
the chosen alternative is defined by the value of an expression.]&nbsp;</DIV>

<H4 Class="centered">Syntax</H4>
<DIV Class="paranum">2</DIV>
<DIV Class="SyntaxIndented"><SPAN Class="swiss">case_statement</SPAN><A NAME="I3247"></A><A NAME="S0140"></A><SPAN Class="swiss">&nbsp;::=&nbsp;</SPAN><BR>
&nbsp;&nbsp;&nbsp;<B>case</B>&nbsp;<A NAME="I3248"></A><SPAN Class="swiss"><A HREF="AA-4-4.html#S0115">expression</A></SPAN>&nbsp;<B>is</B><BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<A NAME="I3249"></A><SPAN Class="swiss"><A HREF="AA-5-4.html#S0141">case_statement_alternative</A></SPAN><BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{<A NAME="I3250"></A><SPAN Class="swiss"><A HREF="AA-5-4.html#S0141">case_statement_alternative</A></SPAN>}<BR>
&nbsp;&nbsp;&nbsp;<B>end</B>&nbsp;<B>case</B>;</DIV>
<DIV Class="paranum">3</DIV>
<DIV Class="SyntaxIndented"><SPAN Class="swiss">case_statement_alternative</SPAN><A NAME="I3251"></A><A NAME="S0141"></A><SPAN Class="swiss">&nbsp;::=&nbsp;</SPAN><BR>
&nbsp;&nbsp;&nbsp;<B>when</B>&nbsp;<A NAME="I3252"></A><SPAN Class="swiss"><A HREF="AA-3-8-1.html#S0073">discrete_choice_list</A></SPAN>&nbsp;=&gt;<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<A NAME="I3253"></A><SPAN Class="swiss"><A HREF="AA-5-1.html#S0130">sequence_of_statements</A></SPAN></DIV>

<H4 Class="centered">Name Resolution Rules</H4>
<DIV Class="paranum">4</DIV>
<DIV Class="Normal"><SPAN STYLE="font-size: 80%">{<I>expected type (case 
expression)</I> [partial]}</SPAN> <A NAME="I3254"></A>The <SPAN Class="swiss"><A HREF="AA-4-4.html#S0115">expression</A></SPAN> 
is expected to be of any discrete type. <SPAN STYLE="font-size: 80%">{<I>expected 
type (case_statement_alternative discrete_choice)</I> [partial]}</SPAN> 
<A NAME="I3255"></A>The expected type for each <SPAN Class="swiss"><A HREF="AA-3-8-1.html#S0074">discrete_choice</A></SPAN> 
is the type of the <SPAN Class="swiss"><A HREF="AA-4-4.html#S0115">expression</A></SPAN>. 
</DIV>

<H4 Class="centered">Legality Rules</H4>
<DIV Class="paranum">5</DIV>
<DIV Class="Normal">The <SPAN Class="swiss"><A HREF="AA-4-4.html#S0115">expression</A></SPAN>s 
and <SPAN Class="swiss"><A HREF="AA-3-6-1.html#S0058">discrete_range</A></SPAN>s 
given as <SPAN Class="swiss"><A HREF="AA-3-8-1.html#S0074">discrete_choice</A></SPAN>s 
of a <SPAN Class="swiss"><A HREF="AA-5-4.html#S0140">case_statement</A></SPAN> 
shall be static. [A <SPAN Class="swiss"><A HREF="AA-3-8-1.html#S0074">discrete_choice</A></SPAN> 
<B>others</B>, if present, shall appear alone and in the last <SPAN Class="swiss"><A HREF="AA-3-8-1.html#S0073">discrete_choice_list</A></SPAN>.]</DIV>
<DIV Class="paranum">6</DIV>
<DIV Class="Normal">The possible values of the <SPAN Class="swiss"><A HREF="AA-4-4.html#S0115">expression</A></SPAN> 
shall be covered as follows:&nbsp;</DIV>
<DIV Class="paranum">7</DIV>
<UL Class="Bulleted"><LI TYPE=DISC>If the <SPAN Class="swiss"><A HREF="AA-4-4.html#S0115">expression</A></SPAN> 
is a <SPAN Class="swiss"><A HREF="AA-4-1.html#S0091">name</A></SPAN> 
[(including a <SPAN Class="swiss"><A HREF="AA-4-6.html#S0127">type_conversion</A></SPAN> 
or a <SPAN Class="swiss"><A HREF="AA-6-4.html#S0164">function_call</A></SPAN>)] 
having a static and constrained nominal subtype, or is a <SPAN Class="swiss"><A HREF="AA-4-7.html#S0128">qualified_expression</A></SPAN> 
whose <SPAN Class="swiss"><A HREF="AA-3-2-2.html#S0028">subtype_mark</A></SPAN> 
denotes a static and constrained scalar subtype, then each non-<B>others</B> 
<SPAN Class="swiss"><A HREF="AA-3-8-1.html#S0074">discrete_choice</A></SPAN> 
shall cover only values in that subtype, and each value of that subtype 
shall be covered by some <SPAN Class="swiss"><A HREF="AA-3-8-1.html#S0074">discrete_choice</A></SPAN> 
[(either explicitly or by <B>others</B>)].&nbsp;</LI></UL>
<DIV Class="paranum">7.a</DIV>
<DIV Class="Annotations"><B>Ramification:&nbsp;</B>Although not official <SPAN Class="swiss"><A HREF="AA-4-1.html#S0091">name</A></SPAN>s 
of objects, a value conversion still has a defined nominal subtype, namely 
its target subtype. See <A HREF="AA-4-6.html">4.6</A>.&nbsp;</DIV>
<DIV Class="paranum">8</DIV>
<UL Class="Bulleted"><LI TYPE=DISC>If the type of the <SPAN Class="swiss"><A HREF="AA-4-4.html#S0115">expression</A></SPAN> 
is <I>root_integer</I>, <I>universal_integer</I>, or a descendant of 
a formal scalar type, then the <SPAN Class="swiss"><A HREF="AA-5-4.html#S0140">case_statement</A></SPAN> 
shall have an <B>others</B> <SPAN Class="swiss"><A HREF="AA-3-8-1.html#S0074">discrete_choice</A></SPAN>. 
</LI></UL>
<DIV Class="paranum">8.a</DIV>
<DIV Class="Annotations"><B>Reason:&nbsp;</B>This is because the base range 
is implementation defined for <I>root_integer</I> and <I>universal_integer</I>, 
and not known statically in the case of a formal scalar type.&nbsp;</DIV>
<DIV Class="paranum">9</DIV>
<UL Class="Bulleted"><LI TYPE=DISC>Otherwise, each value of the base 
range of the type of the <SPAN Class="swiss"><A HREF="AA-4-4.html#S0115">expression</A></SPAN> 
shall be covered [(either explicitly or by <B>others</B>)].&nbsp;</LI></UL>
<DIV Class="paranum">10</DIV>
<DIV Class="Normal">Two distinct <SPAN Class="swiss"><A HREF="AA-3-8-1.html#S0074">discrete_choice</A></SPAN>s 
of a <SPAN Class="swiss"><A HREF="AA-5-4.html#S0140">case_statement</A></SPAN> 
shall not cover the same value.&nbsp;</DIV>
<DIV Class="paranum">10.a</DIV>
<DIV Class="Annotations"><B>Ramification:&nbsp;</B>The goal of these coverage 
rules is that any possible value of the <SPAN Class="swiss"><A HREF="AA-4-4.html#S0115">expression</A></SPAN> 
of a <SPAN Class="swiss"><A HREF="AA-5-4.html#S0140">case_statement</A></SPAN> 
should be covered by exactly one <SPAN Class="swiss"><A HREF="AA-3-8-1.html#S0074">discrete_choice</A></SPAN> 
of the <SPAN Class="swiss"><A HREF="AA-5-4.html#S0140">case_statement</A></SPAN>, 
and that this should be checked at compile time. The goal is achieved 
in most cases, but there are two minor loopholes:&nbsp;</DIV>
<DIV Class="paranum">10.b</DIV>
<UL Class="SmallBulleted"><LI TYPE=DISC>If the expression reads an object 
with an invalid representation (e.g. an uninitialized object), then the 
value can be outside the covered range. This can happen for static constrained 
subtypes, as well as nonstatic or unconstrained subtypes. It cannot, 
however, happen if the <SPAN Class="swiss"><A HREF="AA-5-4.html#S0140">case_statement</A></SPAN> 
has the <SPAN Class="swiss"><A HREF="AA-3-8-1.html#S0074">discrete_choice</A></SPAN> 
<B>others</B>, because <B>others</B> covers all values, even those outside 
the subtype.</LI></UL>
<DIV Class="paranum">10.c/2</DIV>
<UL Class="SmallBulleted"><LI TYPE=DISC>{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AIs/AI-00114.TXT">AI95-00114-01</A></I>} 
If the compiler chooses to represent the value of an expression of an 
unconstrained subtype in a way that includes values outside the bounds 
of the subtype, then those values can be outside the covered range. For 
example, if X: Integer := Integer'Last;, and the case <SPAN Class="swiss"><A HREF="AA-4-4.html#S0115">expression</A></SPAN> 
is X+1, then the implementation might choose to produce the correct value, 
which is outside the bounds of Integer. (It might raise Constraint_Error 
instead.) This case can only happen for non-generic subtypes that are 
either unconstrained or non<SPAN class="delete2">-</SPAN>static (or both). 
It can only happen if there is no <B>others</B> <SPAN Class="swiss"><A HREF="AA-3-8-1.html#S0074">discrete_choice</A></SPAN>. 
</LI></UL>
<DIV Class="paranum">10.d</DIV>
<DIV Class="Annotations">In the uninitialized variable case, the value 
might be anything; hence, any alternative can be chosen, or Constraint_Error 
can be raised. (We intend to prevent, however, jumping to random memory 
locations and the like.) In the out-of-range case, the behavior is more 
sensible: if there is an <B>others</B>, then the implementation may choose 
to raise Constraint_Error on the evaluation of the <SPAN Class="swiss"><A HREF="AA-4-4.html#S0115">expression</A></SPAN> 
(as usual), or it may choose to correctly evaluate the <SPAN Class="swiss"><A HREF="AA-4-4.html#S0115">expression</A></SPAN> 
and therefore choose the <B>others</B> alternative. Otherwise (no <B>others</B>), 
Constraint_Error is raised either way &mdash; on the <SPAN Class="swiss"><A HREF="AA-4-4.html#S0115">expression</A></SPAN> 
evaluation, or for the <SPAN Class="swiss"><A HREF="AA-5-4.html#S0140">case_statement</A></SPAN> 
itself.</DIV>
<DIV Class="paranum">10.e</DIV>
<DIV Class="Annotations">For an enumeration type with a discontiguous 
set of internal codes (see <A HREF="AA-13-4.html">13.4</A>), the only 
way to get values in between the proper values is via an object with 
an invalid representation; there is no &ldquo;out-of-range&rdquo; situation 
that can produce them.&nbsp;</DIV>

<H4 Class="centered">Dynamic Semantics</H4>
<DIV Class="paranum">11</DIV>
<DIV Class="Normal"><SPAN STYLE="font-size: 80%">{<I>execution (case_statement)</I> 
[partial]}</SPAN> <A NAME="I3256"></A>For the execution of a <SPAN Class="swiss"><A HREF="AA-5-4.html#S0140">case_statement</A></SPAN> 
the <SPAN Class="swiss"><A HREF="AA-4-4.html#S0115">expression</A></SPAN> 
is first evaluated.</DIV>
<DIV Class="paranum">12</DIV>
<DIV Class="Normal">If the value of the <SPAN Class="swiss"><A HREF="AA-4-4.html#S0115">expression</A></SPAN> 
is covered by the <SPAN Class="swiss"><A HREF="AA-3-8-1.html#S0073">discrete_choice_list</A></SPAN> 
of some <SPAN Class="swiss"><A HREF="AA-5-4.html#S0141">case_statement_alternative</A></SPAN>, 
then the <SPAN Class="swiss"><A HREF="AA-5-1.html#S0130">sequence_of_statements</A></SPAN> 
of the <SPAN Class="swiss">_alternative</SPAN> is executed.</DIV>
<DIV Class="paranum">13</DIV>
<DIV Class="Normal"><SPAN STYLE="font-size: 80%">{<I>Overflow_Check</I> 
[partial]}</SPAN> <A NAME="I3257"></A><SPAN STYLE="font-size: 80%">{<I>check, 
language-defined (Overflow_Check)</I>}</SPAN> <A NAME="I3258"></A><SPAN STYLE="font-size: 80%">{<I>Constraint_Error 
(raised by failure of run-time check)</I>}</SPAN> <A NAME="I3259"></A>Otherwise 
(the value is not covered by any <SPAN Class="swiss"><A HREF="AA-3-8-1.html#S0073">discrete_choice_list</A></SPAN>, 
perhaps due to being outside the base range), Constraint_Error is raised. 
</DIV>
<DIV Class="paranum">13.a</DIV>
<DIV Class="Annotations"><B>Ramification:&nbsp;</B>In this case, the value 
is outside the base range of its type, or is an invalid representation.</DIV>
<DIV Class="NotesHeader">NOTES</DIV>
<DIV Class="paranum">14</DIV>
<DIV Class="Notes">5&nbsp;&nbsp;The execution of a <SPAN Class="swiss"><A HREF="AA-5-4.html#S0140">case_statement</A></SPAN> 
chooses one and only one alternative. Qualification of the expression 
of a <SPAN Class="swiss"><A HREF="AA-5-4.html#S0140">case_statement</A></SPAN> 
by a static subtype can often be used to limit the number of choices 
that need be given explicitly.&nbsp;</DIV>

<H4 Class="centered">Examples</H4>
<DIV Class="paranum">15</DIV>
<DIV Class="Normal" Style="margin-bottom: 0.4em"><I>Examples of case 
statements:</I>&nbsp;</DIV>
<DIV Class="paranum">16</DIV>
<DIV Class="Examples"><B>case</B>&nbsp;Sensor&nbsp;<B>is</B><BR>
&nbsp;&nbsp;&nbsp;<B>when</B>&nbsp;Elevation&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;=&gt;&nbsp;Record_Elevation(Sensor_Value);<BR>
&nbsp;&nbsp;&nbsp;<B>when</B>&nbsp;Azimuth&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;=&gt;&nbsp;Record_Azimuth&nbsp;&nbsp;(Sensor_Value);<BR>
&nbsp;&nbsp;&nbsp;<B>when</B>&nbsp;Distance&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;=&gt;&nbsp;Record_Distance&nbsp;(Sensor_Value);<BR>
&nbsp;&nbsp;&nbsp;<B>when</B>&nbsp;<B>others</B>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;=&gt;&nbsp;<B>null</B>;<BR>
<B>end</B>&nbsp;<B>case</B>;</DIV>
<DIV Class="paranum">17</DIV>
<DIV Class="Examples"><B>case</B>&nbsp;Today&nbsp;<B>is</B><BR>
&nbsp;&nbsp;&nbsp;<B>when</B>&nbsp;Mon&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;=&gt;&nbsp;Compute_Initial_Balance;<BR>
&nbsp;&nbsp;&nbsp;<B>when</B>&nbsp;Fri&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;=&gt;&nbsp;Compute_Closing_Balance;<BR>
&nbsp;&nbsp;&nbsp;<B>when</B>&nbsp;Tue&nbsp;..&nbsp;Thu&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;=&gt;&nbsp;Generate_Report(Today);<BR>
&nbsp;&nbsp;&nbsp;<B>when</B>&nbsp;Sat&nbsp;..&nbsp;Sun&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;=&gt;&nbsp;<B>null</B>;<BR>
<B>end</B>&nbsp;<B>case</B>;</DIV>
<DIV Class="paranum">18</DIV>
<DIV Class="Examples"><B>case</B>&nbsp;Bin_Number(Count)&nbsp;<B>is</B><BR>
&nbsp;&nbsp;&nbsp;<B>when</B>&nbsp;1&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;=&gt;&nbsp;Update_Bin(1);<BR>
&nbsp;&nbsp;&nbsp;<B>when</B>&nbsp;2&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;=&gt;&nbsp;Update_Bin(2);<BR>
&nbsp;&nbsp;&nbsp;<B>when</B>&nbsp;3&nbsp;|&nbsp;4&nbsp;&nbsp;&nbsp;&nbsp;=&gt;<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Empty_Bin(1);<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Empty_Bin(2);<BR>
&nbsp;&nbsp;&nbsp;<B>when</B>&nbsp;<B>others</B>&nbsp;&nbsp;&nbsp;=&gt;&nbsp;<B>raise</B>&nbsp;Error;<BR>
<B>end</B>&nbsp;<B>case</B>;</DIV>

<H4 Class="centered">Incompatibilities With Ada 83</H4>
<DIV Class="paranum">18.a.1/1</DIV>
<DIV Class="Annotations"><SPAN class="insert1">{<I>incompatibilities 
with Ada 83</I>} <A NAME="I3260"></A>In Ada 95, <SPAN Class="swiss"><A HREF="AA-6-4.html#S0164">function_call</A></SPAN>s 
and <SPAN Class="swiss"><A HREF="AA-4-6.html#S0127">type_conversion</A></SPAN>s 
are <SPAN Class="swiss"><A HREF="AA-4-1.html#S0091">name</A></SPAN>s, 
whereas in Ada 83, they were <SPAN Class="swiss"><A HREF="AA-4-4.html#S0115">expression</A></SPAN>s. 
Therefore, if the <SPAN Class="swiss"><A HREF="AA-4-4.html#S0115">expression</A></SPAN> 
of a <SPAN Class="swiss"><A HREF="AA-5-4.html#S0140">case_statement</A></SPAN> 
is a <SPAN Class="swiss"><A HREF="AA-6-4.html#S0164">function_call</A></SPAN> 
or <SPAN Class="swiss"><A HREF="AA-4-6.html#S0127">type_conversion</A></SPAN>, 
and the result subtype is static, it is illegal to specify a choice outside 
the bounds of the subtype. For this case in Ada 83 choices only are required 
to be in the base range of the type.</SPAN></DIV>
<DIV Class="paranum">18.a.2/1</DIV>
<DIV Class="Annotations"><SPAN class="insert1">In addition, the rule 
about which choices must be covered is unchanged in Ada 95. Therefore, 
for a <SPAN Class="swiss"><A HREF="AA-5-4.html#S0140">case_statement</A></SPAN> 
whose <SPAN Class="swiss"><A HREF="AA-4-4.html#S0115">expression</A></SPAN> 
is a <SPAN Class="swiss"><A HREF="AA-6-4.html#S0164">function_call</A></SPAN> 
or <SPAN Class="swiss"><A HREF="AA-4-6.html#S0127">type_conversion</A></SPAN>, 
Ada 83 required covering all choices in the base range, while Ada 95 
only requires covering choices in the bounds of the subtype. If the <SPAN Class="swiss"><A HREF="AA-5-4.html#S0140">case_statement</A></SPAN> 
does not include an <B>others</B> <SPAN Class="swiss"><A HREF="AA-3-8-1.html#S0074">discrete_choice</A></SPAN>, 
then a legal Ada 83 <SPAN Class="swiss"><A HREF="AA-5-4.html#S0140">case_statement</A></SPAN> 
will be illegal in Ada 95 if the bounds of the subtype are different 
than the bounds of the base type.</SPAN>&nbsp;</DIV>

<H4 Class="centered">Extensions to Ada 83</H4>
<DIV Class="paranum">18.a</DIV>
<DIV Class="Annotations">{<I>extensions to Ada 83</I>} <A NAME="I3261"></A>In 
Ada 83, the <SPAN Class="swiss"><A HREF="AA-4-4.html#S0115">expression</A></SPAN> 
in a <SPAN Class="swiss"><A HREF="AA-5-4.html#S0140">case_statement</A></SPAN> 
is not allowed to be of a generic formal type. This restriction is removed 
in Ada 95; an <B>others</B> <SPAN Class="swiss"><A HREF="AA-3-8-1.html#S0074">discrete_choice</A></SPAN> 
is required instead.</DIV>
<DIV Class="paranum">18.b</DIV>
<DIV Class="Annotations">In Ada 95, a function call is the name of an 
object; this was not true in Ada 83 (see <A HREF="AA-4-1.html">4.1</A>, 
&ldquo;<A HREF="AA-4-1.html">Names</A>&rdquo;). This change makes the 
following <SPAN Class="swiss"><A HREF="AA-5-4.html#S0140">case_statement</A></SPAN> 
legal:&nbsp;</DIV>
<DIV Class="paranum">18.c</DIV>
<DIV Class="SmallExamples"><B>subtype</B>&nbsp;S&nbsp;<B>is</B>&nbsp;Integer&nbsp;<B>range</B>&nbsp;1..2;<BR>
<B>function</B>&nbsp;F&nbsp;<B>return</B>&nbsp;S;<BR>
<B>case</B>&nbsp;F&nbsp;<B>is</B><BR>
&nbsp;&nbsp;&nbsp;<B>when</B>&nbsp;1&nbsp;=&gt;&nbsp;...;<BR>
&nbsp;&nbsp;&nbsp;<B>when</B>&nbsp;2&nbsp;=&gt;&nbsp;...;<BR>
&nbsp;&nbsp;&nbsp;--<SPAN Class="roman"><I>&nbsp;No&nbsp;<B>others</B>&nbsp;needed.</I></SPAN><BR>
<B>end</B>&nbsp;<B>case</B>;</DIV>
<DIV Class="paranum">18.d</DIV>
<DIV Class="Annotations">Note that the result subtype given in a function 
<SPAN Class="swiss"><A HREF="AA-8-5.html#S0182">renaming_declaration</A></SPAN> 
is ignored; for a <SPAN Class="swiss"><A HREF="AA-5-4.html#S0140">case_statement</A></SPAN> 
whose expression calls a such a function, the full coverage rules are 
checked using the result subtype of the original function. Note that 
predefined operators such as &quot;+&quot; have an unconstrained result 
subtype (see <A HREF="AA-4-5-1.html">4.5.1</A>). Note that generic formal 
functions do not have static result subtypes. Note that the result subtype 
of an inherited subprogram need not correspond to any namable subtype; 
there is still a perfectly good result subtype, though.&nbsp;</DIV>

<H4 Class="centered">Wording Changes from Ada 83</H4>
<DIV Class="paranum">18.e</DIV>
<DIV Class="Annotations">Ada 83 forgot to say what happens for &ldquo;legally&rdquo; 
out-of-bounds values.</DIV>
<DIV Class="paranum">18.f</DIV>
<DIV Class="Annotations">We take advantage of rules and terms (e.g. <I>cover 
a value</I>) defined for <SPAN Class="swiss"><A HREF="AA-3-8-1.html#S0074">discrete_choice</A></SPAN>s 
and <SPAN Class="swiss"><A HREF="AA-3-8-1.html#S0073">discrete_choice_list</A></SPAN>s 
in <A HREF="AA-3-8-1.html">3.8.1</A>, &ldquo;<A HREF="AA-3-8-1.html">Variant 
Parts and Discrete Choices</A>&rdquo;.</DIV>
<DIV Class="paranum">18.g</DIV>
<DIV Class="Annotations">In the Name Resolution Rule for the case expression, 
we no longer need RM83-5.4(3)'s &ldquo;which must be determinable independently 
of the context in which the expression occurs, but using the fact that 
the expression must be of a discrete type,&rdquo; because the <SPAN Class="swiss"><A HREF="AA-4-4.html#S0115">expression</A></SPAN> 
is now a complete context. See <A HREF="AA-8-6.html">8.6</A>, &ldquo;<A HREF="AA-8-6.html">The 
Context of Overload Resolution</A>&rdquo;.</DIV>
<DIV Class="paranum">18.h</DIV>
<DIV Class="Annotations">Since <SPAN Class="swiss"><A HREF="AA-4-6.html#S0127">type_conversion</A></SPAN>s 
are now defined as <SPAN Class="swiss"><A HREF="AA-4-1.html#S0091">name</A></SPAN>s, 
their coverage rule is now covered under the general rule for <SPAN Class="swiss"><A HREF="AA-4-1.html#S0091">name</A></SPAN>s, 
rather than being separated out along with <SPAN Class="swiss"><A HREF="AA-4-7.html#S0128">qualified_expression</A></SPAN>s. 
</DIV>

<HR>
<DIV Style="margin-top: 0.0em; margin-bottom: 0.6em"><A HREF="AA-TOC.html"><IMG SRC="cont.gif" ALT="Contents" BORDER=0></A>&nbsp;
&nbsp;<A HREF="AA-0-5.html"><IMG SRC="index.gif" ALT="Index" BORDER=0></A>&nbsp;
&nbsp;<A HREF="AA-STDS.html"><IMG SRC="lib.gif" ALT="References" BORDER=0></A>&nbsp;
&nbsp;<A HREF="AA-SRCH.html"><IMG SRC="find.gif" ALT="Search" BORDER=0></A>&nbsp;
&nbsp;<A HREF="AA-5-3.html"><IMG SRC="prev.gif" ALT="Previous" BORDER=0></A>&nbsp;
&nbsp;<A HREF="AA-5-5.html"><IMG SRC="next.gif" ALT="Next" BORDER=0></A>&nbsp;
</DIV>
<DIV Style="margin-top:0.0em"><IMG SRC="AE_logo.gif" height=100 width=113 align=right ALT="Ada-Europe">
<SPAN Style="font-size: 125%">Sponsored by <SPAN Style="font-size: 125%"><A HREF="http://www.ada-europe.org/"><B>Ada-Europe</B></A></SPAN></SPAN></DIV>
</BODY>
</HTML>
