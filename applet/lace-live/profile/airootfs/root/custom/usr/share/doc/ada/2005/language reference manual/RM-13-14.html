<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
"http://www.w3.org/TR/html4/loose.dtd">
<HTML>
<HEAD>
    <TITLE>Freezing Rules</TITLE>
    <META http-equiv="Content-Type" content="text/html; charset=iso-8859-1">
    <META NAME="Author" CONTENT="JTC1/SC22/WG9/ARG, by Randall Brukardt, ARG Editor">
    <META NAME="GENERATOR" CONTENT="Arm_Form.Exe, Ada Reference Manual generator">
    <STYLE type="text/css">
    H4.centered {text-align: center}
    SPAN.swiss {font-family: Arial, Helvetica, sans-serif; font-size: 92%}
    SPAN.roman {font-family: "Times New Roman", Times, serif}
    DIV.paranum {float: left; font-family: Arial, Helvetica, sans-serif; font-size: 64%; width: 2.8em; margin-left: -0.4em; margin-right: -3.0em; margin-top: 0.2em}
    TT {font-family: "Courier New", monospace}
    DT {display: compact}
    DIV.Normal {font-family: "Times New Roman", Times, serif; line-height: 122%; margin-left: 1.2em; margin-bottom: 0.6em}
    UL.Bulleted {font-family: "Times New Roman", Times, serif; line-height: 122%; margin-left: 3.2em; margin-right: 2.0em; margin-top: 0em; margin-bottom: 0.5em}
    </STYLE>
</HEAD>
<BODY TEXT="#000000" BGCOLOR="#FFFFF0" LINK="#000080" VLINK="#330033" ALINK="#0000FF">
<DIV><SPAN Style="font-size:200%; color: rgb(0,0,153)"><B>Ada Reference Manual</B></SPAN> &mdash; <A HREF="RM-TTL.html"><B>Legal Information</B></A></DIV>
<DIV Style="margin-top: 0.6em; margin-bottom: 0.0em"><A HREF="RM-TOC.html"><IMG SRC="cont.gif" ALT="Contents" BORDER=0></A>&nbsp;
&nbsp;<A HREF="RM-0-5.html"><IMG SRC="index.gif" ALT="Index" BORDER=0></A>&nbsp;
&nbsp;<A HREF="RM-STDS.html"><IMG SRC="lib.gif" ALT="References" BORDER=0></A>&nbsp;
&nbsp;<A HREF="RM-SRCH.html"><IMG SRC="find.gif" ALT="Search" BORDER=0></A>&nbsp;
&nbsp;<A HREF="RM-13-13-2.html"><IMG SRC="prev.gif" ALT="Previous" BORDER=0></A>&nbsp;
&nbsp;<A HREF="RM-0-4.html"><IMG SRC="next.gif" ALT="Next" BORDER=0></A>&nbsp;
</DIV>
<HR>
<H1>13.14 Freezing Rules</H1>
<DIV Class="paranum">1</DIV>
<DIV Class="Normal">This clause defines a place in the program text where 
each declared entity becomes &ldquo;frozen.&rdquo; A use of an entity, 
such as a reference to it by name, or (for a type) an expression of the 
type, causes freezing of the entity in some contexts, as described below. 
The Legality Rules forbid certain kinds of uses of an entity in the region 
of text where it is frozen.&nbsp;</DIV>
<DIV Class="paranum">2</DIV>
<DIV Class="Normal"><A NAME="I4804"></A><A NAME="I4805"></A>The <I>freezing</I> 
of an entity occurs at one or more places (<I>freezing points</I>) in 
the program text where the representation for the entity has to be fully 
determined. Each entity is frozen from its first freezing point to the 
end of the program text (given the ordering of compilation units defined 
in <A HREF="RM-10-1-4.html">10.1.4</A>).&nbsp;</DIV>
<DIV Class="paranum">3/1</DIV>
<DIV Class="Normal"><A NAME="I4806"></A>The end of a <SPAN Class="swiss"><A HREF="RM-3-11.html#S0086">declarative_part</A></SPAN>, 
<SPAN Class="swiss"><A HREF="RM-9-4.html#S0198">protected_body</A></SPAN>, 
or a declaration of a library package or generic library package, causes 
<I>freezing</I> of each entity declared within it, except for incomplete 
types. <A NAME="I4807"></A>A noninstance body other than a renames-as-body 
causes freezing of each entity declared before it within the same <SPAN Class="swiss"><A HREF="RM-3-11.html#S0086">declarative_part</A></SPAN>. 
</DIV>
<DIV Class="paranum">4/1</DIV>
<DIV Class="Normal" Style="margin-bottom: 0.4em"><A NAME="I4808"></A>A 
construct that (explicitly or implicitly) references an entity can cause 
the <I>freezing</I> of the entity, as defined by subsequent paragraphs. 
<A NAME="I4809"></A>At the place where a construct causes freezing, each 
<SPAN Class="swiss"><A HREF="RM-4-1.html#S0091">name</A></SPAN>, <SPAN Class="swiss"><A HREF="RM-4-4.html#S0115">expression</A></SPAN>, 
<SPAN Class="swiss"><A HREF="RM-4-1.html#S0095">implicit_dereference</A></SPAN>, 
or <SPAN Class="swiss"><A HREF="RM-3-5.html#S0037">range</A></SPAN> within 
the construct causes freezing:&nbsp;</DIV>
<DIV Class="paranum">5</DIV>
<UL Class="Bulleted" Style="margin-bottom: 0.3em"><LI TYPE=DISC><A NAME="I4810"></A>The 
occurrence of a <SPAN Class="swiss"><A HREF="RM-12-3.html#S0257">generic_instantiation</A></SPAN> 
causes freezing; also, if a parameter of the instantiation is defaulted, 
the <SPAN Class="swiss"><A HREF="RM-3-7.html#S0063">default_expression</A></SPAN> 
or <SPAN Class="swiss"><A HREF="RM-12-6.html#S0279">default_name</A></SPAN> 
for that parameter causes freezing.</LI></UL>
<DIV Class="paranum">6</DIV>
<UL Class="Bulleted" Style="margin-bottom: 0.3em"><LI TYPE=DISC><A NAME="I4811"></A>The 
occurrence of an <SPAN Class="swiss"><A HREF="RM-3-3-1.html#S0032">object_declaration</A></SPAN> 
that has no corresponding completion causes freezing.&nbsp;</LI></UL>
<DIV Class="paranum">7</DIV>
<UL Class="Bulleted"><LI TYPE=DISC><A NAME="I4812"></A>The declaration 
of a record extension causes freezing of the parent subtype.&nbsp;</LI></UL>
<DIV Class="paranum">7.1/2</DIV>
<UL Class="Bulleted"><LI TYPE=DISC>The declaration of a record extension, 
interface type, task unit, or protected unit causes freezing of any progenitor 
types specified in the declaration.&nbsp;</LI></UL>
<DIV Class="paranum">8/1</DIV>
<DIV Class="Normal"><A NAME="I4813"></A>A static expression causes freezing 
where it occurs. <A NAME="I4814"></A>An object name or nonstatic expression 
causes freezing where it occurs, unless the name or expression is part 
of a <SPAN Class="swiss"><A HREF="RM-3-7.html#S0063">default_expression</A></SPAN>, 
a <SPAN Class="swiss"><A HREF="RM-12-6.html#S0279">default_name</A></SPAN>, 
or a per-object expression of a component's <SPAN Class="swiss"><A HREF="RM-3-2-2.html#S0029">constraint</A></SPAN>, 
in which case, the freezing occurs later as part of another construct.</DIV>
<DIV Class="paranum">8.1/1</DIV>
<DIV Class="Normal">&nbsp;&nbsp;<A NAME="I4815"></A>An implicit call freezes the 
same entities that would be frozen by an explicit call. This is true 
even if the implicit call is removed via implementation permissions.</DIV>
<DIV Class="paranum">8.2/1</DIV>
<DIV Class="Normal">&nbsp;&nbsp;<A NAME="I4816"></A>If an expression is implicitly 
converted to a type or subtype <I>T</I>, then at the place where the 
expression causes freezing, <I>T</I> is frozen.</DIV>
<DIV Class="paranum">9</DIV>
<DIV Class="Normal" Style="margin-bottom: 0.4em">The following rules 
define which entities are frozen at the place where a construct causes 
freezing:&nbsp;</DIV>
<DIV Class="paranum">10</DIV>
<UL Class="Bulleted" Style="margin-bottom: 0.3em"><LI TYPE=DISC><A NAME="I4817"></A>At 
the place where an expression causes freezing, the type of the expression 
is frozen, unless the expression is an enumeration literal used as a 
<SPAN Class="swiss"><A HREF="RM-3-8-1.html#S0074">discrete_choice</A></SPAN> 
of the <SPAN Class="swiss"><A HREF="RM-4-3-3.html#S0111">array_aggregate</A></SPAN> 
of an <SPAN Class="swiss"><A HREF="RM-13-4.html#S0287">enumeration_representation_clause</A></SPAN>. 
</LI></UL>
<DIV Class="paranum">11</DIV>
<UL Class="Bulleted" Style="margin-bottom: 0.3em"><LI TYPE=DISC><A NAME="I4818"></A>At 
the place where a <SPAN Class="swiss"><A HREF="RM-4-1.html#S0091">name</A></SPAN> 
causes freezing, the entity denoted by the <SPAN Class="swiss"><A HREF="RM-4-1.html#S0091">name</A></SPAN> 
is frozen, unless the <SPAN Class="swiss"><A HREF="RM-4-1.html#S0091">name</A></SPAN> 
is a <SPAN Class="swiss"><A HREF="RM-4-1.html#S0093">prefix</A></SPAN> 
of an expanded name; <A NAME="I4819"></A>at the place where an object 
<SPAN Class="swiss"><A HREF="RM-4-1.html#S0091">name</A></SPAN> causes 
freezing, the nominal subtype associated with the <SPAN Class="swiss"><A HREF="RM-4-1.html#S0091">name</A></SPAN> 
is frozen.&nbsp;</LI></UL>
<DIV Class="paranum">11.1/1</DIV>
<UL Class="Bulleted" Style="margin-bottom: 0.3em"><LI TYPE=DISC><A NAME="I4820"></A>At 
the place where an <SPAN Class="swiss"><A HREF="RM-4-1.html#S0095">implicit_dereference</A></SPAN> 
causes freezing, the nominal subtype associated with the <SPAN Class="swiss"><A HREF="RM-4-1.html#S0095">implicit_dereference</A></SPAN> 
is frozen.</LI></UL>
<DIV Class="paranum">12</DIV>
<UL Class="Bulleted" Style="margin-bottom: 0.3em"><LI TYPE=DISC><A NAME="I4821"></A>At 
the place where a <SPAN Class="swiss"><A HREF="RM-3-5.html#S0037">range</A></SPAN> 
causes freezing, the type of the <SPAN Class="swiss"><A HREF="RM-3-5.html#S0037">range</A></SPAN> 
is frozen.&nbsp;</LI></UL>
<DIV Class="paranum">13</DIV>
<UL Class="Bulleted" Style="margin-bottom: 0.3em"><LI TYPE=DISC><A NAME="I4822"></A>At 
the place where an <SPAN Class="swiss"><A HREF="RM-4-8.html#S0129">allocator</A></SPAN> 
causes freezing, the designated subtype of its type is frozen. If the 
type of the <SPAN Class="swiss"><A HREF="RM-4-8.html#S0129">allocator</A></SPAN> 
is a derived type, then all ancestor types are also frozen.&nbsp;</LI></UL>
<DIV Class="paranum">14</DIV>
<UL Class="Bulleted" Style="margin-bottom: 0.3em"><LI TYPE=DISC><A NAME="I4823"></A>At 
the place where a callable entity is frozen, each subtype of its profile 
is frozen. If the callable entity is a member of an entry family, the 
index subtype of the family is frozen. <A NAME="I4824"></A>At the place 
where a function call causes freezing, if a parameter of the call is 
defaulted, the <SPAN Class="swiss"><A HREF="RM-3-7.html#S0063">default_expression</A></SPAN> 
for that parameter causes freezing.&nbsp;</LI></UL>
<DIV Class="paranum">15</DIV>
<UL Class="Bulleted" Style="margin-bottom: 0.3em"><LI TYPE=DISC><A NAME="I4825"></A>At 
the place where a subtype is frozen, its type is frozen. <A NAME="I4826"></A><A NAME="I4827"></A>At 
the place where a type is frozen, any expressions or <SPAN Class="swiss"><A HREF="RM-4-1.html#S0091">name</A></SPAN>s 
within the full type definition cause freezing; the first subtype, and 
any component subtypes, index subtypes, and parent subtype of the type 
are frozen as well. <A NAME="I4828"></A><A NAME="I4829"></A>For a specific 
tagged type, the corresponding class-wide type is frozen as well. For 
a class-wide type, the corresponding specific type is frozen as well. 
</LI></UL>
<DIV Class="paranum">15.1/2</DIV>
<UL Class="Bulleted" Style="margin-bottom: 0.3em"><LI TYPE=DISC>At the 
place where a specific tagged type is frozen, the primitive subprograms 
of the type are frozen.&nbsp;</LI></UL>

<H4 Class="centered">Legality Rules</H4>
<DIV Class="paranum">16</DIV>
<DIV Class="Normal" Style="margin-bottom: 0.4em">The explicit declaration 
of a primitive subprogram of a tagged type shall occur before the type 
is frozen (see <A HREF="RM-3-9-2.html">3.9.2</A>).&nbsp;</DIV>
<DIV Class="paranum">17</DIV>
<DIV Class="Normal" Style="margin-bottom: 0.4em">A type shall be completely 
defined before it is frozen (see <A HREF="RM-3-11-1.html">3.11.1</A> 
and <A HREF="RM-7-3.html">7.3</A>).</DIV>
<DIV Class="paranum">18</DIV>
<DIV Class="Normal" Style="margin-bottom: 0.4em">The completion of a 
deferred constant declaration shall occur before the constant is frozen 
(see <A HREF="RM-7-4.html">7.4</A>).</DIV>
<DIV Class="paranum">19/1</DIV>
<DIV Class="Normal" Style="margin-bottom: 0.4em">&nbsp;An operational or 
representation item that directly specifies an aspect of an entity shall 
appear before the entity is frozen (see <A HREF="RM-13-1.html">13.1</A>). 
</DIV>

<H4 Class="centered">Dynamic Semantics</H4>
<DIV Class="paranum">20/2</DIV>
<DIV Class="Normal">&nbsp;The tag (see <A HREF="RM-3-9.html">3.9</A>) of a 
tagged type T is created at the point where T is frozen.<A NAME="I4830"></A> 
</DIV>

<HR>
<DIV Style="margin-top: 0.0em; margin-bottom: 0.6em"><A HREF="RM-TOC.html"><IMG SRC="cont.gif" ALT="Contents" BORDER=0></A>&nbsp;
&nbsp;<A HREF="RM-0-5.html"><IMG SRC="index.gif" ALT="Index" BORDER=0></A>&nbsp;
&nbsp;<A HREF="RM-STDS.html"><IMG SRC="lib.gif" ALT="References" BORDER=0></A>&nbsp;
&nbsp;<A HREF="RM-SRCH.html"><IMG SRC="find.gif" ALT="Search" BORDER=0></A>&nbsp;
&nbsp;<A HREF="RM-13-13-2.html"><IMG SRC="prev.gif" ALT="Previous" BORDER=0></A>&nbsp;
&nbsp;<A HREF="RM-0-4.html"><IMG SRC="next.gif" ALT="Next" BORDER=0></A>&nbsp;
</DIV>
<DIV Style="margin-top:0.0em"><IMG SRC="AE_logo.gif" height=100 width=113 align=right ALT="Ada-Europe">
<SPAN Style="vertical-align: middle">Sponsored by <SPAN Style="font-size: 125%"><A HREF="http://www.ada-europe.org/"><B>Ada-Europe</B></A></SPAN></SPAN></DIV>
</BODY>
</HTML>
