<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
"http://www.w3.org/TR/html4/loose.dtd">
<HTML>
<HEAD>
    <TITLE>Limited Types</TITLE>
    <META http-equiv="Content-Type" content="text/html; charset=iso-8859-1">
    <META NAME="Author" CONTENT="JTC1/SC22/WG9/ARG, by Randall Brukardt, ARG Editor">
    <META NAME="GENERATOR" CONTENT="Arm_Form.Exe, Ada Reference Manual generator">
    <STYLE type="text/css">
    H4.centered {text-align: center}
    SPAN.swiss {font-family: Arial, Helvetica, sans-serif; font-size: 92%}
    SPAN.roman {font-family: "Times New Roman", Times, serif}
    DIV.paranum {float: left; font-family: Arial, Helvetica, sans-serif; font-size: 64%; width: 2.8em; margin-left: -0.4em; margin-right: -3.0em; margin-top: 0.2em}
    TT {font-family: "Courier New", monospace}
    DT {display: compact}
    DIV.Normal {font-family: "Times New Roman", Times, serif; line-height: 122%; margin-left: 1.2em; margin-bottom: 0.6em}
    DIV.Notes {font-family: "Times New Roman", Times, serif; font-size: 80%; line-height: 122%; margin-left: 3.7em; margin-bottom: 0.6em}
    DIV.NotesHeader {font-family: "Times New Roman", Times, serif; font-size: 80%; line-height: 122%; margin-left: 3.7em}
    DIV.Examples {font-family: "Courier New", monospace; font-size: 90%; line-height: 122%; margin-left: 3.4em; margin-bottom: 0.6em}
    UL.Bulleted {font-family: "Times New Roman", Times, serif; line-height: 122%; margin-left: 3.2em; margin-right: 2.0em; margin-top: 0em; margin-bottom: 0.5em}
    </STYLE>
</HEAD>
<BODY TEXT="#000000" BGCOLOR="#FFFFF0" LINK="#000080" VLINK="#330033" ALINK="#0000FF">
<DIV><SPAN Style="font-size:200%; color: rgb(0,0,153)"><B>Ada Reference Manual</B></SPAN> &mdash; <A HREF="RM-TTL.html"><B>Legal Information</B></A></DIV>
<DIV Style="margin-top: 0.6em; margin-bottom: 0.0em"><A HREF="RM-TOC.html"><IMG SRC="cont.gif" ALT="Contents" BORDER=0></A>&nbsp;
&nbsp;<A HREF="RM-0-5.html"><IMG SRC="index.gif" ALT="Index" BORDER=0></A>&nbsp;
&nbsp;<A HREF="RM-STDS.html"><IMG SRC="lib.gif" ALT="References" BORDER=0></A>&nbsp;
&nbsp;<A HREF="RM-SRCH.html"><IMG SRC="find.gif" ALT="Search" BORDER=0></A>&nbsp;
&nbsp;<A HREF="RM-7-4.html"><IMG SRC="prev.gif" ALT="Previous" BORDER=0></A>&nbsp;
&nbsp;<A HREF="RM-7-6.html"><IMG SRC="next.gif" ALT="Next" BORDER=0></A>&nbsp;
</DIV>
<HR>
<H1>7.5 Limited Types</H1>
<DIV Class="paranum">1/2</DIV>
<DIV Class="Normal">A limited type is (a view of) a type for which copying 
(such as for an <SPAN Class="swiss"><A HREF="RM-5-2.html#S0137">assignment_statement</A></SPAN>) 
is not allowed. A nonlimited type is a (view of a) type for which copying 
is allowed.&nbsp;</DIV>

<H4 Class="centered">Legality Rules</H4>
<DIV Class="paranum">2/2</DIV>
<DIV Class="Normal">If a tagged record type has any limited components, 
then the reserved word <B>limited</B> shall appear in its <SPAN Class="swiss"><A HREF="RM-3-8.html#S0066">record_type_definition</A></SPAN>. 
If the reserved word <B>limited</B> appears in the definition of a <SPAN Class="swiss"><A HREF="RM-3-4.html#S0035">derived_type_definition</A></SPAN>, 
its parent type and any progenitor interfaces shall be limited.&nbsp;</DIV>
<DIV Class="paranum">2.1/2</DIV>
<DIV Class="Normal" Style="margin-bottom: 0.4em">&nbsp;&nbsp;In the following 
contexts, an <SPAN Class="swiss"><A HREF="RM-4-4.html#S0115">expression</A></SPAN> 
of a limited type is not permitted unless it is an <SPAN Class="swiss"><A HREF="RM-4-3.html#S0104">aggregate</A></SPAN>, 
a <SPAN Class="swiss"><A HREF="RM-6-4.html#S0164">function_call</A></SPAN>, 
or a parenthesized <SPAN Class="swiss"><A HREF="RM-4-4.html#S0115">expression</A></SPAN> 
or <SPAN Class="swiss"><A HREF="RM-4-7.html#S0128">qualified_expression</A></SPAN> 
whose operand is permitted by this rule:&nbsp;</DIV>
<DIV Class="paranum">2.2/2</DIV>
<UL Class="Bulleted"><LI TYPE=DISC>the initialization <SPAN Class="swiss"><A HREF="RM-4-4.html#S0115">expression</A></SPAN> 
of an <SPAN Class="swiss"><A HREF="RM-3-3-1.html#S0032">object_declaration</A></SPAN> 
(see <A HREF="RM-3-3-1.html">3.3.1</A>)</LI></UL>
<DIV Class="paranum">2.3/2</DIV>
<UL Class="Bulleted"><LI TYPE=DISC>the <SPAN Class="swiss"><A HREF="RM-3-7.html#S0063">default_expression</A></SPAN> 
of a <SPAN Class="swiss"><A HREF="RM-3-8.html#S0070">component_declaration</A></SPAN> 
(see <A HREF="RM-3-8.html">3.8</A>)</LI></UL>
<DIV Class="paranum">2.4/2</DIV>
<UL Class="Bulleted"><LI TYPE=DISC>the <SPAN Class="swiss"><A HREF="RM-4-4.html#S0115">expression</A></SPAN> 
of a <SPAN Class="swiss"><A HREF="RM-4-3-1.html#S0107">record_component_association</A></SPAN> 
(see <A HREF="RM-4-3-1.html">4.3.1</A>)</LI></UL>
<DIV Class="paranum">2.5/2</DIV>
<UL Class="Bulleted"><LI TYPE=DISC>the <SPAN Class="swiss"><A HREF="RM-4-4.html#S0115">expression</A></SPAN> 
for an <SPAN Class="swiss"><A HREF="RM-4-3-2.html#S0110">ancestor_part</A></SPAN> 
of an <SPAN Class="swiss"><A HREF="RM-4-3-2.html#S0109">extension_aggregate</A></SPAN> 
(see <A HREF="RM-4-3-2.html">4.3.2</A>)</LI></UL>
<DIV Class="paranum">2.6/2</DIV>
<UL Class="Bulleted"><LI TYPE=DISC>an <SPAN Class="swiss"><A HREF="RM-4-4.html#S0115">expression</A></SPAN> 
of a <SPAN Class="swiss"><A HREF="RM-4-3-3.html#S0112">positional_array_aggregate</A></SPAN> 
or the <SPAN Class="swiss"><A HREF="RM-4-4.html#S0115">expression</A></SPAN> 
of an <SPAN Class="swiss"><A HREF="RM-4-3-3.html#S0114">array_component_association</A></SPAN> 
(see <A HREF="RM-4-3-3.html">4.3.3</A>)</LI></UL>
<DIV Class="paranum">2.7/2</DIV>
<UL Class="Bulleted"><LI TYPE=DISC>the <SPAN Class="swiss"><A HREF="RM-4-7.html#S0128">qualified_expression</A></SPAN> 
of an initialized allocator (see <A HREF="RM-4-8.html">4.8</A>)</LI></UL>
<DIV Class="paranum">2.8/2</DIV>
<UL Class="Bulleted"><LI TYPE=DISC>the <SPAN Class="swiss"><A HREF="RM-4-4.html#S0115">expression</A></SPAN> 
of a return statement (see <A HREF="RM-6-5.html">6.5</A>)</LI></UL>
<DIV Class="paranum">2.9/2</DIV>
<UL Class="Bulleted"><LI TYPE=DISC>the <SPAN Class="swiss"><A HREF="RM-3-7.html#S0063">default_expression</A></SPAN> 
or actual parameter for a formal object of mode <B>in</B> (see <A HREF="RM-12-4.html">12.4</A>)</LI></UL>

<H4 Class="centered">Static Semantics</H4>
<DIV Class="paranum">3/2</DIV>
<DIV Class="Normal" Style="margin-bottom: 0.4em"><A NAME="I3285"></A>A 
type is <I>limited</I> if it is one of the following:&nbsp;</DIV>
<DIV Class="paranum">4/2</DIV>
<UL Class="Bulleted"><LI TYPE=DISC>a type with the reserved word <B>limited</B>, 
<B>synchronized</B>, <B>task</B>, or <B>protected</B> in its definition; 
</LI></UL>
<DIV Class="paranum">5/2</DIV>
<UL Class="Bulleted"><LI TYPE=DISC><SPAN STYLE="font-size: 80%"><I>This 
paragraph was deleted.</I></SPAN></LI></UL>
<DIV Class="paranum">6/2</DIV>
<UL Class="Bulleted"><LI TYPE=DISC>a composite type with a limited component;</LI></UL>
<DIV Class="paranum">6.1/2</DIV>
<UL Class="Bulleted"><LI TYPE=DISC>a derived type whose parent is limited 
and is not an interface.</LI></UL>
<DIV Class="paranum">7</DIV>
<DIV Class="Normal"><A NAME="I3286"></A>Otherwise, the type is nonlimited.</DIV>
<DIV Class="paranum">8</DIV>
<DIV Class="Normal">There are no predefined equality operators for a 
limited type.&nbsp;</DIV>

<H4 Class="centered">Implementation Requirements</H4>
<DIV Class="paranum">8.1/2</DIV>
<DIV Class="Normal">&nbsp;&nbsp;For an <SPAN Class="swiss"><A HREF="RM-4-3.html#S0104">aggregate</A></SPAN> 
of a limited type used to initialize an object as allowed above, the 
implementation shall not create a separate anonymous object for the <SPAN Class="swiss"><A HREF="RM-4-3.html#S0104">aggregate</A></SPAN>. 
For a <SPAN Class="swiss"><A HREF="RM-6-4.html#S0164">function_call</A></SPAN> 
of a type with a part that is of a task, protected, or explicitly limited 
record type that is used to initialize an object as allowed above, the 
implementation shall not create a separate return object (see 6.5) for 
the <SPAN Class="swiss"><A HREF="RM-6-4.html#S0164">function_call</A></SPAN>. 
The <SPAN Class="swiss"><A HREF="RM-4-3.html#S0104">aggregate</A></SPAN> 
or <SPAN Class="swiss"><A HREF="RM-6-4.html#S0164">function_call</A></SPAN> 
shall be constructed directly in the new object.&nbsp;</DIV>
<DIV Class="NotesHeader">NOTES</DIV>
<DIV Class="paranum">9/2</DIV>
<DIV Class="Notes">14&nbsp;&nbsp;While it is allowed to write initializations 
of limited objects, such initializations never copy a limited object. 
The source of such an assignment operation must be an <SPAN Class="swiss"><A HREF="RM-4-3.html#S0104">aggregate</A></SPAN> 
or <SPAN Class="swiss"><A HREF="RM-6-4.html#S0164">function_call</A></SPAN>, 
and such <SPAN Class="swiss"><A HREF="RM-4-3.html#S0104">aggregate</A></SPAN>s 
and <SPAN Class="swiss"><A HREF="RM-6-4.html#S0164">function_call</A></SPAN>s 
must be built directly in the target object.&nbsp;</DIV>
<DIV Class="Notes"><SPAN STYLE="font-size: 80%"><I>Paragraphs 10 through 
15 were deleted.</I></SPAN>&nbsp;</DIV>
<DIV Class="paranum">16</DIV>
<DIV Class="Notes">15&nbsp;&nbsp;<A NAME="I3287"></A><A NAME="I3288"></A><A NAME="I3289"></A>As 
illustrated in <A HREF="RM-7-3-1.html">7.3.1</A>, an untagged limited 
type can become nonlimited under certain circumstances.&nbsp;</DIV>

<H4 Class="centered">Examples</H4>
<DIV Class="paranum">17</DIV>
<DIV Class="Normal" Style="margin-bottom: 0.4em"><I>Example of a package 
with a limited type:</I>&nbsp;</DIV>
<DIV Class="paranum">18</DIV>
<DIV Class="Examples"><B>package</B>&nbsp;IO_Package&nbsp;<B>is</B><BR>
&nbsp;&nbsp;&nbsp;<B>type</B>&nbsp;File_Name&nbsp;<B>is</B>&nbsp;<B>limited</B>&nbsp;<B>private</B>;</DIV>
<DIV Class="paranum">19</DIV>
<DIV Class="Examples">&nbsp;&nbsp;&nbsp;<B>procedure</B>&nbsp;Open&nbsp;(F&nbsp;:&nbsp;<B>in</B>&nbsp;<B>out</B>&nbsp;File_Name);<BR>
&nbsp;&nbsp;&nbsp;<B>procedure</B>&nbsp;Close(F&nbsp;:&nbsp;<B>in</B>&nbsp;<B>out</B>&nbsp;File_Name);<BR>
&nbsp;&nbsp;&nbsp;<B>procedure</B>&nbsp;Read&nbsp;(F&nbsp;:&nbsp;<B>in</B>&nbsp;File_Name;&nbsp;Item&nbsp;:&nbsp;<B>out</B>&nbsp;Integer);<BR>
&nbsp;&nbsp;&nbsp;<B>procedure</B>&nbsp;Write(F&nbsp;:&nbsp;<B>in</B>&nbsp;File_Name;&nbsp;Item&nbsp;:&nbsp;<B>in</B>&nbsp;&nbsp;Integer);<BR>
<B>private</B><BR>
&nbsp;&nbsp;&nbsp;<B>type</B>&nbsp;File_Name&nbsp;<B>is</B><BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<B>limited</B>&nbsp;<B>record</B><BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Internal_Name&nbsp;:&nbsp;Integer&nbsp;:=&nbsp;0;<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<B>end</B>&nbsp;<B>record</B>;<BR>
<B>end</B>&nbsp;IO_Package;</DIV>
<DIV Class="paranum">20</DIV>
<DIV Class="Examples"><B>package</B>&nbsp;<B>body</B>&nbsp;IO_Package&nbsp;<B>is</B><BR>
&nbsp;&nbsp;&nbsp;Limit&nbsp;:&nbsp;<B>constant</B>&nbsp;:=&nbsp;200;<BR>
&nbsp;&nbsp;&nbsp;<B>type</B>&nbsp;File_Descriptor&nbsp;<B>is</B>&nbsp;<B>record</B>&nbsp;&nbsp;...&nbsp;&nbsp;<B>end</B>&nbsp;<B>record</B>;<BR>
&nbsp;&nbsp;&nbsp;Directory&nbsp;:&nbsp;<B>array</B>&nbsp;(1&nbsp;..&nbsp;Limit)&nbsp;<B>of</B>&nbsp;File_Descriptor;<BR>
&nbsp;&nbsp;&nbsp;...<BR>
&nbsp;&nbsp;&nbsp;<B>procedure</B>&nbsp;Open&nbsp;(F&nbsp;:&nbsp;<B>in</B>&nbsp;<B>out</B>&nbsp;File_Name)&nbsp;<B>is</B>&nbsp;&nbsp;...&nbsp;&nbsp;<B>end</B>;<BR>
&nbsp;&nbsp;&nbsp;<B>procedure</B>&nbsp;Close(F&nbsp;:&nbsp;<B>in</B>&nbsp;<B>out</B>&nbsp;File_Name)&nbsp;<B>is</B>&nbsp;&nbsp;...&nbsp;&nbsp;<B>end</B>;<BR>
&nbsp;&nbsp;&nbsp;<B>procedure</B>&nbsp;Read&nbsp;(F&nbsp;:&nbsp;<B>in</B>&nbsp;File_Name;&nbsp;Item&nbsp;:&nbsp;<B>out</B>&nbsp;Integer)&nbsp;<B>is</B>&nbsp;...&nbsp;<B>end</B>;<BR>
&nbsp;&nbsp;&nbsp;<B>procedure</B>&nbsp;Write(F&nbsp;:&nbsp;<B>in</B>&nbsp;File_Name;&nbsp;Item&nbsp;:&nbsp;<B>in</B>&nbsp;&nbsp;Integer)&nbsp;<B>is</B>&nbsp;...&nbsp;<B>end</B>;<BR>
<B>begin</B><BR>
&nbsp;&nbsp;&nbsp;...<BR>
<B>end</B>&nbsp;IO_Package;</DIV>
<DIV Class="NotesHeader">NOTES</DIV>
<DIV Class="paranum">21</DIV>
<DIV Class="Notes">16&nbsp;&nbsp;<I>Notes on the example:</I> In the 
example above, an outside subprogram making use of IO_Package may obtain 
a file name by calling Open and later use it in calls to Read and Write. 
Thus, outside the package, a file name obtained from Open acts as a kind 
of password; its internal properties (such as containing a numeric value) 
are not known and no other operations (such as addition or comparison 
of internal names) can be performed on a file name. Most importantly, 
clients of the package cannot make copies of objects of type File_Name.</DIV>
<DIV Class="paranum">22</DIV>
<DIV Class="Notes">This example is characteristic of any case where complete 
control over the operations of a type is desired. Such packages serve 
a dual purpose. They prevent a user from making use of the internal structure 
of the type. They also implement the notion of an encapsulated data type 
where the only operations on the type are those given in the package 
specification.</DIV>
<DIV Class="paranum">23/2</DIV>
<DIV Class="Notes">The fact that the full view of File_Name is explicitly 
declared <B>limited</B> means that parameter passing will always be by 
reference and function results will always be built directly in the result 
object (see <A HREF="RM-6-2.html">6.2</A> and <A HREF="RM-6-5.html">6.5</A>).</DIV>

<HR>
<DIV Style="margin-top: 0.0em; margin-bottom: 0.6em"><A HREF="RM-TOC.html"><IMG SRC="cont.gif" ALT="Contents" BORDER=0></A>&nbsp;
&nbsp;<A HREF="RM-0-5.html"><IMG SRC="index.gif" ALT="Index" BORDER=0></A>&nbsp;
&nbsp;<A HREF="RM-STDS.html"><IMG SRC="lib.gif" ALT="References" BORDER=0></A>&nbsp;
&nbsp;<A HREF="RM-SRCH.html"><IMG SRC="find.gif" ALT="Search" BORDER=0></A>&nbsp;
&nbsp;<A HREF="RM-7-4.html"><IMG SRC="prev.gif" ALT="Previous" BORDER=0></A>&nbsp;
&nbsp;<A HREF="RM-7-6.html"><IMG SRC="next.gif" ALT="Next" BORDER=0></A>&nbsp;
</DIV>
<DIV Style="margin-top:0.0em"><IMG SRC="AE_logo.gif" height=100 width=113 align=right ALT="Ada-Europe">
<SPAN Style="vertical-align: middle">Sponsored by <SPAN Style="font-size: 125%"><A HREF="http://www.ada-europe.org/"><B>Ada-Europe</B></A></SPAN></SPAN></DIV>
</BODY>
</HTML>
