<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
"http://www.w3.org/TR/html4/loose.dtd">
<HTML>
<HEAD>
    <TITLE>Pragmas and Program Units</TITLE>
    <META http-equiv="Content-Type" content="text/html; charset=iso-8859-1">
    <META NAME="Author" CONTENT="JTC1/SC22/WG9/ARG, by Randall Brukardt, ARG Editor">
    <META NAME="GENERATOR" CONTENT="Arm_Form.Exe, Ada Reference Manual generator">
    <STYLE type="text/css">
    H4.centered {text-align: center}
    SPAN.swiss {font-family: Arial, Helvetica, sans-serif; font-size: 92%}
    SPAN.roman {font-family: "Times New Roman", Times, serif}
    DIV.paranum {float: left; font-family: Arial, Helvetica, sans-serif; font-size: 64%; width: 2.8em; margin-left: -0.4em; margin-right: -3.0em; margin-top: 0.2em}
    TT {font-family: "Courier New", monospace}
    DT {display: compact}
    SPAN.insert1 {text-decoration: underline; color: rgb(0,51,51) }
    SPAN.delete1 {text-decoration: line-through; color: rgb(0,51,51) }
    SPAN.insert2 {text-decoration: underline; color: rgb(0,102,0) }
    SPAN.delete2 {text-decoration: line-through; color: rgb(0,102,0) }
    DIV.Normal {font-family: "Times New Roman", Times, serif; line-height: 122%; margin-left: 1.2em; margin-bottom: 0.6em}
    DIV.Annotations {font-family: "Times New Roman", Times, serif; font-size: 80%; line-height: 122%; margin-left: 6.2em; margin-bottom: 0.6em}
    UL.Bulleted {font-family: "Times New Roman", Times, serif; line-height: 122%; margin-left: 3.2em; margin-right: 2.0em; margin-top: 0em; margin-bottom: 0.5em}
    UL.SmallBulleted {font-family: "Times New Roman", Times, serif; font-size: 80%; line-height: 122%; margin-left: 8.7em; margin-right: 2.5em; margin-top: 0em; margin-bottom: 0.5em}
    </STYLE>
</HEAD>
<BODY TEXT="#000000" BGCOLOR="#FFFFF0" LINK="#000080" VLINK="#330033" ALINK="#0000FF">
<DIV><B><SPAN Style="font-size:200%; color: rgb(0,51,153)">Annotated</SPAN><SPAN Style="font-size:200%; color: rgb(0,0,102)">&nbsp;Ada Reference Manual</SPAN></B> &mdash; <A HREF="AA-TTL.html"><B>Legal Information</B></A></DIV>
<DIV Style="margin-top: 0.6em; margin-bottom: 0.0em"><A HREF="AA-TOC.html"><IMG SRC="cont.gif" ALT="Contents" BORDER=0></A>&nbsp;
&nbsp;<A HREF="AA-0-5.html"><IMG SRC="index.gif" ALT="Index" BORDER=0></A>&nbsp;
&nbsp;<A HREF="AA-STDS.html"><IMG SRC="lib.gif" ALT="References" BORDER=0></A>&nbsp;
&nbsp;<A HREF="AA-SRCH.html"><IMG SRC="find.gif" ALT="Search" BORDER=0></A>&nbsp;
&nbsp;<A HREF="AA-10-1-4.html"><IMG SRC="prev.gif" ALT="Previous" BORDER=0></A>&nbsp;
&nbsp;<A HREF="AA-10-1-6.html"><IMG SRC="next.gif" ALT="Next" BORDER=0></A>&nbsp;
</DIV>
<HR>
<H1>10.1.5 Pragmas and Program Units</H1>
<DIV Class="paranum">1</DIV>
<DIV Class="Normal">[This subclause discusses pragmas related to program 
units, library units, and <SPAN Class="swiss"><A HREF="AA-10-1-1.html#S0228">compilation</A></SPAN>s.] 
</DIV>

<H4 Class="centered">Name Resolution Rules</H4>
<DIV Class="paranum">2</DIV>
<DIV Class="Normal"><SPAN STYLE="font-size: 80%">{<I>program unit pragma</I> 
[distributed]}</SPAN> <A NAME="I4413"></A><SPAN STYLE="font-size: 80%">{<I>pragma, 
program unit</I> [distributed]}</SPAN> <A NAME="I4414"></A>Certain <SPAN Class="swiss"><A HREF="AA-2-8.html#S0019">pragma</A></SPAN>s 
are defined to be <I>program unit pragmas</I>. <SPAN STYLE="font-size: 80%">{<I>apply 
(to a program unit by a program unit pragma)</I> [partial]}</SPAN> <A NAME="I4415"></A>A 
<SPAN Class="swiss"><A HREF="AA-4-1.html#S0091">name</A></SPAN> given 
as the argument of a program unit pragma shall resolve to denote the 
declarations or renamings of one or more program units that occur immediately 
within the declarative region or <SPAN Class="swiss"><A HREF="AA-10-1-1.html#S0228">compilation</A></SPAN> 
in which the <SPAN Class="swiss"><A HREF="AA-2-8.html#S0019">pragma</A></SPAN> 
immediately occurs, or it shall resolve to denote the declaration of 
the immediately enclosing program unit (if any); the <SPAN Class="swiss"><A HREF="AA-2-8.html#S0019">pragma</A></SPAN> 
applies to the denoted program unit(s). If there are no <SPAN Class="swiss"><A HREF="AA-4-1.html#S0091">name</A></SPAN>s 
given as arguments, the <SPAN Class="swiss"><A HREF="AA-2-8.html#S0019">pragma</A></SPAN> 
applies to the immediately enclosing program unit.&nbsp;</DIV>
<DIV Class="paranum">2.a</DIV>
<DIV Class="Annotations"><B>Ramification:&nbsp;</B>The fact that this is a 
Name Resolution Rule means that the <SPAN Class="swiss"><A HREF="AA-2-8.html#S0019">pragma</A></SPAN> 
will not apply to declarations from outer declarative regions.&nbsp;</DIV>

<H4 Class="centered">Legality Rules</H4>
<DIV Class="paranum">3</DIV>
<DIV Class="Normal" Style="margin-bottom: 0.4em">A program unit pragma 
shall appear in one of these places:&nbsp;</DIV>
<DIV Class="paranum">4</DIV>
<UL Class="Bulleted"><LI TYPE=DISC>At the place of a <SPAN Class="swiss"><A HREF="AA-10-1-1.html#S0229">compilation_unit</A></SPAN>, 
in which case the <SPAN Class="swiss"><A HREF="AA-2-8.html#S0019">pragma</A></SPAN> 
shall immediately follow in the same <SPAN Class="swiss"><A HREF="AA-10-1-1.html#S0228">compilation</A></SPAN> 
(except for other <SPAN Class="swiss"><A HREF="AA-2-8.html#S0019">pragma</A></SPAN>s) 
a <SPAN Class="swiss"><A HREF="AA-10-1-1.html#S0231">library_unit_declaration</A></SPAN> 
that is a <SPAN Class="swiss"><A HREF="AA-6-1.html#S0148">subprogram_declaration</A></SPAN>, 
<SPAN Class="swiss"><A HREF="AA-12-1.html#S0253">generic_subprogram_declaration</A></SPAN>, 
or <SPAN Class="swiss"><A HREF="AA-12-3.html#S0257">generic_instantiation</A></SPAN>, 
and the <SPAN Class="swiss"><A HREF="AA-2-8.html#S0019">pragma</A></SPAN> 
shall have an argument that is a <SPAN Class="swiss"><A HREF="AA-4-1.html#S0091">name</A></SPAN> 
denoting that declaration.&nbsp;</LI></UL>
<DIV Class="paranum">4.a</DIV>
<DIV Class="Annotations"><B>Ramification:&nbsp;</B>The <SPAN Class="swiss"><A HREF="AA-4-1.html#S0091">name</A></SPAN> 
has to denote the immediately preceding <SPAN Class="swiss"><A HREF="AA-10-1-1.html#S0231">library_unit_declaration</A></SPAN>. 
</DIV>
<DIV Class="paranum">5/1</DIV>
<UL Class="Bulleted"><LI TYPE=DISC>{<I><A HREF="defect1.html#8652/0033">8652/0033</A></I>} 
{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AIs/AI-00136.TXT">AI95-00136-01</A></I>} 
Immediately within the <SPAN class="insert1">visible part</SPAN><SPAN class="delete1">&nbsp;declaration</SPAN> 
of a program unit and before any nested declaration<SPAN class="insert1">&nbsp;(but not within a generic formal part)</SPAN>, in which case the argument, 
if any, shall be a <SPAN Class="swiss"><A HREF="AA-4-1.html#S0092">direct_name</A></SPAN> 
that denotes the immediately enclosing program unit declaration.&nbsp;</LI></UL>
<DIV Class="paranum">5.a</DIV>
<DIV Class="Annotations"><B>Ramification:&nbsp;</B>The argument is optional 
in this case.&nbsp;</DIV>
<DIV Class="paranum">6</DIV>
<UL Class="Bulleted"><LI TYPE=DISC>At the place of a declaration other 
than the first, of a <SPAN Class="swiss"><A HREF="AA-3-11.html#S0086">declarative_part</A></SPAN> 
or program unit declaration, in which case the <SPAN Class="swiss"><A HREF="AA-2-8.html#S0019">pragma</A></SPAN> 
shall have an argument, which shall be a <SPAN Class="swiss"><A HREF="AA-4-1.html#S0092">direct_name</A></SPAN> 
that denotes one or more of the following (and nothing else): a <SPAN Class="swiss"><A HREF="AA-6-1.html#S0148">subprogram_declaration</A></SPAN>, 
a <SPAN Class="swiss"><A HREF="AA-12-1.html#S0253">generic_subprogram_declaration</A></SPAN>, 
or a <SPAN Class="swiss"><A HREF="AA-12-3.html#S0257">generic_instantiation</A></SPAN>, 
of the same <SPAN Class="swiss"><A HREF="AA-3-11.html#S0086">declarative_part</A></SPAN> 
or program unit declaration.&nbsp;</LI></UL>
<DIV Class="paranum">6.a</DIV>
<DIV Class="Annotations"><B>Ramification:&nbsp;</B>If you want to denote a 
<SPAN Class="swiss"><A HREF="AA-6-3.html#S0162">subprogram_body</A></SPAN> 
that is not a completion, or a <SPAN Class="swiss"><A HREF="AA-7-1.html#S0173">package_declaration</A></SPAN>, 
for example, you have to put the <SPAN Class="swiss"><A HREF="AA-2-8.html#S0019">pragma</A></SPAN> 
inside.&nbsp;</DIV>
<DIV Class="paranum">7</DIV>
<DIV Class="Normal"><SPAN STYLE="font-size: 80%">{<I>library unit pragma</I> 
[distributed]}</SPAN> <A NAME="I4416"></A><SPAN STYLE="font-size: 80%">{<I>pragma, 
library unit</I> [distributed]}</SPAN> <A NAME="I4417"></A><SPAN STYLE="font-size: 80%">{<I>program 
unit pragma (library unit pragmas)</I> [partial]}</SPAN> <A NAME="I4418"></A><SPAN STYLE="font-size: 80%">{<I>pragma, 
program unit (library unit pragmas)</I> [partial]}</SPAN> <A NAME="I4419"></A>Certain 
program unit pragmas are defined to be <I>library unit pragmas</I>. The 
<SPAN Class="swiss"><A HREF="AA-4-1.html#S0091">name</A></SPAN>, if any, 
in a library unit pragma shall denote the declaration of a library unit. 
</DIV>
<DIV Class="paranum">7.a</DIV>
<DIV Class="Annotations"><B>Ramification:&nbsp;</B>This, together with the 
rules for program unit pragmas above, implies that if a library unit 
pragma applies to a <SPAN Class="swiss"><A HREF="AA-6-1.html#S0148">subprogram_declaration</A></SPAN> 
(and similar things), it has to appear immediately after the <SPAN Class="swiss"><A HREF="AA-10-1-1.html#S0229">compilation_unit</A></SPAN>, 
whereas if the <SPAN Class="swiss"><A HREF="AA-2-8.html#S0019">pragma</A></SPAN> 
applies to a <SPAN Class="swiss"><A HREF="AA-7-1.html#S0173">package_declaration</A></SPAN>, 
a <SPAN Class="swiss"><A HREF="AA-6-3.html#S0162">subprogram_body</A></SPAN> 
that is not a completion (and similar things), it has to appear inside, 
as the first <SPAN Class="swiss"><A HREF="AA-3-11.html#S0087">declarative_item</A></SPAN>. 
</DIV>

<H4 Class="centered">Static Semantics</H4>
<DIV Class="paranum">7.1/1</DIV>
<DIV Class="Normal">&nbsp;&nbsp;{<I><A HREF="defect1.html#8652/0034">8652/0034</A></I>} 
<SPAN class="insert1"></SPAN>{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AIs/AI-00041.TXT">AI95-00041-01</A></I>} 
<SPAN class="insert1">A library unit pragma that applies to a generic 
unit does not apply to its instances, unless a specific rule for the 
pragma specifies the contrary.</SPAN>&nbsp;</DIV>

<H4 Class="centered">Post-Compilation Rules</H4>
<DIV Class="paranum">8</DIV>
<DIV Class="Normal"><SPAN STYLE="font-size: 80%">{<I>configuration pragma</I> 
[distributed]}</SPAN> <A NAME="I4420"></A><SPAN STYLE="font-size: 80%">{<I>pragma, 
configuration</I> [distributed]}</SPAN> <A NAME="I4421"></A>Certain <SPAN Class="swiss"><A HREF="AA-2-8.html#S0019">pragma</A></SPAN>s 
are defined to be <I>configuration pragmas</I>; they shall appear before 
the first <SPAN Class="swiss"><A HREF="AA-10-1-1.html#S0229">compilation_unit</A></SPAN> 
of a <SPAN Class="swiss"><A HREF="AA-10-1-1.html#S0228">compilation</A></SPAN>. 
[They are generally used to select a partition-wide or system-wide option.] 
The <SPAN Class="swiss"><A HREF="AA-2-8.html#S0019">pragma</A></SPAN> 
applies to all <SPAN Class="swiss"><A HREF="AA-10-1-1.html#S0229">compilation_unit</A></SPAN>s 
appearing in the <SPAN Class="swiss"><A HREF="AA-10-1-1.html#S0228">compilation</A></SPAN>, 
unless there are none, in which case it applies to all future <SPAN Class="swiss"><A HREF="AA-10-1-1.html#S0229">compilation_unit</A></SPAN>s 
compiled into the same environment.&nbsp;</DIV>

<H4 Class="centered">Implementation Permissions</H4>
<DIV Class="paranum">9/2</DIV>
<DIV Class="Normal">{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AIs/AI-00212.TXT">AI95-00212-01</A></I>} 
An implementation may <SPAN class="insert2">require that configuration 
pragmas that select partition-wide or system-wide options be compiled</SPAN><SPAN class="delete2">&nbsp;place 
restrictions on configuration pragmas, so long as it allows them</SPAN> 
when the environment contains no <SPAN Class="swiss"><A HREF="AA-10-1-1.html#S0230">library_item</A></SPAN>s 
other than those of the predefined environment. <SPAN class="insert2">In 
this case, the implementation shall still accept configuration pragmas 
in individual compilations that confirm the initially selected partition-wide 
or system-wide options.</SPAN></DIV>

<H4 Class="centered">Implementation Advice</H4>
<DIV Class="paranum">10/1</DIV>
<DIV Class="Normal">&nbsp;{<I><A HREF="defect1.html#8652/0034">8652/0034</A></I>} 
<SPAN class="insert1"></SPAN>{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AIs/AI-00041.TXT">AI95-00041-01</A></I>} 
<SPAN class="insert1">When applied to a generic unit, a program unit 
pragma that is not a library unit pragma should apply to each instance 
of the generic unit for which there is not an overriding pragma applied 
directly to the instance.</SPAN>&nbsp;</DIV>
<DIV Class="paranum">10.a/2</DIV>
<DIV Class="Annotations"><SPAN class="insert2"><B>Implementation Advice: 
</B></SPAN><SPAN class="insert2">When applied to a generic unit, a program 
unit pragma that is not a library unit pragma should apply to each instance 
of the generic unit for which there is not an overriding pragma applied 
directly to the instance.</SPAN></DIV>

<H4 Class="centered">Wording Changes from Ada 95</H4>
<DIV Class="paranum">10.b/2</DIV>
<DIV Class="Annotations">{<I><A HREF="defect1.html#8652/0033">8652/0033</A></I>} 
<SPAN class="insert2"></SPAN>{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AIs/AI-00136.TXT">AI95-00136-01</A></I>} 
<SPAN class="insert2"><B>Corrigendum:</B> The wording was corrected to 
ensure that a program unit pragma cannot appear in private parts or generic 
formal parts.</SPAN></DIV>
<DIV Class="paranum">10.c/2</DIV>
<DIV Class="Annotations">{<I><A HREF="defect1.html#8652/0034">8652/0034</A></I>} 
<SPAN class="insert2"></SPAN>{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AIs/AI-00041.TXT">AI95-00041-01</A></I>} 
<SPAN class="insert2"><B>Corrigendum:</B> The wording was clarified to 
explain the meaning of program unit and library unit pragmas in generic 
units.</SPAN></DIV>
<DIV Class="paranum">10.d/2</DIV>
<DIV Class="Annotations"><SPAN class="insert2">The Implementation Advice 
added by the Corrigendum was moved, as it was not in the normal order. 
(This changes the paragraph number.) It originally was directly after 
the new Static Semantics rule.</SPAN></DIV>
<DIV Class="paranum">10.e/2</DIV>
<DIV Class="Annotations" Style="margin-bottom: 0.4em">{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AIs/AI-00212.TXT">AI95-00212-01</A></I>} 
<SPAN class="insert2">The permission to place restrictions was clarified 
to:</SPAN>&nbsp;</DIV>
<DIV Class="paranum">10.f/2</DIV>
<UL Class="SmallBulleted"><LI TYPE=DISC><SPAN class="insert2">Ensure 
that it applies only to partition-wide configuration pragmas, not ones 
like Assertion_Policy (see <A HREF="AA-11-4-2.html">11.4.2</A>), which 
can be different in different units; and</SPAN></LI></UL>
<DIV Class="paranum">10.g/2</DIV>
<UL Class="SmallBulleted"><LI TYPE=DISC><SPAN class="insert2">Ensure 
that confirming pragmas are always allowed.</SPAN>&nbsp;</LI></UL>

<HR>
<DIV Style="margin-top: 0.0em; margin-bottom: 0.6em"><A HREF="AA-TOC.html"><IMG SRC="cont.gif" ALT="Contents" BORDER=0></A>&nbsp;
&nbsp;<A HREF="AA-0-5.html"><IMG SRC="index.gif" ALT="Index" BORDER=0></A>&nbsp;
&nbsp;<A HREF="AA-STDS.html"><IMG SRC="lib.gif" ALT="References" BORDER=0></A>&nbsp;
&nbsp;<A HREF="AA-SRCH.html"><IMG SRC="find.gif" ALT="Search" BORDER=0></A>&nbsp;
&nbsp;<A HREF="AA-10-1-4.html"><IMG SRC="prev.gif" ALT="Previous" BORDER=0></A>&nbsp;
&nbsp;<A HREF="AA-10-1-6.html"><IMG SRC="next.gif" ALT="Next" BORDER=0></A>&nbsp;
</DIV>
<DIV Style="margin-top:0.0em"><IMG SRC="AE_logo.gif" height=100 width=113 align=right ALT="Ada-Europe">
<SPAN Style="font-size: 125%">Sponsored by <SPAN Style="font-size: 125%"><A HREF="http://www.ada-europe.org/"><B>Ada-Europe</B></A></SPAN></SPAN></DIV>
</BODY>
</HTML>
