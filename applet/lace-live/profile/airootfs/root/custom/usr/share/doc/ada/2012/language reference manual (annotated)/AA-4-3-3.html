<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
"http://www.w3.org/TR/html4/loose.dtd">
<HTML>
<HEAD>
    <TITLE>Array Aggregates</TITLE>
    <META http-equiv="Content-Type" content="text/html; charset=iso-8859-1">
    <META NAME="Author" CONTENT="JTC1/SC22/WG9/ARG, by Randall Brukardt, ARG Editor">
    <META NAME="GENERATOR" CONTENT="Arm_Form.Exe, Ada Reference Manual generator">
    <STYLE type="text/css">
    H4.centered {text-align: center}
    SPAN.swiss {font-family: Arial, Helvetica, sans-serif; font-size: 92%}
    SPAN.roman {font-family: "Times New Roman", Times, serif}
    DIV.paranum {float: left; font-family: Arial, Helvetica, sans-serif; font-size: 64%; width: 2.8em; margin-left: -0.4em; margin-right: -3.0em; margin-top: 0.2em}
    TT {font-family: "Courier New", monospace}
    DT {display: compact}
    SPAN.insert4 {text-decoration: underline; color: rgb(153,0,0) }
    SPAN.delete4 {text-decoration: line-through; color: rgb(153,0,0) }
    A.Bar:link {font-family: Arial, Helvetica, sans-serif; font-style: normal; text-decoration: none; color: rgb(204,204,51)}
    A.Bar:visited {font-family: Arial, Helvetica, sans-serif; font-style: normal; text-decoration: none; color: rgb(204,204,51)}
    DIV.Normal {font-family: "Times New Roman", Times, serif; line-height: 122%; margin-left: 1.2em; margin-bottom: 0.6em}
    DIV.Indented1 {font-family: "Times New Roman", Times, serif; line-height: 122%; margin-left: 3.2em; margin-bottom: 0.6em}
    DIV.WideAbove {font-family: "Times New Roman", Times, serif; line-height: 122%; margin-left: 1.2em; margin-top: 0.6em; margin-bottom: 0.6em}
    DIV.Notes {font-family: "Times New Roman", Times, serif; font-size: 80%; line-height: 122%; margin-left: 3.7em; margin-bottom: 0.6em}
    DIV.Annotations {font-family: "Times New Roman", Times, serif; font-size: 80%; line-height: 122%; margin-left: 6.2em; margin-bottom: 0.6em}
    DIV.NotesHeader {font-family: "Times New Roman", Times, serif; font-size: 80%; line-height: 122%; margin-left: 3.7em}
    DIV.Examples {font-family: "Courier New", monospace; font-size: 90%; line-height: 122%; margin-left: 3.4em; margin-bottom: 0.6em}
    DIV.SmallExamples {font-family: "Courier New", monospace; font-size: 72%; line-height: 122%; margin-left: 9.6em; margin-bottom: 0.6em}
    DIV.Bulleted-NoPrefix {font-family: "Times New Roman", Times, serif; line-height: 122%; margin-left: 3.2em; margin-right: 2.0em; margin-top: 0em; margin-bottom: 0.5em}
    DIV.Bulleted {font-family: "Times New Roman", Times, serif; line-height: 122%; margin-left: 3.2em; margin-right: 2.0em; margin-top: 0em; margin-bottom: 0.5em; display: list-item; list-style-type: disc}
    DIV.Enumerated-Body {font-family: "Times New Roman", Times, serif; line-height: 122%; margin-left: 3.2em; margin-right: 2.0em; margin-top: 0em; margin-bottom: 0.5em}
    DIV.Enumerated-Term {float: left; font-family: "Times New Roman", Times, serif; line-height: 122%; margin-left: 1.7em; margin-top: 0em; margin-bottom: 0em}
    </STYLE>
</HEAD>
<BODY TEXT="#000000" BGCOLOR="#FFFFF0" LINK="#000080" VLINK="#330033" ALINK="#0000FF">
<DIV><B><SPAN Style="font-size:200%; color: rgb(0,51,153)">Annotated</SPAN><SPAN Style="font-size:200%; color: rgb(0,0,102)">&nbsp;Ada Reference Manual</SPAN></B> &mdash; <A HREF="AA-TTL.html"><B>Legal Information</B></A></DIV>
<div style="margin-top: 0.6em; margin-bottom: 0.0em"><A HREF="AA-TOC.html"><IMG SRC="cont.gif" ALT="Contents" BORDER=0></A>&nbsp;
&nbsp;<A HREF="AA-0-5.html"><IMG SRC="index.gif" ALT="Index" BORDER=0></A>&nbsp;
&nbsp;<A HREF="AA-STDS.html"><IMG SRC="lib.gif" ALT="References" BORDER=0></A>&nbsp;
&nbsp;<A HREF="AA-SRCH.html"><IMG SRC="find.gif" ALT="Search" BORDER=0></A>&nbsp;
&nbsp;<A HREF="AA-4-3-2.html"><IMG SRC="prev.gif" ALT="Previous" BORDER=0></A>&nbsp;
&nbsp;<A HREF="AA-4-4.html"><IMG SRC="next.gif" ALT="Next" BORDER=0></A>&nbsp;
</div>
<HR>
<H1>4.3.3 Array Aggregates</H1>
<div class="paranum"><a name="p1">1</a></div>
<div class="Normal">[In an <SPAN Class="swiss"><A HREF="AA-4-3-3.html#S0113">array_aggregate</A></SPAN>, 
a value is specified for each component of an array, either positionally 
or by its index.] For a <SPAN Class="swiss"><A HREF="AA-4-3-3.html#S0114">positional_array_aggregate</A></SPAN>, 
the components are given in increasing-index order, with a final <B>others</B>, 
if any, representing any remaining components. For a <SPAN Class="swiss"><A HREF="AA-4-3-3.html#S0115">named_array_aggregate</A></SPAN>, 
the components are identified by the values covered by the <SPAN Class="swiss"><A HREF="AA-3-8-1.html#S0074">discrete_choice</A></SPAN>s.</div>

<H4 Class="centered">Language Design Principles</H4>
<div class="paranum"><a name="p1.a">1.a/1</a></div>
<div class="Annotations">The rules in this subclause are based on terms 
and rules for <SPAN Class="swiss"><A HREF="AA-3-8-1.html#S0073">discrete_choice_list</A></SPAN>s 
defined in <A HREF="AA-3-8-1.html">3.8.1</A>, &ldquo;<A HREF="AA-3-8-1.html">Variant 
Parts and Discrete Choices</A>&rdquo;. For example, the requirements 
that <B>others</B> come last and stand alone are found there.&nbsp;</div>

<H4 Class="centered">Syntax</H4>
<div class="paranum"><a name="p2">2</a></div>
<div class="Indented1"><SPAN Class="swiss">array_aggregate</SPAN><A NAME="I2753"></A><A NAME="S0113"></A><SPAN Class="swiss">&nbsp;::=&nbsp;</SPAN><BR>
&nbsp;&nbsp;<A NAME="I2754"></A><SPAN Class="swiss"><A HREF="AA-4-3-3.html#S0114">positional_array_aggregate</A></SPAN>&nbsp;|&nbsp;<A NAME="I2755"></A><SPAN Class="swiss"><A HREF="AA-4-3-3.html#S0115">named_array_aggregate</A></SPAN></div>
<div class="paranum"><a name="p3">3/2</a></div>
<div class="Indented1">{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AIs/AI-00287.TXT">AI95-00287-01</A></I>} 
<SPAN Class="swiss">positional_array_aggregate</SPAN><A NAME="I2756"></A><A NAME="S0114"></A><SPAN Class="swiss">&nbsp;::=&nbsp;</SPAN><BR>
&nbsp;&nbsp;&nbsp;&nbsp;(<A NAME="I2757"></A><SPAN Class="swiss"><A HREF="AA-4-4.html#S0117">expression</A></SPAN>,&nbsp;<A NAME="I2758"></A><SPAN Class="swiss"><A HREF="AA-4-4.html#S0117">expression</A></SPAN>&nbsp;{,&nbsp;<A NAME="I2759"></A><SPAN Class="swiss"><A HREF="AA-4-4.html#S0117">expression</A></SPAN>})<BR>
&nbsp;&nbsp;|&nbsp;(<A NAME="I2760"></A><SPAN Class="swiss"><A HREF="AA-4-4.html#S0117">expression</A></SPAN>&nbsp;{,&nbsp;<A NAME="I2761"></A><SPAN Class="swiss"><A HREF="AA-4-4.html#S0117">expression</A></SPAN>},&nbsp;<B>others</B>&nbsp;=&gt;&nbsp;<A NAME="I2762"></A><SPAN Class="swiss"><A HREF="AA-4-4.html#S0117">expression</A></SPAN>)<BR>
&nbsp;&nbsp;|&nbsp;(<A NAME="I2763"></A><SPAN Class="swiss"><A HREF="AA-4-4.html#S0117">expression</A></SPAN>&nbsp;{,&nbsp;<A NAME="I2764"></A><SPAN Class="swiss"><A HREF="AA-4-4.html#S0117">expression</A></SPAN>},&nbsp;<B>others</B>&nbsp;=&gt;&nbsp;&lt;&gt;)</div>
<div class="paranum"><a name="p4">4</a></div>
<div class="Indented1"><SPAN Class="swiss">named_array_aggregate</SPAN><A NAME="I2765"></A><A NAME="S0115"></A><SPAN Class="swiss">&nbsp;::=&nbsp;</SPAN><BR>
&nbsp;&nbsp;&nbsp;&nbsp;(<A NAME="I2766"></A><SPAN Class="swiss"><A HREF="AA-4-3-3.html#S0116">array_component_association</A></SPAN>&nbsp;{,&nbsp;<A NAME="I2767"></A><SPAN Class="swiss"><A HREF="AA-4-3-3.html#S0116">array_component_association</A></SPAN>})</div>
<div class="paranum"><a name="p5">5/2</a></div>
<div class="Indented1">{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AIs/AI-00287.TXT">AI95-00287-01</A></I>} 
<SPAN Class="swiss">array_component_association</SPAN><A NAME="I2768"></A><A NAME="S0116"></A><SPAN Class="swiss">&nbsp;::=&nbsp;</SPAN><BR>
&nbsp;&nbsp;&nbsp;&nbsp;<A NAME="I2769"></A><SPAN Class="swiss"><A HREF="AA-3-8-1.html#S0073">discrete_choice_list</A></SPAN>&nbsp;=&gt;&nbsp;<A NAME="I2770"></A><SPAN Class="swiss"><A HREF="AA-4-4.html#S0117">expression</A></SPAN><BR>
&nbsp;&nbsp;|&nbsp;<A NAME="I2771"></A><SPAN Class="swiss"><A HREF="AA-3-8-1.html#S0073">discrete_choice_list</A></SPAN>&nbsp;=&gt;&nbsp;&lt;&gt;</div>
<div class="paranum"><a name="p6">6</a></div>
<div class="Normal"><A NAME="I2772"></A>An <I>n-dimensional</I> <SPAN Class="swiss"><A HREF="AA-4-3-3.html#S0113">array_aggregate</A></SPAN> 
is one that is written as n levels of nested <SPAN Class="swiss"><A HREF="AA-4-3-3.html#S0113">array_aggregate</A></SPAN>s 
(or at the bottom level, equivalent <SPAN Class="swiss"><A HREF="AA-2-6.html#S0016">string_literal</A></SPAN>s). 
<A NAME="I2773"></A>For the multidimensional case (n &gt;= 2) the <SPAN Class="swiss"><A HREF="AA-4-3-3.html#S0113">array_aggregate</A></SPAN>s 
(or equivalent <SPAN Class="swiss"><A HREF="AA-2-6.html#S0016">string_literal</A></SPAN>s) 
at the n&ndash;1 lower levels are called <I>subaggregate</I>s of the 
enclosing n-dimensional <SPAN Class="swiss"><A HREF="AA-4-3-3.html#S0113">array_aggregate</A></SPAN>. 
<A NAME="I2774"></A>The <SPAN Class="swiss"><A HREF="AA-4-4.html#S0117">expression</A></SPAN>s 
of the bottom level subaggregates (or of the <SPAN Class="swiss"><A HREF="AA-4-3-3.html#S0113">array_aggregate</A></SPAN> 
itself if one-dimensional) are called the <I>array component expressions</I> 
of the enclosing n-dimensional <SPAN Class="swiss"><A HREF="AA-4-3-3.html#S0113">array_aggregate</A></SPAN>. 
</div>
<div class="paranum"><a name="p6.a">6.a</a></div>
<div class="Annotations"><B>Ramification:&nbsp;</B>Subaggregates do not have 
a type. They correspond to part of an array. For example, with a matrix, 
a subaggregate would correspond to a single row of the matrix. The definition 
of &quot;n-dimensional&quot; <SPAN Class="swiss"><A HREF="AA-4-3-3.html#S0113">array_aggregate</A></SPAN> 
applies to subaggregates as well as <SPAN Class="swiss"><A HREF="AA-4-3.html#S0106">aggregate</A></SPAN>s 
that have a type.&nbsp;</div>
<div class="paranum"><a name="p6.b">6.b</a></div>
<div class="Annotations"><B>To be honest:&nbsp;</B><A NAME="I2775"></A>An 
<I><B>others</B> choice</I> is the reserved word <B>others</B> as it 
appears in a <SPAN Class="swiss"><A HREF="AA-4-3-3.html#S0114">positional_array_aggregate</A></SPAN> 
or as the <SPAN Class="swiss"><A HREF="AA-3-8-1.html#S0074">discrete_choice</A></SPAN> 
of the <SPAN Class="swiss"><A HREF="AA-3-8-1.html#S0073">discrete_choice_list</A></SPAN> 
in an <SPAN Class="swiss"><A HREF="AA-4-3-3.html#S0116">array_component_association</A></SPAN>. 
</div>

<H4 Class="centered">Name Resolution Rules</H4>
<div class="paranum"><a name="p7">7/2</a></div>
<div class="Normal">{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AIs/AI-00287.TXT">AI95-00287-01</A></I>} 
<A NAME="I2776"></A>The expected type for an <SPAN Class="swiss"><A HREF="AA-4-3-3.html#S0113">array_aggregate</A></SPAN> 
(that is not a subaggregate) shall be a single array type. <A NAME="I2777"></A>The 
component type of this array type is the expected type for each array 
component expression of the <SPAN Class="swiss"><A HREF="AA-4-3-3.html#S0113">array_aggregate</A></SPAN>. 
</div>
<div class="paranum"><a name="p7.a">7.a/2</a></div>
<div class="Annotations"><B>Ramification:&nbsp;</B>{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AIs/AI-00287.TXT">AI95-00287-01</A></I>} 
We already require a single array or record type or record extension 
for an <SPAN Class="swiss"><A HREF="AA-4-3.html#S0106">aggregate</A></SPAN>. 
The above rule requiring a single array type (and similar ones for record 
and extension aggregates) resolves which kind of aggregate you have. 
</div>
<div class="paranum"><a name="p8">8</a></div>
<div class="Normal"><A NAME="I2778"></A>The expected type for each <SPAN Class="swiss"><A HREF="AA-3-8-1.html#S0074">discrete_choice</A></SPAN> 
in any <SPAN Class="swiss"><A HREF="AA-3-8-1.html#S0073">discrete_choice_list</A></SPAN> 
of a <SPAN Class="swiss"><A HREF="AA-4-3-3.html#S0115">named_array_aggregate</A></SPAN> 
is the type of the <I>corresponding index</I>; <A NAME="I2779"></A>the 
corresponding index for an <SPAN Class="swiss"><A HREF="AA-4-3-3.html#S0113">array_aggregate</A></SPAN> 
that is not a subaggregate is the first index of its type; for an (n&ndash;m)-dimensional 
subaggregate within an <SPAN Class="swiss"><A HREF="AA-4-3-3.html#S0113">array_aggregate</A></SPAN> 
of an n-dimensional type, the corresponding index is the index in position 
m+1.&nbsp;</div>

<H4 Class="centered">Legality Rules</H4>
<div class="paranum"><a name="p9">9</a></div>
<div class="Normal">An <SPAN Class="swiss"><A HREF="AA-4-3-3.html#S0113">array_aggregate</A></SPAN> 
of an n-dimensional array type shall be written as an n-dimensional <SPAN Class="swiss"><A HREF="AA-4-3-3.html#S0113">array_aggregate</A></SPAN>. 
</div>
<div class="paranum"><a name="p9.a">9.a</a></div>
<div class="Annotations"><B>Ramification:&nbsp;</B>In an m-dimensional <SPAN Class="swiss"><A HREF="AA-4-3-3.html#S0113">array_aggregate</A></SPAN> 
[(including a subaggregate)], where m &gt;= 2, each of the <SPAN Class="swiss"><A HREF="AA-4-4.html#S0117">expression</A></SPAN>s 
has to be an (m&ndash;1)-dimensional subaggregate.&nbsp;</div>
<div class="paranum"><a name="p10">10</a></div>
<div class="Normal" style="margin-bottom: 0.4em">An <B>others</B> choice 
is allowed for an <SPAN Class="swiss"><A HREF="AA-4-3-3.html#S0113">array_aggregate</A></SPAN> 
only if an <I>applicable index constraint</I> applies to the <SPAN Class="swiss"><A HREF="AA-4-3-3.html#S0113">array_aggregate</A></SPAN>. 
<A NAME="I2780"></A>[An applicable index constraint is a constraint provided 
by certain contexts where an <SPAN Class="swiss"><A HREF="AA-4-3-3.html#S0113">array_aggregate</A></SPAN> 
is permitted that can be used to determine the bounds of the array value 
specified by the aggregate.] Each of the following contexts (and none 
other) defines an applicable index constraint:&nbsp;</div>
<div class="paranum"><a name="p11">11/4</a></div>
<div class="Bulleted">{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AIs/AI-10318.TXT">AI95-00318-02</A></I>} 
{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AI12s/AI12-0157-1.TXT">AI12-0157-1</A></I>} 
For an <SPAN Class="swiss"><A HREF="AA-6-4.html#S0182">explicit_actual_parameter</A></SPAN>, 
an <SPAN Class="swiss"><A HREF="AA-12-3.html#S0279">explicit_generic_actual_parameter</A></SPAN>, 
the <SPAN Class="swiss"><A HREF="AA-4-4.html#S0117">expression</A></SPAN> 
of a return statement, <span class="insert4">the return expression of 
an expression function,&nbsp;</span>the initialization expression in an <SPAN Class="swiss"><A HREF="AA-3-3-1.html#S0032">object_declaration</A></SPAN>, 
or a <SPAN Class="swiss"><A HREF="AA-3-7.html#S0063">default_expression</A></SPAN> 
[(for a parameter or a component)], when the nominal subtype of the corresponding 
formal parameter, generic formal parameter, function return object, <span class="insert4">expression 
function return object,&nbsp;</span>object, or component is a constrained 
array subtype, the applicable index constraint is the constraint of the 
subtype;</div>
<div class="paranum"><a name="p12">12</a></div>
<div class="Bulleted">For the <SPAN Class="swiss"><A HREF="AA-4-4.html#S0117">expression</A></SPAN> 
of an <SPAN Class="swiss"><A HREF="AA-5-2.html#S0152">assignment_statement</A></SPAN> 
where the <SPAN Class="swiss"><A HREF="AA-4-1.html#S0091">name</A></SPAN> 
denotes an array variable, the applicable index constraint is the constraint 
of the array variable;&nbsp;</div>
<div class="paranum"><a name="p12.a">12.a</a></div>
<div class="Annotations"><B>Reason:&nbsp;</B>This case is broken out because 
the constraint comes from the actual subtype of the variable (which is 
always constrained) rather than its nominal subtype (which might be unconstrained). 
</div>
<div class="paranum"><a name="p13">13</a></div>
<div class="Bulleted">For the operand of a <SPAN Class="swiss"><A HREF="AA-4-7.html#S0142">qualified_expression</A></SPAN> 
whose <SPAN Class="swiss"><A HREF="AA-3-2-2.html#S0028">subtype_mark</A></SPAN> 
denotes a constrained array subtype, the applicable index constraint 
is the constraint of the subtype;</div>
<div class="paranum"><a name="p14">14</a></div>
<div class="Bulleted">For a component <SPAN Class="swiss"><A HREF="AA-4-4.html#S0117">expression</A></SPAN> 
in an <SPAN Class="swiss"><A HREF="AA-4-3.html#S0106">aggregate</A></SPAN>, 
if the component's nominal subtype is a constrained array subtype, the 
applicable index constraint is the constraint of the subtype;&nbsp;</div>
<div class="paranum"><a name="p14.a">14.a</a></div>
<div class="Annotations"><B>Discussion:&nbsp;</B>Here, the <SPAN Class="swiss"><A HREF="AA-4-3-3.html#S0113">array_aggregate</A></SPAN> 
with <B>others</B> is being used within a larger aggregate.&nbsp;</div>
<div class="paranum"><a name="p15">15/3</a></div>
<div class="Bulleted">{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AI05s/AI05-0147-1.TXT">AI05-0147-1</A></I>} 
For a parenthesized <SPAN Class="swiss"><A HREF="AA-4-4.html#S0117">expression</A></SPAN>, 
the applicable index constraint is that, if any, defined for the <SPAN Class="swiss"><A HREF="AA-4-4.html#S0117">expression</A></SPAN>; 
</div>
<div class="paranum"><a name="p15.a">15.a</a></div>
<div class="Annotations"><B>Discussion:&nbsp;</B>RM83 omitted this case, presumably 
as an oversight. We want to minimize situations where an <SPAN Class="swiss"><A HREF="AA-4-4.html#S0117">expression</A></SPAN> 
becomes illegal if parenthesized.&nbsp;</div>
<div class="paranum"><a name="p15.1">15.1/3</a></div>
<div class="Bulleted">{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AI05s/AI05-0147-1.TXT">AI05-0147-1</A></I>} 
For a <SPAN Class="swiss"><A HREF="AA-4-5-7.html#S0133">conditional_expression</A></SPAN>, 
the applicable index constraint for each <I>dependent_</I><SPAN Class="swiss"><A HREF="AA-4-4.html#S0117">expression</A></SPAN> 
is that, if any, defined for the <SPAN Class="swiss"><A HREF="AA-4-5-7.html#S0133">conditional_expression</A></SPAN>. 
</div>
<div class="paranum"><a name="p16">16</a></div>
<div class="Normal">The applicable index constraint <I>applies</I> to 
an <SPAN Class="swiss"><A HREF="AA-4-3-3.html#S0113">array_aggregate</A></SPAN> 
that appears in such a context, as well as to any subaggregates thereof. 
In the case of an <SPAN Class="swiss"><A HREF="AA-6-4.html#S0182">explicit_actual_parameter</A></SPAN> 
(or <SPAN Class="swiss"><A HREF="AA-3-7.html#S0063">default_expression</A></SPAN>) 
for a call on a generic formal subprogram, no applicable index constraint 
is defined.&nbsp;</div>
<div class="paranum"><a name="p16.a">16.a</a></div>
<div class="Annotations"><B>Reason:&nbsp;</B>This avoids generic contract 
model problems, because only mode conformance is required when matching 
actual subprograms with generic formal subprograms.&nbsp;</div>
<div class="paranum"><a name="p17">17/3</a></div>
<div class="Normal">&nbsp;{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AI05s/AI05-0153-3.TXT">AI05-0153-3</A></I>} 
The <SPAN Class="swiss"><A HREF="AA-3-8-1.html#S0073">discrete_choice_list</A></SPAN> 
of an <SPAN Class="swiss"><A HREF="AA-4-3-3.html#S0116">array_component_association</A></SPAN> 
is allowed to have a <SPAN Class="swiss"><A HREF="AA-3-8-1.html#S0074">discrete_choice</A></SPAN> 
that is a nonstatic <SPAN Class="swiss"><A HREF="AA-4-4.html#S0118">choice_expression</A></SPAN> 
or that is a <SPAN Class="swiss"><A HREF="AA-3-2-2.html#S0027">subtype_indication</A></SPAN> 
or <SPAN Class="swiss"><A HREF="AA-3-5.html#S0037">range</A></SPAN> that 
defines a nonstatic or null range, only if it is the single <SPAN Class="swiss"><A HREF="AA-3-8-1.html#S0074">discrete_choice</A></SPAN> 
of its <SPAN Class="swiss"><A HREF="AA-3-8-1.html#S0073">discrete_choice_list</A></SPAN>, 
and there is only one <SPAN Class="swiss"><A HREF="AA-4-3-3.html#S0116">array_component_association</A></SPAN> 
in the <SPAN Class="swiss"><A HREF="AA-4-3-3.html#S0113">array_aggregate</A></SPAN>. 
</div>
<div class="paranum"><a name="p17.a">17.a</a></div>
<div class="Annotations"><B>Discussion:&nbsp;</B>We now allow a nonstatic 
<B>others</B> choice even if there are other array component expressions 
as well.&nbsp;</div>
<div class="paranum"><a name="p18">18/3</a></div>
<div class="Normal">&nbsp;{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AI05s/AI05-0262-1.TXT">AI05-0262-1</A></I>} 
In a <SPAN Class="swiss"><A HREF="AA-4-3-3.html#S0115">named_array_aggregate</A></SPAN> 
where all <SPAN Class="swiss"><A HREF="AA-3-8-1.html#S0074">discrete_choice</A></SPAN>s 
are static, no two <SPAN Class="swiss"><A HREF="AA-3-8-1.html#S0074">discrete_choice</A></SPAN>s 
are allowed to cover the same value (see <A HREF="AA-3-8-1.html">3.8.1</A>); 
if there is no <B>others</B> choice, the <SPAN Class="swiss"><A HREF="AA-3-8-1.html#S0074">discrete_choice</A></SPAN>s 
taken together shall exactly cover a contiguous sequence of values of 
the corresponding index type.&nbsp;</div>
<div class="paranum"><a name="p18.a">18.a</a></div>
<div class="Annotations"><B>Ramification:&nbsp;</B>This implies that each 
component must be specified exactly once. See AI83-309.&nbsp;</div>
<div class="paranum"><a name="p18.b">18.b/3</a></div>
<div class="Annotations"><B>Reason:&nbsp;</B>{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AI05s/AI05-0262-1.TXT">AI05-0262-1</A></I>} 
This has to apply even if there is only one static <SPAN Class="swiss"><A HREF="AA-3-8-1.html#S0074">discrete_choice</A></SPAN>; 
a single choice has to represent a contiguous range (a <SPAN Class="swiss"><A HREF="AA-3-2-2.html#S0028">subtype_mark</A></SPAN> 
with a static predicate might represent a discontiguous set of values). 
If the (single) choice is a dynamic subtype, we don't need to make this 
check as no predicates are allowed (see <A HREF="AA-3-2-4.html">3.2.4</A>) 
and thus the range has to be contiguous.&nbsp;</div>
<div class="paranum"><a name="p19">19</a></div>
<div class="Normal">A bottom level subaggregate of a multidimensional 
<SPAN Class="swiss"><A HREF="AA-4-3-3.html#S0113">array_aggregate</A></SPAN> 
of a given array type is allowed to be a <SPAN Class="swiss"><A HREF="AA-2-6.html#S0016">string_literal</A></SPAN> 
only if the component type of the array type is a character type; each 
character of such a <SPAN Class="swiss"><A HREF="AA-2-6.html#S0016">string_literal</A></SPAN> 
shall correspond to a <SPAN Class="swiss"><A HREF="AA-3-5-1.html#S0040">defining_character_literal</A></SPAN> 
of the component type.&nbsp;</div>

<H4 Class="centered">Static Semantics</H4>
<div class="paranum"><a name="p20">20</a></div>
<div class="Normal">A subaggregate that is a <SPAN Class="swiss"><A HREF="AA-2-6.html#S0016">string_literal</A></SPAN> 
is equivalent to one that is a <SPAN Class="swiss"><A HREF="AA-4-3-3.html#S0114">positional_array_aggregate</A></SPAN> 
of the same length, with each <SPAN Class="swiss"><A HREF="AA-4-4.html#S0117">expression</A></SPAN> 
being the <SPAN Class="swiss"><A HREF="AA-2-5.html#S0015">character_literal</A></SPAN> 
for the corresponding character of the <SPAN Class="swiss"><A HREF="AA-2-6.html#S0016">string_literal</A></SPAN>. 
</div>

<H4 Class="centered">Dynamic Semantics</H4>
<div class="paranum"><a name="p21">21</a></div>
<div class="Normal" style="margin-bottom: 0.4em"><A NAME="I2781"></A>The 
evaluation of an <SPAN Class="swiss"><A HREF="AA-4-3-3.html#S0113">array_aggregate</A></SPAN> 
of a given array type proceeds in two steps:&nbsp;</div>
<div class="paranum"><a name="p22">22</a></div>
<div class="Enumerated-Term">1.</div><div class="Enumerated-Body">
Any <SPAN Class="swiss"><A HREF="AA-3-8-1.html#S0074">discrete_choice</A></SPAN>s 
of this aggregate and of its subaggregates are evaluated in an arbitrary 
order, and converted to the corresponding index type;<A NAME="I2782"></A> 
<A NAME="I2783"></A></div>
<div class="paranum"><a name="p23">23</a></div>
<div class="Enumerated-Term">2.</div><div class="Enumerated-Body">
The array component expressions of the aggregate are evaluated in an 
arbitrary order and their values are converted to the component subtype 
of the array type; an array component expression is evaluated once for 
each associated component. <A NAME="I2784"></A><A NAME="I2785"></A></div>
<div class="paranum"><a name="p23.a">23.a</a></div>
<div class="Annotations"><B>Ramification:&nbsp;</B>Subaggregates are not separately 
evaluated. The conversion of the value of the component expressions to 
the component subtype might raise Constraint_Error.</div>
<div class="paranum"><a name="p23.b">23.b/3</a></div>
<div class="Annotations">{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AI05s/AI05-0005-1.TXT">AI05-0005-1</A></I>} 
We don't need to say that &lt;&gt; is evaluated once for each component, 
as &lt;&gt; means that each component is <I>initialized by default</I>. 
That means that the actions defined for default initialization are applied 
to each component individually. Initializing one component by default 
and copying that to the others would be an incorrect implementation in 
general (although it might be OK if the default initialization is known 
to be constant).&nbsp;</div>
<div class="paranum"><a name="p23.1">23.1/4</a></div>
<div class="Normal">&nbsp;&nbsp;&nbsp;{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AIs/AI-00287.TXT">AI95-00287-01</A></I>} 
{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AI12s/AI12-0084-1.TXT">AI12-0084-1</A></I>} 
Each <SPAN Class="swiss"><A HREF="AA-4-4.html#S0117">expression</A></SPAN> 
in an <SPAN Class="swiss"><A HREF="AA-4-3-3.html#S0116">array_component_association</A></SPAN> 
defines the value for the associated component(s). For an <SPAN Class="swiss"><A HREF="AA-4-3-3.html#S0116">array_component_association</A></SPAN> 
with &lt;&gt;, the associated component(s) are initialized <span class="insert4">to 
the Default_Component_Value of the array type if this aspect has been 
specified for the array type; otherwise, they are initialized&nbsp;</span>by 
default as for a stand-alone object of the component subtype (see <A HREF="AA-3-3-1.html">3.3.1</A>).</div>
<div class="paranum"><a name="p24">24</a></div>
<div class="Normal" style="margin-bottom: 0.4em"><A NAME="I2786"></A>The 
bounds of the index range of an <SPAN Class="swiss"><A HREF="AA-4-3-3.html#S0113">array_aggregate</A></SPAN> 
[(including a subaggregate)] are determined as follows:&nbsp;</div>
<div class="paranum"><a name="p25">25</a></div>
<div class="Bulleted">For an <SPAN Class="swiss"><A HREF="AA-4-3-3.html#S0113">array_aggregate</A></SPAN> 
with an <B>others</B> choice, the bounds are those of the corresponding 
index range from the applicable index constraint;</div>
<div class="paranum"><a name="p26">26</a></div>
<div class="Bulleted">For a <SPAN Class="swiss"><A HREF="AA-4-3-3.html#S0114">positional_array_aggregate</A></SPAN> 
[(or equivalent <SPAN Class="swiss"><A HREF="AA-2-6.html#S0016">string_literal</A></SPAN>)] 
without an <B>others</B> choice, the lower bound is that of the corresponding 
index range in the applicable index constraint, if defined, or that of 
the corresponding index subtype, if not; in either case, the upper bound 
is determined from the lower bound and the number of <SPAN Class="swiss"><A HREF="AA-4-4.html#S0117">expression</A></SPAN>s 
[(or the length of the <SPAN Class="swiss"><A HREF="AA-2-6.html#S0016">string_literal</A></SPAN>)];</div>
<div class="paranum"><a name="p27">27</a></div>
<div class="Bulleted">For a <SPAN Class="swiss"><A HREF="AA-4-3-3.html#S0115">named_array_aggregate</A></SPAN> 
without an <B>others</B> choice, the bounds are determined by the smallest 
and largest index values covered by any <SPAN Class="swiss"><A HREF="AA-3-8-1.html#S0073">discrete_choice_list</A></SPAN>. 
</div>
<div class="paranum"><a name="p27.a">27.a</a></div>
<div class="Annotations"><B>Reason:&nbsp;</B>We don't need to say that each 
index value has to be covered exactly once, since that is a ramification 
of the general rule on <SPAN Class="swiss"><A HREF="AA-4-3.html#S0106">aggregate</A></SPAN>s 
that each component's value has to be specified exactly once.&nbsp;</div>
<div class="paranum"><a name="p28">28</a></div>
<div class="Normal"><A NAME="I2787"></A><A NAME="I2788"></A>For an <SPAN Class="swiss"><A HREF="AA-4-3-3.html#S0113">array_aggregate</A></SPAN>, 
a check is made that the index range defined by its bounds is compatible 
with the corresponding index subtype.&nbsp;</div>
<div class="paranum"><a name="p28.a">28.a</a></div>
<div class="Annotations"><B>Discussion:&nbsp;</B>In RM83, this was phrased 
more explicitly, but once we define &quot;compatibility&quot; between 
a range and a subtype, it seems to make sense to take advantage of that 
definition.&nbsp;</div>
<div class="paranum"><a name="p28.b">28.b</a></div>
<div class="Annotations"><B>Ramification:&nbsp;</B>The definition of compatibility 
handles the special case of a null range, which is always compatible 
with a subtype. See AI83-00313.&nbsp;</div>
<div class="paranum"><a name="p29">29/3</a></div>
<div class="Normal">&nbsp;{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AI05s/AI05-0037-1.TXT">AI05-0037-1</A></I>} 
<A NAME="I2789"></A><A NAME="I2790"></A>For an <SPAN Class="swiss"><A HREF="AA-4-3-3.html#S0113">array_aggregate</A></SPAN> 
with an <B>others</B> choice, a check is made that no <SPAN Class="swiss"><A HREF="AA-4-4.html#S0117">expression</A></SPAN> 
or &lt;&gt; is specified for an index value outside the bounds determined 
by the applicable index constraint.&nbsp;</div>
<div class="paranum"><a name="p29.a">29.a</a></div>
<div class="Annotations"><B>Discussion:&nbsp;</B>RM83 omitted this case, apparently 
through an oversight. AI83-00309 defines this as a dynamic check, even 
though other Ada 83 rules ensured that this check could be performed 
statically. We now allow an <B>others</B> choice to be dynamic, even 
if it is not the only choice, so this check now needs to be dynamic, 
in some cases. Also, within a generic unit, this would be a nonstatic 
check in some cases.&nbsp;</div>
<div class="paranum"><a name="p30">30</a></div>
<div class="Normal"><A NAME="I2791"></A><A NAME="I2792"></A>For a multidimensional 
<SPAN Class="swiss"><A HREF="AA-4-3-3.html#S0113">array_aggregate</A></SPAN>, 
a check is made that all subaggregates that correspond to the same index 
have the same bounds.&nbsp;</div>
<div class="paranum"><a name="p30.a">30.a</a></div>
<div class="Annotations"><B>Ramification:&nbsp;</B>No array bounds &ldquo;sliding&rdquo; 
is performed on subaggregates.&nbsp;</div>
<div class="paranum"><a name="p30.b">30.b</a></div>
<div class="Annotations"><B>Reason:&nbsp;</B>If sliding were performed, it 
would not be obvious which subaggregate would determine the bounds of 
the corresponding index.&nbsp;</div>
<div class="paranum"><a name="p31">31</a></div>
<div class="Normal"><A NAME="I2793"></A>The exception Constraint_Error 
is raised if any of the above checks fail.&nbsp;</div>
<div class="NotesHeader">NOTES</div>
<div class="paranum"><a name="p32">32/3</a></div>
<div class="Notes">11&nbsp;&nbsp;{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AI05s/AI05-0004-1.TXT">AI05-0004-1</A></I>} 
In an <SPAN Class="swiss"><A HREF="AA-4-3-3.html#S0113">array_aggregate</A></SPAN>, 
positional notation may only be used with two or more <SPAN Class="swiss"><A HREF="AA-4-4.html#S0117">expression</A></SPAN>s; 
a single <SPAN Class="swiss"><A HREF="AA-4-4.html#S0117">expression</A></SPAN> 
in parentheses is interpreted as a parenthesized expression. A <SPAN Class="swiss"><A HREF="AA-4-3-3.html#S0115">named_array_aggregate</A></SPAN>, 
such as (1 =&gt; X), may be used to specify an array with a single component. 
</div>

<H4 Class="centered">Examples</H4>
<div class="paranum"><a name="p33">33</a></div>
<div class="Normal" style="margin-bottom: 0.4em"><I>Examples of array 
aggregates with positional associations:</I>&nbsp;</div>
<div class="paranum"><a name="p34">34</a></div>
<div class="Examples">(7,&nbsp;9,&nbsp;5,&nbsp;1,&nbsp;3,&nbsp;2,&nbsp;4,&nbsp;8,&nbsp;6,&nbsp;0)<BR>
Table'(5,&nbsp;8,&nbsp;4,&nbsp;1,&nbsp;<B>others</B>&nbsp;=&gt;&nbsp;0)&nbsp;&nbsp;--<SPAN Class="roman"><I>&nbsp;&nbsp;see&nbsp;<A HREF="AA-3-6.html">3.6</A>&nbsp;</I></SPAN></div>
<div class="paranum"><a name="p35">35</a></div>
<div class="WideAbove" style="margin-bottom: 0.4em"><I>Examples of array 
aggregates with named associations:</I>&nbsp;</div>
<div class="paranum"><a name="p36">36</a></div>
<div class="Examples">(1&nbsp;..&nbsp;5&nbsp;=&gt;&nbsp;(1&nbsp;..&nbsp;8&nbsp;=&gt;&nbsp;0.0))&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;--<SPAN Class="roman"><I>&nbsp;&nbsp;two-dimensional</I></SPAN><BR>
(1&nbsp;..&nbsp;N&nbsp;=&gt;&nbsp;<B>new</B>&nbsp;Cell)&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;--<SPAN Class="roman"><I>&nbsp;&nbsp;N&nbsp;new&nbsp;cells,&nbsp;in&nbsp;particular&nbsp;for&nbsp;N&nbsp;=&nbsp;0</I></SPAN></div>
<div class="paranum"><a name="p37">37</a></div>
<div class="Examples">Table'(2&nbsp;|&nbsp;4&nbsp;|&nbsp;10&nbsp;=&gt;&nbsp;1,&nbsp;<B>others</B>&nbsp;=&gt;&nbsp;0)<BR>
Schedule'(Mon&nbsp;..&nbsp;Fri&nbsp;=&gt;&nbsp;True,&nbsp;&nbsp;<B>others</B>&nbsp;=&gt;&nbsp;False)&nbsp;&nbsp;--<SPAN Class="roman"><I>&nbsp;&nbsp;see&nbsp;<A HREF="AA-3-6.html">3.6</A></I></SPAN><BR>
Schedule'(Wed&nbsp;|&nbsp;Sun&nbsp;&nbsp;=&gt;&nbsp;False,&nbsp;<B>others</B>&nbsp;=&gt;&nbsp;True)<BR>
Vector'(1&nbsp;=&gt;&nbsp;2.5)&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;--<SPAN Class="roman"><I>&nbsp;&nbsp;single-component&nbsp;vector</I></SPAN></div>
<div class="paranum"><a name="p38">38</a></div>
<div class="WideAbove" style="margin-bottom: 0.4em"><I>Examples of two-dimensional 
array aggregates:</I>&nbsp;</div>
<div class="paranum"><a name="p39">39</a></div>
<div class="Examples">--<SPAN Class="roman"><I>&nbsp;Three&nbsp;aggregates&nbsp;for&nbsp;the&nbsp;same&nbsp;value&nbsp;of&nbsp;subtype&nbsp;Matrix(1..2,1..3)&nbsp;(see&nbsp;<A HREF="AA-3-6.html">3.6</A>):</I></SPAN></div>
<div class="paranum"><a name="p40">40</a></div>
<div class="Examples">((1.1,&nbsp;1.2,&nbsp;1.3),&nbsp;(2.1,&nbsp;2.2,&nbsp;2.3))<BR>
(1&nbsp;=&gt;&nbsp;(1.1,&nbsp;1.2,&nbsp;1.3),&nbsp;2&nbsp;=&gt;&nbsp;(2.1,&nbsp;2.2,&nbsp;2.3))<BR>
(1&nbsp;=&gt;&nbsp;(1&nbsp;=&gt;&nbsp;1.1,&nbsp;2&nbsp;=&gt;&nbsp;1.2,&nbsp;3&nbsp;=&gt;&nbsp;1.3),&nbsp;2&nbsp;=&gt;&nbsp;(1&nbsp;=&gt;&nbsp;2.1,&nbsp;2&nbsp;=&gt;&nbsp;2.2,&nbsp;3&nbsp;=&gt;&nbsp;2.3))</div>
<div class="paranum"><a name="p41">41</a></div>
<div class="WideAbove" style="margin-bottom: 0.4em"><I>Examples of aggregates 
as initial values:</I>&nbsp;</div>
<div class="paranum"><a name="p42">42</a></div>
<div class="Examples">A&nbsp;:&nbsp;Table&nbsp;:=&nbsp;(7,&nbsp;9,&nbsp;5,&nbsp;1,&nbsp;3,&nbsp;2,&nbsp;4,&nbsp;8,&nbsp;6,&nbsp;0);&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;--<SPAN Class="roman"><I>&nbsp;A(1)=7,&nbsp;A(10)=0</I></SPAN><BR>
B&nbsp;:&nbsp;Table&nbsp;:=&nbsp;(2&nbsp;|&nbsp;4&nbsp;|&nbsp;10&nbsp;=&gt;&nbsp;1,&nbsp;<B>others</B>&nbsp;=&gt;&nbsp;0);&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;--<SPAN Class="roman"><I>&nbsp;B(1)=0,&nbsp;B(10)=1</I></SPAN><BR>
C&nbsp;:&nbsp;<B>constant</B>&nbsp;Matrix&nbsp;:=&nbsp;(1&nbsp;..&nbsp;5&nbsp;=&gt;&nbsp;(1&nbsp;..&nbsp;8&nbsp;=&gt;&nbsp;0.0));&nbsp;--<SPAN Class="roman"><I>&nbsp;C'Last(1)=5,&nbsp;C'Last(2)=8</I></SPAN></div>
<div class="paranum"><a name="p43">43</a></div>
<div class="Examples">D&nbsp;:&nbsp;Bit_Vector(M&nbsp;..&nbsp;N)&nbsp;:=&nbsp;(M&nbsp;..&nbsp;N&nbsp;=&gt;&nbsp;True);&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;--<SPAN Class="roman"><I>&nbsp;see&nbsp;<A HREF="AA-3-6.html">3.6</A></I></SPAN><BR>
E&nbsp;:&nbsp;Bit_Vector(M&nbsp;..&nbsp;N)&nbsp;:=&nbsp;(<B>others</B>&nbsp;=&gt;&nbsp;True);<BR>
F&nbsp;:&nbsp;String(1&nbsp;..&nbsp;1)&nbsp;:=&nbsp;(1&nbsp;=&gt;&nbsp;'F');&nbsp;&nbsp;--<SPAN Class="roman"><I>&nbsp;a&nbsp;one&nbsp;component&nbsp;aggregate:&nbsp;same&nbsp;as&nbsp;&quot;F&quot;</I></SPAN></div>
<div class="paranum"><a name="p44">44/2</a></div>
<div class="Normal" style="margin-bottom: 0.4em">&nbsp;{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AIs/AI-00433.TXT">AI95-00433-01</A></I>} 
<I>Example of an array aggregate with defaulted others choice and with 
an applicable index constraint provided by an enclosing record aggregate:</I></div>
<div class="paranum"><a name="p45">45/2</a></div>
<div class="Examples">Buffer'(Size&nbsp;=&gt;&nbsp;50,&nbsp;Pos&nbsp;=&gt;&nbsp;1,&nbsp;Value&nbsp;=&gt;&nbsp;String'('x',&nbsp;<B>others</B>&nbsp;=&gt;&nbsp;&lt;&gt;))&nbsp;&nbsp;--<SPAN Class="roman"><I>&nbsp;see&nbsp;<A HREF="AA-3-7.html">3.7</A></I></SPAN></div>

<H4 Class="centered">Incompatibilities With Ada 83</H4>
<div class="paranum"><a name="p45.a.1">45.a.1/1</a></div>
<div class="Annotations" style="margin-bottom: 0.4em"><A NAME="I2794"></A>In 
Ada 95, no applicable index constraint is defined for a parameter in 
a call to a generic formal subprogram; thus, some aggregates that are 
legal in Ada 83 are illegal in Ada 95. For example:&nbsp;</div>
<div class="paranum"><a name="p45.a.2">45.a.2/1</a></div>
<div class="SmallExamples"><B>subtype</B>&nbsp;S3&nbsp;<B>is</B>&nbsp;String&nbsp;(1&nbsp;..&nbsp;3);<BR>
...<BR>
<B>generic</B><BR>
&nbsp;&nbsp;&nbsp;<B>with&nbsp;function</B>&nbsp;F&nbsp;(The_S3&nbsp;:&nbsp;<B>in</B>&nbsp;S3)&nbsp;<B>return</B>&nbsp;Integer;<BR>
<B>package</B>&nbsp;Gp&nbsp;<B>is</B><BR>
&nbsp;&nbsp;&nbsp;I&nbsp;:&nbsp;constant&nbsp;Integer&nbsp;:=&nbsp;F&nbsp;((1&nbsp;=&gt;&nbsp;'!',&nbsp;others&nbsp;=&gt;&nbsp;'?'));<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;--&nbsp;<SPAN Class="roman"><I>The&nbsp;aggregate&nbsp;is&nbsp;legal&nbsp;in&nbsp;Ada&nbsp;83,&nbsp;illegal&nbsp;in&nbsp;Ada&nbsp;95.</I></SPAN><BR>
<B>end</B>&nbsp;Gp;</div>
<div class="paranum"><a name="p45.a.3">45.a.3/1</a></div>
<div class="Annotations">This change eliminates generic contract model 
problems.&nbsp;</div>

<H4 Class="centered">Extensions to Ada 83</H4>
<div class="paranum"><a name="p45.a">45.a</a></div>
<div class="Annotations"><A NAME="I2795"></A>We now allow &quot;named 
with others&quot; aggregates in all contexts where there is an applicable 
index constraint, effectively eliminating what was RM83-4.3.2(6). Sliding 
never occurs on an aggregate with others, because its bounds come from 
the applicable index constraint, and therefore already match the bounds 
of the target.</div>
<div class="paranum"><a name="p45.b">45.b</a></div>
<div class="Annotations">The legality of an <B>others</B> choice is no 
longer affected by the staticness of the applicable index constraint. 
This substantially simplifies several rules, while being slightly more 
flexible for the user. It obviates the rulings of AI83-00244 and AI83-00310, 
while taking advantage of the dynamic nature of the &quot;extra values&quot; 
check required by AI83-00309.</div>
<div class="paranum"><a name="p45.c">45.c</a></div>
<div class="Annotations">Named array aggregates are permitted even if 
the index type is descended from a formal scalar type. See <A HREF="AA-4-9.html">4.9</A> 
and AI83-00190.&nbsp;</div>

<H4 Class="centered">Wording Changes from Ada 83</H4>
<div class="paranum"><a name="p45.d">45.d</a></div>
<div class="Annotations">We now separate named and positional array aggregate 
syntax, since, unlike other aggregates, named and positional associations 
cannot be mixed in array aggregates (except that an <B>others</B> choice 
is allowed in a positional array aggregate).</div>
<div class="paranum"><a name="p45.e">45.e</a></div>
<div class="Annotations">We have also reorganized the presentation to 
handle multidimensional and one-dimensional aggregates more uniformly, 
and to incorporate the rulings of AI83-00019, AI83-00309, etc.&nbsp;</div>

<H4 Class="centered">Extensions to Ada 95</H4>
<div class="paranum"><a name="p45.f">45.f/2</a></div>
<div class="Annotations">{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AIs/AI-00287.TXT">AI95-00287-01</A></I>} 
<A NAME="I2796"></A>&lt;&gt; can be used in place of an <SPAN Class="swiss"><A HREF="AA-4-4.html#S0117">expression</A></SPAN> 
in an <SPAN Class="swiss"><A HREF="AA-4-3-3.html#S0113">array_aggregate</A></SPAN>, 
default-initializing the component.&nbsp;</div>

<H4 Class="centered">Wording Changes from Ada 95</H4>
<div class="paranum"><a name="p45.g">45.g/2</a></div>
<div class="Annotations">{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AIs/AI-00287.TXT">AI95-00287-01</A></I>} 
Limited <SPAN Class="swiss"><A HREF="AA-4-3-3.html#S0113">array_aggregate</A></SPAN>s 
are allowed (since all kinds of aggregates can now be limited, see <A HREF="AA-4-3.html">4.3</A>).</div>
<div class="paranum"><a name="p45.h">45.h/2</a></div>
<div class="Annotations">{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AIs/AI-10318.TXT">AI95-00318-02</A></I>} 
Fixed <SPAN Class="swiss"><A HREF="AA-4-3.html#S0106">aggregate</A></SPAN>s 
to use the subtype of the return object of a function, rather than the 
result subtype, because they can be different for an <SPAN Class="swiss"><A HREF="AA-6-5.html#S0186">extended_return_statement</A></SPAN>, 
and we want to use the subtype that's explicitly in the code at the point 
of the <SPAN Class="swiss"><A HREF="AA-4-4.html#S0117">expression</A></SPAN>. 
</div>

<H4 Class="centered">Inconsistencies With Ada 2005</H4>
<div class="paranum"><a name="p45.i">45.i/3</a></div>
<div class="Annotations">{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AI05s/AI05-0037-1.TXT">AI05-0037-1</A></I>} 
<A NAME="I2797"></A><B>Correction:</B> Fixed so the check for components 
outside of the array applies to both <SPAN Class="swiss"><A HREF="AA-4-4.html#S0117">expression</A></SPAN>s 
and &lt;&gt;s. As &lt;&gt; was a new feature in Ada 2005, there should 
be little existing code that depends on a &lt;&gt; component that is 
specified outside of the array (and that is nonsense anyway, that a compiler 
is likely to detect even without an explicit language rule disallowing 
it).&nbsp;</div>

<H4 Class="centered">Wording Changes from Ada 2005</H4>
<div class="paranum"><a name="p45.j">45.j/3</a></div>
<div class="Annotations">{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AI05s/AI05-0147-1.TXT">AI05-0147-1</A></I>} 
Added a definition of the applicable index constraint for <SPAN Class="swiss"><A HREF="AA-4-5-7.html#S0133">conditional_expression</A></SPAN>s 
(which are new).&nbsp;</div>

<H4 Class="centered">Inconsistencies With Ada 2012</H4>
<div class="paranum"><a name="p45.k">45.k/4</a></div>
<div class="Annotations">{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AI05s/AI05-0084-1.TXT">AI05-0084-1</A></I>} 
<span class="insert4"><A NAME="I2798"></A><B>Corrigendum:</B> Fixed so 
that the Default_Component_Value (if any) is used to initialize components 
specified with &lt;&gt;. This is what users would expect, and all Ada 
2012 implementation known at the time of this writing initialize with 
the Default_Component_Value, so it is unlikely that anyone will be affected 
by this inconsistency.</span>&nbsp;</div>

<H4 Class="centered">Wording Changes from Ada 2012</H4>
<div class="paranum"><a name="p45.l">45.l/4</a></div>
<div class="Annotations">{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AI05s/AI05-0157-1.TXT">AI05-0157-1</A></I>} 
<span class="insert4"><B>Corrigendum:</B> Added expression functions 
to the contexts that provide an applicable index constraint, because 
expression functions are handled separately in static semantics and legality 
rules.</span>&nbsp;</div>

<HR>
<div style="margin-top: 0.0em; margin-bottom: 0.6em"><A HREF="AA-TOC.html"><IMG SRC="cont.gif" ALT="Contents" BORDER=0></A>&nbsp;
&nbsp;<A HREF="AA-0-5.html"><IMG SRC="index.gif" ALT="Index" BORDER=0></A>&nbsp;
&nbsp;<A HREF="AA-STDS.html"><IMG SRC="lib.gif" ALT="References" BORDER=0></A>&nbsp;
&nbsp;<A HREF="AA-SRCH.html"><IMG SRC="find.gif" ALT="Search" BORDER=0></A>&nbsp;
&nbsp;<A HREF="AA-4-3-2.html"><IMG SRC="prev.gif" ALT="Previous" BORDER=0></A>&nbsp;
&nbsp;<A HREF="AA-4-4.html"><IMG SRC="next.gif" ALT="Next" BORDER=0></A>&nbsp;
</div>
<DIV Style="margin-top:0.0em"><IMG SRC="AE_logo.gif" height=100 width=113 align=right ALT="Ada-Europe">
<SPAN Style="vertical-align: middle; font-size:120%">Ada 2005 and 2012 Editions sponsored in part by <SPAN Style="font-size: 125%"><A HREF="http://www.ada-europe.org/"><B>Ada-Europe</B></A></SPAN></SPAN></DIV>
</BODY>
</HTML>
