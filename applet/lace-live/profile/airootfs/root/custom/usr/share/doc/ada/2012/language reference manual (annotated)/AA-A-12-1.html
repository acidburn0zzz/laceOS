<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
"http://www.w3.org/TR/html4/loose.dtd">
<HTML>
<HEAD>
    <TITLE>The Package Streams.Stream_IO</TITLE>
    <META http-equiv="Content-Type" content="text/html; charset=iso-8859-1">
    <META NAME="Author" CONTENT="JTC1/SC22/WG9/ARG, by Randall Brukardt, ARG Editor">
    <META NAME="GENERATOR" CONTENT="Arm_Form.Exe, Ada Reference Manual generator">
    <STYLE type="text/css">
    H4.centered {text-align: center}
    SPAN.swiss {font-family: Arial, Helvetica, sans-serif; font-size: 92%}
    SPAN.roman {font-family: "Times New Roman", Times, serif}
    DIV.paranum {float: left; font-family: Arial, Helvetica, sans-serif; font-size: 64%; width: 2.8em; margin-left: -0.4em; margin-right: -3.0em; margin-top: 0.2em}
    TT {font-family: "Courier New", monospace}
    DT {display: compact}
    SPAN.insert4 {text-decoration: underline; color: rgb(153,0,0) }
    SPAN.delete4 {text-decoration: line-through; color: rgb(153,0,0) }
    A.Bar:link {font-family: Arial, Helvetica, sans-serif; font-style: normal; text-decoration: none; color: rgb(204,204,51)}
    A.Bar:visited {font-family: Arial, Helvetica, sans-serif; font-style: normal; text-decoration: none; color: rgb(204,204,51)}
    DIV.Normal {font-family: "Times New Roman", Times, serif; line-height: 122%; margin-left: 1.2em; margin-bottom: 0.6em}
    DIV.Annotations {font-family: "Times New Roman", Times, serif; font-size: 80%; line-height: 122%; margin-left: 6.2em; margin-bottom: 0.6em}
    DIV.Examples {font-family: "Courier New", monospace; font-size: 90%; line-height: 122%; margin-left: 3.4em; margin-bottom: 0.6em}
    DIV.Bulleted-NoPrefix {font-family: "Times New Roman", Times, serif; line-height: 122%; margin-left: 3.2em; margin-right: 2.0em; margin-top: 0em; margin-bottom: 0.5em}
    DIV.Bulleted {font-family: "Times New Roman", Times, serif; line-height: 122%; margin-left: 3.2em; margin-right: 2.0em; margin-top: 0em; margin-bottom: 0.5em; display: list-item; list-style-type: disc}
    </STYLE>
</HEAD>
<BODY TEXT="#000000" BGCOLOR="#FFFFF0" LINK="#000080" VLINK="#330033" ALINK="#0000FF">
<DIV><B><SPAN Style="font-size:200%; color: rgb(0,51,153)">Annotated</SPAN><SPAN Style="font-size:200%; color: rgb(0,0,102)">&nbsp;Ada Reference Manual</SPAN></B> &mdash; <A HREF="AA-TTL.html"><B>Legal Information</B></A></DIV>
<div style="margin-top: 0.6em; margin-bottom: 0.0em"><A HREF="AA-TOC.html"><IMG SRC="cont.gif" ALT="Contents" BORDER=0></A>&nbsp;
&nbsp;<A HREF="AA-0-5.html"><IMG SRC="index.gif" ALT="Index" BORDER=0></A>&nbsp;
&nbsp;<A HREF="AA-STDS.html"><IMG SRC="lib.gif" ALT="References" BORDER=0></A>&nbsp;
&nbsp;<A HREF="AA-SRCH.html"><IMG SRC="find.gif" ALT="Search" BORDER=0></A>&nbsp;
&nbsp;<A HREF="AA-A-12.html"><IMG SRC="prev.gif" ALT="Previous" BORDER=0></A>&nbsp;
&nbsp;<A HREF="AA-A-12-2.html"><IMG SRC="next.gif" ALT="Next" BORDER=0></A>&nbsp;
</div>
<HR>
<H1>A.12.1 The Package Streams.Stream_IO</H1>
<div class="paranum"><a name="p1">1</a></div>
<div class="Normal"><A NAME="I7173"></A>[The subprograms in the child 
package Streams.Stream_IO provide control over stream files. Access to 
a stream file is either sequential, via a call on Read or Write to transfer 
an array of stream elements, or positional (if supported by the implementation 
for the given file), by specifying a relative index for an element. Since 
a stream file can be converted to a Stream_Access value, calling stream-oriented 
attribute subprograms of different element types with the same Stream_Access 
value provides heterogeneous input-output.] See <A HREF="AA-13-13.html">13.13</A> 
for a general discussion of streams.&nbsp;</div>

<H4 Class="centered">Static Semantics</H4>
<div class="paranum"><a name="p1.1">1.1/1</a></div>
<div class="Normal">&nbsp;&nbsp;{<I><A HREF="defect1.html#8652/0055">8652/0055</A></I>} 
{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AIs/AI-00026.TXT">AI95-00026-01</A></I>} 
The elements of a stream file are stream elements. If positioning is 
supported for the specified external file, a current index and current 
size are maintained for the file as described in <A HREF="AA-A-8.html">A.8</A>. 
If positioning is not supported, a current index is not maintained, and 
the current size is implementation defined.<A NAME="I7174"></A><A NAME="I7175"></A> 
</div>
<div class="paranum"><a name="p1.a.1">1.a.1/1</a></div>
<div class="Annotations"><B>Implementation defined:&nbsp;</B>Current size 
for a stream file for which positioning is not supported.</div>
<div class="paranum"><a name="p2">2</a></div>
<div class="Normal" style="margin-bottom: 0.4em">The library package 
Streams.Stream_IO has the following declaration:&nbsp;</div>
<div class="paranum"><a name="p3">3/3</a></div>
<div class="Examples">{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AI05s/AI05-0283-1.TXT">AI05-0283-1</A></I>} 
<B>with</B>&nbsp;Ada.IO_Exceptions;<A NAME="I7176"></A><BR>
<B>package</B>&nbsp;Ada.Streams.Stream_IO&nbsp;<B>is</B><BR>
&nbsp;&nbsp;&nbsp;&nbsp;<B>pragma</B>&nbsp;Preelaborate(Stream_IO);</div>
<div class="paranum"><a name="p4">4</a></div>
<div class="Examples">&nbsp;&nbsp;&nbsp;&nbsp;<B>type</B>&nbsp;<A NAME="I7177"></A>Stream_Access&nbsp;<B>is</B>&nbsp;<B>access</B>&nbsp;<B>all</B>&nbsp;Root_Stream_Type'Class;</div>
<div class="paranum"><a name="p5">5/4</a></div>
<div class="Examples">{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AI12s/AI12-0102-1.TXT">AI12-0102-1</A></I>} 
&nbsp;&nbsp;&nbsp;&nbsp;<B>type</B>&nbsp;<A NAME="I7178"></A>File_Type&nbsp;<B>is</B>&nbsp;<B>limited</B>&nbsp;<B>private</B>;<span class="insert4"><BR>
&nbsp;&nbsp;&nbsp;&nbsp;<B>pragma</B>&nbsp;Preelaborable_Initialization(File_Type);</span></div>
<div class="paranum"><a name="p6">6</a></div>
<div class="Examples">&nbsp;&nbsp;&nbsp;&nbsp;<B>type</B>&nbsp;<A NAME="I7179"></A>File_Mode&nbsp;<B>is</B>&nbsp;(In_File,&nbsp;Out_File,&nbsp;Append_File);</div>
<div class="paranum"><a name="p7">7</a></div>
<div class="Examples">&nbsp;&nbsp;&nbsp;&nbsp;<B>type</B>&nbsp;&nbsp;&nbsp;&nbsp;<A NAME="I7180"></A>Count&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<B>is</B>&nbsp;<B>range</B>&nbsp;0&nbsp;..&nbsp;<SPAN Class="roman"><I>implementation-defined</I></SPAN>;<BR>
&nbsp;&nbsp;&nbsp;&nbsp;<B>subtype</B>&nbsp;<A NAME="I7181"></A>Positive_Count&nbsp;<B>is</B>&nbsp;Count&nbsp;<B>range</B>&nbsp;1&nbsp;..&nbsp;Count'Last;<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;--&nbsp;<SPAN Class="roman"><I>Index&nbsp;into&nbsp;file,&nbsp;in&nbsp;stream&nbsp;elements.</I></SPAN></div>
<div class="paranum"><a name="p8">8</a></div>
<div class="Examples">&nbsp;&nbsp;&nbsp;&nbsp;<B>procedure</B>&nbsp;<A NAME="I7182"></A>Create&nbsp;(File&nbsp;:&nbsp;<B>in</B>&nbsp;<B>out</B>&nbsp;File_Type;<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Mode&nbsp;:&nbsp;<B>in</B>&nbsp;File_Mode&nbsp;:=&nbsp;Out_File;<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Name&nbsp;:&nbsp;<B>in</B>&nbsp;String&nbsp;&nbsp;&nbsp;&nbsp;:=&nbsp;&quot;&quot;;<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Form&nbsp;:&nbsp;<B>in</B>&nbsp;String&nbsp;&nbsp;&nbsp;&nbsp;:=&nbsp;&quot;&quot;);</div>
<div class="paranum"><a name="p9">9</a></div>
<div class="Examples">&nbsp;&nbsp;&nbsp;&nbsp;<B>procedure</B>&nbsp;<A NAME="I7183"></A>Open&nbsp;(File&nbsp;:&nbsp;<B>in</B>&nbsp;<B>out</B>&nbsp;File_Type;<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Mode&nbsp;:&nbsp;<B>in</B>&nbsp;File_Mode;<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Name&nbsp;:&nbsp;<B>in</B>&nbsp;String;<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Form&nbsp;:&nbsp;<B>in</B>&nbsp;String&nbsp;:=&nbsp;&quot;&quot;);</div>
<div class="paranum"><a name="p10">10</a></div>
<div class="Examples">&nbsp;&nbsp;&nbsp;&nbsp;<B>procedure</B>&nbsp;<A NAME="I7184"></A>Close&nbsp;&nbsp;(File&nbsp;:&nbsp;<B>in</B>&nbsp;<B>out</B>&nbsp;File_Type);<BR>
&nbsp;&nbsp;&nbsp;&nbsp;<B>procedure</B>&nbsp;<A NAME="I7185"></A>Delete&nbsp;(File&nbsp;:&nbsp;<B>in</B>&nbsp;<B>out</B>&nbsp;File_Type);<BR>
&nbsp;&nbsp;&nbsp;&nbsp;<B>procedure</B>&nbsp;<A NAME="I7186"></A>Reset&nbsp;&nbsp;(File&nbsp;:&nbsp;<B>in</B>&nbsp;<B>out</B>&nbsp;File_Type;&nbsp;Mode&nbsp;:&nbsp;<B>in</B>&nbsp;File_Mode);<BR>
&nbsp;&nbsp;&nbsp;&nbsp;<B>procedure</B>&nbsp;<A NAME="I7187"></A>Reset&nbsp;&nbsp;(File&nbsp;:&nbsp;<B>in</B>&nbsp;<B>out</B>&nbsp;File_Type);</div>
<div class="paranum"><a name="p11">11</a></div>
<div class="Examples">&nbsp;&nbsp;&nbsp;&nbsp;<B>function</B>&nbsp;<A NAME="I7188"></A>Mode&nbsp;(File&nbsp;:&nbsp;<B>in</B>&nbsp;File_Type)&nbsp;<B>return</B>&nbsp;File_Mode;<BR>
&nbsp;&nbsp;&nbsp;&nbsp;<B>function</B>&nbsp;<A NAME="I7189"></A>Name&nbsp;(File&nbsp;:&nbsp;<B>in</B>&nbsp;File_Type)&nbsp;<B>return</B>&nbsp;String;<BR>
&nbsp;&nbsp;&nbsp;&nbsp;<B>function</B>&nbsp;<A NAME="I7190"></A>Form&nbsp;(File&nbsp;:&nbsp;<B>in</B>&nbsp;File_Type)&nbsp;<B>return</B>&nbsp;String;</div>
<div class="paranum"><a name="p12">12</a></div>
<div class="Examples">&nbsp;&nbsp;&nbsp;&nbsp;<B>function</B>&nbsp;<A NAME="I7191"></A>Is_Open&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(File&nbsp;:&nbsp;<B>in</B>&nbsp;File_Type)&nbsp;<B>return</B>&nbsp;Boolean;<BR>
&nbsp;&nbsp;&nbsp;&nbsp;<B>function</B>&nbsp;<A NAME="I7192"></A>End_Of_File&nbsp;(File&nbsp;:&nbsp;<B>in</B>&nbsp;File_Type)&nbsp;<B>return</B>&nbsp;Boolean;</div>
<div class="paranum"><a name="p13">13</a></div>
<div class="Examples">&nbsp;&nbsp;&nbsp;&nbsp;<B>function</B>&nbsp;<A NAME="I7193"></A>Stream&nbsp;(File&nbsp;:&nbsp;<B>in</B>&nbsp;File_Type)&nbsp;<B>return</B>&nbsp;Stream_Access;<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;--&nbsp;<SPAN Class="roman"><I>Return&nbsp;stream&nbsp;access&nbsp;for&nbsp;use&nbsp;with&nbsp;T'Input&nbsp;and&nbsp;T'Output</I></SPAN></div>
<div class="paranum"><a name="p14">14/1</a></div>
<div class="Examples"><SPAN STYLE="font-size: 80%"><I>This paragraph 
was deleted.</I></SPAN></div>
<div class="paranum"><a name="p15">15</a></div>
<div class="Examples">&nbsp;&nbsp;&nbsp;&nbsp;--&nbsp;<SPAN Class="roman"><I>Read&nbsp;array&nbsp;of&nbsp;stream&nbsp;elements&nbsp;from&nbsp;file</I></SPAN><BR>
&nbsp;&nbsp;&nbsp;&nbsp;<B>procedure</B>&nbsp;<A NAME="I7194"></A>Read&nbsp;(File&nbsp;:&nbsp;<B>in</B>&nbsp;&nbsp;File_Type;<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Item&nbsp;:&nbsp;<B>out</B>&nbsp;Stream_Element_Array;<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Last&nbsp;:&nbsp;<B>out</B>&nbsp;Stream_Element_Offset;<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;From&nbsp;:&nbsp;<B>in</B>&nbsp;&nbsp;Positive_Count);</div>
<div class="paranum"><a name="p16">16</a></div>
<div class="Examples">&nbsp;&nbsp;&nbsp;&nbsp;<B>procedure</B>&nbsp;<A NAME="I7195"></A>Read&nbsp;(File&nbsp;:&nbsp;<B>in</B>&nbsp;&nbsp;File_Type;<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Item&nbsp;:&nbsp;<B>out</B>&nbsp;Stream_Element_Array;<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Last&nbsp;:&nbsp;<B>out</B>&nbsp;Stream_Element_Offset);</div>
<div class="paranum"><a name="p17">17/1</a></div>
<div class="Examples"><SPAN STYLE="font-size: 80%"><I>This paragraph 
was deleted.</I></SPAN></div>
<div class="paranum"><a name="p18">18</a></div>
<div class="Examples">&nbsp;&nbsp;&nbsp;&nbsp;--&nbsp;<SPAN Class="roman"><I>Write&nbsp;array&nbsp;of&nbsp;stream&nbsp;elements&nbsp;into&nbsp;file</I></SPAN><BR>
&nbsp;&nbsp;&nbsp;&nbsp;<B>procedure</B>&nbsp;<A NAME="I7196"></A>Write&nbsp;(File&nbsp;:&nbsp;<B>in</B>&nbsp;File_Type;<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Item&nbsp;:&nbsp;<B>in</B>&nbsp;Stream_Element_Array;<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;To&nbsp;&nbsp;&nbsp;:&nbsp;<B>in</B>&nbsp;Positive_Count);</div>
<div class="paranum"><a name="p19">19</a></div>
<div class="Examples">&nbsp;&nbsp;&nbsp;&nbsp;<B>procedure</B>&nbsp;<A NAME="I7197"></A>Write&nbsp;(File&nbsp;:&nbsp;<B>in</B>&nbsp;File_Type;<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Item&nbsp;:&nbsp;<B>in</B>&nbsp;Stream_Element_Array);</div>
<div class="paranum"><a name="p20">20/1</a></div>
<div class="Examples"><SPAN STYLE="font-size: 80%"><I>This paragraph 
was deleted.</I></SPAN></div>
<div class="paranum"><a name="p21">21</a></div>
<div class="Examples">&nbsp;&nbsp;&nbsp;&nbsp;--&nbsp;<SPAN Class="roman"><I>Operations&nbsp;on&nbsp;position&nbsp;within&nbsp;file</I></SPAN></div>
<div class="paranum"><a name="p22">22</a></div>
<div class="Examples">&nbsp;&nbsp;&nbsp;&nbsp;<B>procedure</B>&nbsp;<A NAME="I7198"></A>Set_Index(File&nbsp;:&nbsp;<B>in</B>&nbsp;File_Type;&nbsp;To&nbsp;:&nbsp;<B>in</B>&nbsp;Positive_Count);</div>
<div class="paranum"><a name="p23">23</a></div>
<div class="Examples">&nbsp;&nbsp;&nbsp;&nbsp;<B>function</B>&nbsp;<A NAME="I7199"></A>Index(File&nbsp;:&nbsp;<B>in</B>&nbsp;File_Type)&nbsp;<B>return</B>&nbsp;Positive_Count;<BR>
&nbsp;&nbsp;&nbsp;&nbsp;<B>function</B>&nbsp;<A NAME="I7200"></A>Size&nbsp;(File&nbsp;:&nbsp;<B>in</B>&nbsp;File_Type)&nbsp;<B>return</B>&nbsp;Count;</div>
<div class="paranum"><a name="p24">24</a></div>
<div class="Examples">&nbsp;&nbsp;&nbsp;&nbsp;<B>procedure</B>&nbsp;<A NAME="I7201"></A>Set_Mode(File&nbsp;:&nbsp;<B>in</B>&nbsp;<B>out</B>&nbsp;File_Type;&nbsp;Mode&nbsp;:&nbsp;<B>in</B>&nbsp;File_Mode);</div>
<div class="paranum"><a name="p25">25/1</a></div>
<div class="Examples">{<I><A HREF="defect1.html#8652/0051">8652/0051</A></I>} 
{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AIs/AI-00057.TXT">AI95-00057-01</A></I>} 
&nbsp;&nbsp;&nbsp;&nbsp;<B>procedure</B>&nbsp;<A NAME="I7202"></A>Flush(File&nbsp;:&nbsp;<B>in</B>&nbsp;File_Type);</div>
<div class="paranum"><a name="p26">26</a></div>
<div class="Examples">&nbsp;&nbsp;&nbsp;&nbsp;--&nbsp;<SPAN Class="roman"><I>exceptions</I></SPAN><BR>
&nbsp;&nbsp;&nbsp;&nbsp;<A NAME="I7203"></A>Status_Error&nbsp;:&nbsp;<B>exception</B>&nbsp;<B>renames</B>&nbsp;IO_Exceptions.Status_Error;<BR>
&nbsp;&nbsp;&nbsp;&nbsp;<A NAME="I7204"></A>Mode_Error&nbsp;&nbsp;&nbsp;:&nbsp;<B>exception</B>&nbsp;<B>renames</B>&nbsp;IO_Exceptions.Mode_Error;<BR>
&nbsp;&nbsp;&nbsp;&nbsp;<A NAME="I7205"></A>Name_Error&nbsp;&nbsp;&nbsp;:&nbsp;<B>exception</B>&nbsp;<B>renames</B>&nbsp;IO_Exceptions.Name_Error;<BR>
&nbsp;&nbsp;&nbsp;&nbsp;<A NAME="I7206"></A>Use_Error&nbsp;&nbsp;&nbsp;&nbsp;:&nbsp;<B>exception</B>&nbsp;<B>renames</B>&nbsp;IO_Exceptions.Use_Error;<BR>
&nbsp;&nbsp;&nbsp;&nbsp;<A NAME="I7207"></A>Device_Error&nbsp;:&nbsp;<B>exception</B>&nbsp;<B>renames</B>&nbsp;IO_Exceptions.Device_Error;<BR>
&nbsp;&nbsp;&nbsp;&nbsp;<A NAME="I7208"></A>End_Error&nbsp;&nbsp;&nbsp;&nbsp;:&nbsp;<B>exception</B>&nbsp;<B>renames</B>&nbsp;IO_Exceptions.End_Error;<BR>
&nbsp;&nbsp;&nbsp;&nbsp;<A NAME="I7209"></A>Data_Error&nbsp;&nbsp;&nbsp;:&nbsp;<B>exception</B>&nbsp;<B>renames</B>&nbsp;IO_Exceptions.Data_Error;</div>
<div class="paranum"><a name="p27">27</a></div>
<div class="Examples"><B>private</B><BR>
&nbsp;&nbsp;&nbsp;...&nbsp;--&nbsp;<SPAN Class="roman"><I>not&nbsp;specified&nbsp;by&nbsp;the&nbsp;language</I></SPAN><BR>
<B>end</B>&nbsp;Ada.Streams.Stream_IO;</div>
<div class="paranum"><a name="p27.1">27.1/2</a></div>
<div class="Normal">&nbsp;&nbsp;&nbsp;{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AIs/AI-00360.TXT">AI95-00360-01</A></I>} 
The type File_Type needs finalization<A NAME="I7210"></A> (see <A HREF="AA-7-6.html">7.6</A>).</div>
<div class="paranum"><a name="p28">28/4</a></div>
<div class="Normal">&nbsp;{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AIs/AI-00283.TXT">AI95-00283-01</A></I>} 
{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AI12s/AI12-0130-1.TXT">AI12-0130-1</A></I>} 
The subprograms given in subclause <A HREF="AA-A-8-2.html">A.8.2</A> 
for the control of external files (Create, Open, Close, Delete, Reset, 
Mode, Name, Form,<span class="delete4">&nbsp;and</span> Is_Open<span class="insert4">, 
and Flush</span>) are available for stream files.</div>
<div class="paranum"><a name="p28.1">28.1/2</a></div>
<div class="Normal" style="margin-bottom: 0.4em">&nbsp;&nbsp;&nbsp;{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AIs/AI-00283.TXT">AI95-00283-01</A></I>} 
The End_Of_File function:&nbsp;</div>
<div class="paranum"><a name="p28.2">28.2/2</a></div>
<div class="Bulleted">Propagates Mode_Error if the mode of the file is 
not In_File;</div>
<div class="paranum"><a name="p28.3">28.3/3</a></div>
<div class="Bulleted">{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AI05s/AI05-0264-1.TXT">AI05-0264-1</A></I>} 
If positioning is supported for the given external file, the function 
returns True if the current index exceeds the size of the external file; 
otherwise, it returns False;</div>
<div class="paranum"><a name="p28.4">28.4/3</a></div>
<div class="Bulleted">{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AI05s/AI05-0264-1.TXT">AI05-0264-1</A></I>} 
If positioning is not supported for the given external file, the function 
returns True if no more elements can be read from the given file; otherwise, 
it returns False.&nbsp;</div>
<div class="paranum"><a name="p28.5">28.5/2</a></div>
<div class="Normal">&nbsp;&nbsp;&nbsp;{<I><A HREF="defect1.html#8652/0055">8652/0055</A></I>} 
{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AIs/AI-00026.TXT">AI95-00026-01</A></I>} 
{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AIs/AI-00085.TXT">AI95-00085-01</A></I>} 
The Set_Mode procedure sets the mode of the file. If the new mode is 
Append_File, the file is positioned to its end; otherwise, the position 
in the file is unchanged.</div>
<div class="paranum"><a name="p28.6">28.6/4</a></div>
<div class="Normal">&nbsp;&nbsp;&nbsp;<SPAN STYLE="font-size: 80%"><I>This paragraph 
was deleted.</I></SPAN>{<I><A HREF="defect1.html#8652/0055">8652/0055</A></I>} 
{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AIs/AI-00026.TXT">AI95-00026-01</A></I>} 
{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AI12s/AI12-0130-1.TXT">AI12-0130-1</A></I>} 
<span class="delete4">The Flush procedure synchronizes the external file 
with the internal file (by flushing any internal buffers) without closing 
the file or changing the position. Mode_Error is propagated if the mode 
of the file is In_File.</span></div>
<div class="paranum"><a name="p29">29/1</a></div>
<div class="Normal">&nbsp;{<I><A HREF="defect1.html#8652/0056">8652/0056</A></I>} 
{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AIs/AI-00001.TXT">AI95-00001-01</A></I>} 
The Stream function returns a Stream_Access result from a File_Type object, 
thus allowing the stream-oriented attributes Read, Write, Input, and 
Output to be used on the same file for multiple types. Stream propagates 
Status_Error if File is not open.</div>
<div class="paranum"><a name="p30">30/2</a></div>
<div class="Normal">&nbsp;{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AIs/AI-00256.TXT">AI95-00256-01</A></I>} 
The procedures Read and Write are equivalent to the corresponding operations 
in the package Streams. Read propagates Mode_Error if the mode of File 
is not In_File. Write propagates Mode_Error if the mode of File is not 
Out_File or Append_File. The Read procedure with a Positive_Count parameter 
starts reading at the specified index. The Write procedure with a Positive_Count 
parameter starts writing at the specified index. For a file that supports 
positioning, Read without a Positive_Count parameter starts reading at 
the current index, and Write without a Positive_Count parameter starts 
writing at the current index.</div>
<div class="paranum"><a name="p30.1">30.1/1</a></div>
<div class="Normal">&nbsp;&nbsp;&nbsp;{<I><A HREF="defect1.html#8652/0055">8652/0055</A></I>} 
{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AIs/AI-00026.TXT">AI95-00026-01</A></I>} 
The Size function returns the current size of the file.</div>
<div class="paranum"><a name="p31">31/1</a></div>
<div class="Normal">&nbsp;{<I><A HREF="defect1.html#8652/0055">8652/0055</A></I>} 
{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AIs/AI-00026.TXT">AI95-00026-01</A></I>} 
The Index function returns the current index.&nbsp;</div>
<div class="paranum"><a name="p31.a">31.a/1</a></div>
<div class="Annotations"><SPAN STYLE="font-size: 80%"><I>This paragraph 
was deleted.</I></SPAN></div>
<div class="paranum"><a name="p32">32</a></div>
<div class="Normal">The Set_Index procedure sets the current index to 
the specified value.</div>
<div class="paranum"><a name="p32.1">32.1/1</a></div>
<div class="Normal" style="margin-bottom: 0.4em">&nbsp;&nbsp;&nbsp;{<I><A HREF="defect1.html#8652/0055">8652/0055</A></I>} 
{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AIs/AI-00026.TXT">AI95-00026-01</A></I>} 
If positioning is supported for the external file, the current index 
is maintained as follows:</div>
<div class="paranum"><a name="p32.2">32.2/1</a></div>
<div class="Bulleted">{<I><A HREF="defect1.html#8652/0055">8652/0055</A></I>} 
{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AIs/AI-00026.TXT">AI95-00026-01</A></I>} 
For Open and Create, if the Mode parameter is Append_File, the current 
index is set to the current size of the file plus one; otherwise, the 
current index is set to one.</div>
<div class="paranum"><a name="p32.3">32.3/1</a></div>
<div class="Bulleted">{<I><A HREF="defect1.html#8652/0055">8652/0055</A></I>} 
{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AIs/AI-00026.TXT">AI95-00026-01</A></I>} 
For Reset, if the Mode parameter is Append_File, or no Mode parameter 
is given and the current mode is Append_File, the current index is set 
to the current size of the file plus one; otherwise, the current index 
is set to one.</div>
<div class="paranum"><a name="p32.4">32.4/1</a></div>
<div class="Bulleted">{<I><A HREF="defect1.html#8652/0055">8652/0055</A></I>} 
{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AIs/AI-00026.TXT">AI95-00026-01</A></I>} 
For Set_Mode, if the new mode is Append_File, the current index is set 
to current size plus one; otherwise, the current index is unchanged.</div>
<div class="paranum"><a name="p32.5">32.5/1</a></div>
<div class="Bulleted">{<I><A HREF="defect1.html#8652/0055">8652/0055</A></I>} 
{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AIs/AI-00026.TXT">AI95-00026-01</A></I>} 
For Read and Write without a Positive_Count parameter, the current index 
is incremented by the number of stream elements read or written.</div>
<div class="paranum"><a name="p32.6">32.6/1</a></div>
<div class="Bulleted">{<I><A HREF="defect1.html#8652/0055">8652/0055</A></I>} 
{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AIs/AI-00026.TXT">AI95-00026-01</A></I>} 
For Read and Write with a Positive_Count parameter, the value of the 
current index is set to the value of the Positive_Count parameter plus 
the number of stream elements read or written.&nbsp;</div>
<div class="paranum"><a name="p33">33</a></div>
<div class="Normal">If positioning is not supported for the given file, 
then a call of Index or Set_Index propagates Use_Error. Similarly, a 
call of Read or Write with a Positive_Count parameter propagates Use_Error.</div>
<div class="paranum"><a name="p33.a">33.a/2</a></div>
<div class="Annotations"><B>Implementation Note:&nbsp;</B>{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AIs/AI-00085.TXT">AI95-00085-01</A></I>} 
It is permissible for an implementation to implement mode Append_File 
using the Unix append mode (the O_APPEND bit). Such an implementation 
does not support positioning when the mode is Append_File, and therefore 
the operations listed above must raise Use_Error. This is acceptable 
as there is no requirement that any particular file support positioning; 
therefore it is acceptable that a file support positioning when opened 
with mode Out_File, and the same file not support positioning when opened 
with mode Append_File. But it is not acceptable for a file to support 
positioning (by allowing the above operations), but to do something other 
than the defined semantics (that is, always write at the end, even when 
explicitly commanded to write somewhere else).&nbsp;</div>
<div class="Normal"><SPAN STYLE="font-size: 80%"><I>Paragraphs 34 through 
36 were deleted.</I></SPAN>&nbsp;</div>
<div class="paranum"><a name="p34">34/1</a></div>
<div class="Normal">&nbsp;{<I><A HREF="defect1.html#8652/0055">8652/0055</A></I>} 
{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AIs/AI-00026.TXT">AI95-00026-01</A></I>} 
</div>
<div class="paranum"><a name="p35">35/1</a></div>
<div class="Normal">&nbsp;{<I><A HREF="defect1.html#8652/0055">8652/0055</A></I>} 
{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AIs/AI-00026.TXT">AI95-00026-01</A></I>} 
</div>
<div class="paranum"><a name="p36">36/1</a></div>
<div class="Normal">&nbsp;{<I><A HREF="defect1.html#8652/0055">8652/0055</A></I>} 
{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AIs/AI-00026.TXT">AI95-00026-01</A></I>} 
</div>

<H4 Class="centered">Erroneous Execution</H4>
<div class="paranum"><a name="p36.1">36.1/1</a></div>
<div class="Normal">&nbsp;&nbsp;&nbsp;{<I><A HREF="defect1.html#8652/0056">8652/0056</A></I>} 
{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AIs/AI-00001.TXT">AI95-00001-01</A></I>} 
<A NAME="I7211"></A>If the File_Type object passed to the Stream function 
is later closed or finalized, and the stream-oriented attributes are 
subsequently called (explicitly or implicitly) on the Stream_Access value 
returned by Stream, execution is erroneous. This rule applies even if 
the File_Type object was opened again after it had been closed.&nbsp;</div>
<div class="paranum"><a name="p36.a.1">36.a.1/1</a></div>
<div class="Annotations"><B>Reason:&nbsp;</B>These rules are analogous to 
the rule for the result of the Current_Input, Current_Output, and Current_Error 
functions. These rules make it possible to represent a value of (some 
descendant of) Root_Stream_Type which represents a file as an access 
value, with a null value corresponding to a closed file.&nbsp;</div>

<H4 Class="centered">Inconsistencies With Ada 95</H4>
<div class="paranum"><a name="p36.a">36.a/3</a></div>
<div class="Annotations">{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AIs/AI-00283.TXT">AI95-00283-01</A></I>} 
{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AI05s/AI05-0005-1.TXT">AI05-0005-1</A></I>} 
<A NAME="I7212"></A><B>Amendment Correction:</B> The description of the 
subprograms for managing files was corrected so that they do not require 
truncation of the external file &mdash; a stream file is not a sequential 
file. An Ada 95 program that expects truncation of the stream file might 
not work under Ada 2005. Note that the Ada 95 standard was ambiguous 
on this point (the normative wording seemed to require truncation, but 
didn't explain where; the AARM notes seemed to expect behavior like Direct_IO), 
and implementations varied widely. Therefore, as a practical matter, 
code that depends on stream truncation might not work even in Ada 95; 
deleting the file before opening it provides truncation that works in 
both Ada 95 and Ada 2005.&nbsp;</div>

<H4 Class="centered">Incompatibilities With Ada 95</H4>
<div class="paranum"><a name="p36.b">36.b/2</a></div>
<div class="Annotations">{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AIs/AI-00360.TXT">AI95-00360-01</A></I>} 
<A NAME="I7213"></A><B>Amendment Correction:</B> Stream_IO.File_Type 
is defined to need finalization. If the restriction No_Nested_Finalization 
(see <A HREF="AA-D-7.html">D.7</A>) applies to the partition, and File_Type 
does not have a controlled part, it will not be allowed in local objects 
in Ada 2005 whereas it would be allowed in original Ada 95. Such code 
is not portable, as another Ada compiler may have a controlled part in 
File_Type, and thus would be illegal.&nbsp;</div>

<H4 Class="centered">Wording Changes from Ada 95</H4>
<div class="paranum"><a name="p36.c">36.c/2</a></div>
<div class="Annotations">{<I><A HREF="defect1.html#8652/0051">8652/0051</A></I>} 
{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AIs/AI-00057.TXT">AI95-00057-01</A></I>} 
<B>Corrigendum:</B> Corrected the parameter mode of Flush; otherwise 
it could not be used on Standard_Output.</div>
<div class="paranum"><a name="p36.d">36.d/2</a></div>
<div class="Annotations">{<I><A HREF="defect1.html#8652/0055">8652/0055</A></I>} 
{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AIs/AI-00026.TXT">AI95-00026-01</A></I>} 
{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AIs/AI-00256.TXT">AI95-00256-01</A></I>} 
<B>Corrigendum:</B> Added wording to describe the effects of the various 
operations on the current index. The Amendment adds an explanation of 
the use of current index for Read and Write.</div>
<div class="paranum"><a name="p36.e">36.e/2</a></div>
<div class="Annotations">{<I><A HREF="defect1.html#8652/0056">8652/0056</A></I>} 
{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AIs/AI-00001.TXT">AI95-00001-01</A></I>} 
<B>Corrigendum:</B> Clarified that Stream can raise Status_Error, and 
clarified that using a Stream_Access whose file has been closed is erroneous.</div>
<div class="paranum"><a name="p36.f">36.f/2</a></div>
<div class="Annotations">{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AIs/AI-00085.TXT">AI95-00085-01</A></I>} 
Clarified that Set_Mode can be called with the current mode.&nbsp;</div>

<H4 Class="centered">Extensions to Ada 2005</H4>
<div class="paranum"><a name="p36.g">36.g/3</a></div>
<div class="Annotations">{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AI05s/AI05-0283-1.TXT">AI05-0283-1</A></I>} 
<A NAME="I7214"></A>Package Ada.Streams.Stream_IO is now preelaborated, 
allowing it to be used in more contexts (including in distributed systems). 
Note that it is <I>not</I> a remote types package; File_Type objects 
cannot be passed between partitions.&nbsp;</div>

<H4 Class="centered">Extensions to Ada 2012</H4>
<div class="paranum"><a name="p36.h">36.h/4</a></div>
<div class="Annotations">{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AI12s/AI12-0102-1.TXT">AI12-0102-1</A></I>} 
<span class="insert4"><A NAME="I7215"></A><B>Corrigendum:</B> Type Ada.Streams.Stream_IO.File_Type 
now has preelaborable initialization. This allows declaring library-level 
file objects in preelaborable packages (an oversight from the change 
above).</span>&nbsp;</div>

<H4 Class="centered">Wording Changes from Ada 2012</H4>
<div class="paranum"><a name="p36.i">36.i/4</a></div>
<div class="Annotations">{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AI12s/AI12-0130-1.TXT">AI12-0130-1</A></I>} 
<span class="insert4"><B>Corrigendum:</B> The definition of the Flush 
procedure was moved to <A HREF="AA-A-8-2.html">A.8.2</A>, so that it 
could be shared by all of the I/O packages.</span>&nbsp;</div>

<HR>
<div style="margin-top: 0.0em; margin-bottom: 0.6em"><A HREF="AA-TOC.html"><IMG SRC="cont.gif" ALT="Contents" BORDER=0></A>&nbsp;
&nbsp;<A HREF="AA-0-5.html"><IMG SRC="index.gif" ALT="Index" BORDER=0></A>&nbsp;
&nbsp;<A HREF="AA-STDS.html"><IMG SRC="lib.gif" ALT="References" BORDER=0></A>&nbsp;
&nbsp;<A HREF="AA-SRCH.html"><IMG SRC="find.gif" ALT="Search" BORDER=0></A>&nbsp;
&nbsp;<A HREF="AA-A-12.html"><IMG SRC="prev.gif" ALT="Previous" BORDER=0></A>&nbsp;
&nbsp;<A HREF="AA-A-12-2.html"><IMG SRC="next.gif" ALT="Next" BORDER=0></A>&nbsp;
</div>
<DIV Style="margin-top:0.0em"><IMG SRC="AE_logo.gif" height=100 width=113 align=right ALT="Ada-Europe">
<SPAN Style="vertical-align: middle; font-size:120%">Ada 2005 and 2012 Editions sponsored in part by <SPAN Style="font-size: 125%"><A HREF="http://www.ada-europe.org/"><B>Ada-Europe</B></A></SPAN></SPAN></DIV>
</BODY>
</HTML>
