<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
"http://www.w3.org/TR/html4/loose.dtd">
<HTML>
<HEAD>
    <TITLE>Private Types and Private Extensions</TITLE>
    <META http-equiv="Content-Type" content="text/html; charset=iso-8859-1">
    <META NAME="Author" CONTENT="JTC1/SC22/WG9/ARG, by Randall Brukardt, ARG Editor">
    <META NAME="GENERATOR" CONTENT="Arm_Form.Exe, Ada Reference Manual generator">
    <STYLE type="text/css">
    H4.centered {text-align: center}
    SPAN.swiss {font-family: Arial, Helvetica, sans-serif; font-size: 92%}
    SPAN.roman {font-family: "Times New Roman", Times, serif}
    DIV.paranum {float: left; font-family: Arial, Helvetica, sans-serif; font-size: 64%; width: 2.8em; margin-left: -0.4em; margin-right: -3.0em; margin-top: 0.2em}
    TT {font-family: "Courier New", monospace}
    DT {display: compact}
    DIV.Normal {font-family: "Times New Roman", Times, serif; line-height: 122%; margin-left: 1.2em; margin-bottom: 0.6em}
    DIV.Wide {font-family: "Times New Roman", Times, serif; line-height: 122%; margin-left: 1.2em; margin-top: 0.6em; margin-bottom: 0.6em}
    DIV.Notes {font-family: "Times New Roman", Times, serif; font-size: 80%; line-height: 122%; margin-left: 3.7em; margin-bottom: 0.6em}
    DIV.NotesHeader {font-family: "Times New Roman", Times, serif; font-size: 80%; line-height: 122%; margin-left: 3.7em}
    DIV.SyntaxIndented {font-family: "Times New Roman", Times, serif; line-height: 122%; margin-left: 3.2em; margin-bottom: 0.4em}
    DIV.Examples {font-family: "Courier New", monospace; font-size: 90%; line-height: 122%; margin-left: 3.4em; margin-bottom: 0.6em}
    UL.Bulleted {font-family: "Times New Roman", Times, serif; line-height: 122%; margin-left: 3.2em; margin-right: 2.0em; margin-top: 0em; margin-bottom: 0.5em}
    </STYLE>
</HEAD>
<BODY TEXT="#000000" BGCOLOR="#FFFFF0" LINK="#000080" VLINK="#330033" ALINK="#0000FF">
<DIV><SPAN Style="font-size:200%; color: rgb(0,0,153)"><B>Ada Reference Manual</B></SPAN> &mdash; <A HREF="RM-TTL.html"><B>Legal Information</B></A></DIV>
<DIV Style="margin-top: 0.6em; margin-bottom: 0.0em"><A HREF="RM-TOC.html"><IMG SRC="cont.gif" ALT="Contents" BORDER=0></A>&nbsp;
&nbsp;<A HREF="RM-0-5.html"><IMG SRC="index.gif" ALT="Index" BORDER=0></A>&nbsp;
&nbsp;<A HREF="RM-STDS.html"><IMG SRC="lib.gif" ALT="References" BORDER=0></A>&nbsp;
&nbsp;<A HREF="RM-SRCH.html"><IMG SRC="find.gif" ALT="Search" BORDER=0></A>&nbsp;
&nbsp;<A HREF="RM-7-2.html"><IMG SRC="prev.gif" ALT="Previous" BORDER=0></A>&nbsp;
&nbsp;<A HREF="RM-7-3-1.html"><IMG SRC="next.gif" ALT="Next" BORDER=0></A>&nbsp;
</DIV>
<HR>
<H1>7.3 Private Types and Private Extensions</H1>
<DIV Class="paranum">1</DIV>
<DIV Class="Normal">The declaration (in the visible part of a package) 
of a type as a private type or private extension serves to separate the 
characteristics that can be used directly by outside program units (that 
is, the logical properties) from other characteristics whose direct use 
is confined to the package (the details of the definition of the type 
itself). See <A HREF="RM-3-9-1.html">3.9.1</A> for an overview of type 
extensions. <A NAME="I3251"></A><A NAME="I3252"></A><A NAME="I3253"></A><A NAME="I3254"></A><A NAME="I3255"></A></DIV>

<H4 Class="centered">Syntax</H4>
<DIV Class="paranum">2</DIV>
<DIV Class="SyntaxIndented"><SPAN Class="swiss">private_type_declaration</SPAN><A NAME="I3256"></A><A NAME="S0176"></A><SPAN Class="swiss">&nbsp;::=&nbsp;</SPAN><BR>
&nbsp;&nbsp;&nbsp;<B>type</B>&nbsp;<A NAME="I3257"></A><SPAN Class="swiss"><A HREF="RM-3-1.html#S0022">defining_identifier</A></SPAN>&nbsp;[<A NAME="I3258"></A><SPAN Class="swiss"><A HREF="RM-3-7.html#S0059">discriminant_part</A></SPAN>]&nbsp;<B>is</B>&nbsp;[[<B>abstract</B>]&nbsp;<B>tagged</B>]&nbsp;[<B>limited</B>]&nbsp;<B>private</B>;</DIV>
<DIV Class="paranum">3/2</DIV>
<DIV Class="SyntaxIndented"><SPAN Class="swiss">private_extension_declaration</SPAN><A NAME="I3259"></A><A NAME="S0177"></A><SPAN Class="swiss">&nbsp;::=&nbsp;</SPAN><BR>
&nbsp;&nbsp;&nbsp;<B>type</B>&nbsp;<A NAME="I3260"></A><SPAN Class="swiss"><A HREF="RM-3-1.html#S0022">defining_identifier</A></SPAN>&nbsp;[<A NAME="I3261"></A><SPAN Class="swiss"><A HREF="RM-3-7.html#S0059">discriminant_part</A></SPAN>]&nbsp;<B>is</B><BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;[<B>abstract</B>]&nbsp;[<B>limited</B>&nbsp;|&nbsp;<B>synchronized</B>]&nbsp;<B>new</B>&nbsp;<I>ancestor_</I><A NAME="I3262"></A><SPAN Class="swiss"><A HREF="RM-3-2-2.html#S0027">subtype_indication</A></SPAN><BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;[<B>and</B>&nbsp;<A NAME="I3263"></A><SPAN Class="swiss"><A HREF="RM-3-9-4.html#S0078">interface_list</A></SPAN>]&nbsp;<B>with&nbsp;private</B>;</DIV>

<H4 Class="centered">Legality Rules</H4>
<DIV Class="paranum">4</DIV>
<DIV Class="Normal"><A NAME="I3264"></A><A NAME="I3265"></A>A <SPAN Class="swiss"><A HREF="RM-7-3.html#S0176">private_type_declaration</A></SPAN> 
or <SPAN Class="swiss"><A HREF="RM-7-3.html#S0177">private_extension_declaration</A></SPAN> 
declares a <I>partial view</I> of the type; such a declaration is allowed 
only as a <SPAN Class="swiss"><A HREF="RM-3-11.html#S0087">declarative_item</A></SPAN> 
of the visible part of a package, and it requires a completion, which 
shall be a <SPAN Class="swiss"><A HREF="RM-3-2-1.html#S0024">full_type_declaration</A></SPAN> 
that occurs as a <SPAN Class="swiss"><A HREF="RM-3-11.html#S0087">declarative_item</A></SPAN> 
of the private part of the package. The view of the type declared by 
the <SPAN Class="swiss"><A HREF="RM-3-2-1.html#S0024">full_type_declaration</A></SPAN> 
is called the <I>full view</I>. A generic formal private type or a generic 
formal private extension is also a partial view.&nbsp;</DIV>
<DIV Class="paranum">5</DIV>
<DIV Class="Normal">A type shall be completely defined before it is frozen 
(see <A HREF="RM-3-11-1.html">3.11.1</A> and <A HREF="RM-13-14.html">13.14</A>). 
Thus, neither the declaration of a variable of a partial view of a type, 
nor the creation by an <SPAN Class="swiss"><A HREF="RM-4-8.html#S0129">allocator</A></SPAN> 
of an object of the partial view are allowed before the full declaration 
of the type. Similarly, before the full declaration, the name of the 
partial view cannot be used in a <SPAN Class="swiss"><A HREF="RM-12-3.html#S0257">generic_instantiation</A></SPAN> 
or in a representation item.&nbsp;</DIV>
<DIV Class="paranum">6/2</DIV>
<DIV Class="Normal">A private type is limited if its declaration includes 
the reserved word <B>limited</B>; a private extension is limited if its 
ancestor type is a limited type that is not an interface type, or if 
the reserved word <B>limited</B> or <B>synchronized</B> appears in its 
definition. If the partial view is nonlimited, then the full view shall 
be nonlimited. If a tagged partial view is limited, then the full view 
shall be limited. On the other hand, if an untagged partial view is limited, 
the full view may be limited or nonlimited.</DIV>
<DIV Class="paranum">7</DIV>
<DIV Class="Normal">If the partial view is tagged, then the full view 
shall be tagged. On the other hand, if the partial view is untagged, 
then the full view may be tagged or untagged. In the case where the partial 
view is untagged and the full view is tagged, no derivatives of the partial 
view are allowed within the immediate scope of the partial view; derivatives 
of the full view are allowed.&nbsp;</DIV>
<DIV Class="paranum">7.1/2</DIV>
<DIV Class="Normal" Style="margin-bottom: 0.4em">&nbsp;&nbsp;If a full type has 
a partial view that is tagged, then:&nbsp;</DIV>
<DIV Class="paranum">7.2/2</DIV>
<UL Class="Bulleted"><LI TYPE=DISC>the partial view shall be a synchronized 
tagged type (see <A HREF="RM-3-9-4.html">3.9.4</A>) if and only if the 
full type is a synchronized tagged type;</LI></UL>
<DIV Class="paranum">7.3/2</DIV>
<UL Class="Bulleted"><LI TYPE=DISC>the partial view shall be a descendant 
of an interface type (see 3.9.4) if and only if the full type is a descendant 
of the interface type.</LI></UL>
<DIV Class="paranum">8</DIV>
<DIV Class="Normal"><A NAME="I3266"></A>The <I>ancestor subtype</I> of 
a <SPAN Class="swiss"><A HREF="RM-7-3.html#S0177">private_extension_declaration</A></SPAN> 
is the subtype defined by the <I>ancestor_</I><SPAN Class="swiss"><A HREF="RM-3-2-2.html#S0027">subtype_indication</A></SPAN>; 
the ancestor type shall be a specific tagged type. The full view of a 
private extension shall be derived (directly or indirectly) from the 
ancestor type. In addition to the places where Legality Rules normally 
apply (see <A HREF="RM-12-3.html">12.3</A>), the requirement that the 
ancestor be specific applies also in the private part of an instance 
of a generic unit.&nbsp;</DIV>
<DIV Class="paranum">8.1/2</DIV>
<DIV Class="Normal">&nbsp;&nbsp;If the reserved word <B>limited</B> appears in 
a <SPAN Class="swiss"><A HREF="RM-7-3.html#S0177">private_extension_declaration</A></SPAN>, 
the ancestor type shall be a limited type. If the reserved word <B>synchronized</B> 
appears in a <SPAN Class="swiss"><A HREF="RM-7-3.html#S0177">private_extension_declaration</A></SPAN>, 
the ancestor type shall be a limited interface.</DIV>
<DIV Class="paranum">9</DIV>
<DIV Class="Normal">If the declaration of a partial view includes a <SPAN Class="swiss"><A HREF="RM-3-7.html#S0061">known_discriminant_part</A></SPAN>, 
then the <SPAN Class="swiss"><A HREF="RM-3-2-1.html#S0024">full_type_declaration</A></SPAN> 
shall have a fully conforming (explicit) <SPAN Class="swiss"><A HREF="RM-3-7.html#S0061">known_discriminant_part</A></SPAN> 
(see <A HREF="RM-6-3-1.html">6.3.1</A>, &ldquo;<A HREF="RM-6-3-1.html">Conformance 
Rules</A>&rdquo;). <A NAME="I3267"></A>The ancestor subtype may be unconstrained; 
the parent subtype of the full view is required to be constrained (see 
<A HREF="RM-3-7.html">3.7</A>).&nbsp;</DIV>
<DIV Class="paranum">10</DIV>
<DIV Class="Normal">If a private extension inherits known discriminants 
from the ancestor subtype, then the full view shall also inherit its 
discriminants from the ancestor subtype, and the parent subtype of the 
full view shall be constrained if and only if the ancestor subtype is 
constrained.&nbsp;</DIV>
<DIV Class="paranum">10.1/2</DIV>
<DIV Class="Normal">&nbsp;&nbsp;&nbsp;If the <SPAN Class="swiss"><A HREF="RM-3-2-1.html#S0024">full_type_declaration</A></SPAN> 
for a private extension is defined by a <SPAN Class="swiss"><A HREF="RM-3-4.html#S0035">derived_type_definition</A></SPAN>, 
then the reserved word <B>limited</B> shall appear in the <SPAN Class="swiss"><A HREF="RM-3-2-1.html#S0024">full_type_declaration</A></SPAN> 
if and only if it also appears in the <SPAN Class="swiss"><A HREF="RM-7-3.html#S0177">private_extension_declaration</A></SPAN>. 
</DIV>
<DIV Class="paranum">11</DIV>
<DIV Class="Normal">If a partial view has unknown discriminants, then 
the <SPAN Class="swiss"><A HREF="RM-3-2-1.html#S0024">full_type_declaration</A></SPAN> 
may define a definite or an indefinite subtype, with or without discriminants.</DIV>
<DIV Class="paranum">12</DIV>
<DIV Class="Normal">If a partial view has neither known nor unknown discriminants, 
then the <SPAN Class="swiss"><A HREF="RM-3-2-1.html#S0024">full_type_declaration</A></SPAN> 
shall define a definite subtype.</DIV>
<DIV Class="paranum">13</DIV>
<DIV Class="Normal">If the ancestor subtype of a private extension has 
constrained discriminants, then the parent subtype of the full view shall 
impose a statically matching constraint on those discriminants. <A NAME="I3268"></A></DIV>

<H4 Class="centered">Static Semantics</H4>
<DIV Class="paranum">14</DIV>
<DIV Class="Normal"><A NAME="I3269"></A>A <SPAN Class="swiss"><A HREF="RM-7-3.html#S0176">private_type_declaration</A></SPAN> 
declares a private type and its first subtype. <A NAME="I3270"></A>Similarly, 
a <SPAN Class="swiss"><A HREF="RM-7-3.html#S0177">private_extension_declaration</A></SPAN> 
declares a private extension and its first subtype.&nbsp;</DIV>
<DIV Class="paranum">15</DIV>
<DIV Class="Normal">A declaration of a partial view and the corresponding 
<SPAN Class="swiss"><A HREF="RM-3-2-1.html#S0024">full_type_declaration</A></SPAN> 
define two views of a single type. The declaration of a partial view 
together with the visible part define the operations that are available 
to outside program units; the declaration of the full view together with 
the private part define other operations whose direct use is possible 
only within the declarative region of the package itself. <A NAME="I3271"></A>Moreover, 
within the scope of the declaration of the full view, the <I>characteristics</I> 
of the type are determined by the full view; in particular, within its 
scope, the full view determines the classes that include the type, which 
components, entries, and protected subprograms are visible, what attributes 
and other predefined operations are allowed, and whether the first subtype 
is static. See <A HREF="RM-7-3-1.html">7.3.1</A>.</DIV>
<DIV Class="paranum">16/2</DIV>
<DIV Class="Normal">&nbsp;A private extension inherits components (including 
discriminants unless there is a new <SPAN Class="swiss"><A HREF="RM-3-7.html#S0059">discriminant_part</A></SPAN> 
specified) and user-defined primitive subprograms from its ancestor type 
and its progenitor types (if any), in the same way that a record extension 
inherits components and user-defined primitive subprograms from its parent 
type and its progenitor types (see <A HREF="RM-3-4.html">3.4</A>).&nbsp;</DIV>

<H4 Class="centered">Dynamic Semantics</H4>
<DIV Class="paranum">17</DIV>
<DIV Class="Normal"><A NAME="I3272"></A>The elaboration of a <SPAN Class="swiss"><A HREF="RM-7-3.html#S0176">private_type_declaration</A></SPAN> 
creates a partial view of a type. <A NAME="I3273"></A>The elaboration 
of a <SPAN Class="swiss"><A HREF="RM-7-3.html#S0177">private_extension_declaration</A></SPAN> 
elaborates the <I>ancestor_</I><SPAN Class="swiss"><A HREF="RM-3-2-2.html#S0027">subtype_indication</A></SPAN>, 
and creates a partial view of a type.&nbsp;</DIV>
<DIV Class="NotesHeader">NOTES</DIV>
<DIV Class="paranum">18</DIV>
<DIV Class="Notes">5&nbsp;&nbsp;The partial view of a type as declared 
by a <SPAN Class="swiss"><A HREF="RM-7-3.html#S0176">private_type_declaration</A></SPAN> 
is defined to be a composite view (in <A HREF="RM-3-2.html">3.2</A>). 
The full view of the type might or might not be composite. A private 
extension is also composite, as is its full view.</DIV>
<DIV Class="paranum">19/2</DIV>
<DIV Class="Notes">6&nbsp;&nbsp;Declaring a private type with an <SPAN Class="swiss"><A HREF="RM-3-7.html#S0060">unknown_discriminant_part</A></SPAN> 
is a way of preventing clients from creating uninitialized objects of 
the type; they are then forced to initialize each object by calling some 
operation declared in the visible part of the package.&nbsp;</DIV>
<DIV Class="paranum">20/2</DIV>
<DIV Class="Notes">7&nbsp;&nbsp;The ancestor type specified in a <SPAN Class="swiss"><A HREF="RM-7-3.html#S0177">private_extension_declaration</A></SPAN> 
and the parent type specified in the corresponding declaration of a record 
extension given in the private part need not be the same. If the ancestor 
type is not an interface type, the parent type of the full view can be 
any descendant of the ancestor type. In this case, for a primitive subprogram 
that is inherited from the ancestor type and not overridden, the formal 
parameter names and default expressions (if any) come from the corresponding 
primitive subprogram of the specified ancestor type, while the body comes 
from the corresponding primitive subprogram of the parent type of the 
full view. See <A HREF="RM-3-9-2.html">3.9.2</A>.</DIV>
<DIV Class="paranum">20.1/2</DIV>
<DIV Class="Notes">8&nbsp;&nbsp;If the ancestor type specified in a <SPAN Class="swiss"><A HREF="RM-7-3.html#S0177">private_extension_declaration</A></SPAN> 
is an interface type, the parent type can be any type so long as the 
full view is a descendant of the ancestor type. The progenitor types 
specified in a <SPAN Class="swiss"><A HREF="RM-7-3.html#S0177">private_extension_declaration</A></SPAN> 
and the progenitor types specified in the corresponding declaration of 
a record extension given in the private part need not be the same &mdash; 
the only requirement is that the private extension and the record extension 
be descended from the same set of interfaces.&nbsp;</DIV>

<H4 Class="centered">Examples</H4>
<DIV Class="paranum">21</DIV>
<DIV Class="Normal" Style="margin-bottom: 0.4em"><I>Examples of private 
type declarations:</I>&nbsp;</DIV>
<DIV Class="paranum">22</DIV>
<DIV Class="Examples"><B>type</B>&nbsp;Key&nbsp;<B>is</B>&nbsp;<B>private</B>;<BR>
<B>type</B>&nbsp;File_Name&nbsp;<B>is</B>&nbsp;<B>limited</B>&nbsp;<B>private</B>;</DIV>
<DIV Class="paranum">23</DIV>
<DIV Class="Wide" Style="margin-bottom: 0.4em"><I>Example of a private 
extension declaration:</I>&nbsp;</DIV>
<DIV Class="paranum">24</DIV>
<DIV Class="Examples"><B>type</B>&nbsp;List&nbsp;<B>is</B>&nbsp;<B>new</B>&nbsp;Ada.Finalization.Controlled&nbsp;<B>with</B>&nbsp;<B>private</B>;</DIV>

<HR>
<DIV Style="margin-top: 0.0em; margin-bottom: 0.6em"><A HREF="RM-TOC.html"><IMG SRC="cont.gif" ALT="Contents" BORDER=0></A>&nbsp;
&nbsp;<A HREF="RM-0-5.html"><IMG SRC="index.gif" ALT="Index" BORDER=0></A>&nbsp;
&nbsp;<A HREF="RM-STDS.html"><IMG SRC="lib.gif" ALT="References" BORDER=0></A>&nbsp;
&nbsp;<A HREF="RM-SRCH.html"><IMG SRC="find.gif" ALT="Search" BORDER=0></A>&nbsp;
&nbsp;<A HREF="RM-7-2.html"><IMG SRC="prev.gif" ALT="Previous" BORDER=0></A>&nbsp;
&nbsp;<A HREF="RM-7-3-1.html"><IMG SRC="next.gif" ALT="Next" BORDER=0></A>&nbsp;
</DIV>
<DIV Style="margin-top:0.0em"><IMG SRC="AE_logo.gif" height=100 width=113 align=right ALT="Ada-Europe">
<SPAN Style="vertical-align: middle">Sponsored by <SPAN Style="font-size: 125%"><A HREF="http://www.ada-europe.org/"><B>Ada-Europe</B></A></SPAN></SPAN></DIV>
</BODY>
</HTML>
