<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
"http://www.w3.org/TR/html4/loose.dtd">
<HTML>
<HEAD>
    <TITLE>Extension Aggregates</TITLE>
    <META http-equiv="Content-Type" content="text/html; charset=iso-8859-1">
    <META NAME="Author" CONTENT="JTC1/SC22/WG9/ARG, by Randall Brukardt, ARG Editor">
    <META NAME="GENERATOR" CONTENT="Arm_Form.Exe, Ada Reference Manual generator">
    <STYLE type="text/css">
    H4.centered {text-align: center}
    SPAN.swiss {font-family: Arial, Helvetica, sans-serif; font-size: 92%}
    SPAN.roman {font-family: "Times New Roman", Times, serif}
    DIV.paranum {float: left; font-family: Arial, Helvetica, sans-serif; font-size: 64%; width: 2.8em; margin-left: -0.4em; margin-right: -3.0em; margin-top: 0.2em}
    TT {font-family: "Courier New", monospace}
    DT {display: compact}
    DIV.Normal {font-family: "Times New Roman", Times, serif; line-height: 122%; margin-left: 1.2em; margin-bottom: 0.6em}
    DIV.Notes {font-family: "Times New Roman", Times, serif; font-size: 80%; line-height: 122%; margin-left: 3.7em; margin-bottom: 0.6em}
    DIV.NotesHeader {font-family: "Times New Roman", Times, serif; font-size: 80%; line-height: 122%; margin-left: 3.7em}
    DIV.SyntaxIndented {font-family: "Times New Roman", Times, serif; line-height: 122%; margin-left: 3.2em; margin-bottom: 0.4em}
    DIV.Examples {font-family: "Courier New", monospace; font-size: 90%; line-height: 122%; margin-left: 3.4em; margin-bottom: 0.6em}
    </STYLE>
</HEAD>
<BODY TEXT="#000000" BGCOLOR="#FFFFF0" LINK="#000080" VLINK="#330033" ALINK="#0000FF">
<DIV><SPAN Style="font-size:200%; color: rgb(0,0,153)"><B>Ada Reference Manual</B></SPAN> &mdash; <A HREF="RM-TTL.html"><B>Legal Information</B></A></DIV>
<DIV Style="margin-top: 0.6em; margin-bottom: 0.0em"><A HREF="RM-TOC.html"><IMG SRC="cont.gif" ALT="Contents" BORDER=0></A>&nbsp;
&nbsp;<A HREF="RM-0-5.html"><IMG SRC="index.gif" ALT="Index" BORDER=0></A>&nbsp;
&nbsp;<A HREF="RM-STDS.html"><IMG SRC="lib.gif" ALT="References" BORDER=0></A>&nbsp;
&nbsp;<A HREF="RM-SRCH.html"><IMG SRC="find.gif" ALT="Search" BORDER=0></A>&nbsp;
&nbsp;<A HREF="RM-4-3-1.html"><IMG SRC="prev.gif" ALT="Previous" BORDER=0></A>&nbsp;
&nbsp;<A HREF="RM-4-3-3.html"><IMG SRC="next.gif" ALT="Next" BORDER=0></A>&nbsp;
</DIV>
<HR>
<H1>4.3.2 Extension Aggregates</H1>
<DIV Class="paranum">1</DIV>
<DIV Class="Normal">An <SPAN Class="swiss"><A HREF="RM-4-3-2.html#S0109">extension_aggregate</A></SPAN> 
specifies a value for a type that is a record extension by specifying 
a value or subtype for an ancestor of the type, followed by associations 
for any components not determined by the <SPAN Class="swiss"><A HREF="RM-4-3-2.html#S0110">ancestor_part</A></SPAN>. 
</DIV>

<H4 Class="centered">Syntax</H4>
<DIV Class="paranum">2</DIV>
<DIV Class="SyntaxIndented"><SPAN Class="swiss">extension_aggregate</SPAN><A NAME="I2402"></A><A NAME="S0109"></A><SPAN Class="swiss">&nbsp;::=&nbsp;</SPAN><BR>
&nbsp;&nbsp;&nbsp;&nbsp;(<A NAME="I2403"></A><SPAN Class="swiss"><A HREF="RM-4-3-2.html#S0110">ancestor_part</A></SPAN>&nbsp;<B>with</B>&nbsp;<A NAME="I2404"></A><SPAN Class="swiss"><A HREF="RM-4-3-1.html#S0106">record_component_association_list</A></SPAN>)</DIV>
<DIV Class="paranum">3</DIV>
<DIV Class="SyntaxIndented"><SPAN Class="swiss">ancestor_part</SPAN><A NAME="I2405"></A><A NAME="S0110"></A><SPAN Class="swiss">&nbsp;::=&nbsp;</SPAN><A NAME="I2406"></A><SPAN Class="swiss"><A HREF="RM-4-4.html#S0115">expression</A></SPAN>&nbsp;|&nbsp;<A NAME="I2407"></A><SPAN Class="swiss"><A HREF="RM-3-2-2.html#S0028">subtype_mark</A></SPAN></DIV>

<H4 Class="centered">Name Resolution Rules</H4>
<DIV Class="paranum">4/2</DIV>
<DIV Class="Normal"><A NAME="I2408"></A>The expected type for an <SPAN Class="swiss"><A HREF="RM-4-3-2.html#S0109">extension_aggregate</A></SPAN> 
shall be a single type that is a record extension. <A NAME="I2409"></A>If 
the <SPAN Class="swiss"><A HREF="RM-4-3-2.html#S0110">ancestor_part</A></SPAN> 
is an <SPAN Class="swiss"><A HREF="RM-4-4.html#S0115">expression</A></SPAN>, 
it is expected to be of any tagged type.&nbsp;</DIV>

<H4 Class="centered">Legality Rules</H4>
<DIV Class="paranum">5/2</DIV>
<DIV Class="Normal">If the <SPAN Class="swiss"><A HREF="RM-4-3-2.html#S0110">ancestor_part</A></SPAN> 
is a <SPAN Class="swiss"><A HREF="RM-3-2-2.html#S0028">subtype_mark</A></SPAN>, 
it shall denote a specific tagged subtype. If the <SPAN Class="swiss"><A HREF="RM-4-3-2.html#S0110">ancestor_part</A></SPAN> 
is an <SPAN Class="swiss"><A HREF="RM-4-4.html#S0115">expression</A></SPAN>, 
it shall not be dynamically tagged. The type of the <SPAN Class="swiss"><A HREF="RM-4-3-2.html#S0109">extension_aggregate</A></SPAN> 
shall be derived from the type of the <SPAN Class="swiss"><A HREF="RM-4-3-2.html#S0110">ancestor_part</A></SPAN>, 
through one or more record extensions (and no private extensions).&nbsp;</DIV>

<H4 Class="centered">Static Semantics</H4>
<DIV Class="paranum">6</DIV>
<DIV Class="Normal"><A NAME="I2410"></A>For the <SPAN Class="swiss"><A HREF="RM-4-3-1.html#S0106">record_component_association_list</A></SPAN> 
of an <SPAN Class="swiss"><A HREF="RM-4-3-2.html#S0109">extension_aggregate</A></SPAN>, 
the only components <I>needed</I> are those of the composite value defined 
by the aggregate that are not inherited from the type of the <SPAN Class="swiss"><A HREF="RM-4-3-2.html#S0110">ancestor_part</A></SPAN>, 
plus any inherited discriminants if the <SPAN Class="swiss"><A HREF="RM-4-3-2.html#S0110">ancestor_part</A></SPAN> 
is a <SPAN Class="swiss"><A HREF="RM-3-2-2.html#S0028">subtype_mark</A></SPAN> 
that denotes an unconstrained subtype.&nbsp;</DIV>

<H4 Class="centered">Dynamic Semantics</H4>
<DIV Class="paranum">7</DIV>
<DIV Class="Normal"><A NAME="I2411"></A>For the evaluation of an <SPAN Class="swiss"><A HREF="RM-4-3-2.html#S0109">extension_aggregate</A></SPAN>, 
the <SPAN Class="swiss"><A HREF="RM-4-3-1.html#S0106">record_component_association_list</A></SPAN> 
is evaluated. If the <SPAN Class="swiss"><A HREF="RM-4-3-2.html#S0110">ancestor_part</A></SPAN> 
is an <SPAN Class="swiss"><A HREF="RM-4-4.html#S0115">expression</A></SPAN>, 
it is also evaluated; if the <SPAN Class="swiss"><A HREF="RM-4-3-2.html#S0110">ancestor_part</A></SPAN> 
is a <SPAN Class="swiss"><A HREF="RM-3-2-2.html#S0028">subtype_mark</A></SPAN>, 
the components of the value of the aggregate not given by the <SPAN Class="swiss"><A HREF="RM-4-3-1.html#S0106">record_component_association_list</A></SPAN> 
are initialized by default as for an object of the ancestor type. Any 
implicit initializations or evaluations are performed in an arbitrary 
order, except that the <SPAN Class="swiss"><A HREF="RM-4-4.html#S0115">expression</A></SPAN> 
for a discriminant is evaluated prior to any other evaluation or initialization 
that depends on it.</DIV>
<DIV Class="paranum">8</DIV>
<DIV Class="Normal"><A NAME="I2412"></A><A NAME="I2413"></A>If the type 
of the <SPAN Class="swiss"><A HREF="RM-4-3-2.html#S0110">ancestor_part</A></SPAN> 
has discriminants that are not inherited by the type of the <SPAN Class="swiss"><A HREF="RM-4-3-2.html#S0109">extension_aggregate</A></SPAN>, 
then, unless the <SPAN Class="swiss"><A HREF="RM-4-3-2.html#S0110">ancestor_part</A></SPAN> 
is a <SPAN Class="swiss"><A HREF="RM-3-2-2.html#S0028">subtype_mark</A></SPAN> 
that denotes an unconstrained subtype, a check is made that each discriminant 
of the ancestor has the value specified for a corresponding discriminant, 
either in the <SPAN Class="swiss"><A HREF="RM-4-3-1.html#S0106">record_component_association_list</A></SPAN>, 
or in the <SPAN Class="swiss"><A HREF="RM-3-4.html#S0035">derived_type_definition</A></SPAN> 
for some ancestor of the type of the <SPAN Class="swiss"><A HREF="RM-4-3-2.html#S0109">extension_aggregate</A></SPAN>. 
<A NAME="I2414"></A>Constraint_Error is raised if this check fails.&nbsp;</DIV>
<DIV Class="NotesHeader">NOTES</DIV>
<DIV Class="paranum">9</DIV>
<DIV Class="Notes">8&nbsp;&nbsp;If all components of the value of the 
<SPAN Class="swiss"><A HREF="RM-4-3-2.html#S0109">extension_aggregate</A></SPAN> 
are determined by the <SPAN Class="swiss"><A HREF="RM-4-3-2.html#S0110">ancestor_part</A></SPAN>, 
then the <SPAN Class="swiss"><A HREF="RM-4-3-1.html#S0106">record_component_association_list</A></SPAN> 
is required to be simply <B>null record</B>.</DIV>
<DIV Class="paranum">10</DIV>
<DIV Class="Notes">9&nbsp;&nbsp;If the <SPAN Class="swiss"><A HREF="RM-4-3-2.html#S0110">ancestor_part</A></SPAN> 
is a <SPAN Class="swiss"><A HREF="RM-3-2-2.html#S0028">subtype_mark</A></SPAN>, 
then its type can be abstract. If its type is controlled, then as the 
last step of evaluating the aggregate, the Initialize procedure of the 
ancestor type is called, unless the Initialize procedure is abstract 
(see <A HREF="RM-7-6.html">7.6</A>).&nbsp;</DIV>

<H4 Class="centered">Examples</H4>
<DIV Class="paranum">11</DIV>
<DIV Class="Normal" Style="margin-bottom: 0.4em"><I>Examples of extension 
aggregates (for types defined in <A HREF="RM-3-9-1.html">3.9.1</A>):</I> 
</DIV>
<DIV Class="paranum">12</DIV>
<DIV Class="Examples">Painted_Point'(Point&nbsp;<B>with</B>&nbsp;Red)<BR>
(Point'(P)&nbsp;<B>with</B>&nbsp;Paint&nbsp;=&gt;&nbsp;Black)</DIV>
<DIV Class="paranum">13</DIV>
<DIV Class="Examples">(Expression&nbsp;<B>with</B>&nbsp;Left&nbsp;=&gt;&nbsp;1.2,&nbsp;Right&nbsp;=&gt;&nbsp;3.4)<BR>
Addition'(Binop&nbsp;<B>with&nbsp;null&nbsp;record</B>)<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;--<SPAN Class="roman"><I>&nbsp;presuming&nbsp;Binop&nbsp;is&nbsp;of&nbsp;type&nbsp;Binary_Operation</I></SPAN></DIV>

<HR>
<DIV Style="margin-top: 0.0em; margin-bottom: 0.6em"><A HREF="RM-TOC.html"><IMG SRC="cont.gif" ALT="Contents" BORDER=0></A>&nbsp;
&nbsp;<A HREF="RM-0-5.html"><IMG SRC="index.gif" ALT="Index" BORDER=0></A>&nbsp;
&nbsp;<A HREF="RM-STDS.html"><IMG SRC="lib.gif" ALT="References" BORDER=0></A>&nbsp;
&nbsp;<A HREF="RM-SRCH.html"><IMG SRC="find.gif" ALT="Search" BORDER=0></A>&nbsp;
&nbsp;<A HREF="RM-4-3-1.html"><IMG SRC="prev.gif" ALT="Previous" BORDER=0></A>&nbsp;
&nbsp;<A HREF="RM-4-3-3.html"><IMG SRC="next.gif" ALT="Next" BORDER=0></A>&nbsp;
</DIV>
<DIV Style="margin-top:0.0em"><IMG SRC="AE_logo.gif" height=100 width=113 align=right ALT="Ada-Europe">
<SPAN Style="vertical-align: middle">Sponsored by <SPAN Style="font-size: 125%"><A HREF="http://www.ada-europe.org/"><B>Ada-Europe</B></A></SPAN></SPAN></DIV>
</BODY>
</HTML>
