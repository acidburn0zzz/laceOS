<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
"http://www.w3.org/TR/html4/loose.dtd">
<HTML>
<HEAD>
    <TITLE>Sets</TITLE>
    <META http-equiv="Content-Type" content="text/html; charset=iso-8859-1">
    <META NAME="Author" CONTENT="JTC1/SC22/WG9/ARG, by Randall Brukardt, ARG Editor">
    <META NAME="GENERATOR" CONTENT="Arm_Form.Exe, Ada Reference Manual generator">
    <STYLE type="text/css">
    H4.centered {text-align: center}
    SPAN.swiss {font-family: Arial, Helvetica, sans-serif; font-size: 92%}
    SPAN.roman {font-family: "Times New Roman", Times, serif}
    DIV.paranum {float: left; font-family: Arial, Helvetica, sans-serif; font-size: 64%; width: 2.8em; margin-left: -0.4em; margin-right: -3.0em; margin-top: 0.2em}
    TT {font-family: "Courier New", monospace}
    DT {display: compact}
    SPAN.insert2 {text-decoration: underline; color: rgb(0,102,0) }
    SPAN.delete2 {text-decoration: line-through; color: rgb(0,102,0) }
    DIV.Normal {font-family: "Times New Roman", Times, serif; line-height: 122%; margin-left: 1.2em; margin-bottom: 0.6em}
    DIV.Annotations {font-family: "Times New Roman", Times, serif; font-size: 80%; line-height: 122%; margin-left: 6.2em; margin-bottom: 0.6em}
    DIV.CodeIndented {font-family: "Times New Roman", Times, serif; line-height: 122%; margin-left: 5.2em; margin-bottom: 0.6em}
    DIV.Examples {font-family: "Courier New", monospace; font-size: 90%; line-height: 122%; margin-left: 3.4em; margin-bottom: 0.6em}
    DIV.SmallExamples {font-family: "Courier New", monospace; font-size: 72%; line-height: 122%; margin-left: 9.6em; margin-bottom: 0.6em}
    UL.Bulleted {font-family: "Times New Roman", Times, serif; line-height: 122%; margin-left: 3.2em; margin-right: 2.0em; margin-top: 0em; margin-bottom: 0.5em}
    </STYLE>
</HEAD>
<BODY TEXT="#000000" BGCOLOR="#FFFFF0" LINK="#000080" VLINK="#330033" ALINK="#0000FF">
<DIV><B><SPAN Style="font-size:200%; color: rgb(0,51,153)">Annotated</SPAN><SPAN Style="font-size:200%; color: rgb(0,0,102)">&nbsp;Ada Reference Manual</SPAN></B> &mdash; <A HREF="AA-TTL.html"><B>Legal Information</B></A></DIV>
<DIV Style="margin-top: 0.6em; margin-bottom: 0.0em"><A HREF="AA-TOC.html"><IMG SRC="cont.gif" ALT="Contents" BORDER=0></A>&nbsp;
&nbsp;<A HREF="AA-0-5.html"><IMG SRC="index.gif" ALT="Index" BORDER=0></A>&nbsp;
&nbsp;<A HREF="AA-STDS.html"><IMG SRC="lib.gif" ALT="References" BORDER=0></A>&nbsp;
&nbsp;<A HREF="AA-SRCH.html"><IMG SRC="find.gif" ALT="Search" BORDER=0></A>&nbsp;
&nbsp;<A HREF="AA-A-18-6.html"><IMG SRC="prev.gif" ALT="Previous" BORDER=0></A>&nbsp;
&nbsp;<A HREF="AA-A-18-8.html"><IMG SRC="next.gif" ALT="Next" BORDER=0></A>&nbsp;
</DIV>
<HR>
<H1>&nbsp;A.18.7 <SPAN class="insert2">Sets</SPAN> <SPAN class="delete2"></SPAN></H1>
<DIV Class="paranum">1/2</DIV>
<DIV Class="Normal">{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AIs/AI-20302.TXT">AI95-00302-03</A></I>} 
<SPAN class="insert2">The language-defined generic packages Containers.Hashed_Sets 
and Containers.Ordered_Sets provide private types Set and Cursor, and 
a set of operations for each type. A set container allows elements of 
an arbitrary type to be stored without duplication. A hashed set uses 
a hash function to organize elements, while an ordered set orders its 
element per a specified relation.<SPAN STYLE="font-size: 80%">{<I>set 
container</I>}</SPAN> <A NAME="I6825"></A><SPAN STYLE="font-size: 80%">{<I>container 
(set)</I>}</SPAN> <A NAME="I6826"></A></SPAN></DIV>
<DIV Class="paranum">2/2</DIV>
<DIV Class="Normal">{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AIs/AI-20302.TXT">AI95-00302-03</A></I>} 
<SPAN class="insert2">This section describes the declarations that are 
common to both kinds of sets. See <A HREF="AA-A-18-8.html">A.18.8</A> 
for a description of the semantics specific to Containers.Hashed_Sets 
and <A HREF="AA-A-18-9.html">A.18.9</A> for a description of the semantics 
specific to Containers.Ordered_Sets.</SPAN>&nbsp;</DIV>

<H4 Class="centered">Static Semantics</H4>
<DIV Class="paranum">3/2</DIV>
<DIV Class="Normal">{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AIs/AI-20302.TXT">AI95-00302-03</A></I>} 
<SPAN class="insert2">The actual function for the generic formal function 
&quot;=&quot; on Element_Type values is expected to define a reflexive 
and symmetric relationship and return the same result value each time 
it is called with a particular pair of values. If it behaves in some 
other manner, the function &quot;=&quot; on set values returns an unspecified 
value. The exact arguments and number of calls of this generic formal 
function by the function &quot;=&quot; on set values are unspecified.<SPAN STYLE="font-size: 80%">{<I>unspecified</I> 
[partial]}</SPAN> <A NAME="I6827"></A></SPAN></DIV>
<DIV Class="paranum">3.a/2</DIV>
<DIV Class="Annotations"><SPAN class="insert2"><B>Ramification:&nbsp;</B>If 
the actual function for &quot;=&quot; is not symmetric and consistent, 
the result returned by the &quot;=&quot; for Set objects cannot be predicted. 
The implementation is not required to protect against &quot;=&quot; raising 
an exception, or returning random results, or any other &ldquo;bad&rdquo; 
behavior. And it can call &quot;=&quot; in whatever manner makes sense. 
But note that only the result of &quot;=&quot; for Set objects is unspecified; 
other subprograms are not allowed to break if &quot;=&quot; is bad (they 
aren't expected to use &quot;=&quot;).</SPAN>&nbsp;</DIV>
<DIV Class="paranum">4/2</DIV>
<DIV Class="Normal">{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AIs/AI-20302.TXT">AI95-00302-03</A></I>} 
<SPAN class="insert2">The type Set is used to represent sets. The type 
Set needs finalization (see <A HREF="AA-7-6.html">7.6</A>).</SPAN></DIV>
<DIV Class="paranum">5/2</DIV>
<DIV Class="Normal">{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AIs/AI-20302.TXT">AI95-00302-03</A></I>} 
<SPAN class="insert2">A set contains elements. Set cursors designate 
elements. There exists an equivalence relation on elements, whose definition 
is different for hashed sets and ordered sets. A set never contains two 
or more equivalent elements. The <I>length</I> of a set is the number 
of elements it contains.<SPAN STYLE="font-size: 80%">{<I>length (of a 
set)</I>}</SPAN> <A NAME="I6828"></A></SPAN></DIV>
<DIV Class="paranum">6/2</DIV>
<DIV Class="Normal">{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AIs/AI-20302.TXT">AI95-00302-03</A></I>} 
<SPAN class="insert2"><SPAN STYLE="font-size: 80%">{<I>first element 
(of a set)</I>}</SPAN> <A NAME="I6829"></A><SPAN STYLE="font-size: 80%">{<I>last 
element (of a set)</I>}</SPAN> <A NAME="I6830"></A><SPAN STYLE="font-size: 80%">{<I>successor 
element (of a set)</I>}</SPAN> <A NAME="I6831"></A>Each nonempty set 
has two particular elements called the <I>first element</I> and the <I>last 
element</I> (which may be the same). Each element except for the last 
element has a <I>successor element</I>. If there are no other intervening 
operations, starting with the first element and repeatedly going to the 
successor element will visit each element in the set exactly once until 
the last element is reached. The exact definition of these terms is different 
for hashed sets and ordered sets.</SPAN></DIV>
<DIV Class="paranum">7/2</DIV>
<DIV Class="Normal">{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AIs/AI-20302.TXT">AI95-00302-03</A></I>} 
<SPAN class="insert2">[Some operations of these generic packages have 
access-to-subprogram parameters. To ensure such operations are well-defined, 
they guard against certain actions by the designated subprogram. In particular, 
some operations check for &ldquo;tampering with cursors&rdquo; of a container 
because they depend on the set of elements of the container remaining 
constant, and others check for &ldquo;tampering with elements&rdquo; 
of a container because they depend on elements of the container not being 
replaced.]</SPAN></DIV>
<DIV Class="paranum">8/2</DIV>
<DIV Class="Normal" Style="margin-bottom: 0.4em">{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AIs/AI-20302.TXT">AI95-00302-03</A></I>} 
<SPAN class="insert2"><SPAN STYLE="font-size: 80%">{<I>tamper with cursors 
(of a set)</I>}</SPAN> <A NAME="I6832"></A>A subprogram is said to <I>tamper 
with cursors</I> of a set object <I>S</I> if:</SPAN></DIV>
<DIV Class="paranum">9/2</DIV>
<UL Class="Bulleted"><LI TYPE=DISC><SPAN class="insert2">it inserts or 
deletes elements of <I>S</I>, that is, it calls the Insert, Include, 
Clear, Delete, Exclude, or Replace_Element procedures with <I>S</I> as 
a parameter; or</SPAN></LI></UL>
<DIV Class="paranum">9.a/2</DIV>
<DIV Class="Annotations"><SPAN class="insert2"><B>To be honest:&nbsp;</B>Operations 
which are defined to be equivalent to a call on one of these operations 
also are included. Similarly, operations which call one of these as part 
of their definition are included.</SPAN>&nbsp;</DIV>
<DIV Class="paranum">9.b/2</DIV>
<DIV Class="Annotations"><SPAN class="insert2"><B>Discussion:&nbsp;</B>We 
have to include Replace_Element here because it might delete and reinsert 
the element if it moves in the set. That could change the order of iteration, 
which is what this check is designed to prevent. Replace is also included, 
as it is defined in terms of Replace_Element.</SPAN>&nbsp;</DIV>
<DIV Class="paranum">10/2</DIV>
<UL Class="Bulleted"><LI TYPE=DISC><SPAN class="insert2">it finalizes 
<I>S</I>; or</SPAN></LI></UL>
<DIV Class="paranum">11/2</DIV>
<UL Class="Bulleted"><LI TYPE=DISC><SPAN class="insert2">it calls the 
Move procedure with <I>S</I> as a parameter; or</SPAN></LI></UL>
<DIV Class="paranum">12/2</DIV>
<UL Class="Bulleted"><LI TYPE=DISC><SPAN class="insert2">it calls one 
of the operations defined to tamper with cursors of <I>S</I>.</SPAN></LI></UL>
<DIV Class="paranum">13/2</DIV>
<DIV Class="Normal" Style="margin-bottom: 0.4em">&nbsp;{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AIs/AI-20302.TXT">AI95-00302-03</A></I>} 
<SPAN class="insert2"><SPAN STYLE="font-size: 80%">{<I>tamper with elements 
(of a set)</I>}</SPAN> <A NAME="I6833"></A>A subprogram is said to <I>tamper 
with elements</I> of a set object <I>S</I> if:</SPAN></DIV>
<DIV Class="paranum">14/2</DIV>
<UL Class="Bulleted"><LI TYPE=DISC><SPAN class="insert2">it tampers with 
cursors of <I>S</I>.</SPAN></LI></UL>
<DIV Class="paranum">14.a/2</DIV>
<DIV Class="Annotations"><SPAN class="insert2"><B>Reason:&nbsp;</B>Complete 
replacement of an element can cause its memory to be deallocated while 
another operation is holding onto a reference to it. That can't be allowed. 
However, a simple modification of (part of) an element is not a problem, 
so Update_Element_Preserving_Key does not cause a problem.</SPAN></DIV>
<DIV Class="paranum">14.b/2</DIV>
<DIV Class="Annotations"><SPAN class="insert2">We don't need to list 
Replace and Replace_Element here because they are covered by &ldquo;tamper 
with cursors&rdquo;. For Set, &ldquo;tamper with cursors&rdquo; and &ldquo;tamper 
with elements&rdquo; are the same. We leave both terms so that the rules 
for routines like Iterate and Query_Element are consistent across all 
containers.</SPAN>&nbsp;</DIV>
<DIV Class="paranum">15/2</DIV>
<DIV Class="Normal">&nbsp;{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AIs/AI-20302.TXT">AI95-00302-03</A></I>} 
<SPAN class="insert2">Empty_Set represents the empty Set object. It has 
a length of 0. If an object of type Set is not otherwise initialized, 
it is initialized to the same value as Empty_Set.</SPAN></DIV>
<DIV Class="paranum">16/2</DIV>
<DIV Class="Normal">&nbsp;{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AIs/AI-20302.TXT">AI95-00302-03</A></I>} 
<SPAN class="insert2">No_Element represents a cursor that designates 
no element. If an object of type Cursor is not otherwise initialized, 
it is initialized to the same value as No_Element.</SPAN></DIV>
<DIV Class="paranum">17/2</DIV>
<DIV Class="Normal">&nbsp;{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AIs/AI-20302.TXT">AI95-00302-03</A></I>} 
<SPAN class="insert2">The predefined &quot;=&quot; operator for type 
Cursor returns True if both cursors are No_Element, or designate the 
same element in the same container.</SPAN></DIV>
<DIV Class="paranum">18/2</DIV>
<DIV Class="Normal">&nbsp;{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AIs/AI-20302.TXT">AI95-00302-03</A></I>} 
<SPAN class="insert2">Execution of the default implementation of the 
Input, Output, Read, or Write attribute of type Cursor raises Program_Error.</SPAN></DIV>
<DIV Class="paranum">18.a/2</DIV>
<DIV Class="Annotations"><SPAN class="insert2"><B>Reason:&nbsp;</B>A cursor 
will probably be implemented in terms of one or more access values, and 
the effects of streaming access values is unspecified. Rather than letting 
the user stream junk by accident, we mandate that streaming of cursors 
raise Program_Error by default. The attributes can always be specified 
if there is a need to support streaming.</SPAN>&nbsp;</DIV>
<DIV Class="paranum">19/2</DIV>
<DIV Class="Examples"><SPAN class="insert2"><B>function</B>&nbsp;&quot;=&quot;&nbsp;(Left,&nbsp;Right&nbsp;:&nbsp;Set)&nbsp;<B>return</B>&nbsp;Boolean;</SPAN></DIV>
<DIV Class="paranum">20/2</DIV>
<DIV Class="CodeIndented" Style="margin-bottom: 0.9em">{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AIs/AI-20302.TXT">AI95-00302-03</A></I>} 
<SPAN class="insert2">If Left and Right denote the same set object, then 
the function returns True. If Left and Right have different lengths, 
then the function returns False. Otherwise, for each element <I>E</I> 
in Left, the function returns False if an element equal to <I>E</I> (using 
the generic formal equality operator) is not present in Right. If the 
function has not returned a result after checking all of the elements, 
it returns True. Any exception raised during evaluation of element equality 
is propagated.</SPAN>&nbsp;</DIV>
<DIV Class="paranum">20.a/2</DIV>
<DIV Class="Annotations"><SPAN class="insert2"><B>Implementation Note: 
</B>This wording describes the canonical semantics. However, the order 
and number of calls on the formal equality function is unspecified for 
all of the operations that use it in this package, so an implementation 
can call it as many or as few times as it needs to get the correct answer. 
Specifically, there is no requirement to call the formal equality additional 
times once the answer has been determined.</SPAN>&nbsp;</DIV>
<DIV Class="paranum">21/2</DIV>
<DIV Class="Examples"><SPAN class="insert2"><B>function</B>&nbsp;Equivalent_Sets&nbsp;(Left,&nbsp;Right&nbsp;:&nbsp;Set)&nbsp;<B>return</B>&nbsp;Boolean;</SPAN></DIV>
<DIV Class="paranum">22/2</DIV>
<DIV Class="CodeIndented" Style="margin-bottom: 0.9em">{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AIs/AI-20302.TXT">AI95-00302-03</A></I>} 
<SPAN class="insert2">If Left and Right denote the same set object, then 
the function returns True. If Left and Right have different lengths, 
then the function returns False. Otherwise, for each element <I>E</I> 
in Left, the function returns False if an element equivalent to <I>E</I> 
is not present in Right. If the function has not returned a result after 
checking all of the elements, it returns True. Any exception raised during 
evaluation of element equivalence is propagated.</SPAN></DIV>
<DIV Class="paranum">23/2</DIV>
<DIV Class="Examples"><SPAN class="insert2"><B>function</B>&nbsp;To_Set&nbsp;(New_Item&nbsp;:&nbsp;Element_Type)&nbsp;<B>return</B>&nbsp;Set;</SPAN></DIV>
<DIV Class="paranum">24/2</DIV>
<DIV Class="CodeIndented" Style="margin-bottom: 0.9em">{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AIs/AI-20302.TXT">AI95-00302-03</A></I>} 
<SPAN class="insert2">Returns a set containing the single element New_Item.</SPAN></DIV>
<DIV Class="paranum">25/2</DIV>
<DIV Class="Examples"><SPAN class="insert2"><B>function</B>&nbsp;Length&nbsp;(Container&nbsp;:&nbsp;Set)&nbsp;<B>return</B>&nbsp;Count_Type;</SPAN></DIV>
<DIV Class="paranum">26/2</DIV>
<DIV Class="CodeIndented" Style="margin-bottom: 0.9em">{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AIs/AI-20302.TXT">AI95-00302-03</A></I>} 
<SPAN class="insert2">Returns the number of elements in Container.</SPAN></DIV>
<DIV Class="paranum">27/2</DIV>
<DIV Class="Examples"><SPAN class="insert2"><B>function</B>&nbsp;Is_Empty&nbsp;(Container&nbsp;:&nbsp;Set)&nbsp;<B>return</B>&nbsp;Boolean;</SPAN></DIV>
<DIV Class="paranum">28/2</DIV>
<DIV Class="CodeIndented" Style="margin-bottom: 0.9em">{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AIs/AI-20302.TXT">AI95-00302-03</A></I>} 
<SPAN class="insert2">Equivalent to Length (Container) = 0.</SPAN></DIV>
<DIV Class="paranum">29/2</DIV>
<DIV Class="Examples"><SPAN class="insert2"><B>procedure</B>&nbsp;Clear&nbsp;(Container&nbsp;:&nbsp;<B>in&nbsp;out</B>&nbsp;Set);</SPAN></DIV>
<DIV Class="paranum">30/2</DIV>
<DIV Class="CodeIndented" Style="margin-bottom: 0.9em">{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AIs/AI-20302.TXT">AI95-00302-03</A></I>} 
<SPAN class="insert2">Removes all the elements from Container.</SPAN></DIV>
<DIV Class="paranum">31/2</DIV>
<DIV Class="Examples"><SPAN class="insert2"><B>function</B>&nbsp;Element&nbsp;(Position&nbsp;:&nbsp;Cursor)&nbsp;<B>return</B>&nbsp;Element_Type;</SPAN></DIV>
<DIV Class="paranum">32/2</DIV>
<DIV Class="CodeIndented" Style="margin-bottom: 0.9em">{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AIs/AI-20302.TXT">AI95-00302-03</A></I>} 
<SPAN class="insert2">If Position equals No_Element, then Constraint_Error 
is propagated. Otherwise, Element returns the element designated by Position.</SPAN></DIV>
<DIV Class="paranum">33/2</DIV>
<DIV Class="Examples"><SPAN class="insert2"><B>procedure</B>&nbsp;Replace_Element&nbsp;(Container&nbsp;:&nbsp;<B>in&nbsp;out</B>&nbsp;Set;<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Position&nbsp;&nbsp;:&nbsp;<B>in</B>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Cursor;<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;New_Item&nbsp;&nbsp;:&nbsp;<B>in</B>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Element_Type);</SPAN></DIV>
<DIV Class="paranum">34/2</DIV>
<DIV Class="CodeIndented" Style="margin-bottom: 0.9em">{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AIs/AI-20302.TXT">AI95-00302-03</A></I>} 
<SPAN class="insert2">If Position equals No_Element, then Constraint_Error 
is propagated; if Position does not designate an element in Container, 
then Program_Error is propagated. If an element equivalent to New_Item 
is already present in Container at a position other than Position, Program_Error 
is propagated. Otherwise, Replace_Element assigns New_Item to the element 
designated by Position. Any exception raised by the assignment is propagated.</SPAN></DIV>
<DIV Class="paranum">34.a/2</DIV>
<DIV Class="Annotations"><SPAN class="insert2"><B>Implementation Note: 
</B>The final assignment may require that the node of the element be 
moved in the Set's data structures. That could mean that implementing 
this operation exactly as worded above could require the overhead of 
searching twice. Implementations are encouraged to avoid this extra overhead 
when possible, by prechecking if the old element is equivalent to the 
new one, by inserting a placeholder node while checking for an equivalent 
element, and similar optimizations.</SPAN></DIV>
<DIV Class="paranum">34.b/2</DIV>
<DIV Class="Annotations"><SPAN class="insert2">The cursor still designates 
the same element after this operation; only the value of that element 
has changed. Cursors cannot include information about the relative position 
of an element in a Set (as they must survive insertions and deletions 
of other elements), so this should not pose an implementation hardship.</SPAN> 
</DIV>
<DIV Class="paranum">35/2</DIV>
<DIV Class="Examples"><SPAN class="insert2"><B>procedure</B>&nbsp;Query_Element<BR>
&nbsp;&nbsp;(Position&nbsp;:&nbsp;<B>in</B>&nbsp;Cursor;<BR>
&nbsp;&nbsp;&nbsp;Process&nbsp;&nbsp;:&nbsp;<B>not&nbsp;null&nbsp;access&nbsp;procedure</B>&nbsp;(Element&nbsp;:&nbsp;<B>in</B>&nbsp;Element_Type));</SPAN></DIV>
<DIV Class="paranum">36/2</DIV>
<DIV Class="CodeIndented" Style="margin-bottom: 0.9em">{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AIs/AI-20302.TXT">AI95-00302-03</A></I>} 
<SPAN class="insert2">If Position equals No_Element, then Constraint_Error 
is propagated. Otherwise, Query_Element calls Process.<B>all</B> with 
the element designated by Position as the argument. Program_Error is 
propagated if Process.<B>all</B> tampers with the elements of Container. 
Any exception raised by Process.<B>all</B> is propagated.</SPAN></DIV>
<DIV Class="paranum">37/2</DIV>
<DIV Class="Examples"><SPAN class="insert2"><B>procedure</B>&nbsp;Move&nbsp;(Target&nbsp;:&nbsp;<B>in&nbsp;out</B>&nbsp;Set;<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Source&nbsp;:&nbsp;<B>in&nbsp;out</B>&nbsp;Set);</SPAN></DIV>
<DIV Class="paranum">38/2</DIV>
<DIV Class="CodeIndented" Style="margin-bottom: 0.9em">{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AIs/AI-20302.TXT">AI95-00302-03</A></I>} 
<SPAN class="insert2">If Target denotes the same object as Source, then 
Move has no effect. Otherwise, Move first clears Target. Then, each element 
from Source is removed from Source and inserted into Target. The length 
of Source is 0 after a successful call to Move.</SPAN></DIV>
<DIV Class="paranum">39/2</DIV>
<DIV Class="Examples"><SPAN class="insert2"><B>procedure</B>&nbsp;Insert&nbsp;(Container&nbsp;:&nbsp;<B>in&nbsp;out</B>&nbsp;Set;<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;New_Item&nbsp;&nbsp;:&nbsp;<B>in</B>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Element_Type;<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Position&nbsp;&nbsp;:&nbsp;&nbsp;&nbsp;&nbsp;<B>out</B>&nbsp;Cursor;<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Inserted&nbsp;&nbsp;:&nbsp;&nbsp;&nbsp;&nbsp;<B>out</B>&nbsp;Boolean);</SPAN></DIV>
<DIV Class="paranum">40/2</DIV>
<DIV Class="CodeIndented" Style="margin-bottom: 0.9em">{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AIs/AI-20302.TXT">AI95-00302-03</A></I>} 
<SPAN class="insert2">Insert checks if an element equivalent to New_Item 
is already present in Container. If a match is found, Inserted is set 
to False and Position designates the matching element. Otherwise, Insert 
adds New_Item to Container; Inserted is set to True and Position designates 
the newly-inserted element. Any exception raised during allocation is 
propagated and Container is not modified.</SPAN></DIV>
<DIV Class="paranum">41/2</DIV>
<DIV Class="Examples"><SPAN class="insert2"><B>procedure</B>&nbsp;Insert&nbsp;(Container&nbsp;:&nbsp;<B>in&nbsp;out</B>&nbsp;Set;<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;New_Item&nbsp;&nbsp;:&nbsp;<B>in</B>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Element_Type);</SPAN></DIV>
<DIV Class="paranum">42/2</DIV>
<DIV Class="CodeIndented" Style="margin-bottom: 0.9em">{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AIs/AI-20302.TXT">AI95-00302-03</A></I>} 
<SPAN class="insert2">Insert inserts New_Item into Container as per the 
four-parameter Insert, with the difference that if an element equivalent 
to New_Item is already in the set, then Constraint_Error is propagated.</SPAN></DIV>
<DIV Class="paranum">42.a/2</DIV>
<DIV Class="Annotations" Style="margin-bottom: 0.4em"><SPAN class="insert2"><B>Discussion: 
</B>This is equivalent to:</SPAN>&nbsp;</DIV>
<DIV Class="paranum">42.b/2</DIV>
<DIV Class="SmallExamples"><SPAN class="insert2"><B>declare</B><BR>
&nbsp;&nbsp;Inserted&nbsp;:&nbsp;Boolean;&nbsp;C&nbsp;:&nbsp;Cursor;<BR>
<B>begin</B><BR>
&nbsp;&nbsp;Insert&nbsp;(Container,&nbsp;New_Item,&nbsp;C,&nbsp;Inserted);<BR>
&nbsp;&nbsp;<B>if&nbsp;not</B>&nbsp;Inserted&nbsp;<B>then</B><BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<B>raise</B>&nbsp;Constraint_Error;<BR>
&nbsp;&nbsp;<B>end&nbsp;if</B>;<BR>
<B>end</B>;</SPAN></DIV>
<DIV Class="paranum">42.c/2</DIV>
<DIV Class="Annotations"><SPAN class="insert2">but doesn't require the 
hassle of <B>out</B> parameters.</SPAN>&nbsp;</DIV>
<DIV Class="paranum">43/2</DIV>
<DIV Class="Examples"><SPAN class="insert2"><B>procedure</B>&nbsp;Include&nbsp;(Container&nbsp;:&nbsp;<B>in&nbsp;out</B>&nbsp;Set;<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;New_Item&nbsp;&nbsp;:&nbsp;<B>in</B>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Element_Type);</SPAN></DIV>
<DIV Class="paranum">44/2</DIV>
<DIV Class="CodeIndented" Style="margin-bottom: 0.9em">{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AIs/AI-20302.TXT">AI95-00302-03</A></I>} 
<SPAN class="insert2">Include inserts New_Item into Container as per 
the four-parameter Insert, with the difference that if an element equivalent 
to New_Item is already in the set, then it is replaced. Any exception 
raised during assignment is propagated.</SPAN></DIV>
<DIV Class="paranum">45/2</DIV>
<DIV Class="Examples"><SPAN class="insert2"><B>procedure</B>&nbsp;Replace&nbsp;(Container&nbsp;:&nbsp;<B>in&nbsp;out</B>&nbsp;Set;<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;New_Item&nbsp;&nbsp;:&nbsp;<B>in</B>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Element_Type);</SPAN></DIV>
<DIV Class="paranum">46/2</DIV>
<DIV Class="CodeIndented" Style="margin-bottom: 0.9em">{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AIs/AI-20302.TXT">AI95-00302-03</A></I>} 
<SPAN class="insert2">Replace checks if an element equivalent to New_Item 
is already in the set. If a match is found, that element is replaced 
with New_Item; otherwise, Constraint_Error is propagated.</SPAN></DIV>
<DIV Class="paranum">47/2</DIV>
<DIV Class="Examples"><SPAN class="insert2"><B>procedure</B>&nbsp;Exclude&nbsp;(Container&nbsp;:&nbsp;<B>in&nbsp;out</B>&nbsp;Set;<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Item&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:&nbsp;<B>in</B>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Element_Type);</SPAN></DIV>
<DIV Class="paranum">48/2</DIV>
<DIV Class="CodeIndented" Style="margin-bottom: 0.9em">{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AIs/AI-20302.TXT">AI95-00302-03</A></I>} 
<SPAN class="insert2">Exclude checks if an element equivalent to Item 
is present in Container. If a match is found, Exclude removes the element 
from the set.</SPAN></DIV>
<DIV Class="paranum">49/2</DIV>
<DIV Class="Examples"><SPAN class="insert2"><B>procedure</B>&nbsp;Delete&nbsp;(Container&nbsp;:&nbsp;<B>in&nbsp;out</B>&nbsp;Set;<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Item&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:&nbsp;<B>in</B>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Element_Type);</SPAN></DIV>
<DIV Class="paranum">50/2</DIV>
<DIV Class="CodeIndented" Style="margin-bottom: 0.9em">{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AIs/AI-20302.TXT">AI95-00302-03</A></I>} 
<SPAN class="insert2">Delete checks if an element equivalent to Item 
is present in Container. If a match is found, Delete removes the element 
from the set; otherwise, Constraint_Error is propagated.</SPAN></DIV>
<DIV Class="paranum">51/2</DIV>
<DIV Class="Examples"><SPAN class="insert2"><B>procedure</B>&nbsp;Delete&nbsp;(Container&nbsp;:&nbsp;<B>in&nbsp;out</B>&nbsp;Set;<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Position&nbsp;&nbsp;:&nbsp;<B>in&nbsp;out</B>&nbsp;Cursor);</SPAN></DIV>
<DIV Class="paranum">52/2</DIV>
<DIV Class="CodeIndented" Style="margin-bottom: 0.9em">{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AIs/AI-20302.TXT">AI95-00302-03</A></I>} 
<SPAN class="insert2">If Position equals No_Element, then Constraint_Error 
is propagated. If Position does not designate an element in Container, 
then Program_Error is propagated. Otherwise, Delete removes the element 
designated by Position from the set. Position is set to No_Element on 
return.</SPAN></DIV>
<DIV Class="paranum">52.a/2</DIV>
<DIV Class="Annotations"><SPAN class="insert2"><B>Ramification:&nbsp;</B>The 
check on Position checks that the cursor does not belong to some other 
set. This check implies that a reference to the set is included in the 
cursor value. This wording is not meant to require detection of dangling 
cursors; such cursors are defined to be invalid, which means that execution 
is erroneous, and any result is allowed (including not raising an exception).</SPAN> 
</DIV>
<DIV Class="paranum">53/2</DIV>
<DIV Class="Examples"><SPAN class="insert2"><B>procedure</B>&nbsp;Union&nbsp;(Target&nbsp;:&nbsp;<B>in&nbsp;out</B>&nbsp;Set;<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Source&nbsp;:&nbsp;<B>in</B>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Set);</SPAN></DIV>
<DIV Class="paranum">54/2</DIV>
<DIV Class="CodeIndented" Style="margin-bottom: 0.9em">{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AIs/AI-20302.TXT">AI95-00302-03</A></I>} 
<SPAN class="insert2">Union inserts into Target the elements of Source 
that are not equivalent to some element already in Target.</SPAN></DIV>
<DIV Class="paranum">54.a/2</DIV>
<DIV Class="Annotations"><SPAN class="insert2"><B>Implementation Note: 
</B>If the objects are the same, the result is the same as the original 
object. The implementation needs to take care so that aliasing effects 
do not make the result trash; Union (S, S); must work.</SPAN>&nbsp;</DIV>
<DIV Class="paranum">55/2</DIV>
<DIV Class="Examples"><SPAN class="insert2"><B>function</B>&nbsp;Union&nbsp;(Left,&nbsp;Right&nbsp;:&nbsp;Set)&nbsp;<B>return</B>&nbsp;Set;</SPAN></DIV>
<DIV Class="paranum">56/2</DIV>
<DIV Class="CodeIndented" Style="margin-bottom: 0.9em">{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AIs/AI-20302.TXT">AI95-00302-03</A></I>} 
<SPAN class="insert2">Returns a set comprising all of the elements of 
Left, and the elements of Right that are not equivalent to some element 
of Left.</SPAN></DIV>
<DIV Class="paranum">57/2</DIV>
<DIV Class="Examples"><SPAN class="insert2"><B>procedure</B>&nbsp;Intersection&nbsp;(Target&nbsp;:&nbsp;<B>in&nbsp;out</B>&nbsp;Set;<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Source&nbsp;:&nbsp;<B>in</B>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Set);</SPAN></DIV>
<DIV Class="paranum">58/2</DIV>
<DIV Class="CodeIndented" Style="margin-bottom: 0.9em">{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AIs/AI-20302.TXT">AI95-00302-03</A></I>} 
<SPAN class="insert2">Union deletes from Target the elements of Target 
that are not equivalent to some element of Source.</SPAN></DIV>
<DIV Class="paranum">58.a/2</DIV>
<DIV Class="Annotations"><SPAN class="insert2"><B>Implementation Note: 
</B>If the objects are the same, the result is the same as the original 
object. The implementation needs to take care so that aliasing effects 
do not make the result trash; Intersection (S, S); must work.</SPAN> 
</DIV>
<DIV Class="paranum">59/2</DIV>
<DIV Class="Examples"><SPAN class="insert2"><B>function</B>&nbsp;Intersection&nbsp;(Left,&nbsp;Right&nbsp;:&nbsp;Set)&nbsp;<B>return</B>&nbsp;Set;</SPAN></DIV>
<DIV Class="paranum">60/2</DIV>
<DIV Class="CodeIndented" Style="margin-bottom: 0.9em">{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AIs/AI-20302.TXT">AI95-00302-03</A></I>} 
<SPAN class="insert2">Returns a set comprising all the elements of Left 
that are equivalent to the some element of Right.</SPAN></DIV>
<DIV Class="paranum">61/2</DIV>
<DIV Class="Examples"><SPAN class="insert2"><B>procedure</B>&nbsp;Difference&nbsp;(Target&nbsp;:&nbsp;<B>in&nbsp;out</B>&nbsp;Set;<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Source&nbsp;:&nbsp;<B>in</B>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Set);</SPAN></DIV>
<DIV Class="paranum">62/2</DIV>
<DIV Class="CodeIndented" Style="margin-bottom: 0.9em">{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AIs/AI-20302.TXT">AI95-00302-03</A></I>} 
<SPAN class="insert2">If Target denotes the same object as Source, then 
Difference clears Target. Otherwise, it deletes from Target the elements 
that are equivalent to some element of Source.</SPAN></DIV>
<DIV Class="paranum">63/2</DIV>
<DIV Class="Examples"><SPAN class="insert2"><B>function</B>&nbsp;Difference&nbsp;(Left,&nbsp;Right&nbsp;:&nbsp;Set)&nbsp;<B>return</B>&nbsp;Set;</SPAN></DIV>
<DIV Class="paranum">64/2</DIV>
<DIV Class="CodeIndented" Style="margin-bottom: 0.9em">{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AIs/AI-20302.TXT">AI95-00302-03</A></I>} 
<SPAN class="insert2">Returns a set comprising the elements of Left that 
are not equivalent to some element of Right.</SPAN></DIV>
<DIV Class="paranum">65/2</DIV>
<DIV Class="Examples"><SPAN class="insert2"><B>procedure</B>&nbsp;Symmetric_Difference&nbsp;(Target&nbsp;:&nbsp;<B>in&nbsp;out</B>&nbsp;Set;<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Source&nbsp;:&nbsp;<B>in</B>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Set);</SPAN></DIV>
<DIV Class="paranum">66/2</DIV>
<DIV Class="CodeIndented" Style="margin-bottom: 0.9em">{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AIs/AI-20302.TXT">AI95-00302-03</A></I>} 
<SPAN class="insert2">If Target denotes the same object as Source, then 
Symmetric_Difference clears Target. Otherwise, it deletes from Target 
the elements that are equivalent to some element of Source, and inserts 
into Target the elements of Source that are not equivalent to some element 
of Target.</SPAN></DIV>
<DIV Class="paranum">67/2</DIV>
<DIV Class="Examples"><SPAN class="insert2"><B>function</B>&nbsp;Symmetric_Difference&nbsp;(Left,&nbsp;Right&nbsp;:&nbsp;Set)&nbsp;<B>return</B>&nbsp;Set;</SPAN></DIV>
<DIV Class="paranum">68/2</DIV>
<DIV Class="CodeIndented" Style="margin-bottom: 0.9em">{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AIs/AI-20302.TXT">AI95-00302-03</A></I>} 
<SPAN class="insert2">Returns a set comprising the elements of Left that 
are not equivalent to some element of Right, and the elements of Right 
that are not equivalent to some element of Left.</SPAN></DIV>
<DIV Class="paranum">69/2</DIV>
<DIV Class="Examples"><SPAN class="insert2"><B>function</B>&nbsp;Overlap&nbsp;(Left,&nbsp;Right&nbsp;:&nbsp;Set)&nbsp;<B>return</B>&nbsp;Boolean;</SPAN></DIV>
<DIV Class="paranum">70/2</DIV>
<DIV Class="CodeIndented" Style="margin-bottom: 0.9em">{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AIs/AI-20302.TXT">AI95-00302-03</A></I>} 
<SPAN class="insert2">If an element of Left is equivalent to some element 
of Right, then Overlap returns True. Otherwise it returns False.</SPAN></DIV>
<DIV Class="paranum">70.a/2</DIV>
<DIV Class="Annotations"><SPAN class="insert2"><B>Discussion:&nbsp;</B>This 
operation is commutative. If Overlap returns False, the two sets are 
disjoint.</SPAN>&nbsp;</DIV>
<DIV Class="paranum">71/2</DIV>
<DIV Class="Examples"><SPAN class="insert2"><B>function</B>&nbsp;Is_Subset&nbsp;(Subset&nbsp;:&nbsp;Set;<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Of_Set&nbsp;:&nbsp;Set)&nbsp;<B>return</B>&nbsp;Boolean;</SPAN></DIV>
<DIV Class="paranum">72/2</DIV>
<DIV Class="CodeIndented" Style="margin-bottom: 0.9em">{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AIs/AI-20302.TXT">AI95-00302-03</A></I>} 
<SPAN class="insert2">If an element of Subset is not equivalent to some 
element of Of_Set, then Is_Subset returns False. Otherwise it returns 
True.</SPAN></DIV>
<DIV Class="paranum">72.a/2</DIV>
<DIV Class="Annotations"><SPAN class="insert2"><B>Discussion:&nbsp;</B>This 
operation is not commutative, so we use parameter names that make it 
clear in named notation which set is which.</SPAN>&nbsp;</DIV>
<DIV Class="paranum">73/2</DIV>
<DIV Class="Examples"><SPAN class="insert2"><B>function</B>&nbsp;First&nbsp;(Container&nbsp;:&nbsp;Set)&nbsp;<B>return</B>&nbsp;Cursor;</SPAN></DIV>
<DIV Class="paranum">74/2</DIV>
<DIV Class="CodeIndented" Style="margin-bottom: 0.9em">{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AIs/AI-20302.TXT">AI95-00302-03</A></I>} 
<SPAN class="insert2">If Length (Container) = 0, then First returns No_Element. 
Otherwise, First returns a cursor that designates the first element in 
Container.</SPAN></DIV>
<DIV Class="paranum">75/2</DIV>
<DIV Class="Examples"><SPAN class="insert2"><B>function</B>&nbsp;Next&nbsp;(Position&nbsp;&nbsp;:&nbsp;Cursor)&nbsp;<B>return</B>&nbsp;Cursor;</SPAN></DIV>
<DIV Class="paranum">76/2</DIV>
<DIV Class="CodeIndented" Style="margin-bottom: 0.9em">{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AIs/AI-20302.TXT">AI95-00302-03</A></I>} 
<SPAN class="insert2">Returns a cursor that designates the successor 
of the element designated by Position. If Position designates the last 
element, then No_Element is returned. If Position equals No_Element, 
then No_Element is returned.</SPAN></DIV>
<DIV Class="paranum">77/2</DIV>
<DIV Class="Examples"><SPAN class="insert2"><B>procedure</B>&nbsp;Next&nbsp;(Position&nbsp;&nbsp;:&nbsp;<B>in&nbsp;out</B>&nbsp;Cursor);</SPAN></DIV>
<DIV Class="paranum">78/2</DIV>
<DIV Class="CodeIndented" Style="margin-bottom: 0.9em">{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AIs/AI-20302.TXT">AI95-00302-03</A></I>} 
<SPAN class="insert2">Equivalent to Position := Next (Position).</SPAN></DIV>
<DIV Class="paranum">79/2</DIV>
<DIV Class="CodeIndented" Style="margin-bottom: 0.9em">{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AIs/AI-20302.TXT">AI95-00302-03</A></I>} 
<SPAN class="insert2">Equivalent to Find (Container, Item) /= No_Element.</SPAN></DIV>
<DIV Class="paranum">80/2</DIV>
<DIV Class="Examples"><SPAN class="insert2"><B>function</B>&nbsp;Find&nbsp;(Container&nbsp;:&nbsp;Set;<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Item&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:&nbsp;Element_Type)&nbsp;<B>return</B>&nbsp;Cursor;</SPAN></DIV>
<DIV Class="paranum">81/2</DIV>
<DIV Class="CodeIndented" Style="margin-bottom: 0.9em">{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AIs/AI-20302.TXT">AI95-00302-03</A></I>} 
<SPAN class="insert2">If Length (Container) equals 0, then Find returns 
No_Element. Otherwise, Find checks if an element equivalent to Item is 
present in Container. If a match is found, a cursor designating the matching 
element is returned; otherwise, No_Element is returned.</SPAN></DIV>
<DIV Class="paranum">82/2</DIV>
<DIV Class="Examples"><SPAN class="insert2"><B>function</B>&nbsp;Contains&nbsp;(Container&nbsp;:&nbsp;Set;<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Item&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:&nbsp;Element_Type)&nbsp;<B>return</B>&nbsp;Boolean;</SPAN></DIV>
<DIV Class="paranum">83/2</DIV>
<DIV Class="Examples"><SPAN class="insert2"><B>function</B>&nbsp;Has_Element&nbsp;(Position&nbsp;:&nbsp;Cursor)&nbsp;<B>return</B>&nbsp;Boolean;</SPAN></DIV>
<DIV Class="paranum">84/2</DIV>
<DIV Class="CodeIndented" Style="margin-bottom: 0.9em">{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AIs/AI-20302.TXT">AI95-00302-03</A></I>} 
<SPAN class="insert2">Returns True if Position designates an element, 
and returns False otherwise.</SPAN></DIV>
<DIV Class="paranum">84.a/2</DIV>
<DIV Class="Annotations"><SPAN class="insert2"><B>To be honest:&nbsp;</B>This 
function may not detect cursors that designate deleted elements; such 
cursors are invalid (see below); the result of Has_Element for invalid 
cursors is unspecified (but not erroneous).</SPAN>&nbsp;</DIV>
<DIV Class="paranum">85/2</DIV>
<DIV Class="Examples"><SPAN class="insert2"><B>procedure</B>&nbsp;Iterate<BR>
&nbsp;&nbsp;(Container&nbsp;:&nbsp;<B>in</B>&nbsp;Set;<BR>
&nbsp;&nbsp;&nbsp;Process&nbsp;&nbsp;&nbsp;:&nbsp;<B>not&nbsp;null&nbsp;access&nbsp;procedure</B>&nbsp;(Position&nbsp;:&nbsp;<B>in</B>&nbsp;Cursor));</SPAN></DIV>
<DIV Class="paranum">86/2</DIV>
<DIV Class="CodeIndented" Style="margin-bottom: 0.9em">{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AIs/AI-20302.TXT">AI95-00302-03</A></I>} 
<SPAN class="insert2">Iterate calls Process.<B>all</B> with a cursor 
that designates each element in Container, starting with the first element 
and moving the cursor according to the successor relation. Program_Error 
is propagated if Process.<B>all</B> tampers with the cursors of Container. 
Any exception raised by Process.<B>all</B> is propagated.</SPAN></DIV>
<DIV Class="paranum">86.a/2</DIV>
<DIV Class="Annotations"><SPAN class="insert2"><B>Implementation Note: 
</B>The &ldquo;tamper with cursors&rdquo; check takes place when the 
operations that insert or delete elements, and so on are called.</SPAN></DIV>
<DIV Class="paranum">86.b/2</DIV>
<DIV Class="Annotations"><SPAN class="insert2">See Iterate for vectors 
(<A HREF="AA-A-18-2.html">A.18.2</A>) for a suggested implementation 
of the check.</SPAN>&nbsp;</DIV>
<DIV Class="paranum">87/2</DIV>
<DIV Class="Normal">&nbsp;{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AIs/AI-20302.TXT">AI95-00302-03</A></I>} 
<SPAN class="insert2">Both Containers.Hashed_Set and Containers.Ordered_Set 
declare a nested generic package Generic_Keys, which provides operations 
that allow set manipulation in terms of a key (typically, a portion of 
an element) instead of a complete element. The formal function Key of 
Generic_Keys extracts a key value from an element. It is expected to 
return the same value each time it is called with a particular element. 
The behavior of Generic_Keys is unspecified if Key behaves in some other 
manner.<SPAN STYLE="font-size: 80%">{<I>unspecified</I> [partial]}</SPAN> 
<A NAME="I6834"></A></SPAN></DIV>
<DIV Class="paranum">88/2</DIV>
<DIV Class="Normal">&nbsp;{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AIs/AI-20302.TXT">AI95-00302-03</A></I>} 
<SPAN class="insert2">A key is expected to unambiguously determine a 
single equivalence class for elements. The behavior of Generic_Keys is 
unspecified if the formal parameters of this package behave in some other 
manner.<SPAN STYLE="font-size: 80%">{<I>unspecified</I> [partial]}</SPAN> 
<A NAME="I6835"></A></SPAN></DIV>
<DIV Class="paranum">89/2</DIV>
<DIV Class="Examples"><SPAN class="insert2"><B>function</B>&nbsp;Key&nbsp;(Position&nbsp;:&nbsp;Cursor)&nbsp;<B>return</B>&nbsp;Key_Type;</SPAN></DIV>
<DIV Class="paranum">90/2</DIV>
<DIV Class="CodeIndented" Style="margin-bottom: 0.9em">{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AIs/AI-20302.TXT">AI95-00302-03</A></I>} 
<SPAN class="insert2">Equivalent to Key (Element (Position)).</SPAN> 
</DIV>
<DIV Class="paranum">91/2</DIV>
<DIV Class="Normal">&nbsp;{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AIs/AI-20302.TXT">AI95-00302-03</A></I>} 
<SPAN class="insert2">The subprograms in package Generic_Keys named Contains, 
Find, Element, Delete, and Exclude, are equivalent to the corresponding 
subprograms in the parent package, with the difference that the Key parameter 
is used to locate an element in the set.</SPAN></DIV>
<DIV Class="paranum">92/2</DIV>
<DIV Class="Examples"><SPAN class="insert2"><B>procedure</B>&nbsp;Replace&nbsp;(Container&nbsp;:&nbsp;<B>in&nbsp;out</B>&nbsp;Set;<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Key&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:&nbsp;<B>in</B>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Key_Type;<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;New_Item&nbsp;&nbsp;:&nbsp;<B>in</B>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Element_Type);</SPAN></DIV>
<DIV Class="paranum">93/2</DIV>
<DIV Class="CodeIndented" Style="margin-bottom: 0.9em">{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AIs/AI-20302.TXT">AI95-00302-03</A></I>} 
<SPAN class="insert2">Equivalent to Replace_Element (Container, Find 
(Container, Key), New_Item).</SPAN></DIV>
<DIV Class="paranum">94/2</DIV>
<DIV Class="Examples"><SPAN class="insert2"><B>procedure</B>&nbsp;Update_Element_Preserving_Key<BR>
&nbsp;&nbsp;(Container&nbsp;:&nbsp;<B>in&nbsp;out</B>&nbsp;Set;<BR>
&nbsp;&nbsp;&nbsp;Position&nbsp;&nbsp;:&nbsp;<B>in</B>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Cursor;<BR>
&nbsp;&nbsp;&nbsp;Process&nbsp;&nbsp;&nbsp;:&nbsp;<B>not&nbsp;null&nbsp;access&nbsp;procedure</B><BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(Element&nbsp;:&nbsp;<B>in&nbsp;out</B>&nbsp;Element_Type));</SPAN></DIV>
<DIV Class="paranum">95/2</DIV>
<DIV Class="CodeIndented">{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AIs/AI-20302.TXT">AI95-00302-03</A></I>} 
<SPAN class="insert2">If Position equals No_Element, then Constraint_Error 
is propagated; if Position does not designate an element in Container, 
then Program_Error is propagated. Otherwise, Update_Element_Preserving_Key 
uses Key to save the key value <I>K</I> of the element designated by 
Position. Update_Element_Preserving_Key then calls Process.<B>all</B> 
with that element as the argument. Program_Error is propagated if Process.<B>all</B> 
tampers with the elements of Container. Any exception raised by Process.<B>all</B> 
is propagated. After Process.<B>all</B> returns, Update_Element_Preserving_Key 
checks if <I>K</I> determines the same equivalence class as that for 
the new element; if not, the element is removed from the set and Program_Error 
is propagated.</SPAN></DIV>
<DIV Class="paranum">95.a/2</DIV>
<DIV Class="Annotations"><SPAN class="insert2"><B>Reason:&nbsp;</B>The key 
check ensures that the invariants of the set are preserved by the modification. 
The &ldquo;tampers with the elements&rdquo; check prevents data loss 
(if Element_Type is by-copy) or erroneous execution (if element type 
is unconstrained and indefinite).</SPAN>&nbsp;</DIV>
<DIV Class="paranum">96/2</DIV>
<DIV Class="CodeIndented" Style="margin-bottom: 0.9em"><SPAN class="insert2">If 
Element_Type is unconstrained and definite, then the actual Element parameter 
of Process.<B>all</B> shall be unconstrained.</SPAN></DIV>
<DIV Class="paranum">96.a/2</DIV>
<DIV Class="Annotations"><SPAN class="insert2"><B>Ramification:&nbsp;</B>This 
means that the elements cannot be directly allocated from the heap; it 
must be possible to change the discriminants of the element in place.</SPAN> 
</DIV>

<H4 Class="centered">Erroneous Execution</H4>
<DIV Class="paranum">97/2</DIV>
<DIV Class="Normal" Style="margin-bottom: 0.4em">&nbsp;{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AIs/AI-20302.TXT">AI95-00302-03</A></I>} 
<SPAN class="insert2">A Cursor value is <I>invalid</I> if any of the 
following have occurred since it was created:<SPAN STYLE="font-size: 80%">{<I>invalid 
cursor (of a set)</I>}</SPAN> <A NAME="I6836"></A><SPAN STYLE="font-size: 80%">{<I>cursor 
(invalid)</I> [partial]}</SPAN> <A NAME="I6837"></A></SPAN></DIV>
<DIV Class="paranum">98/2</DIV>
<UL Class="Bulleted"><LI TYPE=DISC><SPAN class="insert2">The set that 
contains the element it designates has been finalized;</SPAN></LI></UL>
<DIV Class="paranum">99/2</DIV>
<UL Class="Bulleted"><LI TYPE=DISC><SPAN class="insert2">The set that 
contains the element it designates has been used as the Source or Target 
of a call to Move; or</SPAN></LI></UL>
<DIV Class="paranum">100/2</DIV>
<UL Class="Bulleted"><LI TYPE=DISC><SPAN class="insert2">The element 
it designates has been deleted from the set.</SPAN></LI></UL>
<DIV Class="paranum">101/2</DIV>
<DIV Class="Normal">&nbsp;&nbsp;{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AIs/AI-20302.TXT">AI95-00302-03</A></I>} 
<SPAN class="insert2">The result of &quot;=&quot; or Has_Element is unspecified 
if these functions are called with an invalid cursor parameter.<SPAN STYLE="font-size: 80%">{<I>unspecified</I> 
[partial]}</SPAN> <A NAME="I6838"></A> Execution is erroneous if any 
other subprogram declared in Containers.Hashed_Sets or Containers.Ordered_Sets 
is called with an invalid cursor parameter.<SPAN STYLE="font-size: 80%">{<I>erroneous 
execution (cause)</I> [partial]}</SPAN> <A NAME="I6839"></A></SPAN></DIV>
<DIV Class="paranum">101.a/2</DIV>
<DIV Class="Annotations"><SPAN class="insert2"><B>Discussion:&nbsp;</B>The 
list above is intended to be exhaustive. In other cases, a cursor value 
continues to designate its original element. For instance, cursor values 
survive the insertion and deletion of other elements.</SPAN></DIV>
<DIV Class="paranum">101.b/2</DIV>
<DIV Class="Annotations"><SPAN class="insert2">While it is possible to 
check for these cases, in many cases the overhead necessary to make the 
check is substantial in time or space. Implementations are encouraged 
to check for as many of these cases as possible and raise Program_Error 
if detected.</SPAN>&nbsp;</DIV>

<H4 Class="centered">Implementation Requirements</H4>
<DIV Class="paranum">102/2</DIV>
<DIV Class="Normal">&nbsp;&nbsp;{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AIs/AI-20302.TXT">AI95-00302-03</A></I>} 
<SPAN class="insert2">No storage associated with a Set object shall be 
lost upon assignment or scope exit.</SPAN></DIV>
<DIV Class="paranum">103/2</DIV>
<DIV Class="Normal">&nbsp;&nbsp;{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AIs/AI-20302.TXT">AI95-00302-03</A></I>} 
<SPAN class="insert2">The execution of an <SPAN Class="swiss"><A HREF="AA-5-2.html#S0137">assignment_statement</A></SPAN> 
for a set shall have the effect of copying the elements from the source 
set object to the target set object.</SPAN></DIV>
<DIV Class="paranum">103.a/2</DIV>
<DIV Class="Annotations"><SPAN class="insert2"><B>Implementation Note: 
</B>An assignment of a Set is a &ldquo;deep&rdquo; copy; that is the 
elements are copied as well as the data structures. We say &ldquo;effect 
of&rdquo; in order to allow the implementation to avoid copying elements 
immediately if it wishes. For instance, an implementation that avoided 
copying until one of the containers is modified would be allowed.</SPAN> 
</DIV>

<H4 Class="centered">Implementation Advice</H4>
<DIV Class="paranum">104/2</DIV>
<DIV Class="Normal">&nbsp;&nbsp;{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AIs/AI-20302.TXT">AI95-00302-03</A></I>} 
<SPAN class="insert2">Move should not copy elements, and should minimize 
copying of internal data structures.</SPAN>&nbsp;</DIV>
<DIV Class="paranum">104.a/2</DIV>
<DIV Class="Annotations"><SPAN class="insert2"><B>Implementation Advice: 
</B></SPAN><SPAN class="insert2">Move for sets should not copy elements, 
and should minimize copying of internal data structures.</SPAN></DIV>
<DIV Class="paranum">104.b/2</DIV>
<DIV Class="Annotations"><SPAN class="insert2"><B>Implementation Note: 
</B>Usually that can be accomplished simply by moving the pointer(s) 
to the internal data structures from the Source container to the Target 
container.</SPAN>&nbsp;</DIV>
<DIV Class="paranum">105/2</DIV>
<DIV Class="Normal">&nbsp;&nbsp;{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AIs/AI-20302.TXT">AI95-00302-03</A></I>} 
<SPAN class="insert2">If an exception is propagated from a set operation, 
no storage should be lost, nor any elements removed from a set unless 
specified by the operation.</SPAN>&nbsp;</DIV>
<DIV Class="paranum">105.a/2</DIV>
<DIV Class="Annotations"><SPAN class="insert2"><B>Implementation Advice: 
</B></SPAN><SPAN class="insert2">If an exception is propagated from a 
set operation, no storage should be lost, nor any elements removed from 
a set unless specified by the operation.</SPAN></DIV>
<DIV Class="paranum">105.b/2</DIV>
<DIV Class="Annotations"><SPAN class="insert2"><B>Reason:&nbsp;</B>This is 
important so that programs can recover from errors. But we don't want 
to require heroic efforts, so we just require documentation of cases 
where this can't be accomplished.</SPAN>&nbsp;</DIV>

<H4 Class="centered">Wording Changes from Ada 95</H4>
<DIV Class="paranum">105.c/2</DIV>
<DIV Class="Annotations">{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AIs/AI-20302.TXT">AI95-00302-03</A></I>} 
<SPAN class="insert2">This description of sets is new; the extensions 
are documented with the specific packages.</SPAN>&nbsp;</DIV>

<HR>
<DIV Style="margin-top: 0.0em; margin-bottom: 0.6em"><A HREF="AA-TOC.html"><IMG SRC="cont.gif" ALT="Contents" BORDER=0></A>&nbsp;
&nbsp;<A HREF="AA-0-5.html"><IMG SRC="index.gif" ALT="Index" BORDER=0></A>&nbsp;
&nbsp;<A HREF="AA-STDS.html"><IMG SRC="lib.gif" ALT="References" BORDER=0></A>&nbsp;
&nbsp;<A HREF="AA-SRCH.html"><IMG SRC="find.gif" ALT="Search" BORDER=0></A>&nbsp;
&nbsp;<A HREF="AA-A-18-6.html"><IMG SRC="prev.gif" ALT="Previous" BORDER=0></A>&nbsp;
&nbsp;<A HREF="AA-A-18-8.html"><IMG SRC="next.gif" ALT="Next" BORDER=0></A>&nbsp;
</DIV>
<DIV Style="margin-top:0.0em"><IMG SRC="AE_logo.gif" height=100 width=113 align=right ALT="Ada-Europe">
<SPAN Style="font-size: 125%">Sponsored by <SPAN Style="font-size: 125%"><A HREF="http://www.ada-europe.org/"><B>Ada-Europe</B></A></SPAN></SPAN></DIV>
</BODY>
</HTML>
