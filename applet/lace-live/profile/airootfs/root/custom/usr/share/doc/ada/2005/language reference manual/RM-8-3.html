<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
"http://www.w3.org/TR/html4/loose.dtd">
<HTML>
<HEAD>
    <TITLE>Visibility</TITLE>
    <META http-equiv="Content-Type" content="text/html; charset=iso-8859-1">
    <META NAME="Author" CONTENT="JTC1/SC22/WG9/ARG, by Randall Brukardt, ARG Editor">
    <META NAME="GENERATOR" CONTENT="Arm_Form.Exe, Ada Reference Manual generator">
    <STYLE type="text/css">
    H4.centered {text-align: center}
    SPAN.swiss {font-family: Arial, Helvetica, sans-serif; font-size: 92%}
    SPAN.roman {font-family: "Times New Roman", Times, serif}
    DIV.paranum {float: left; font-family: Arial, Helvetica, sans-serif; font-size: 64%; width: 2.8em; margin-left: -0.4em; margin-right: -3.0em; margin-top: 0.2em}
    TT {font-family: "Courier New", monospace}
    DT {display: compact}
    DIV.Normal {font-family: "Times New Roman", Times, serif; line-height: 122%; margin-left: 1.2em; margin-bottom: 0.6em}
    DIV.Notes {font-family: "Times New Roman", Times, serif; font-size: 80%; line-height: 122%; margin-left: 3.7em; margin-bottom: 0.6em}
    DIV.NotesHeader {font-family: "Times New Roman", Times, serif; font-size: 80%; line-height: 122%; margin-left: 3.7em}
    UL.Bulleted {font-family: "Times New Roman", Times, serif; line-height: 122%; margin-left: 3.2em; margin-right: 2.0em; margin-top: 0em; margin-bottom: 0.5em}
    UL.NestedBulleted {font-family: "Times New Roman", Times, serif; line-height: 122%; margin-left: 5.2em; margin-right: 2.0em; margin-top: 0em; margin-bottom: 0.5em}
    </STYLE>
</HEAD>
<BODY TEXT="#000000" BGCOLOR="#FFFFF0" LINK="#000080" VLINK="#330033" ALINK="#0000FF">
<DIV><SPAN Style="font-size:200%; color: rgb(0,0,153)"><B>Ada Reference Manual</B></SPAN> &mdash; <A HREF="RM-TTL.html"><B>Legal Information</B></A></DIV>
<DIV Style="margin-top: 0.6em; margin-bottom: 0.0em"><A HREF="RM-TOC.html"><IMG SRC="cont.gif" ALT="Contents" BORDER=0></A>&nbsp;
&nbsp;<A HREF="RM-0-5.html"><IMG SRC="index.gif" ALT="Index" BORDER=0></A>&nbsp;
&nbsp;<A HREF="RM-STDS.html"><IMG SRC="lib.gif" ALT="References" BORDER=0></A>&nbsp;
&nbsp;<A HREF="RM-SRCH.html"><IMG SRC="find.gif" ALT="Search" BORDER=0></A>&nbsp;
&nbsp;<A HREF="RM-8-2.html"><IMG SRC="prev.gif" ALT="Previous" BORDER=0></A>&nbsp;
&nbsp;<A HREF="RM-8-3-1.html"><IMG SRC="next.gif" ALT="Next" BORDER=0></A>&nbsp;
</DIV>
<HR>
<H1>8.3 Visibility</H1>
<DIV Class="paranum">1</DIV>
<DIV Class="Normal"><A NAME="I3362"></A>The <I>visibility rules</I>, 
given below, determine which declarations are visible and directly visible 
at each place within a program. The visibility rules apply to both explicit 
and implicit declarations.&nbsp;</DIV>

<H4 Class="centered">Static Semantics</H4>
<DIV Class="paranum">2</DIV>
<DIV Class="Normal"><A NAME="I3363"></A><A NAME="I3364"></A><A NAME="I3365"></A>A 
declaration is defined to be <I>directly visible</I> at places where 
a <SPAN Class="swiss"><A HREF="RM-4-1.html#S0091">name</A></SPAN> consisting 
of only an <SPAN Class="swiss"><A HREF="RM-2-3.html#S0002">identifier</A></SPAN> 
or <SPAN Class="swiss"><A HREF="RM-6-1.html#S0155">operator_symbol</A></SPAN> 
is sufficient to denote the declaration; that is, no <SPAN Class="swiss"><A HREF="RM-4-1-3.html#S0098">selected_component</A></SPAN> 
notation or special context (such as preceding =&gt; in a named association) 
is necessary to denote the declaration. <A NAME="I3366"></A>A declaration 
is defined to be <I>visible</I> wherever it is directly visible, as well 
as at other places where some <SPAN Class="swiss"><A HREF="RM-4-1.html#S0091">name</A></SPAN> 
(such as a <SPAN Class="swiss"><A HREF="RM-4-1-3.html#S0098">selected_component</A></SPAN>) 
can denote the declaration.</DIV>
<DIV Class="paranum">3</DIV>
<DIV Class="Normal">The syntactic category <SPAN Class="swiss"><A HREF="RM-4-1.html#S0092">direct_name</A></SPAN> 
is used to indicate contexts where direct visibility is required. The 
syntactic category <SPAN Class="swiss"><A HREF="RM-4-1-3.html#S0099">selector_name</A></SPAN> 
is used to indicate contexts where visibility, but not direct visibility, 
is required.</DIV>
<DIV Class="paranum">4</DIV>
<DIV Class="Normal"><A NAME="I3367"></A><A NAME="I3368"></A>There are 
two kinds of direct visibility: <I>immediate visibility</I> and <I>use-visibility</I>. 
<A NAME="I3369"></A>A declaration is immediately visible at a place if 
it is directly visible because the place is within its immediate scope. 
<A NAME="I3370"></A>A declaration is use-visible if it is directly visible 
because of a <SPAN Class="swiss"><A HREF="RM-8-4.html#S0179">use_clause</A></SPAN> 
(see <A HREF="RM-8-4.html">8.4</A>). Both conditions can apply.</DIV>
<DIV Class="paranum">5</DIV>
<DIV Class="Normal"><A NAME="I3371"></A>A declaration can be <I>hidden</I>, 
either from direct visibility, or from all visibility, within certain 
parts of its scope. <A NAME="I3372"></A>Where <I>hidden from all visibility</I>, 
it is not visible at all (neither using a <SPAN Class="swiss"><A HREF="RM-4-1.html#S0092">direct_name</A></SPAN> 
nor a <SPAN Class="swiss"><A HREF="RM-4-1-3.html#S0099">selector_name</A></SPAN>). 
<A NAME="I3373"></A>Where <I>hidden from direct visibility</I>, only 
direct visibility is lost; visibility using a <SPAN Class="swiss"><A HREF="RM-4-1-3.html#S0099">selector_name</A></SPAN> 
is still possible.</DIV>
<DIV Class="paranum">6</DIV>
<DIV Class="Normal"><A NAME="I3374"></A>Two or more declarations are 
<I>overloaded</I> if they all have the same defining name and there is 
a place where they are all directly visible.&nbsp;</DIV>
<DIV Class="paranum">7</DIV>
<DIV Class="Normal"><A NAME="I3375"></A>The declarations of callable 
entities (including enumeration literals) are <I>overloadable</I>, meaning 
that overloading is allowed for them.&nbsp;</DIV>
<DIV Class="paranum">8</DIV>
<DIV Class="Normal"><A NAME="I3376"></A>Two declarations are <I>homographs</I> 
if they have the same defining name, and, if both are overloadable, their 
profiles are type conformant. <A NAME="I3377"></A>An inner declaration 
hides any outer homograph from direct visibility.</DIV>
<DIV Class="paranum">9/1</DIV>
<DIV Class="Normal" Style="margin-bottom: 0.4em">Two homographs are 
not generally allowed immediately within the same declarative region 
unless one <I>overrides</I> the other (see Legality Rules below). <A NAME="I3378"></A>The 
only declarations that are <A NAME="I3379"></A><I>overridable</I> are 
the implicit declarations for predefined operators and inherited primitive 
subprograms. A declaration overrides another homograph that occurs immediately 
within the same declarative region in the following cases:&nbsp;</DIV>
<DIV Class="paranum">10/1</DIV>
<UL Class="Bulleted"><LI TYPE=DISC>A declaration that is not overridable 
overrides one that is overridable, regardless of which declaration occurs 
first;&nbsp;</LI></UL>
<DIV Class="paranum">11</DIV>
<UL Class="Bulleted"><LI TYPE=DISC>The implicit declaration of an inherited 
operator overrides that of a predefined operator;&nbsp;</LI></UL>
<DIV Class="paranum">12</DIV>
<UL Class="Bulleted"><LI TYPE=DISC>An implicit declaration of an inherited 
subprogram overrides a previous implicit declaration of an inherited 
subprogram.</LI></UL>
<DIV Class="paranum">12.1/2</DIV>
<UL Class="Bulleted" Style="margin-bottom: 0.3em"><LI TYPE=DISC>If two 
or more homographs are implicitly declared at the same place:</LI></UL>
<DIV Class="paranum">12.2/2</DIV>
<UL Class="NestedBulleted"><LI TYPE=DISC>If at least one is a subprogram 
that is neither a null procedure nor an abstract subprogram, and does 
not require overriding (see <A HREF="RM-3-9-3.html">3.9.3</A>), then 
they override those that are null procedures, abstract subprograms, or 
require overriding. If more than one such homograph remains that is not 
thus overridden, then they are all hidden from all visibility.</LI></UL>
<DIV Class="paranum">12.3/2</DIV>
<UL Class="NestedBulleted"><LI TYPE=DISC>Otherwise (all are null procedures, 
abstract subprograms, or require overriding), then any null procedure 
overrides all abstract subprograms and all subprograms that require overriding; 
if more than one such homograph remains that is not thus overridden, 
then if they are all fully conformant with one another, one is chosen 
arbitrarily; if not, they are all hidden from all visibility. <A NAME="I3380"></A></LI></UL>
<DIV Class="paranum">13</DIV>
<UL Class="Bulleted"><LI TYPE=DISC>For an implicit declaration of a primitive 
subprogram in a generic unit, there is a copy of this declaration in 
an instance. However, a whole new set of primitive subprograms is implicitly 
declared for each type declared within the visible part of the instance. 
These new declarations occur immediately after the type declaration, 
and override the copied ones. The copied ones can be called only from 
within the instance; the new ones can be called only from outside the 
instance, although for tagged types, the body of a new one can be executed 
by a call to an old one.&nbsp;</LI></UL>
<DIV Class="paranum">14</DIV>
<DIV Class="Normal" Style="margin-bottom: 0.4em"><A NAME="I3381"></A><A NAME="I3382"></A>A 
declaration is visible within its scope, except where hidden from all 
visibility, as follows:&nbsp;</DIV>
<DIV Class="paranum">15</DIV>
<UL Class="Bulleted"><LI TYPE=DISC><A NAME="I3383"></A>An overridden 
declaration is hidden from all visibility within the scope of the overriding 
declaration.&nbsp;</LI></UL>
<DIV Class="paranum">16</DIV>
<UL Class="Bulleted" Style="margin-bottom: 0.3em"><LI TYPE=DISC><A NAME="I3384"></A>A 
declaration is hidden from all visibility until the end of the declaration, 
except:&nbsp;</LI></UL>
<DIV Class="paranum">17</DIV>
<UL Class="NestedBulleted"><LI TYPE=DISC>For a record type or record 
extension, the declaration is hidden from all visibility only until the 
reserved word <B>record</B>;</LI></UL>
<DIV Class="paranum">18/2</DIV>
<UL Class="NestedBulleted"><LI TYPE=DISC>For a <SPAN Class="swiss"><A HREF="RM-7-1.html#S0173">package_declaration</A></SPAN>, 
<SPAN Class="swiss"><A HREF="RM-12-1.html#S0254">generic_package_declaration</A></SPAN>, 
or <SPAN Class="swiss"><A HREF="RM-6-3.html#S0162">subprogram_body</A></SPAN>, 
the declaration is hidden from all visibility only until the reserved 
word <B>is</B> of the declaration;&nbsp;</LI></UL>
<DIV Class="paranum">18.1/2</DIV>
<UL Class="NestedBulleted"><LI TYPE=DISC>For a task declaration or protected 
declaration, the declaration is hidden from all visibility only until 
the reserved word <B>with</B> of the declaration if there is one, or 
the reserved word <B>is</B> of the declaration if there is no <B>with</B>.</LI></UL>
<DIV Class="paranum">19</DIV>
<UL Class="Bulleted"><LI TYPE=DISC><A NAME="I3385"></A>If the completion 
of a declaration is a declaration, then within the scope of the completion, 
the first declaration is hidden from all visibility. Similarly, a <SPAN Class="swiss"><A HREF="RM-3-7.html#S0062">discriminant_specification</A></SPAN> 
or <SPAN Class="swiss"><A HREF="RM-6-1.html#S0160">parameter_specification</A></SPAN> 
is hidden within the scope of a corresponding <SPAN Class="swiss"><A HREF="RM-3-7.html#S0062">discriminant_specification</A></SPAN> 
or <SPAN Class="swiss"><A HREF="RM-6-1.html#S0160">parameter_specification</A></SPAN> 
of a corresponding completion, or of a corresponding <SPAN Class="swiss"><A HREF="RM-9-5-2.html#S0201">accept_statement</A></SPAN>. 
</LI></UL>
<DIV Class="paranum">20/2</DIV>
<UL Class="Bulleted"><LI TYPE=DISC><A NAME="I3386"></A>The declaration 
of a library unit (including a <SPAN Class="swiss"><A HREF="RM-10-1-1.html#S0232">library_unit_renaming_declaration</A></SPAN>) 
is hidden from all visibility at places outside its declarative region 
that are not within the scope of a <SPAN Class="swiss"><A HREF="RM-10-1-2.html#S0239">nonlimited_with_clause</A></SPAN> 
that mentions it. The limited view of a library package is hidden from 
all visibility at places that are not within the scope of a <SPAN Class="swiss"><A HREF="RM-10-1-2.html#S0238">limited_with_clause</A></SPAN> 
that mentions it; in addition, the limited view is hidden from all visibility 
within the declarative region of the package, as well as within the scope 
of any <SPAN Class="swiss"><A HREF="RM-10-1-2.html#S0239">nonlimited_with_clause</A></SPAN> 
that mentions the package. Where the declaration of the limited view 
of a package is visible, any name that denotes the package denotes the 
limited view, including those provided by a package renaming.</LI></UL>
<DIV Class="paranum">20.1/2</DIV>
<UL Class="Bulleted"><LI TYPE=DISC>For each declaration or renaming of 
a generic unit as a child of some parent generic package, there is a 
corresponding declaration nested immediately within each instance of 
the parent. Such a nested declaration is hidden from all visibility except 
at places that are within the scope of a <SPAN Class="swiss"><A HREF="RM-10-1-2.html#S0237">with_clause</A></SPAN> 
that mentions the child.</LI></UL>
<DIV Class="paranum">21</DIV>
<DIV Class="Normal" Style="margin-bottom: 0.4em"><A NAME="I3387"></A><A NAME="I3388"></A><A NAME="I3389"></A><A NAME="I3390"></A>A 
declaration with a <SPAN Class="swiss"><A HREF="RM-3-1.html#S0022">defining_identifier</A></SPAN> 
or <SPAN Class="swiss"><A HREF="RM-6-1.html#S0156">defining_operator_symbol</A></SPAN> 
is immediately visible (and hence directly visible) within its immediate 
scope <A NAME="I3391"></A> except where hidden from direct visibility, 
as follows:&nbsp;</DIV>
<DIV Class="paranum">22</DIV>
<UL Class="Bulleted"><LI TYPE=DISC><A NAME="I3392"></A>A declaration 
is hidden from direct visibility within the immediate scope of a homograph 
of the declaration, if the homograph occurs within an inner declarative 
region;</LI></UL>
<DIV Class="paranum">23</DIV>
<UL Class="Bulleted"><LI TYPE=DISC><A NAME="I3393"></A>A declaration 
is also hidden from direct visibility where hidden from all visibility. 
</LI></UL>
<DIV Class="paranum">23.1/2</DIV>
<DIV Class="Normal">&nbsp;&nbsp;&nbsp;<A NAME="I3394"></A>An <SPAN Class="swiss"><A HREF="RM-13-3.html#S0286">attribute_definition_clause</A></SPAN> 
is <I>visible</I> everywhere within its scope.</DIV>

<H4 Class="centered">Name Resolution Rules</H4>
<DIV Class="paranum">24</DIV>
<DIV Class="Normal"><A NAME="I3395"></A>A <SPAN Class="swiss"><A HREF="RM-4-1.html#S0092">direct_name</A></SPAN> 
shall resolve to denote a directly visible declaration whose defining 
name is the same as the <SPAN Class="swiss"><A HREF="RM-4-1.html#S0092">direct_name</A></SPAN>. 
<A NAME="I3396"></A>A <SPAN Class="swiss"><A HREF="RM-4-1-3.html#S0099">selector_name</A></SPAN> 
shall resolve to denote a visible declaration whose defining name is 
the same as the <SPAN Class="swiss"><A HREF="RM-4-1-3.html#S0099">selector_name</A></SPAN>. 
</DIV>
<DIV Class="paranum">25</DIV>
<DIV Class="Normal">These rules on visibility and direct visibility do 
not apply in a <SPAN Class="swiss"><A HREF="RM-10-1-2.html#S0235">context_clause</A></SPAN>, 
a <SPAN Class="swiss"><A HREF="RM-10-1-1.html#S0234">parent_unit_name</A></SPAN>, 
or a <SPAN Class="swiss"><A HREF="RM-2-8.html#S0019">pragma</A></SPAN> 
that appears at the place of a <SPAN Class="swiss"><A HREF="RM-10-1-1.html#S0229">compilation_unit</A></SPAN>. 
For those contexts, see the rules in <A HREF="RM-10-1-6.html">10.1.6</A>, 
&ldquo;<A HREF="RM-10-1-6.html">Environment-Level Visibility Rules</A>&rdquo;. 
</DIV>

<H4 Class="centered">Legality Rules</H4>
<DIV Class="paranum">26/2</DIV>
<DIV Class="Normal">&nbsp;A non-overridable declaration is illegal if there 
is a homograph occurring immediately within the same declarative region 
that is visible at the place of the declaration, and is not hidden from 
all visibility by the non-overridable declaration. In addition, a type 
extension is illegal if somewhere within its immediate scope it has two 
visible components with the same name. Similarly, the <SPAN Class="swiss"><A HREF="RM-10-1-2.html#S0235">context_clause</A></SPAN> 
for a compilation unit is illegal if it mentions (in a <SPAN Class="swiss"><A HREF="RM-10-1-2.html#S0237">with_clause</A></SPAN>) 
some library unit, and there is a homograph of the library unit that 
is visible at the place of the compilation unit, and the homograph and 
the mentioned library unit are both declared immediately within the same 
declarative region.<A NAME="I3397"></A> These rules also apply to dispatching 
operations declared in the visible part of an instance of a generic unit. 
However, they do not apply to other overloadable declarations in an instance; 
such declarations may have type conformant profiles in the instance, 
so long as the corresponding declarations in the generic were not type 
conformant. <A NAME="I3398"></A></DIV>
<DIV Class="NotesHeader">NOTES</DIV>
<DIV Class="paranum">27</DIV>
<DIV Class="Notes">5&nbsp;&nbsp;Visibility for compilation units follows 
from the definition of the environment in <A HREF="RM-10-1-4.html">10.1.4</A>, 
except that it is necessary to apply a <SPAN Class="swiss"><A HREF="RM-10-1-2.html#S0237">with_clause</A></SPAN> 
to obtain visibility to a <SPAN Class="swiss"><A HREF="RM-10-1-1.html#S0231">library_unit_declaration</A></SPAN> 
or <SPAN Class="swiss"><A HREF="RM-10-1-1.html#S0232">library_unit_renaming_declaration</A></SPAN>.</DIV>
<DIV Class="paranum">28</DIV>
<DIV Class="Notes">6&nbsp;&nbsp;In addition to the visibility rules given 
above, the meaning of the occurrence of a <SPAN Class="swiss"><A HREF="RM-4-1.html#S0092">direct_name</A></SPAN> 
or <SPAN Class="swiss"><A HREF="RM-4-1-3.html#S0099">selector_name</A></SPAN> 
at a given place in the text can depend on the overloading rules (see 
<A HREF="RM-8-6.html">8.6</A>).</DIV>
<DIV Class="paranum">29</DIV>
<DIV Class="Notes">7&nbsp;&nbsp;Not all contexts where an <SPAN Class="swiss"><A HREF="RM-2-3.html#S0002">identifier</A></SPAN>, 
<SPAN Class="swiss"><A HREF="RM-2-5.html#S0015">character_literal</A></SPAN>, 
or <SPAN Class="swiss"><A HREF="RM-6-1.html#S0155">operator_symbol</A></SPAN> 
are allowed require visibility of a corresponding declaration. Contexts 
where visibility is not required are identified by using one of these 
three syntactic categories directly in a syntax rule, rather than using 
<SPAN Class="swiss"><A HREF="RM-4-1.html#S0092">direct_name</A></SPAN> 
or <SPAN Class="swiss"><A HREF="RM-4-1-3.html#S0099">selector_name</A></SPAN>. 
</DIV>
<P><BR><BR></P>
<HR>
<P><BR></P>

<HR>
<DIV Style="margin-top: 0.0em; margin-bottom: 0.6em"><A HREF="RM-TOC.html"><IMG SRC="cont.gif" ALT="Contents" BORDER=0></A>&nbsp;
&nbsp;<A HREF="RM-0-5.html"><IMG SRC="index.gif" ALT="Index" BORDER=0></A>&nbsp;
&nbsp;<A HREF="RM-STDS.html"><IMG SRC="lib.gif" ALT="References" BORDER=0></A>&nbsp;
&nbsp;<A HREF="RM-SRCH.html"><IMG SRC="find.gif" ALT="Search" BORDER=0></A>&nbsp;
&nbsp;<A HREF="RM-8-2.html"><IMG SRC="prev.gif" ALT="Previous" BORDER=0></A>&nbsp;
&nbsp;<A HREF="RM-8-3-1.html"><IMG SRC="next.gif" ALT="Next" BORDER=0></A>&nbsp;
</DIV>
<DIV Style="margin-top:0.0em"><IMG SRC="AE_logo.gif" height=100 width=113 align=right ALT="Ada-Europe">
<SPAN Style="vertical-align: middle">Sponsored by <SPAN Style="font-size: 125%"><A HREF="http://www.ada-europe.org/"><B>Ada-Europe</B></A></SPAN></SPAN></DIV>
</BODY>
</HTML>
