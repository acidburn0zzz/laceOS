<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
"http://www.w3.org/TR/html4/loose.dtd">
<HTML>
<HEAD>
    <TITLE>Consistency of a Distributed System</TITLE>
    <META http-equiv="Content-Type" content="text/html; charset=iso-8859-1">
    <META NAME="Author" CONTENT="JTC1/SC22/WG9/ARG, by Randall Brukardt, ARG Editor">
    <META NAME="GENERATOR" CONTENT="Arm_Form.Exe, Ada Reference Manual generator">
    <STYLE type="text/css">
    H4.centered {text-align: center}
    SPAN.swiss {font-family: Arial, Helvetica, sans-serif; font-size: 92%}
    SPAN.roman {font-family: "Times New Roman", Times, serif}
    DIV.paranum {float: left; font-family: Arial, Helvetica, sans-serif; font-size: 64%; width: 2.8em; margin-left: -0.4em; margin-right: -3.0em; margin-top: 0.2em}
    TT {font-family: "Courier New", monospace}
    DT {display: compact}
    SPAN.insert1 {text-decoration: underline; color: rgb(0,51,51) }
    SPAN.delete1 {text-decoration: line-through; color: rgb(0,51,51) }
    SPAN.insert2 {text-decoration: underline; color: rgb(0,102,0) }
    SPAN.delete2 {text-decoration: line-through; color: rgb(0,102,0) }
    DIV.Normal {font-family: "Times New Roman", Times, serif; line-height: 122%; margin-left: 1.2em; margin-bottom: 0.6em}
    DIV.Annotations {font-family: "Times New Roman", Times, serif; font-size: 80%; line-height: 122%; margin-left: 6.2em; margin-bottom: 0.6em}
    DIV.Hanging-Body {font-family: "Times New Roman", Times, serif; line-height: 122%; margin-left: 7.2em; margin-top: 0em; margin-bottom: 0.6em}
    DIV.Hanging-Term {float: left; font-family: "Times New Roman", Times, serif; line-height: 122%; margin-left: 1.2em; margin-top: 0em; margin-bottom: 0em}
    </STYLE>
</HEAD>
<BODY TEXT="#000000" BGCOLOR="#FFFFF0" LINK="#000080" VLINK="#330033" ALINK="#0000FF">
<DIV><B><SPAN Style="font-size:200%; color: rgb(0,51,153)">Annotated</SPAN><SPAN Style="font-size:200%; color: rgb(0,0,102)">&nbsp;Ada Reference Manual</SPAN></B> &mdash; <A HREF="AA-TTL.html"><B>Legal Information</B></A></DIV>
<DIV Style="margin-top: 0.6em; margin-bottom: 0.0em"><A HREF="AA-TOC.html"><IMG SRC="cont.gif" ALT="Contents" BORDER=0></A>&nbsp;
&nbsp;<A HREF="AA-0-5.html"><IMG SRC="index.gif" ALT="Index" BORDER=0></A>&nbsp;
&nbsp;<A HREF="AA-STDS.html"><IMG SRC="lib.gif" ALT="References" BORDER=0></A>&nbsp;
&nbsp;<A HREF="AA-SRCH.html"><IMG SRC="find.gif" ALT="Search" BORDER=0></A>&nbsp;
&nbsp;<A HREF="AA-E-2-3.html"><IMG SRC="prev.gif" ALT="Previous" BORDER=0></A>&nbsp;
&nbsp;<A HREF="AA-E-4.html"><IMG SRC="next.gif" ALT="Next" BORDER=0></A>&nbsp;
</DIV>
<HR>
<H1>E.3 Consistency of a Distributed System</H1>
<DIV Class="paranum">1</DIV>
<DIV Class="Normal">[This clause defines attributes and rules associated 
with verifying the consistency of a distributed program. ]</DIV>

<H4 Class="centered">Language Design Principles</H4>
<DIV Class="paranum">1.a</DIV>
<DIV Class="Annotations">The rules guarantee that remote call interface 
and shared passive packages are consistent among all partitions prior 
to the execution of a distributed program, so that the semantics of the 
distributed program are well defined.</DIV>

<H4 Class="centered">Static Semantics</H4>
<DIV Class="paranum">2/1</DIV>
<DIV Class="Normal" Style="margin-bottom: 0.4em">For a <SPAN class="insert1"><SPAN Class="swiss"><A HREF="AA-4-1.html#S0093">prefix</A></SPAN></SPAN><SPAN class="delete1">&nbsp;prefix</SPAN> 
P that statically denotes a program unit, the following attributes are 
defined:&nbsp;</DIV>
<DIV Class="paranum">3</DIV>
<DIV Class="Hanging-Term">P'Version</DIV><DIV Class="Hanging-Body">
<A NAME="I7764"></A><A NAME="I7765"></A>Yields a value of the predefined 
type String that identifies the version of the compilation unit that 
contains the declaration of the program unit.</DIV>
<DIV Class="paranum">4</DIV>
<DIV Class="Hanging-Term">P'Body_Version</DIV><DIV Class="Hanging-Body"><BR clear="left">
<A NAME="I7766"></A><A NAME="I7767"></A>Yields a value of the predefined 
type String that identifies the version of the compilation unit that 
contains the body (but not any subunits) of the program unit.&nbsp;</DIV>
<DIV Class="paranum">5/1</DIV>
<DIV Class="Normal">{<I><A HREF="defect1.html#8652/0084">8652/0084</A></I>} 
{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AIs/AI-00104.TXT">AI95-00104-01</A></I>} 
<SPAN STYLE="font-size: 80%">{<I>version (of a compilation unit)</I>}</SPAN> 
<A NAME="I7768"></A>The <I>version</I> of a compilation unit changes 
whenever the <SPAN class="delete1">version changes for any&nbsp;</SPAN>compilation 
unit <SPAN class="insert1">changes in a semantically significant way. 
This International Standard does not define the exact meaning of &quot;semantically 
significant&quot;</SPAN><SPAN class="delete1">&nbsp;on which it depends semantically. 
The version also changes whenever the compilation unit itself changes 
in a semantically significant way</SPAN>. It is <SPAN class="insert1">unspecified</SPAN><SPAN class="delete1">&nbsp;implementation 
defined</SPAN> whether there are other events (such as recompilation) 
that result in the version of a compilation unit changing. <SPAN class="insert1"><SPAN STYLE="font-size: 80%">{<I>unspecified</I> 
[partial]}</SPAN> <A NAME="I7769"></A></SPAN></DIV>
<DIV Class="paranum">5.a/1</DIV>
<DIV Class="Annotations"><SPAN STYLE="font-size: 80%"><I>This paragraph 
was deleted.</I></SPAN><SPAN class="delete1"><B>Implementation defined: 
</B></SPAN><SPAN class="delete1">Events that cause the version of a compilation 
unit to change.</SPAN></DIV>
<DIV Class="paranum">5.1/1</DIV>
<DIV Class="Normal">&nbsp;&nbsp;{<I><A HREF="defect1.html#8652/0084">8652/0084</A></I>} 
<SPAN class="insert1"></SPAN>{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AIs/AI-00104.TXT">AI95-00104-01</A></I>} 
<SPAN class="insert1">If P is not a library unit, and P has no completion, 
then P'Body_Version returns the Body_Version of the innermost program 
unit enclosing the declaration of P. If P is a library unit, and P has 
no completion, then P'Body_Version returns a value that is different 
from Body_Version of any version of P that has a completion.</SPAN>&nbsp;</DIV>

<H4 Class="centered">Bounded (Run-Time) Errors</H4>
<DIV Class="paranum">6</DIV>
<DIV Class="Normal"><SPAN STYLE="font-size: 80%">{<I>bounded error (cause)</I> 
[partial]}</SPAN> <A NAME="I7770"></A><SPAN STYLE="font-size: 80%">{<I>unit 
consistency</I>}</SPAN> <A NAME="I7771"></A>In a distributed program, 
a library unit is <I>consistent</I> if the same version of its declaration 
is used throughout. It is a bounded error to elaborate a partition of 
a distributed program that contains a compilation unit that depends on 
a different version of the declaration of a shared passive or RCI library 
unit than that included in the partition to which the shared passive 
or RCI library unit was assigned. <SPAN STYLE="font-size: 80%">{<I>Program_Error 
(raised by failure of run-time check)</I>}</SPAN> <A NAME="I7772"></A>As 
a result of this error, Program_Error can be raised in one or both partitions 
during elaboration; in any case, the partitions become inaccessible to 
one another.&nbsp;</DIV>
<DIV Class="paranum">6.a</DIV>
<DIV Class="Annotations"><B>Ramification:&nbsp;</B>Because a version changes 
if anything on which it depends undergoes a version change, requiring 
consistency for shared passive and remote call interface library units 
is sufficient to ensure consistency for the declared pure and remote 
types library units that define the types used for the objects and parameters 
through which interpartition communication takes place.</DIV>
<DIV Class="paranum">6.b</DIV>
<DIV Class="Annotations">Note that we do not require matching Body_Versions; 
it is irrelevant for shared passive and remote call interface packages, 
since only one copy of their body exists in a distributed program (in 
the absence of implicit replication), and we allow the bodies to differ 
for declared pure and remote types packages from partition to partition, 
presuming that the differences are due to required error corrections 
that took place during the execution of a long-running distributed program. 
The Body_Version attribute provides a means for performing stricter consistency 
checks.&nbsp;</DIV>

<H4 Class="centered">Wording Changes from Ada 95</H4>
<DIV Class="paranum">6.c/2</DIV>
<DIV Class="Annotations">{<I><A HREF="defect1.html#8652/0084">8652/0084</A></I>} 
<SPAN class="insert2"></SPAN>{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AIs/AI-00104.TXT">AI95-00104-01</A></I>} 
<SPAN class="insert2"><B>Corrigendum:</B> Clarified the meaning of 'Version 
and 'Body_Version.</SPAN>&nbsp;</DIV>

<HR>
<DIV Style="margin-top: 0.0em; margin-bottom: 0.6em"><A HREF="AA-TOC.html"><IMG SRC="cont.gif" ALT="Contents" BORDER=0></A>&nbsp;
&nbsp;<A HREF="AA-0-5.html"><IMG SRC="index.gif" ALT="Index" BORDER=0></A>&nbsp;
&nbsp;<A HREF="AA-STDS.html"><IMG SRC="lib.gif" ALT="References" BORDER=0></A>&nbsp;
&nbsp;<A HREF="AA-SRCH.html"><IMG SRC="find.gif" ALT="Search" BORDER=0></A>&nbsp;
&nbsp;<A HREF="AA-E-2-3.html"><IMG SRC="prev.gif" ALT="Previous" BORDER=0></A>&nbsp;
&nbsp;<A HREF="AA-E-4.html"><IMG SRC="next.gif" ALT="Next" BORDER=0></A>&nbsp;
</DIV>
<DIV Style="margin-top:0.0em"><IMG SRC="AE_logo.gif" height=100 width=113 align=right ALT="Ada-Europe">
<SPAN Style="font-size: 125%">Sponsored by <SPAN Style="font-size: 125%"><A HREF="http://www.ada-europe.org/"><B>Ada-Europe</B></A></SPAN></SPAN></DIV>
</BODY>
</HTML>
