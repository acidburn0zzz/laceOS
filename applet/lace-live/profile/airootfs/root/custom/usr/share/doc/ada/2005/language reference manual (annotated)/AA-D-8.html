<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
"http://www.w3.org/TR/html4/loose.dtd">
<HTML>
<HEAD>
    <TITLE>Monotonic Time</TITLE>
    <META http-equiv="Content-Type" content="text/html; charset=iso-8859-1">
    <META NAME="Author" CONTENT="JTC1/SC22/WG9/ARG, by Randall Brukardt, ARG Editor">
    <META NAME="GENERATOR" CONTENT="Arm_Form.Exe, Ada Reference Manual generator">
    <STYLE type="text/css">
    H4.centered {text-align: center}
    SPAN.swiss {font-family: Arial, Helvetica, sans-serif; font-size: 92%}
    SPAN.roman {font-family: "Times New Roman", Times, serif}
    DIV.paranum {float: left; font-family: Arial, Helvetica, sans-serif; font-size: 64%; width: 2.8em; margin-left: -0.4em; margin-right: -3.0em; margin-top: 0.2em}
    TT {font-family: "Courier New", monospace}
    DT {display: compact}
    SPAN.insert1 {text-decoration: underline; color: rgb(0,51,51) }
    SPAN.delete1 {text-decoration: line-through; color: rgb(0,51,51) }
    SPAN.insert2 {text-decoration: underline; color: rgb(0,102,0) }
    SPAN.delete2 {text-decoration: line-through; color: rgb(0,102,0) }
    DIV.Normal {font-family: "Times New Roman", Times, serif; line-height: 122%; margin-left: 1.2em; margin-bottom: 0.6em}
    DIV.Annotations {font-family: "Times New Roman", Times, serif; font-size: 80%; line-height: 122%; margin-left: 6.2em; margin-bottom: 0.6em}
    DIV.Notes {font-family: "Times New Roman", Times, serif; font-size: 80%; line-height: 122%; margin-left: 3.7em; margin-bottom: 0.6em}
    DIV.NotesHeader {font-family: "Times New Roman", Times, serif; font-size: 80%; line-height: 122%; margin-left: 3.7em}
    DIV.CodeIndented {font-family: "Times New Roman", Times, serif; line-height: 122%; margin-left: 5.2em; margin-bottom: 0.6em}
    DIV.Examples {font-family: "Courier New", monospace; font-size: 90%; line-height: 122%; margin-left: 3.4em; margin-bottom: 0.6em}
    UL.Bulleted {font-family: "Times New Roman", Times, serif; line-height: 122%; margin-left: 3.2em; margin-right: 2.0em; margin-top: 0em; margin-bottom: 0.5em}
    </STYLE>
</HEAD>
<BODY TEXT="#000000" BGCOLOR="#FFFFF0" LINK="#000080" VLINK="#330033" ALINK="#0000FF">
<DIV><B><SPAN Style="font-size:200%; color: rgb(0,51,153)">Annotated</SPAN><SPAN Style="font-size:200%; color: rgb(0,0,102)">&nbsp;Ada Reference Manual</SPAN></B> &mdash; <A HREF="AA-TTL.html"><B>Legal Information</B></A></DIV>
<DIV Style="margin-top: 0.6em; margin-bottom: 0.0em"><A HREF="AA-TOC.html"><IMG SRC="cont.gif" ALT="Contents" BORDER=0></A>&nbsp;
&nbsp;<A HREF="AA-0-5.html"><IMG SRC="index.gif" ALT="Index" BORDER=0></A>&nbsp;
&nbsp;<A HREF="AA-STDS.html"><IMG SRC="lib.gif" ALT="References" BORDER=0></A>&nbsp;
&nbsp;<A HREF="AA-SRCH.html"><IMG SRC="find.gif" ALT="Search" BORDER=0></A>&nbsp;
&nbsp;<A HREF="AA-D-7.html"><IMG SRC="prev.gif" ALT="Previous" BORDER=0></A>&nbsp;
&nbsp;<A HREF="AA-D-9.html"><IMG SRC="next.gif" ALT="Next" BORDER=0></A>&nbsp;
</DIV>
<HR>
<H1>D.8 Monotonic Time</H1>
<DIV Class="paranum">1</DIV>
<DIV Class="Normal">[This clause specifies a high-resolution, monotonic 
clock package.]&nbsp;</DIV>

<H4 Class="centered">Static Semantics</H4>
<DIV Class="paranum">2</DIV>
<DIV Class="Normal" Style="margin-bottom: 0.4em">The following language-defined 
library package exists:&nbsp;</DIV>
<DIV Class="paranum">3</DIV>
<DIV Class="Examples"><B>package</B>&nbsp;Ada.Real_Time&nbsp;<B>is</B><A NAME="I7565"></A></DIV>
<DIV Class="paranum">4</DIV>
<DIV Class="Examples">&nbsp;&nbsp;<B>type</B>&nbsp;<A NAME="I7566"></A>Time&nbsp;<B>is</B>&nbsp;<B>private</B>;<BR>
&nbsp;&nbsp;<A NAME="I7567"></A>Time_First&nbsp;:&nbsp;<B>constant</B>&nbsp;Time;<BR>
&nbsp;&nbsp;<A NAME="I7568"></A>Time_Last&nbsp;:&nbsp;<B>constant</B>&nbsp;Time;<BR>
&nbsp;&nbsp;<A NAME="I7569"></A>Time_Unit&nbsp;:&nbsp;<B>constant</B>&nbsp;:=&nbsp;<SPAN Class="roman"><I>implementation-defined-real-number</I></SPAN>;</DIV>
<DIV Class="paranum">5</DIV>
<DIV Class="Examples">&nbsp;&nbsp;<B>type</B>&nbsp;<A NAME="I7570"></A>Time_Span&nbsp;<B>is</B>&nbsp;<B>private</B>;<BR>
&nbsp;&nbsp;<A NAME="I7571"></A>Time_Span_First&nbsp;:&nbsp;<B>constant</B>&nbsp;Time_Span;<BR>
&nbsp;&nbsp;<A NAME="I7572"></A>Time_Span_Last&nbsp;:&nbsp;<B>constant</B>&nbsp;Time_Span;<BR>
&nbsp;&nbsp;<A NAME="I7573"></A>Time_Span_Zero&nbsp;:&nbsp;<B>constant</B>&nbsp;Time_Span;<BR>
&nbsp;&nbsp;<A NAME="I7574"></A>Time_Span_Unit&nbsp;:&nbsp;<B>constant</B>&nbsp;Time_Span;</DIV>
<DIV Class="paranum">6</DIV>
<DIV Class="Examples">&nbsp;&nbsp;<A NAME="I7575"></A>Tick&nbsp;:&nbsp;<B>constant</B>&nbsp;Time_Span;<BR>
&nbsp;&nbsp;<B>function</B>&nbsp;<A NAME="I7576"></A>Clock&nbsp;<B>return</B>&nbsp;Time;</DIV>
<DIV Class="paranum">7</DIV>
<DIV Class="Examples">&nbsp;&nbsp;<B>function</B>&nbsp;&quot;+&quot;&nbsp;(Left&nbsp;:&nbsp;Time;&nbsp;Right&nbsp;:&nbsp;Time_Span)&nbsp;<B>return</B>&nbsp;Time;<BR>
&nbsp;&nbsp;<B>function</B>&nbsp;&quot;+&quot;&nbsp;(Left&nbsp;:&nbsp;Time_Span;&nbsp;Right&nbsp;:&nbsp;Time)&nbsp;<B>return</B>&nbsp;Time;<BR>
&nbsp;&nbsp;<B>function</B>&nbsp;&quot;-&quot;&nbsp;(Left&nbsp;:&nbsp;Time;&nbsp;Right&nbsp;:&nbsp;Time_Span)&nbsp;<B>return</B>&nbsp;Time;<BR>
&nbsp;&nbsp;<B>function</B>&nbsp;&quot;-&quot;&nbsp;(Left&nbsp;:&nbsp;Time;&nbsp;Right&nbsp;:&nbsp;Time)&nbsp;<B>return</B>&nbsp;Time_Span;</DIV>
<DIV Class="paranum">8</DIV>
<DIV Class="Examples">&nbsp;&nbsp;<B>function</B>&nbsp;&quot;&lt;&quot;&nbsp;(Left,&nbsp;Right&nbsp;:&nbsp;Time)&nbsp;<B>return</B>&nbsp;Boolean;<BR>
&nbsp;&nbsp;<B>function</B>&nbsp;&quot;&lt;=&quot;(Left,&nbsp;Right&nbsp;:&nbsp;Time)&nbsp;<B>return</B>&nbsp;Boolean;<BR>
&nbsp;&nbsp;<B>function</B>&nbsp;&quot;&gt;&quot;&nbsp;(Left,&nbsp;Right&nbsp;:&nbsp;Time)&nbsp;<B>return</B>&nbsp;Boolean;<BR>
&nbsp;&nbsp;<B>function</B>&nbsp;&quot;&gt;=&quot;(Left,&nbsp;Right&nbsp;:&nbsp;Time)&nbsp;<B>return</B>&nbsp;Boolean;</DIV>
<DIV Class="paranum">9</DIV>
<DIV Class="Examples">&nbsp;&nbsp;<B>function</B>&nbsp;&quot;+&quot;&nbsp;(Left,&nbsp;Right&nbsp;:&nbsp;Time_Span)&nbsp;<B>return</B>&nbsp;Time_Span;<BR>
&nbsp;&nbsp;<B>function</B>&nbsp;&quot;-&quot;&nbsp;(Left,&nbsp;Right&nbsp;:&nbsp;Time_Span)&nbsp;<B>return</B>&nbsp;Time_Span;<BR>
&nbsp;&nbsp;<B>function</B>&nbsp;&quot;-&quot;&nbsp;(Right&nbsp;:&nbsp;Time_Span)&nbsp;<B>return</B>&nbsp;Time_Span;<BR>
&nbsp;&nbsp;<B>function</B>&nbsp;&quot;*&quot;&nbsp;(Left&nbsp;:&nbsp;Time_Span;&nbsp;Right&nbsp;:&nbsp;Integer)&nbsp;<B>return</B>&nbsp;Time_Span;<BR>
&nbsp;&nbsp;<B>function</B>&nbsp;&quot;*&quot;&nbsp;(Left&nbsp;:&nbsp;Integer;&nbsp;Right&nbsp;:&nbsp;Time_Span)&nbsp;<B>return</B>&nbsp;Time_Span;<BR>
&nbsp;&nbsp;<B>function</B>&nbsp;&quot;/&quot;&nbsp;(Left,&nbsp;Right&nbsp;:&nbsp;Time_Span)&nbsp;<B>return</B>&nbsp;Integer;<BR>
&nbsp;&nbsp;<B>function</B>&nbsp;&quot;/&quot;&nbsp;(Left&nbsp;:&nbsp;Time_Span;&nbsp;Right&nbsp;:&nbsp;Integer)&nbsp;<B>return</B>&nbsp;Time_Span;</DIV>
<DIV Class="paranum">10</DIV>
<DIV Class="Examples">&nbsp;&nbsp;<B>function</B>&nbsp;&quot;<B>abs</B>&quot;(Right&nbsp;:&nbsp;Time_Span)&nbsp;<B>return</B>&nbsp;Time_Span;</DIV>
<DIV Class="paranum">11/1</DIV>
<DIV Class="Examples"><SPAN STYLE="font-size: 80%"><I>This paragraph 
was deleted.</I></SPAN><SPAN class="delete1">&nbsp;</SPAN></DIV>
<DIV Class="paranum">12</DIV>
<DIV Class="Examples">&nbsp;&nbsp;<B>function</B>&nbsp;&quot;&lt;&quot;&nbsp;(Left,&nbsp;Right&nbsp;:&nbsp;Time_Span)&nbsp;<B>return</B>&nbsp;Boolean;<BR>
&nbsp;&nbsp;<B>function</B>&nbsp;&quot;&lt;=&quot;(Left,&nbsp;Right&nbsp;:&nbsp;Time_Span)&nbsp;<B>return</B>&nbsp;Boolean;<BR>
&nbsp;&nbsp;<B>function</B>&nbsp;&quot;&gt;&quot;&nbsp;(Left,&nbsp;Right&nbsp;:&nbsp;Time_Span)&nbsp;<B>return</B>&nbsp;Boolean;<BR>
&nbsp;&nbsp;<B>function</B>&nbsp;&quot;&gt;=&quot;(Left,&nbsp;Right&nbsp;:&nbsp;Time_Span)&nbsp;<B>return</B>&nbsp;Boolean;</DIV>
<DIV Class="paranum">13</DIV>
<DIV Class="Examples">&nbsp;&nbsp;<B>function</B>&nbsp;<A NAME="I7577"></A>To_Duration&nbsp;(TS&nbsp;:&nbsp;Time_Span)&nbsp;<B>return</B>&nbsp;Duration;<BR>
&nbsp;&nbsp;<B>function</B>&nbsp;<A NAME="I7578"></A>To_Time_Span&nbsp;(D&nbsp;:&nbsp;Duration)&nbsp;<B>return</B>&nbsp;Time_Span;</DIV>
<DIV Class="paranum">14/2</DIV>
<DIV Class="Examples">{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AIs/AI-00386.TXT">AI95-00386-01</A></I>} 
&nbsp;&nbsp;<B>function</B>&nbsp;<A NAME="I7579"></A>Nanoseconds&nbsp;&nbsp;(NS&nbsp;:&nbsp;Integer)&nbsp;<B>return</B>&nbsp;Time_Span;<BR>
&nbsp;&nbsp;<B>function</B>&nbsp;<A NAME="I7580"></A>Microseconds&nbsp;(US&nbsp;:&nbsp;Integer)&nbsp;<B>return</B>&nbsp;Time_Span;<BR>
&nbsp;&nbsp;<B>function</B>&nbsp;<A NAME="I7581"></A>Milliseconds&nbsp;(MS&nbsp;:&nbsp;Integer)&nbsp;<B>return</B>&nbsp;Time_Span;<SPAN class="insert2"><BR>
&nbsp;&nbsp;<B>function</B>&nbsp;<A NAME="I7582"></A>Seconds&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(S&nbsp;&nbsp;:&nbsp;Integer)&nbsp;<B>return</B>&nbsp;Time_Span;<BR>
&nbsp;&nbsp;<B>function</B>&nbsp;<A NAME="I7583"></A>Minutes&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(M&nbsp;&nbsp;:&nbsp;Integer)&nbsp;<B>return</B>&nbsp;Time_Span;</SPAN></DIV>
<DIV Class="paranum">15</DIV>
<DIV Class="Examples">&nbsp;&nbsp;<B>type</B>&nbsp;<A NAME="I7584"></A>Seconds_Count&nbsp;<B>is</B>&nbsp;<B>range</B>&nbsp;<SPAN Class="roman"><I>implementation-defined</I></SPAN>;</DIV>
<DIV Class="paranum">16</DIV>
<DIV Class="Examples">&nbsp;&nbsp;<B>procedure</B>&nbsp;<A NAME="I7585"></A>Split(T&nbsp;:&nbsp;<B>in</B>&nbsp;Time;&nbsp;SC&nbsp;:&nbsp;<B>out</B>&nbsp;Seconds_Count;&nbsp;TS&nbsp;:&nbsp;<B>out</B>&nbsp;Time_Span);<BR>
&nbsp;&nbsp;<B>function</B>&nbsp;<A NAME="I7586"></A>Time_Of(SC&nbsp;:&nbsp;Seconds_Count;&nbsp;TS&nbsp;:&nbsp;Time_Span)&nbsp;<B>return</B>&nbsp;Time;</DIV>
<DIV Class="paranum">17</DIV>
<DIV Class="Examples"><B>private</B><BR>
&nbsp;&nbsp;&nbsp;...&nbsp;--&nbsp;<SPAN Class="roman"><I>not&nbsp;specified&nbsp;by&nbsp;the&nbsp;language</I></SPAN><BR>
<B>end</B>&nbsp;Ada.Real_Time;</DIV>
<DIV Class="paranum">17.a/2</DIV>
<DIV Class="Annotations"><SPAN STYLE="font-size: 80%"><I>This paragraph 
was deleted.</I></SPAN><SPAN class="delete2"><B>Implementation defined: 
</B></SPAN><SPAN class="delete2">Implementation-defined aspects of package 
Real_Time.</SPAN></DIV>
<DIV Class="paranum">18</DIV>
<DIV Class="Normal"><SPAN STYLE="font-size: 80%">{<I>real time</I>}</SPAN> 
<A NAME="I7587"></A>In this Annex, <I>real time</I> is defined to be 
the physical time as observed in the external environment. The type Time 
is a <I>time type</I> as defined by <A HREF="AA-9-6.html">9.6</A>; [values 
of this type may be used in a <SPAN Class="swiss"><A HREF="AA-9-6.html#S0210">delay_until_statement</A></SPAN>.] 
Values of this type represent segments of an ideal time line. The set 
of values of the type Time corresponds one-to-one with an implementation-defined 
range of mathematical integers.&nbsp;</DIV>
<DIV Class="paranum">18.a</DIV>
<DIV Class="Annotations"><B>Discussion:&nbsp;</B>Informally, real time is 
defined to be the International Atomic Time (TAI) which is monotonic 
and nondecreasing. We use it here for the purpose of discussing rate 
of change and monotonic behavior only. It does not imply anything about 
the absolute value of Real_Time.Clock, or about Real_Time.Time being 
synchronized with TAI. It is also used for real time in the metrics, 
for comparison purposes.&nbsp;</DIV>
<DIV Class="paranum">18.b</DIV>
<DIV Class="Annotations"><B>Implementation Note:&nbsp;</B>The specification 
of TAI as &ldquo;real time&rdquo; does not preclude the use of a simulated 
TAI clock for simulated execution environments.&nbsp;</DIV>
<DIV Class="paranum">19</DIV>
<DIV Class="Normal"><SPAN STYLE="font-size: 80%">{<I>epoch</I>}</SPAN> 
<A NAME="I7588"></A><SPAN STYLE="font-size: 80%">{<I>unspecified</I> 
[partial]}</SPAN> <A NAME="I7589"></A>The Time value I represents the 
half-open real time interval that starts with E+I*Time_Unit and is limited 
by E+(I+1)*Time_Unit, where Time_Unit is an implementation-defined real 
number and E is an unspecified origin point, the <I>epoch</I>, that is 
the same for all values of the type Time. It is not specified by the 
language whether the time values are synchronized with any standard time 
reference. [For example, E can correspond to the time of system initialization 
or it can correspond to the epoch of some time standard.]&nbsp;</DIV>
<DIV Class="paranum">19.a</DIV>
<DIV Class="Annotations"><B>Discussion:&nbsp;</B>E itself does not have to 
be a proper time value.</DIV>
<DIV Class="paranum">19.b</DIV>
<DIV Class="Annotations">This half-open interval I consists of all real 
numbers R such that E+I*Time_Unit &lt;= R &lt; E+(I+1)*Time_Unit.&nbsp;</DIV>
<DIV Class="paranum">20</DIV>
<DIV Class="Normal">Values of the type Time_Span represent length of 
real time duration. The set of values of this type corresponds one-to-one 
with an implementation-defined range of mathematical integers. The Time_Span 
value corresponding to the integer I represents the real-time duration 
I*Time_Unit.&nbsp;</DIV>
<DIV Class="paranum">20.a</DIV>
<DIV Class="Annotations"><B>Reason:&nbsp;</B>The purpose of this type is similar 
to Standard.Duration; the idea is to have a type with a higher resolution. 
</DIV>
<DIV Class="paranum">20.b</DIV>
<DIV Class="Annotations"><B>Discussion:&nbsp;</B>We looked at many possible 
names for this type: Real_Time.Duration, Fine_Duration, Interval, Time_Interval_Length, 
Time_Measure, and more. Each of these names had some problems, and we've 
finally settled for Time_Span.&nbsp;</DIV>
<DIV Class="paranum">21</DIV>
<DIV Class="Normal">Time_First and Time_Last are the smallest and largest 
values of the Time type, respectively. Similarly, Time_Span_First and 
Time_Span_Last are the smallest and largest values of the Time_Span type, 
respectively.</DIV>
<DIV Class="paranum">22</DIV>
<DIV Class="Normal">A value of type Seconds_Count represents an elapsed 
time, measured in seconds, since the epoch.</DIV>

<H4 Class="centered">Dynamic Semantics</H4>
<DIV Class="paranum">23</DIV>
<DIV Class="Normal">Time_Unit is the smallest amount of real time representable 
by the Time type; it is expressed in seconds. Time_Span_Unit is the difference 
between two successive values of the Time type. It is also the smallest 
positive value of type Time_Span. Time_Unit and Time_Span_Unit represent 
the same real time duration. <SPAN STYLE="font-size: 80%">{<I>clock tick</I>}</SPAN> 
<A NAME="I7590"></A>A <I>clock tick</I> is a real time interval during 
which the clock value (as observed by calling the Clock function) remains 
constant. Tick is the average length of such intervals.</DIV>
<DIV Class="paranum">24/2</DIV>
<DIV Class="Normal">&nbsp;{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AIs/AI-00432.TXT">AI95-00432-01</A></I>} 
The function To_Duration converts the value TS to a value of type Duration. 
Similarly, the function To_Time_Span converts the value D to a value 
of type Time_Span. For <SPAN class="insert2">To_Duration</SPAN><SPAN class="delete2">&nbsp;both 
operations</SPAN>, the result is rounded to the nearest <SPAN class="insert2">value 
of type Duration</SPAN><SPAN class="delete2">&nbsp;exactly representable value</SPAN> 
(away from zero if exactly halfway between two <SPAN class="delete2">exactly 
representable&nbsp;</SPAN>values).<SPAN class="insert2">&nbsp;If the result is 
outside the range of Duration, Constraint_Error is raised. For To_Time_Span, 
the value of D is first rounded to the nearest integral multiple of Time_Unit, 
away from zero if exactly halfway between two multiples. If the rounded 
value is outside the range of Time_Span, Constraint_Error is raised. 
Otherwise, the value is converted to the type Time_Span.</SPAN></DIV>
<DIV Class="paranum">25</DIV>
<DIV Class="Normal">To_Duration(Time_Span_Zero) returns 0.0, and To_Time_Span(0.0) 
returns Time_Span_Zero.</DIV>
<DIV Class="paranum">26/2</DIV>
<DIV Class="Normal">&nbsp;{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AIs/AI-00386.TXT">AI95-00386-01</A></I>} 
{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AIs/AI-00432.TXT">AI95-00432-01</A></I>} 
The functions Nanoseconds, Microseconds, <SPAN class="delete2">and&nbsp;</SPAN>Milliseconds<SPAN class="insert2">, 
Seconds, and Minutes</SPAN> convert the input parameter to a value of 
the type Time_Span. NS, US,<SPAN class="delete2">&nbsp;and</SPAN> MS<SPAN class="insert2">, 
S, and M</SPAN> are interpreted as a number of nanoseconds, microseconds,<SPAN class="delete2">&nbsp;and</SPAN> milliseconds<SPAN class="insert2">, seconds, and minutes</SPAN> 
respectively.<SPAN class="insert2">&nbsp;The input parameter is first converted 
to seconds and rounded to the nearest integral multiple of Time_Unit, 
</SPAN><SPAN class="delete2">The result is rounded to the nearest exactly 
representable value (</SPAN>away from zero if exactly halfway between 
two <SPAN class="insert2">multiples. If the rounded value is outside 
the range of Time_Span, Constraint_Error is raised. Otherwise, the rounded 
value is converted to the type Time_Span</SPAN><SPAN class="delete2">&nbsp;exactly 
representable values)</SPAN>.&nbsp;</DIV>
<DIV Class="paranum">26.a/2</DIV>
<DIV Class="Annotations"><SPAN STYLE="font-size: 80%"><I>This paragraph 
was deleted.</I></SPAN><SPAN class="delete2"><B>Discussion:&nbsp;</B></SPAN>{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AIs/AI-00432.TXT">AI95-00432-01</A></I>} 
<SPAN class="delete2">The above does not imply that the Time_Span type 
will have to accommodate Integer'Last of milliseconds; Constraint_Error 
is allowed to be raised.</SPAN>&nbsp;</DIV>
<DIV Class="paranum">27</DIV>
<DIV Class="Normal">The effects of the operators on Time and Time_Span 
are as for the operators defined for integer types.&nbsp;</DIV>
<DIV Class="paranum">27.a</DIV>
<DIV Class="Annotations"><B>Implementation Note:&nbsp;</B>Though time values 
are modeled by integers, the types Time and Time_Span need not be implemented 
as integers.&nbsp;</DIV>
<DIV Class="paranum">28</DIV>
<DIV Class="Normal">The function Clock returns the amount of time since 
the epoch.</DIV>
<DIV Class="paranum">29</DIV>
<DIV Class="Normal">The effects of the Split and Time_Of operations are 
defined as follows, treating values of type Time, Time_Span, and Seconds_Count 
as mathematical integers. The effect of Split(T,SC,TS) is to set SC and 
TS to values such that T*Time_Unit = SC*1.0 + TS*Time_Unit, and 0.0 &lt;= 
TS*Time_Unit &lt; 1.0. The value returned by Time_Of(SC,TS) is the value 
T such that T*Time_Unit = SC*1.0 + TS*Time_Unit.&nbsp;</DIV>

<H4 Class="centered">Implementation Requirements</H4>
<DIV Class="paranum">30</DIV>
<DIV Class="Normal">The range of Time values shall be sufficient to uniquely 
represent the range of real times from program start-up to 50 years later. 
Tick shall be no greater than 1 millisecond. Time_Unit shall be less 
than or equal to 20 microseconds.&nbsp;</DIV>
<DIV Class="paranum">30.a</DIV>
<DIV Class="Annotations"><B>Implementation Note:&nbsp;</B>The required range 
and accuracy of Time are such that 32-bits worth of seconds and 32-bits 
worth of ticks in a second could be used as the representation.&nbsp;</DIV>
<DIV Class="paranum">31</DIV>
<DIV Class="Normal">Time_Span_First shall be no greater than &ndash;3600 
seconds, and Time_Span_Last shall be no less than 3600 seconds.&nbsp;</DIV>
<DIV Class="paranum">31.a</DIV>
<DIV Class="Annotations"><B>Reason:&nbsp;</B>This is equivalent to &plusmn; 
one hour and there is still room for a two-microsecond resolution.&nbsp;</DIV>
<DIV Class="paranum">32</DIV>
<DIV Class="Normal"><SPAN STYLE="font-size: 80%">{<I>clock jump</I>}</SPAN> 
<A NAME="I7591"></A>A <I>clock jump</I> is the difference between two 
successive distinct values of the clock (as observed by calling the Clock 
function). There shall be no backward clock jumps.</DIV>

<H4 Class="centered">Documentation Requirements</H4>
<DIV Class="paranum">33</DIV>
<DIV Class="Normal">The implementation shall document the values of Time_First, 
Time_Last, Time_Span_First, Time_Span_Last, Time_Span_Unit, and Tick. 
</DIV>
<DIV Class="paranum">33.a/2</DIV>
<DIV Class="Annotations"><SPAN class="insert2"><B>Documentation Requirement: 
</B></SPAN><SPAN class="insert2">The values of Time_First, Time_Last, 
Time_Span_First, Time_Span_Last, Time_Span_Unit, and Tick for package 
Real_Time.</SPAN></DIV>
<DIV Class="paranum">34</DIV>
<DIV Class="Normal">The implementation shall document the properties 
of the underlying time base used for the clock and for type Time, such 
as the range of values supported and any relevant aspects of the underlying 
hardware or operating system facilities used.&nbsp;</DIV>
<DIV Class="paranum">34.a.1/2</DIV>
<DIV Class="Annotations"><SPAN class="insert2"><B>Documentation Requirement: 
</B></SPAN><SPAN class="insert2">The properties of the underlying time 
base used in package Real_Time.</SPAN></DIV>
<DIV Class="paranum">34.a</DIV>
<DIV Class="Annotations"><B>Discussion:&nbsp;</B>If there is an underlying 
operating system, this might include information about which system call 
is used to implement the clock. Otherwise, it might include information 
about which hardware clock is used.&nbsp;</DIV>
<DIV Class="paranum">35</DIV>
<DIV Class="Normal">The implementation shall document whether or not 
there is any synchronization with external time references, and if such 
synchronization exists, the sources of synchronization information, the 
frequency of synchronization, and the synchronization method applied. 
</DIV>
<DIV Class="paranum">35.a.1/2</DIV>
<DIV Class="Annotations"><SPAN class="insert2"><B>Documentation Requirement: 
</B></SPAN><SPAN class="insert2">Any synchronization of package Real_Time 
with external time references.</SPAN></DIV>
<DIV Class="paranum">36/1</DIV>
<DIV Class="Normal">&nbsp;The implementation shall document any aspects of 
the <SPAN class="delete1">the</SPAN> external environment that could 
interfere with the clock behavior as defined in this clause.&nbsp;</DIV>
<DIV Class="paranum">36.a.1/2</DIV>
<DIV Class="Annotations"><SPAN class="insert2"><B>Documentation Requirement: 
</B></SPAN><SPAN class="insert2">Any aspects of the external environment 
that could interfere with package Real_Time.</SPAN></DIV>
<DIV Class="paranum">36.a</DIV>
<DIV Class="Annotations"><B>Discussion:&nbsp;</B>For example, the implementation 
is allowed to rely on the time services of an underlying operating system, 
and this operating system clock can implement time zones or allow the 
clock to be reset by an operator. This dependence has to be documented. 
</DIV>

<H4 Class="centered">Metrics</H4>
<DIV Class="paranum">37</DIV>
<DIV Class="Normal">For the purpose of the metrics defined in this clause, 
real time is defined to be the International Atomic Time (TAI).</DIV>
<DIV Class="paranum">38</DIV>
<DIV Class="Normal" Style="margin-bottom: 0.4em">The implementation 
shall document the following metrics:&nbsp;</DIV>
<DIV Class="paranum">39</DIV>
<UL Class="Bulleted"><LI TYPE=DISC>An upper bound on the real-time duration 
of a clock tick. This is a value D such that if t1 and t2 are any real 
times such that t1 &lt; t2 and Clock<SUB><SPAN STYLE="font-size: 140%"><SPAN STYLE="font-size: 64%">t1</SPAN></SPAN></SUB> 
= Clock<SUB><SPAN STYLE="font-size: 140%"><SPAN STYLE="font-size: 64%">t2</SPAN></SPAN></SUB> 
then t2 &ndash; t1 &lt;= D.</LI></UL>
<DIV Class="paranum">40</DIV>
<UL Class="Bulleted"><LI TYPE=DISC>An upper bound on the size of a clock 
jump.</LI></UL>
<DIV Class="paranum">41</DIV>
<UL Class="Bulleted"><LI TYPE=DISC><SPAN STYLE="font-size: 80%">{<I>drift 
rate</I>}</SPAN> <A NAME="I7592"></A>An upper bound on the <I>drift rate</I> 
of Clock with respect to real time. This is a real number D such that 
</LI></UL>
<DIV Class="paranum">42</DIV>
<DIV Class="CodeIndented">E*(1&ndash;D)&nbsp;&lt;=&nbsp;(Clock<SUB><SPAN STYLE="font-size: 140%"><SPAN STYLE="font-size: 64%">t+E</SPAN></SPAN></SUB>&nbsp;&ndash;&nbsp;Clock<SUB><SPAN STYLE="font-size: 140%"><SPAN STYLE="font-size: 64%">t</SPAN></SPAN></SUB>)&nbsp;&lt;=&nbsp;E*(1+D)<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;provided&nbsp;that:&nbsp;Clock<SUB><SPAN STYLE="font-size: 140%"><SPAN STYLE="font-size: 64%">t</SPAN></SPAN></SUB>&nbsp;+&nbsp;E*(1+D)&nbsp;&lt;=&nbsp;Time_Last.</DIV>
<DIV Class="paranum">43</DIV>
<UL Class="Bulleted"><LI TYPE=DISC>where Clock<SUB><SPAN STYLE="font-size: 140%"><SPAN STYLE="font-size: 64%">t</SPAN></SPAN></SUB> 
is the value of Clock at time t, and E is a real time duration not less 
than 24 hours. The value of E used for this metric shall be reported. 
</LI></UL>
<DIV Class="paranum">43.a</DIV>
<DIV Class="Annotations"><B>Reason:&nbsp;</B>This metric is intended to provide 
a measurement of the long term (cumulative) deviation; therefore, 24 
hours is the lower bound on the measurement period. On some implementations, 
this is also the maximum period, since the language does not require 
that the range of the type Duration be more than 24 hours. On those implementations 
that support longer-range Duration, longer measurements should be performed. 
</DIV>
<DIV Class="paranum">44</DIV>
<UL Class="Bulleted"><LI TYPE=DISC>An upper bound on the execution time 
of a call to the Clock function, in processor clock cycles.</LI></UL>
<DIV Class="paranum">45</DIV>
<UL Class="Bulleted"><LI TYPE=DISC>Upper bounds on the execution times 
of the operators of the types Time and Time_Span, in processor clock 
cycles.&nbsp;</LI></UL>
<DIV Class="paranum">45.a</DIV>
<DIV Class="Annotations"><B>Implementation Note:&nbsp;</B>A fast implementation 
of the Clock function involves repeated reading until you get the same 
value twice. It is highly improbable that more than three reads will 
be necessary. Arithmetic on time values should not be significantly slower 
than 64-bit arithmetic in the underlying machine instruction set.&nbsp;</DIV>
<DIV Class="paranum">45.a.1/2</DIV>
<DIV Class="Annotations"><SPAN class="insert2"><B>Documentation Requirement: 
</B></SPAN><SPAN class="insert2">The metrics for package Real_Time.</SPAN></DIV>

<H4 Class="centered">Implementation Permissions</H4>
<DIV Class="paranum">46</DIV>
<DIV Class="Normal">Implementations targeted to machines with word size 
smaller than 32 bits need not support the full range and granularity 
of the Time and Time_Span types.&nbsp;</DIV>
<DIV Class="paranum">46.a</DIV>
<DIV Class="Annotations"><B>Discussion:&nbsp;</B>These requirements are based 
on machines with a word size of 32 bits.</DIV>
<DIV Class="paranum">46.b</DIV>
<DIV Class="Annotations">Since the range and granularity are implementation 
defined, the supported values need to be documented.&nbsp;</DIV>

<H4 Class="centered">Implementation Advice</H4>
<DIV Class="paranum">47</DIV>
<DIV Class="Normal">When appropriate, implementations should provide 
configuration mechanisms to change the value of Tick.&nbsp;</DIV>
<DIV Class="paranum">47.a.1/2</DIV>
<DIV Class="Annotations"><SPAN class="insert2"><B>Implementation Advice: 
</B></SPAN><SPAN class="insert2">When appropriate, mechanisms to change 
the value of Tick should be provided.</SPAN></DIV>
<DIV Class="paranum">47.a</DIV>
<DIV Class="Annotations"><B>Reason:&nbsp;</B>This is often needed when the 
compilation system was originally targeted to a particular processor 
with a particular interval timer, but the customer uses the same processor 
with a different interval timer.&nbsp;</DIV>
<DIV Class="paranum">47.b</DIV>
<DIV Class="Annotations"><B>Discussion:&nbsp;</B>Tick is a deferred constant 
and not a named number specifically for this purpose.&nbsp;</DIV>
<DIV Class="paranum">47.c</DIV>
<DIV Class="Annotations"><B>Implementation Note:&nbsp;</B>This can be achieved 
either by pre-run-time configuration tools, or by having Tick be initialized 
(in the package private part) by a function call residing in a board 
specific module.&nbsp;</DIV>
<DIV Class="paranum">48</DIV>
<DIV Class="Normal">It is recommended that Calendar.Clock and Real_Time.Clock 
be implemented as transformations of the same time base.&nbsp;</DIV>
<DIV Class="paranum">48.a.1/2</DIV>
<DIV Class="Annotations"><SPAN class="insert2"><B>Implementation Advice: 
</B></SPAN><SPAN class="insert2">Calendar.Clock and Real_Time.Clock should 
be transformations of the same time base.</SPAN></DIV>
<DIV Class="paranum">49</DIV>
<DIV Class="Normal">It is recommended that the &ldquo;best&rdquo; time 
base which exists in the underlying system be available to the application 
through Clock. &ldquo;Best&rdquo; may mean highest accuracy or largest 
range.&nbsp;</DIV>
<DIV Class="paranum">49.a.1/2</DIV>
<DIV Class="Annotations"><SPAN class="insert2"><B>Implementation Advice: 
</B></SPAN><SPAN class="insert2">The &ldquo;best&rdquo; time base which 
exists in the underlying system should be available to the application 
through Real_Time.Clock.</SPAN></DIV>
<DIV Class="NotesHeader">NOTES</DIV>
<DIV Class="paranum">50</DIV>
<DIV Class="Notes">38&nbsp;&nbsp;The rules in this clause do not imply 
that the implementation can protect the user from operator or installation 
errors which could result in the clock being set incorrectly.</DIV>
<DIV Class="paranum">51</DIV>
<DIV Class="Notes">39&nbsp;&nbsp;Time_Unit is the granularity of the 
Time type. In contrast, Tick represents the granularity of Real_Time.Clock. 
There is no requirement that these be the same.</DIV>

<H4 Class="centered">Incompatibilities With Ada 95</H4>
<DIV Class="paranum">51.a/2</DIV>
<DIV Class="Annotations">{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AIs/AI-00386.TXT">AI95-00386-01</A></I>} 
<SPAN class="insert2">{<I>incompatibilities with Ada 95</I>} <A NAME="I7593"></A>Functions 
Seconds and Minutes are newly added to Real_Time. If Real_Time is referenced 
in a <SPAN Class="swiss"><A HREF="AA-8-4.html#S0179">use_clause</A></SPAN>, 
and an entity <I>E</I> with a <SPAN Class="swiss"><A HREF="AA-3-1.html#S0022">defining_identifier</A></SPAN> 
of Seconds or Minutes is defined in a package that is also referenced 
in a <SPAN Class="swiss"><A HREF="AA-8-4.html#S0179">use_clause</A></SPAN>, 
the entity <I>E</I> may no longer be use-visible, resulting in errors. 
This should be rare and is easily fixed if it does occur.</SPAN>&nbsp;</DIV>

<H4 Class="centered">Wording Changes from Ada 95</H4>
<DIV Class="paranum">51.b/2</DIV>
<DIV Class="Annotations">{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AIs/AI-00432.TXT">AI95-00432-01</A></I>} 
<SPAN class="insert2">Added wording explaining how and when many of these 
functions can raise Constraint_Error. While there always was an intent 
to raise Constraint_Error if the values did not fit, there never was 
any wording to that effect, and since Time_Span was a private type, the 
normal numeric type rules do not apply to it.</SPAN>&nbsp;</DIV>

<HR>
<DIV Style="margin-top: 0.0em; margin-bottom: 0.6em"><A HREF="AA-TOC.html"><IMG SRC="cont.gif" ALT="Contents" BORDER=0></A>&nbsp;
&nbsp;<A HREF="AA-0-5.html"><IMG SRC="index.gif" ALT="Index" BORDER=0></A>&nbsp;
&nbsp;<A HREF="AA-STDS.html"><IMG SRC="lib.gif" ALT="References" BORDER=0></A>&nbsp;
&nbsp;<A HREF="AA-SRCH.html"><IMG SRC="find.gif" ALT="Search" BORDER=0></A>&nbsp;
&nbsp;<A HREF="AA-D-7.html"><IMG SRC="prev.gif" ALT="Previous" BORDER=0></A>&nbsp;
&nbsp;<A HREF="AA-D-9.html"><IMG SRC="next.gif" ALT="Next" BORDER=0></A>&nbsp;
</DIV>
<DIV Style="margin-top:0.0em"><IMG SRC="AE_logo.gif" height=100 width=113 align=right ALT="Ada-Europe">
<SPAN Style="font-size: 125%">Sponsored by <SPAN Style="font-size: 125%"><A HREF="http://www.ada-europe.org/"><B>Ada-Europe</B></A></SPAN></SPAN></DIV>
</BODY>
</HTML>
