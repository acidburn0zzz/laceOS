<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
"http://www.w3.org/TR/html4/loose.dtd">
<HTML>
<HEAD>
    <TITLE>Accuracy Requirements for the Elementary Functions</TITLE>
    <META http-equiv="Content-Type" content="text/html; charset=iso-8859-1">
    <META NAME="Author" CONTENT="JTC1/SC22/WG9/ARG, by Randall Brukardt, ARG Editor">
    <META NAME="GENERATOR" CONTENT="Arm_Form.Exe, Ada Reference Manual generator">
    <STYLE type="text/css">
    H4.centered {text-align: center}
    SPAN.swiss {font-family: Arial, Helvetica, sans-serif; font-size: 92%}
    SPAN.roman {font-family: "Times New Roman", Times, serif}
    DIV.paranum {float: left; font-family: Arial, Helvetica, sans-serif; font-size: 64%; width: 2.8em; margin-left: -0.4em; margin-right: -3.0em; margin-top: 0.2em}
    TT {font-family: "Courier New", monospace}
    DT {display: compact}
    SPAN.insert1 {text-decoration: underline; color: rgb(0,51,51) }
    SPAN.delete1 {text-decoration: line-through; color: rgb(0,51,51) }
    SPAN.insert2 {text-decoration: underline; color: rgb(0,102,0) }
    SPAN.delete2 {text-decoration: line-through; color: rgb(0,102,0) }
    DIV.Normal {font-family: "Times New Roman", Times, serif; line-height: 122%; margin-left: 1.2em; margin-bottom: 0.6em}
    DIV.Annotations {font-family: "Times New Roman", Times, serif; font-size: 80%; line-height: 122%; margin-left: 6.2em; margin-bottom: 0.6em}
    DIV.SyntaxIndented {font-family: "Times New Roman", Times, serif; line-height: 122%; margin-left: 3.2em; margin-bottom: 0.4em}
    UL.Bulleted {font-family: "Times New Roman", Times, serif; line-height: 122%; margin-left: 3.2em; margin-right: 2.0em; margin-top: 0em; margin-bottom: 0.5em}
    UL.SmallBulleted {font-family: "Times New Roman", Times, serif; font-size: 80%; line-height: 122%; margin-left: 8.7em; margin-right: 2.5em; margin-top: 0em; margin-bottom: 0.5em}
    </STYLE>
</HEAD>
<BODY TEXT="#000000" BGCOLOR="#FFFFF0" LINK="#000080" VLINK="#330033" ALINK="#0000FF">
<DIV><B><SPAN Style="font-size:200%; color: rgb(0,51,153)">Annotated</SPAN><SPAN Style="font-size:200%; color: rgb(0,0,102)">&nbsp;Ada Reference Manual</SPAN></B> &mdash; <A HREF="AA-TTL.html"><B>Legal Information</B></A></DIV>
<DIV Style="margin-top: 0.6em; margin-bottom: 0.0em"><A HREF="AA-TOC.html"><IMG SRC="cont.gif" ALT="Contents" BORDER=0></A>&nbsp;
&nbsp;<A HREF="AA-0-5.html"><IMG SRC="index.gif" ALT="Index" BORDER=0></A>&nbsp;
&nbsp;<A HREF="AA-STDS.html"><IMG SRC="lib.gif" ALT="References" BORDER=0></A>&nbsp;
&nbsp;<A HREF="AA-SRCH.html"><IMG SRC="find.gif" ALT="Search" BORDER=0></A>&nbsp;
&nbsp;<A HREF="AA-G-2-3.html"><IMG SRC="prev.gif" ALT="Previous" BORDER=0></A>&nbsp;
&nbsp;<A HREF="AA-G-2-5.html"><IMG SRC="next.gif" ALT="Next" BORDER=0></A>&nbsp;
</DIV>
<HR>
<H1>G.2.4 Accuracy Requirements for the Elementary Functions</H1>
<DIV Class="paranum">1</DIV>
<DIV Class="Normal">In the strict mode, the performance of Numerics.Generic_Elementary_Functions 
shall be as specified here.&nbsp;</DIV>

<H4 Class="centered">Implementation Requirements</H4>
<DIV Class="paranum">2</DIV>
<DIV Class="Normal"><SPAN STYLE="font-size: 80%">{<I>result interval 
(for the evaluation of an elementary function)</I>}</SPAN> <A NAME="I7969"></A><SPAN STYLE="font-size: 80%">{<I>maximum 
relative error (for the evaluation of an elementary function)</I>}</SPAN> 
<A NAME="I7970"></A>When an exception is not raised, the result of evaluating 
a function in an instance <I>EF</I> of Numerics.Generic_Elementary_Functions 
belongs to a <I>result interval</I>, defined as the smallest model interval 
of <I>EF</I>.Float_Type that contains all the values of the form <SPAN Class="roman"><I>f</I></SPAN> 
&middot; (1.0 + <SPAN Class="roman"><I>d</I></SPAN>), where <SPAN Class="roman"><I>f</I></SPAN> 
is the exact value of the corresponding mathematical function at the 
given parameter values, <SPAN Class="roman"><I>d</I></SPAN> is a real 
number, and |<SPAN Class="roman"><I>d</I></SPAN>| is less than or equal 
to the function's <I>maximum relative error</I>. <SPAN STYLE="font-size: 80%">{<I>Overflow_Check</I> 
[partial]}</SPAN> <A NAME="I7971"></A><SPAN STYLE="font-size: 80%">{<I>check, 
language-defined (Overflow_Check)</I>}</SPAN> <A NAME="I7972"></A>The 
function delivers a value that belongs to the result interval when both 
of its bounds belong to the safe range of <I>EF</I>.Float_Type; otherwise, 
</DIV>
<DIV Class="paranum">3</DIV>
<UL Class="Bulleted"><LI TYPE=DISC><SPAN STYLE="font-size: 80%">{<I>Constraint_Error 
(raised by failure of run-time check)</I>}</SPAN> <A NAME="I7973"></A>if 
<I>EF</I>.Float_Type'Machine_Overflows is True, the function either delivers 
a value that belongs to the result interval or raises Constraint_Error, 
signaling overflow;</LI></UL>
<DIV Class="paranum">4</DIV>
<UL Class="Bulleted" Style="margin-bottom: 0.7em"><LI TYPE=DISC>if <I>EF</I>.Float_Type'Machine_Overflows 
is False, the result is implementation defined.&nbsp;</LI></UL>
<DIV Class="paranum">4.a</DIV>
<DIV Class="Annotations"><B>Implementation defined:&nbsp;</B>The result of 
an elementary function reference in overflow situations, when the Machine_Overflows 
attribute of the result type is False.</DIV>
<DIV Class="paranum">5</DIV>
<DIV Class="Normal" Style="margin-bottom: 0.4em">The maximum relative 
error exhibited by each function is as follows:&nbsp;</DIV>
<DIV Class="paranum">6</DIV>
<UL Class="Bulleted"><LI TYPE=DISC>2.0 &middot; <SPAN Class="roman"><I>EF</I></SPAN><SPAN Class="roman">.Float_Type'Model_Epsilon</SPAN>, 
in the case of the Sqrt, Sin, and Cos functions;</LI></UL>
<DIV Class="paranum">7</DIV>
<UL Class="Bulleted"><LI TYPE=DISC>4.0 &middot; <SPAN Class="roman"><I>EF</I></SPAN><SPAN Class="roman">.Float_Type'Model_Epsilon</SPAN>, 
in the case of the Log, Exp, Tan, Cot, and inverse trigonometric functions; 
and</LI></UL>
<DIV Class="paranum">8</DIV>
<UL Class="Bulleted"><LI TYPE=DISC>8.0 &middot; <SPAN Class="roman"><I>EF</I></SPAN><SPAN Class="roman">.Float_Type'Model_Epsilon</SPAN>, 
in the case of the forward and inverse hyperbolic functions.&nbsp;</LI></UL>
<DIV Class="paranum">9</DIV>
<DIV Class="Normal">The maximum relative error exhibited by the exponentiation 
operator, which depends on the values of the operands, is (4.0 + |<SPAN Class="roman">Right</SPAN> 
&middot; log(<SPAN Class="roman">Left</SPAN>)| / 32.0) &middot; <SPAN Class="roman"><I>EF</I></SPAN><SPAN Class="roman">.Float_Type'Model_Epsilon</SPAN>.</DIV>
<DIV Class="paranum">10</DIV>
<DIV Class="Normal">The maximum relative error given above applies throughout 
the domain of the forward trigonometric functions when the Cycle parameter 
is specified. <SPAN STYLE="font-size: 80%">{<I>angle threshold</I>}</SPAN> 
<A NAME="I7974"></A>When the Cycle parameter is omitted, the maximum 
relative error given above applies only when the absolute value of the 
angle parameter X is less than or equal to some implementation-defined 
<I>angle threshold</I>, which shall be at least <SPAN Class="roman"><I>EF</I></SPAN><SPAN Class="roman">.Float_Type'Machine_Radix</SPAN> 
<SUP><SPAN STYLE="font-size: 140%"><SPAN STYLE="font-size: 64%"><I>Floor</I>(</SPAN><SPAN Class="roman"><SPAN STYLE="font-size: 64%"><I>EF</I></SPAN></SPAN><SPAN STYLE="font-size: 64%"></SPAN><SPAN Class="roman"><SPAN STYLE="font-size: 64%">.Float_Type'Machine_Mantissa</SPAN></SPAN><SPAN STYLE="font-size: 64%">/2)</SPAN></SPAN></SUP>. 
Beyond the angle threshold, the accuracy of the forward trigonometric 
functions is implementation defined.&nbsp;</DIV>
<DIV Class="paranum">10.a</DIV>
<DIV Class="Annotations"><B>Implementation defined:&nbsp;</B>The value of 
the <I>angle threshold</I>, within which certain elementary functions, 
complex arithmetic operations, and complex elementary functions yield 
results conforming to a maximum relative error bound.</DIV>
<DIV Class="paranum">10.b</DIV>
<DIV Class="Annotations"><B>Implementation defined:&nbsp;</B>The accuracy 
of certain elementary functions for parameters beyond the angle threshold.</DIV>
<DIV Class="paranum">10.c</DIV>
<DIV Class="Annotations"><B>Implementation Note:&nbsp;</B>The angle threshold 
indirectly determines the amount of precision that the implementation 
has to maintain during argument reduction.&nbsp;</DIV>
<DIV Class="paranum">11/2</DIV>
<DIV Class="Normal">&nbsp;{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AIs/AI-00434.TXT">AI95-00434-01</A></I>} 
The prescribed results specified in <A HREF="AA-A-5-1.html">A.5.1</A> 
for certain functions at particular parameter values take precedence 
over the maximum relative error bounds; effectively, they narrow to a 
single value the result interval allowed by the maximum relative error 
bounds. Additional rules with a similar effect are given by <SPAN class="delete2">the 
</SPAN>table <SPAN class="insert2">G-1</SPAN><SPAN class="delete2">&nbsp;below</SPAN> 
for the inverse trigonometric functions, at particular parameter values 
for which the mathematical result is possibly not a model number of <I>EF</I>.Float_Type 
(or is, indeed, even transcendental). In each table entry, the values 
of the parameters are such that the result lies on the axis between two 
quadrants; the corresponding accuracy rule, which takes precedence over 
the maximum relative error bounds, is that the result interval is the 
model interval of <I>EF</I>.Float_Type associated with the exact mathematical 
result given in the table.</DIV>
<DIV Class="paranum">12/1</DIV>
<DIV Class="Normal">&nbsp;<SPAN STYLE="font-size: 80%"><I>This paragraph was 
deleted.</I></SPAN><SPAN class="delete1">&nbsp;</SPAN></DIV>
<DIV Class="paranum">13</DIV>
<DIV Class="Normal">The last line of the table is meant to apply when 
<I>EF</I>.Float_Type'Signed_Zeros is False; the two lines just above 
it, when <I>EF</I>.Float_Type'Signed_Zeros is True and the parameter 
Y has a zero value with the indicated sign.</DIV>
<DIV Class="SyntaxIndented"><TABLE frame="border" rules="all" border="2" cellpadding="4"><CAPTION><B></B><SPAN class="insert2"><B>Table G-1:&nbsp;</B></SPAN><B>Tightly 
Approximated Elementary Function Results</B></CAPTION>
<TR><TH align="center"><B>Function</B><TH align="center"><B>Value of 
X</B><TH align="center"><B>Value of Y</B><TH align="center"><B>Exact 
Result <BR>
when Cycle <BR>
Specified</B><TH align="center"><B>Exact Result <BR>
when Cycle <BR>
Omitted</B>
<TR><TD align="center">Arcsin<TD align="center">1.0<TD align="center">n.a.<TD align="center">Cycle/4.0<TD align="center">&pi;/2.0
<TR><TD align="center">Arcsin<TD align="center">&ndash;1.0<TD align="center">n.a.<TD align="center">&ndash;<SPAN Class="roman">Cycle</SPAN>/4.0<TD align="center">&ndash;&pi;/2.0
<TR><TD align="center">Arccos<TD align="center">0.0<TD align="center">n.a.<TD align="center">Cycle/4.0<TD align="center">&pi;/2.0
<TR><TD align="center">Arccos<TD align="center">&ndash;1.0<TD align="center">n.a.<TD align="center">Cycle/2.0<TD align="center">&pi;
<TR><TD align="center">Arctan and Arccot<TD align="center">0.0<TD align="center">positive<TD align="center">Cycle/4.0<TD align="center">&pi;/2.0
<TR><TD align="center">Arctan and Arccot<TD align="center">0.0<TD align="center">negative<TD align="center">&ndash;<SPAN Class="roman">Cycle</SPAN>/4.0<TD align="center">&ndash;&pi;/2.0
<TR><TD align="center">Arctan and Arccot<TD align="center">negative<TD align="center">+0.0<TD align="center">Cycle/2.0<TD align="center">&pi;
<TR><TD align="center">Arctan and Arccot<TD align="center">negative<TD align="center">&ndash;0.0<TD align="center">&ndash;<SPAN Class="roman">Cycle</SPAN>/2.0<TD align="center">&ndash;&pi;
<TR><TD align="center">Arctan and Arccot<TD align="center">negative<TD align="center">0.0<TD align="center">Cycle/2.0<TD align="center">&pi;
</TABLE></DIV>
<DIV Class="paranum">14</DIV>
<DIV Class="Normal">The amount by which the result of an inverse trigonometric 
function is allowed to spill over into a quadrant adjacent to the one 
corresponding to the principal branch, as given in <A HREF="AA-A-5-1.html">A.5.1</A>, 
is limited. The rule is that the result belongs to the smallest model 
interval of <I>EF</I>.Float_Type that contains both boundaries of the 
quadrant corresponding to the principal branch. This rule also takes 
precedence over the maximum relative error bounds, effectively narrowing 
the result interval allowed by them.</DIV>
<DIV Class="paranum">15</DIV>
<DIV Class="Normal" Style="margin-bottom: 0.4em">Finally, the following 
specifications also take precedence over the maximum relative error bounds: 
</DIV>
<DIV Class="paranum">16</DIV>
<UL Class="Bulleted"><LI TYPE=DISC>The absolute value of the result of 
the Sin, Cos, and Tanh functions never exceeds one.</LI></UL>
<DIV Class="paranum">17</DIV>
<UL Class="Bulleted"><LI TYPE=DISC>The absolute value of the result of 
the Coth function is never less than one.</LI></UL>
<DIV Class="paranum">18</DIV>
<UL Class="Bulleted"><LI TYPE=DISC>The result of the Cosh function is 
never less than one.&nbsp;</LI></UL>

<H4 Class="centered">Implementation Advice</H4>
<DIV Class="paranum">19</DIV>
<DIV Class="Normal">The versions of the forward trigonometric functions 
without a Cycle parameter should not be implemented by calling the corresponding 
version with a Cycle parameter of 2.0*Numerics.Pi, since this will not 
provide the required accuracy in some portions of the domain. For the 
same reason, the version of Log without a Base parameter should not be 
implemented by calling the corresponding version with a Base parameter 
of Numerics.e.&nbsp;</DIV>
<DIV Class="paranum">19.a.1/2</DIV>
<DIV Class="Annotations"><SPAN class="insert2"><B>Implementation Advice: 
</B></SPAN><SPAN class="insert2">For elementary functions, the forward 
trigonometric functions without a Cycle parameter should not be implemented 
by calling the corresponding version with a Cycle parameter. Log without 
a Base parameter should not be implemented by calling Log with a Base 
parameter.</SPAN></DIV>

<H4 Class="centered">Wording Changes from Ada 83</H4>
<DIV Class="paranum">19.a</DIV>
<DIV Class="Annotations" Style="margin-bottom: 0.4em">The semantics 
of Numerics.Generic_Elementary_Functions differs from Generic_Elementary_Functions 
as defined in ISO/IEC DIS 11430 (for Ada 83) in the following ways related 
to the accuracy specified for strict mode:&nbsp;</DIV>
<DIV Class="paranum">19.b</DIV>
<UL Class="SmallBulleted"><LI TYPE=DISC>The maximum relative error bounds 
use the Model_Epsilon attribute instead of the Base'Epsilon attribute.</LI></UL>
<DIV Class="paranum">19.c</DIV>
<UL Class="SmallBulleted"><LI TYPE=DISC>The accuracy requirements are 
expressed in terms of result intervals that are model intervals. On the 
one hand, this facilitates the description of the required results in 
the presence of underflow; on the other hand, it slightly relaxes the 
requirements expressed in ISO/IEC DIS 11430.&nbsp;</LI></UL>

<HR>
<DIV Style="margin-top: 0.0em; margin-bottom: 0.6em"><A HREF="AA-TOC.html"><IMG SRC="cont.gif" ALT="Contents" BORDER=0></A>&nbsp;
&nbsp;<A HREF="AA-0-5.html"><IMG SRC="index.gif" ALT="Index" BORDER=0></A>&nbsp;
&nbsp;<A HREF="AA-STDS.html"><IMG SRC="lib.gif" ALT="References" BORDER=0></A>&nbsp;
&nbsp;<A HREF="AA-SRCH.html"><IMG SRC="find.gif" ALT="Search" BORDER=0></A>&nbsp;
&nbsp;<A HREF="AA-G-2-3.html"><IMG SRC="prev.gif" ALT="Previous" BORDER=0></A>&nbsp;
&nbsp;<A HREF="AA-G-2-5.html"><IMG SRC="next.gif" ALT="Next" BORDER=0></A>&nbsp;
</DIV>
<DIV Style="margin-top:0.0em"><IMG SRC="AE_logo.gif" height=100 width=113 align=right ALT="Ada-Europe">
<SPAN Style="font-size: 125%">Sponsored by <SPAN Style="font-size: 125%"><A HREF="http://www.ada-europe.org/"><B>Ada-Europe</B></A></SPAN></SPAN></DIV>
</BODY>
</HTML>
