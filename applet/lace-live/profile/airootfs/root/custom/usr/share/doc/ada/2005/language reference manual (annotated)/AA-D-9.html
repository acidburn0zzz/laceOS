<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
"http://www.w3.org/TR/html4/loose.dtd">
<HTML>
<HEAD>
    <TITLE>Delay Accuracy</TITLE>
    <META http-equiv="Content-Type" content="text/html; charset=iso-8859-1">
    <META NAME="Author" CONTENT="JTC1/SC22/WG9/ARG, by Randall Brukardt, ARG Editor">
    <META NAME="GENERATOR" CONTENT="Arm_Form.Exe, Ada Reference Manual generator">
    <STYLE type="text/css">
    H4.centered {text-align: center}
    SPAN.swiss {font-family: Arial, Helvetica, sans-serif; font-size: 92%}
    SPAN.roman {font-family: "Times New Roman", Times, serif}
    DIV.paranum {float: left; font-family: Arial, Helvetica, sans-serif; font-size: 64%; width: 2.8em; margin-left: -0.4em; margin-right: -3.0em; margin-top: 0.2em}
    TT {font-family: "Courier New", monospace}
    DT {display: compact}
    SPAN.insert2 {text-decoration: underline; color: rgb(0,102,0) }
    SPAN.delete2 {text-decoration: line-through; color: rgb(0,102,0) }
    DIV.Normal {font-family: "Times New Roman", Times, serif; line-height: 122%; margin-left: 1.2em; margin-bottom: 0.6em}
    DIV.Annotations {font-family: "Times New Roman", Times, serif; font-size: 80%; line-height: 122%; margin-left: 6.2em; margin-bottom: 0.6em}
    DIV.Notes {font-family: "Times New Roman", Times, serif; font-size: 80%; line-height: 122%; margin-left: 3.7em; margin-bottom: 0.6em}
    DIV.NotesHeader {font-family: "Times New Roman", Times, serif; font-size: 80%; line-height: 122%; margin-left: 3.7em}
    UL.Bulleted {font-family: "Times New Roman", Times, serif; line-height: 122%; margin-left: 3.2em; margin-right: 2.0em; margin-top: 0em; margin-bottom: 0.5em}
    </STYLE>
</HEAD>
<BODY TEXT="#000000" BGCOLOR="#FFFFF0" LINK="#000080" VLINK="#330033" ALINK="#0000FF">
<DIV><B><SPAN Style="font-size:200%; color: rgb(0,51,153)">Annotated</SPAN><SPAN Style="font-size:200%; color: rgb(0,0,102)">&nbsp;Ada Reference Manual</SPAN></B> &mdash; <A HREF="AA-TTL.html"><B>Legal Information</B></A></DIV>
<DIV Style="margin-top: 0.6em; margin-bottom: 0.0em"><A HREF="AA-TOC.html"><IMG SRC="cont.gif" ALT="Contents" BORDER=0></A>&nbsp;
&nbsp;<A HREF="AA-0-5.html"><IMG SRC="index.gif" ALT="Index" BORDER=0></A>&nbsp;
&nbsp;<A HREF="AA-STDS.html"><IMG SRC="lib.gif" ALT="References" BORDER=0></A>&nbsp;
&nbsp;<A HREF="AA-SRCH.html"><IMG SRC="find.gif" ALT="Search" BORDER=0></A>&nbsp;
&nbsp;<A HREF="AA-D-8.html"><IMG SRC="prev.gif" ALT="Previous" BORDER=0></A>&nbsp;
&nbsp;<A HREF="AA-D-10.html"><IMG SRC="next.gif" ALT="Next" BORDER=0></A>&nbsp;
</DIV>
<HR>
<H1>D.9 Delay Accuracy</H1>
<DIV Class="paranum">1</DIV>
<DIV Class="Normal">[This clause specifies performance requirements for 
the <SPAN Class="swiss"><A HREF="AA-9-6.html#S0209">delay_statement</A></SPAN>. 
The rules apply both to <SPAN Class="swiss"><A HREF="AA-9-6.html#S0211">delay_relative_statement</A></SPAN> 
and to <SPAN Class="swiss"><A HREF="AA-9-6.html#S0210">delay_until_statement</A></SPAN>. 
Similarly, they apply equally to a simple <SPAN Class="swiss"><A HREF="AA-9-6.html#S0209">delay_statement</A></SPAN> 
and to one which appears in a <SPAN Class="swiss"><A HREF="AA-9-7-1.html#S0217">delay_alternative</A></SPAN>.] 
</DIV>

<H4 Class="centered">Dynamic Semantics</H4>
<DIV Class="paranum">2</DIV>
<DIV Class="Normal" Style="margin-bottom: 0.4em">The effect of the <SPAN Class="swiss"><A HREF="AA-9-6.html#S0209">delay_statement</A></SPAN> 
for Real_Time.Time is defined in terms of Real_Time.Clock:&nbsp;</DIV>
<DIV Class="paranum">3</DIV>
<UL Class="Bulleted"><LI TYPE=DISC>If C<SUB><SPAN STYLE="font-size: 140%"><SPAN STYLE="font-size: 64%">1</SPAN></SPAN></SUB> 
is a value of Clock read before a task executes a <SPAN Class="swiss"><A HREF="AA-9-6.html#S0211">delay_relative_statement</A></SPAN> 
with duration D, and C<SUB><SPAN STYLE="font-size: 140%"><SPAN STYLE="font-size: 64%">2</SPAN></SPAN></SUB> 
is a value of Clock read after the task resumes execution following that 
<SPAN Class="swiss"><A HREF="AA-9-6.html#S0209">delay_statement</A></SPAN>, 
then C<SUB><SPAN STYLE="font-size: 140%"><SPAN STYLE="font-size: 64%">2</SPAN></SPAN></SUB> 
&ndash; C<SUB><SPAN STYLE="font-size: 140%"><SPAN STYLE="font-size: 64%">1</SPAN></SPAN></SUB> 
&gt;= D.</LI></UL>
<DIV Class="paranum">4</DIV>
<UL Class="Bulleted"><LI TYPE=DISC>If C is a value of Clock read after 
a task resumes execution following a <SPAN Class="swiss"><A HREF="AA-9-6.html#S0210">delay_until_statement</A></SPAN> 
with Real_Time.Time value T, then C &gt;= T.&nbsp;</LI></UL>
<DIV Class="paranum">5</DIV>
<DIV Class="Normal"><SPAN STYLE="font-size: 80%">{<I>potentially blocking 
operation (delay_statement)</I> [partial]}</SPAN> <A NAME="I7594"></A><SPAN STYLE="font-size: 80%">{<I>blocking, 
potentially (delay_statement)</I> [partial]}</SPAN> <A NAME="I7595"></A>A 
simple <SPAN Class="swiss"><A HREF="AA-9-6.html#S0209">delay_statement</A></SPAN> 
with a negative or zero value for the expiration time does not cause 
the calling task to be blocked; it is nevertheless a potentially blocking 
operation (see <A HREF="AA-9-5-1.html">9.5.1</A>).</DIV>
<DIV Class="paranum">6/2</DIV>
<DIV Class="Normal">When a <SPAN Class="swiss"><A HREF="AA-9-6.html#S0209">delay_statement</A></SPAN> 
appears in a <SPAN Class="swiss"><A HREF="AA-9-7-1.html#S0217">delay_alternative</A></SPAN> 
of a <SPAN Class="swiss"><A HREF="AA-9-7-2.html#S0219">timed_entry_call</A></SPAN> 
the selection of the entry call is attempted, regardless of the specified 
expiration time. When a <SPAN Class="swiss"><A HREF="AA-9-6.html#S0209">delay_statement</A></SPAN> 
appears in a <SPAN class="insert2"><SPAN Class="swiss"><A HREF="AA-9-7-1.html#S0215">select_alternative</A></SPAN></SPAN><SPAN class="delete2"><SPAN Class="swiss">&nbsp;selective_accept_alternative</SPAN></SPAN>, 
and a call is queued on one of the open entries, the selection of that 
entry call proceeds, regardless of the value of the delay expression. 
</DIV>
<DIV Class="paranum">6.a</DIV>
<DIV Class="Annotations"><B>Ramification:&nbsp;</B>The effect of these requirements 
is that one has to always attempt a rendezvous, regardless of the value 
of the delay expression. This can be tested by issuing a <SPAN Class="swiss"><A HREF="AA-9-7-2.html#S0219">timed_entry_call</A></SPAN> 
with an expiration time of zero, to an open entry.&nbsp;</DIV>

<H4 Class="centered">Documentation Requirements</H4>
<DIV Class="paranum">7</DIV>
<DIV Class="Normal">The implementation shall document the minimum value 
of the delay expression of a <SPAN Class="swiss"><A HREF="AA-9-6.html#S0211">delay_relative_statement</A></SPAN> 
that causes the task to actually be blocked.&nbsp;</DIV>
<DIV Class="paranum">7.a/2</DIV>
<DIV Class="Annotations"><SPAN class="insert2"><B>Documentation Requirement: 
</B></SPAN><SPAN class="insert2">The minimum value of the delay expression 
of a <SPAN Class="swiss"><A HREF="AA-9-6.html#S0211">delay_relative_statement</A></SPAN> 
that causes a task to actually be blocked.</SPAN></DIV>
<DIV Class="paranum">8</DIV>
<DIV Class="Normal">The implementation shall document the minimum difference 
between the value of the delay expression of a <SPAN Class="swiss"><A HREF="AA-9-6.html#S0210">delay_until_statement</A></SPAN> 
and the value of Real_Time.Clock, that causes the task to actually be 
blocked.&nbsp;</DIV>
<DIV Class="paranum">8.a/2</DIV>
<DIV Class="Annotations"><SPAN STYLE="font-size: 80%"><I>This paragraph 
was deleted.</I></SPAN><SPAN class="delete2"><B>Implementation defined: 
</B></SPAN><SPAN class="delete2">Implementation-defined aspects of <SPAN Class="swiss"><A HREF="AA-9-6.html#S0209">delay_statement</A></SPAN>s.</SPAN></DIV>
<DIV Class="paranum">8.b/2</DIV>
<DIV Class="Annotations"><SPAN class="insert2"><B>Documentation Requirement: 
</B></SPAN><SPAN class="insert2">The minimum difference between the value 
of the delay expression of a <SPAN Class="swiss"><A HREF="AA-9-6.html#S0210">delay_until_statement</A></SPAN> 
and the value of Real_Time.Clock, that causes the task to actually be 
blocked.</SPAN></DIV>

<H4 Class="centered">Metrics</H4>
<DIV Class="paranum">9</DIV>
<DIV Class="Normal" Style="margin-bottom: 0.4em">The implementation 
shall document the following metrics:&nbsp;</DIV>
<DIV Class="paranum">10</DIV>
<UL Class="Bulleted"><LI TYPE=DISC>An upper bound on the execution time, 
in processor clock cycles, of a <SPAN Class="swiss"><A HREF="AA-9-6.html#S0211">delay_relative_statement</A></SPAN> 
whose requested value of the delay expression is less than or equal to 
zero.</LI></UL>
<DIV Class="paranum">11</DIV>
<UL Class="Bulleted"><LI TYPE=DISC>An upper bound on the execution time, 
in processor clock cycles, of a <SPAN Class="swiss"><A HREF="AA-9-6.html#S0210">delay_until_statement</A></SPAN> 
whose requested value of the delay expression is less than or equal to 
the value of Real_Time.Clock at the time of executing the statement. 
Similarly, for Calendar.Clock.</LI></UL>
<DIV Class="paranum">12</DIV>
<UL Class="Bulleted"><LI TYPE=DISC><SPAN STYLE="font-size: 80%">{<I>lateness</I>}</SPAN> 
<A NAME="I7596"></A><SPAN STYLE="font-size: 80%">{<I>actual duration</I>}</SPAN> 
<A NAME="I7597"></A>An upper bound on the <I>lateness</I> of a <SPAN Class="swiss"><A HREF="AA-9-6.html#S0211">delay_relative_statement</A></SPAN>, 
for a positive value of the delay expression, in a situation where the 
task has sufficient priority to preempt the processor as soon as it becomes 
ready, and does not need to wait for any other execution resources. The 
upper bound is expressed as a function of the value of the delay expression. 
The lateness is obtained by subtracting the value of the delay expression 
from the <I>actual duration</I>. The actual duration is measured from 
a point immediately before a task executes the <SPAN Class="swiss"><A HREF="AA-9-6.html#S0209">delay_statement</A></SPAN> 
to a point immediately after the task resumes execution following this 
statement.</LI></UL>
<DIV Class="paranum">13</DIV>
<UL Class="Bulleted"><LI TYPE=DISC>An upper bound on the lateness of 
a <SPAN Class="swiss"><A HREF="AA-9-6.html#S0210">delay_until_statement</A></SPAN>, 
in a situation where the value of the requested expiration time is after 
the time the task begins executing the statement, the task has sufficient 
priority to preempt the processor as soon as it becomes ready, and it 
does not need to wait for any other execution resources. The upper bound 
is expressed as a function of the difference between the requested expiration 
time and the clock value at the time the statement begins execution. 
The lateness of a <SPAN Class="swiss"><A HREF="AA-9-6.html#S0210">delay_until_statement</A></SPAN> 
is obtained by subtracting the requested expiration time from the real 
time that the task resumes execution following this statement.&nbsp;</LI></UL>
<DIV Class="paranum">13.a/2</DIV>
<DIV Class="Annotations"><SPAN class="insert2"><B>Documentation Requirement: 
</B></SPAN><SPAN class="insert2">The metrics for delay statements.</SPAN></DIV>
<DIV Class="NotesHeader">NOTES</DIV>
<DIV Class="paranum">14/2</DIV>
<DIV Class="Notes"><SPAN STYLE="font-size: 80%"><I>This paragraph was 
deleted.</I></SPAN><SPAN class="delete2">40&nbsp;&nbsp;</SPAN>{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AIs/AI-00355.TXT">AI95-00355-01</A></I>} 
<SPAN class="delete2">The execution time of a <SPAN Class="swiss"><A HREF="AA-9-6.html#S0209">delay_statement</A></SPAN> 
that does not cause the task to be blocked (e.g. &ldquo;<B>delay</B> 
0.0;&rdquo; ) is of interest in situations where delays are used to achieve 
voluntary round-robin task dispatching among equal-priority tasks.</SPAN></DIV>

<H4 Class="centered">Wording Changes from Ada 83</H4>
<DIV Class="paranum">14.a</DIV>
<DIV Class="Annotations">The rules regarding a <SPAN Class="swiss"><A HREF="AA-9-7-2.html#S0219">timed_entry_call</A></SPAN> 
with a very small positive Duration value, have been tightened to always 
require the check whether the rendezvous is immediately possible.</DIV>

<H4 Class="centered">Wording Changes from Ada 95</H4>
<DIV Class="paranum">14.b/2</DIV>
<DIV Class="Annotations">{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AIs/AI-00355.TXT">AI95-00355-01</A></I>} 
<SPAN class="insert2">The note about &ldquo;voluntary round-robin&rsquo;, 
while still true, has been deleted as potentially confusing as it is 
describing a different kind of round-robin than is defined by the round-robin 
dispatching policy.</SPAN></DIV>

<HR>
<DIV Style="margin-top: 0.0em; margin-bottom: 0.6em"><A HREF="AA-TOC.html"><IMG SRC="cont.gif" ALT="Contents" BORDER=0></A>&nbsp;
&nbsp;<A HREF="AA-0-5.html"><IMG SRC="index.gif" ALT="Index" BORDER=0></A>&nbsp;
&nbsp;<A HREF="AA-STDS.html"><IMG SRC="lib.gif" ALT="References" BORDER=0></A>&nbsp;
&nbsp;<A HREF="AA-SRCH.html"><IMG SRC="find.gif" ALT="Search" BORDER=0></A>&nbsp;
&nbsp;<A HREF="AA-D-8.html"><IMG SRC="prev.gif" ALT="Previous" BORDER=0></A>&nbsp;
&nbsp;<A HREF="AA-D-10.html"><IMG SRC="next.gif" ALT="Next" BORDER=0></A>&nbsp;
</DIV>
<DIV Style="margin-top:0.0em"><IMG SRC="AE_logo.gif" height=100 width=113 align=right ALT="Ada-Europe">
<SPAN Style="font-size: 125%">Sponsored by <SPAN Style="font-size: 125%"><A HREF="http://www.ada-europe.org/"><B>Ada-Europe</B></A></SPAN></SPAN></DIV>
</BODY>
</HTML>
