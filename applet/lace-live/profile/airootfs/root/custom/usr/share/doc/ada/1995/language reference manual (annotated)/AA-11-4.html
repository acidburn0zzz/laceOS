<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
"http://www.w3.org/TR/html4/loose.dtd">
<HTML>
<HEAD>
    <TITLE>Exception Handling</TITLE>
    <META NAME="Author" CONTENT="JTC1/SC22/WG9/ARG, by Randall Brukardt, ARG Editor">
    <META NAME="GENERATOR" CONTENT="Arm_Form.Exe, Ada Reference Manual generator">
    <STYLE type="text/css">
    DIV.paranum {position: absolute; font-family: Arial, Helvetica, sans-serif; left: 0.5em; top: auto}
    TT {font-family: "Courier New", monospace}
    DT {display: compact}
    DIV.Normal {font-family: "Times New Roman", Times, serif; margin-bottom: 0.6em}
    DIV.Wide {font-family: "Times New Roman", Times, serif; margin-top: 0.6em; margin-bottom: 0.6em}
    DIV.Annotations {font-family: "Times New Roman", Times, serif; margin-left: 4.0em; margin-bottom: 0.6em}
    DIV.WideAnnotations {font-family: "Times New Roman", Times, serif; margin-left: 4.0em; margin-top: 0.6em; margin-bottom: 0.6em}
    DIV.Index {font-family: "Times New Roman", Times, serif}
    DIV.SyntaxSummary {font-family: "Times New Roman", Times, serif; margin-left: 2.0em; margin-bottom: 0.4em}
    DIV.Notes {font-family: "Times New Roman", Times, serif; margin-left: 2.0em; margin-bottom: 0.6em}
    DIV.NotesHeader {font-family: "Times New Roman", Times, serif; margin-left: 2.0em}
    DIV.SyntaxIndented {font-family: "Times New Roman", Times, serif; margin-left: 2.0em; margin-bottom: 0.4em}
    DIV.Indented {font-family: "Times New Roman", Times, serif; margin-left: 6.0em; margin-bottom: 0.6em}
    DIV.CodeIndented {font-family: "Times New Roman", Times, serif; margin-left: 4.0em; margin-bottom: 0.6em}
    DIV.SmallIndented {font-family: "Times New Roman", Times, serif; margin-left:  10.0em; margin-bottom: 0.6em}
    DIV.SmallCodeIndented {font-family: "Times New Roman", Times, serif; margin-left: 8.0em; margin-bottom: 0.6em}
    DIV.Examples {font-family: "Courier New", monospace; margin-left: 2.0em; margin-bottom: 0.6em}
    DIV.SmallExamples {font-family: "Courier New", monospace; font-size: 80%; margin-left: 7.5em; margin-bottom: 0.6em}
    DIV.IndentedExamples {font-family: "Courier New", monospace; margin-left: 8.0em; margin-bottom: 0.6em}
    DIV.SmallIndentedExamples {font-family: "Courier New", monospace; font-size: 80%; margin-left:  15.0em; margin-bottom: 0.6em}
    UL.Bulleted {font-family: "Times New Roman", Times, serif; margin-left: 2.0em; margin-right: 2.0em; margin-top: 0em; margin-bottom: 0.5em}
    UL.SmallBulleted {font-family: "Times New Roman", Times, serif; margin-left: 6.0em; margin-right: 6.0em; margin-top: 0em; margin-bottom: 0.5em}
    UL.NestedBulleted {font-family: "Times New Roman", Times, serif; margin-left: 4.0em; margin-right: 4.0em; margin-top: 0em; margin-bottom: 0.5em}
    UL.SmallNestedBulleted {font-family: "Times New Roman", Times, serif; margin-left: 8.0em; margin-right: 8.0em; margin-top: 0em; margin-bottom: 0.5em}
    UL.IndentedBulleted {font-family: "Times New Roman", Times, serif; margin-left: 8.0em; margin-right: 8.0em; margin-top: 0em; margin-bottom: 0.5em}
    UL.CodeIndentedBulleted {font-family: "Times New Roman", Times, serif; margin-left: 6.0em; margin-right: 6.0em; margin-top: 0em; margin-bottom: 0.5em}
    UL.CodeIndentedNestedBulleted {font-family: "Times New Roman", Times, serif; margin-left: 8.0em; margin-right: 8.0em; margin-top: 0em; margin-bottom: 0.5em}
    UL.SyntaxIndentedBulleted {font-family: "Times New Roman", Times, serif; margin-left: 4.0em; margin-right: 4.0em; margin-top: 0em; margin-bottom: 0.5em}
    UL.NotesBulleted {font-family: "Times New Roman", Times, serif; margin-left: 4.0em; margin-right: 4.0em; margin-top: 0em; margin-bottom: 0.5em}
    UL.NotesNestedBulleted {font-family: "Times New Roman", Times, serif; margin-left: 6.0em; margin-right: 6.0em; margin-top: 0em; margin-bottom: 0.5em}
    DL.Hanging {font-family: "Times New Roman", Times, serif; margin-top: 0em; margin-bottom: 0.6em}
    DD.Hanging {margin-left: 6.0em}
    DL.IndentedHanging {font-family: "Times New Roman", Times, serif; margin-left: 4.0em; margin-top: 0em; margin-bottom: 0.6em}
    DD.IndentedHanging {margin-left: 2.0em}
    DL.HangingInBulleted {font-family: "Times New Roman", Times, serif; margin-left: 2.0em; margin-right: 2.0em; margin-top: 0em; margin-bottom: 0.5em}
    DD.HangingInBulleted {margin-left: 4.0em}
    DL.SmallHanging {font-family: "Times New Roman", Times, serif; margin-left: 4.0em; margin-top: 0em; margin-bottom: 0.6em}
    DD.SmallHanging {margin-left: 7.5em}
    DL.SmallIndentedHanging {font-family: "Times New Roman", Times, serif; margin-left: 8.0em; margin-top: 0em; margin-bottom: 0.6em}
    DD.SmallIndentedHanging {margin-left: 2.0em}
    DL.SmallHangingInBulleted {font-family: "Times New Roman", Times, serif; margin-left: 6.0em; margin-right: 6.0em; margin-top: 0em; margin-bottom: 0.5em}
    DD.SmallHangingInBulleted {margin-left: 5.0em}
    DL.Enumerated {font-family: "Times New Roman", Times, serif; margin-right: 0.0em; margin-top: 0em; margin-bottom: 0.5em}
    DD.Enumerated {margin-left: 2.0em}
    DL.SmallEnumerated {font-family: "Times New Roman", Times, serif; margin-left: 4.0em; margin-right: 4.0em; margin-top: 0em; margin-bottom: 0.5em}
    DD.SmallEnumerated {margin-left: 2.5em}
    DL.NestedEnumerated {font-family: "Times New Roman", Times, serif; margin-left: 2.0em; margin-right: 2.0em; margin-top: 0em; margin-bottom: 0.5em}
    DL.SmallNestedEnumerated {font-family: "Times New Roman", Times, serif; margin-left: 6.0em; margin-right: 6.0em; margin-top: 0em; margin-bottom: 0.5em}
    </STYLE>
</HEAD>
<BODY TEXT="#000000" BGCOLOR="#FFFFF0" LINK="#0000FF" VLINK="#800080" ALINK="#FF0000">
<P><A HREF="AA-TOC.html">Contents</A>&nbsp;&nbsp;&nbsp;<A HREF="AA-0-29.html">Index</A>&nbsp;&nbsp;&nbsp;<A HREF="AA-SRCH.html">Search</A>&nbsp;&nbsp;&nbsp;<A HREF="AA-11-3.html">Previous</A>&nbsp;&nbsp;&nbsp;<A HREF="AA-11-4-1.html">Next</A></P>
<HR>
<H1> 11.4 Exception Handling</H1>
<DIV Class="Paranum"><FONT SIZE=-2>1</FONT></DIV>
<DIV Class="Normal">&nbsp;&nbsp;&nbsp;[When an exception occurrence is raised, normal
program execution is abandoned and control is transferred to an applicable
<FONT FACE="Arial, Helvetica">exception_handler</FONT>, if any. <FONT SIZE="-1">{<I>handle
(an exception occurrence)</I>}</FONT> <A NAME="I4070"></A>To <I>handle</I>
an exception occurrence is to respond to the exceptional event. <FONT SIZE="-1">{<I>propagate</I>}</FONT>
<A NAME="I4071"></A>To <I>propagate</I> an exception occurrence is to
raise it again in another context; that is, to fail to respond to the
exceptional event in the present context.] </DIV>
<DIV Class="Paranum"><FONT SIZE=-2>1.a</FONT></DIV>
<DIV Class="Annotations"><FONT SIZE="-1"><B>Ramification: </B>In other
words, if the execution of a given construct raises an exception, but
does not handle it, the exception is propagated to an enclosing execution
(except in the case of a <FONT FACE="Arial, Helvetica">task_body</FONT>).</FONT></DIV>
<DIV Class="Paranum"><FONT SIZE=-2>1.b/1</FONT></DIV>
<DIV Class="Annotations"><FONT SIZE="-1">Propagation involves re-raising
the same exception occurrence<S>(assuming the implementation has not
taken advantage of the Implementation Permission of <A HREF="AA-11-3.html">11.3</A>)</S>.
For example, calling an entry of an uncallable task raises Tasking_Error;
this is not propagation. </FONT></DIV>

<H4 ALIGN=CENTER>Dynamic Semantics</H4>
<DIV Class="Paranum"><FONT SIZE=-2>2</FONT></DIV>
<DIV Class="Normal">&nbsp;&nbsp;&nbsp;<FONT SIZE="-1">{<I>dynamically enclosing (of
one execution by another)</I>}</FONT> <A NAME="I4072"></A><FONT SIZE="-1">{<I>execution
(dynamically enclosing)</I>}</FONT> <A NAME="I4073"></A>Within a given
task, if the execution of construct <I>a</I> is defined by this International
Standard to consist (in part) of the execution of construct <I>b</I>,
then while <I>b</I> is executing, the execution of <I>a</I> is said to
<I>dynamically enclose</I> the execution of <I>b</I>. <FONT SIZE="-1">{<I>innermost
dynamically enclosing</I>}</FONT> <A NAME="I4074"></A>The <I>innermost
dynamically enclosing</I> execution of a given execution is the dynamically
enclosing execution that started most recently. </DIV>
<DIV Class="Paranum"><FONT SIZE=-2>2.a</FONT></DIV>
<DIV Class="Annotations"><FONT SIZE="-1"><B>To be honest: </B>{<I>included
(one execution by another)</I>} <A NAME="I4075"></A>{<I>execution (included
by another execution)</I>} <A NAME="I4076"></A>If the execution of <I>a</I>
dynamically encloses that of <I>b</I>, then we also say that the execution
of <I>b</I> is <I>included in</I> the execution of <I>a</I>. </FONT></DIV>
<DIV Class="Paranum"><FONT SIZE=-2>2.b</FONT></DIV>
<DIV Class="Annotations"><FONT SIZE="-1"><B>Ramification: </B>Examples:
The execution of an <FONT FACE="Arial, Helvetica">if_statement</FONT>
dynamically encloses the evaluation of the <FONT FACE="Arial, Helvetica">condition</FONT>
after the <B>if</B> (during that evaluation). (Recall that ``execution''
includes both ``elaboration'' and ``evaluation'', as well as other executions.)
The evaluation of a function call dynamically encloses the execution
of the <FONT FACE="Arial, Helvetica">sequence_of_statement</FONT>s of
the <FONT FACE="Arial, Helvetica">function_body</FONT> (during that execution).
Note that, due to recursion, several simultaneous executions of the same
construct can be occurring at once during the execution of a particular
task.</FONT></DIV>
<DIV Class="Paranum"><FONT SIZE=-2>2.c</FONT></DIV>
<DIV Class="Annotations"><FONT SIZE="-1">Dynamically enclosing is not
defined across task boundaries; a task's execution does not include the
execution of any other tasks.</FONT></DIV>
<DIV Class="Paranum"><FONT SIZE=-2>2.d</FONT></DIV>
<DIV Class="Annotations"><FONT SIZE="-1">Dynamically enclosing is only
defined for executions that are occurring at a given moment in time;
if an <FONT FACE="Arial, Helvetica">if_statement</FONT> is currently
executing the <FONT FACE="Arial, Helvetica">sequence_of_statement</FONT>s
after <B>then</B>, then the evaluation of the <FONT FACE="Arial, Helvetica">condition</FONT>
is no longer dynamically enclosed by the execution of the <FONT FACE="Arial, Helvetica">if_statement</FONT>
(or anything else). </FONT></DIV>
<DIV Class="Paranum"><FONT SIZE=-2>3</FONT></DIV>
<DIV Class="Normal" Style="margin-bottom: 0.4em">&nbsp;&nbsp;&nbsp;<FONT SIZE="-1">{<I>raise
(an exception occurrence)</I>}</FONT> <A NAME="I4077"></A>When an exception
occurrence is raised by the execution of a given construct, the rest
of the execution of that construct is <I>abandoned</I>; that is, any
portions of the execution that have not yet taken place are not performed.
The construct is first completed, and then left, as explained in <A HREF="AA-7-6-1.html">7.6.1</A>.
Then: </DIV>
<DIV Class="Paranum"><FONT SIZE=-2>4</FONT></DIV>
<UL Class="Bulleted"><LI TYPE=DISC>If the construct is a <FONT FACE="Arial, Helvetica">task_body</FONT>,
the exception does not propagate further; </LI></UL>
<DIV Class="Paranum"><FONT SIZE=-2>4.a</FONT></DIV>
<DIV Class="Annotations"><FONT SIZE="-1"><B>Ramification: </B>When an
exception is raised by the execution of a <FONT FACE="Arial, Helvetica">task_body</FONT>,
there is no dynamically enclosing execution, so the exception does not
propagate any further. If the exception occurred during the activation
of the task, then the activator raises Tasking_Error, as explained in
<A HREF="AA-9-2.html">9.2</A>, ``<A HREF="AA-9-2.html">Task Execution
- Task Activation</A>'', but we don't define that as propagation; it's
a special rule. Otherwise (the exception occurred during the execution
of the <FONT FACE="Arial, Helvetica">handled_sequence_of_statements</FONT>
of the task), the task silently disappears. Thus, abnormal termination
of tasks is not always considered to be an error. </FONT></DIV>
<DIV Class="Paranum"><FONT SIZE=-2>5</FONT></DIV>
<UL Class="Bulleted"><LI TYPE=DISC>If the construct is the <FONT FACE="Arial, Helvetica">sequence_of_statements</FONT>
of a <FONT FACE="Arial, Helvetica">handled_sequence_of_statements</FONT>
that has a handler with a choice covering the exception, the occurrence
is handled by that handler;</LI></UL>
<DIV Class="Paranum"><FONT SIZE=-2>6</FONT></DIV>
<UL Class="Bulleted"><LI TYPE=DISC><FONT SIZE="-1">{<I>propagate (an
exception occurrence by an execution, to a dynamically enclosing execution)</I>}</FONT>
<A NAME="I4078"></A>Otherwise, the occurrence is <I>propagated</I> to
the innermost dynamically enclosing execution, which means that the occurrence
is raised again in that context. </LI></UL>
<DIV Class="Paranum"><FONT SIZE=-2>6.a</FONT></DIV>
<DIV Class="Annotations"><FONT SIZE="-1"><B>To be honest: </B>{<I>propagate
(an exception by an execution)</I>} <A NAME="I4079"></A>{<I>propagate
(an exception by a construct)</I>} <A NAME="I4080"></A>As shorthands,
we refer to the <I>propagation of an exception</I>, and the <I>propagation
by a construct</I>, if the execution of the construct propagates an exception
occurrence. </FONT></DIV>
<DIV Class="Paranum"><FONT SIZE=-2>7</FONT></DIV>
<DIV Class="Normal">&nbsp;&nbsp;&nbsp;<FONT SIZE="-1">{<I>handle (an exception occurrence)</I>}</FONT>
<A NAME="I4081"></A><FONT SIZE="-1">{<I>execution (handler)</I> [partial]}</FONT>
<A NAME="I4082"></A><FONT SIZE="-1">{<I>elaboration (choice_parameter_specification)</I>
[partial]}</FONT> <A NAME="I4083"></A>When an occurrence is <I>handled</I>
by a given handler, the <FONT FACE="Arial, Helvetica">choice_parameter_specification</FONT>,
if any, is first elaborated, which creates the choice parameter and initializes
it to the occurrence. Then, the <FONT FACE="Arial, Helvetica">sequence_of_statements</FONT>
of the handler is executed; this execution replaces the abandoned portion
of the execution of the <FONT FACE="Arial, Helvetica">sequence_of_statements</FONT>.
</DIV>
<DIV Class="Paranum"><FONT SIZE=-2>7.a</FONT></DIV>
<DIV Class="Annotations"><FONT SIZE="-1"><B>Ramification: </B>This ``replacement''
semantics implies that the handler can do pretty much anything the abandoned
sequence could do; for example, in a function, the handler can execute
a <FONT FACE="Arial, Helvetica">return_statement</FONT> that applies
to the function. </FONT></DIV>
<DIV Class="Paranum"><FONT SIZE=-2>7.b</FONT></DIV>
<DIV Class="Annotations"><FONT SIZE="-1"><B>Ramification: </B>The rules
for exceptions raised in library units, main subprograms and partitions
follow from the normal rules, plus the semantics of the environment task
described in Section 10 (for example, the environment task of a partition
elaborates library units and calls the main subprogram). If an exception
is propagated by the main subprogram, it is propagated to the environment
task, which then terminates abnormally, causing the partition to terminate
abnormally. Although abnormal termination of tasks is not necessarily
an error, abnormal termination of a partition due to an exception <I>is</I>
an error. </FONT></DIV>
<DIV Class="NotesHeader"><FONT SIZE="-1">NOTES</FONT></DIV>
<DIV Class="Paranum"><FONT SIZE=-2>8</FONT></DIV>
<DIV Class="Notes"><FONT SIZE="-1">1&nbsp;&nbsp;Note that exceptions
raised in a <FONT FACE="Arial, Helvetica">declarative_part</FONT> of
a body are not handled by the handlers of the <FONT FACE="Arial, Helvetica">handled_sequence_of_statements</FONT>
of that body. </FONT></DIV>

<HR>
<P><A HREF="AA-TOC.html">Contents</A>&nbsp;&nbsp;&nbsp;<A HREF="AA-0-29.html">Index</A>&nbsp;&nbsp;&nbsp;<A HREF="AA-SRCH.html">Search</A>&nbsp;&nbsp;&nbsp;<A HREF="AA-11-3.html">Previous</A>&nbsp;&nbsp;&nbsp;<A HREF="AA-11-4-1.html">Next</A>&nbsp;&nbsp;&nbsp;<A HREF="AA-TTL.html">Legal</A></P>
</BODY>
</HTML>
