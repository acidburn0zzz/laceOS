<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
"http://www.w3.org/TR/html4/loose.dtd">
<HTML>
<HEAD>
    <TITLE>Non-Preemptive Dispatching</TITLE>
    <META http-equiv="Content-Type" content="text/html; charset=iso-8859-1">
    <META NAME="Author" CONTENT="JTC1/SC22/WG9/ARG, by Randall Brukardt, ARG Editor">
    <META NAME="GENERATOR" CONTENT="Arm_Form.Exe, Ada Reference Manual generator">
    <STYLE type="text/css">
    H4.centered {text-align: center}
    SPAN.swiss {font-family: Arial, Helvetica, sans-serif; font-size: 92%}
    SPAN.roman {font-family: "Times New Roman", Times, serif}
    DIV.paranum {float: left; font-family: Arial, Helvetica, sans-serif; font-size: 64%; width: 2.8em; margin-left: -0.4em; margin-right: -3.0em; margin-top: 0.2em}
    TT {font-family: "Courier New", monospace}
    DT {display: compact}
    SPAN.insert2 {text-decoration: underline; color: rgb(0,102,0) }
    SPAN.delete2 {text-decoration: line-through; color: rgb(0,102,0) }
    DIV.Normal {font-family: "Times New Roman", Times, serif; line-height: 122%; margin-left: 1.2em; margin-bottom: 0.6em}
    DIV.Annotations {font-family: "Times New Roman", Times, serif; font-size: 80%; line-height: 122%; margin-left: 6.2em; margin-bottom: 0.6em}
    UL.Bulleted {font-family: "Times New Roman", Times, serif; line-height: 122%; margin-left: 3.2em; margin-right: 2.0em; margin-top: 0em; margin-bottom: 0.5em}
    </STYLE>
</HEAD>
<BODY TEXT="#000000" BGCOLOR="#FFFFF0" LINK="#000080" VLINK="#330033" ALINK="#0000FF">
<DIV><B><SPAN Style="font-size:200%; color: rgb(0,51,153)">Annotated</SPAN><SPAN Style="font-size:200%; color: rgb(0,0,102)">&nbsp;Ada Reference Manual</SPAN></B> &mdash; <A HREF="AA-TTL.html"><B>Legal Information</B></A></DIV>
<DIV Style="margin-top: 0.6em; margin-bottom: 0.0em"><A HREF="AA-TOC.html"><IMG SRC="cont.gif" ALT="Contents" BORDER=0></A>&nbsp;
&nbsp;<A HREF="AA-0-5.html"><IMG SRC="index.gif" ALT="Index" BORDER=0></A>&nbsp;
&nbsp;<A HREF="AA-STDS.html"><IMG SRC="lib.gif" ALT="References" BORDER=0></A>&nbsp;
&nbsp;<A HREF="AA-SRCH.html"><IMG SRC="find.gif" ALT="Search" BORDER=0></A>&nbsp;
&nbsp;<A HREF="AA-D-2-3.html"><IMG SRC="prev.gif" ALT="Previous" BORDER=0></A>&nbsp;
&nbsp;<A HREF="AA-D-2-5.html"><IMG SRC="next.gif" ALT="Next" BORDER=0></A>&nbsp;
</DIV>
<HR>
<H1>&nbsp;D.2.4 <SPAN class="insert2">Non-Preemptive Dispatching</SPAN> <SPAN class="delete2"></SPAN></H1>
<DIV Class="paranum">1/2</DIV>
<DIV Class="Normal">{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AIs/AI-00298.TXT">AI95-00298-01</A></I>} 
<SPAN class="insert2">[This clause defines a non-preemptive task dispatching 
policy.]</SPAN>&nbsp;</DIV>

<H4 Class="centered">Static Semantics</H4>
<DIV Class="paranum">2/2</DIV>
<DIV Class="Normal">{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AIs/AI-00298.TXT">AI95-00298-01</A></I>} 
<SPAN class="insert2"></SPAN>{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AIs/AI-00355.TXT">AI95-00355-01</A></I>} 
<SPAN class="insert2">The <I>policy_</I><SPAN Class="swiss"><A HREF="AA-2-3.html#S0002">identifier</A></SPAN> 
Non_Preemptive_FIFO_Within_Priorities is a task dispatching policy.</SPAN></DIV>

<H4 Class="centered">Legality Rules</H4>
<DIV Class="paranum">3/2</DIV>
<DIV Class="Normal">{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AIs/AI-00355.TXT">AI95-00355-01</A></I>} 
<SPAN class="insert2">Non_Preemptive_FIFO_Within_Priorities shall not 
be specified as the <I>policy_</I><SPAN Class="swiss"><A HREF="AA-2-3.html#S0002">identifier</A></SPAN> 
of <SPAN Class="swiss"><A HREF="AA-2-8.html#S0019">pragma</A></SPAN> 
Priority_Specific_Dispatching (see <A HREF="AA-D-2-2.html">D.2.2</A>).</SPAN></DIV>
<DIV Class="paranum">3.a/2</DIV>
<DIV Class="Annotations"><SPAN class="insert2"><B>Reason:&nbsp;</B>The non-preemptive 
nature of this policy could cause the policies of higher priority tasks 
to malfunction, missing deadlines and having unlimited priority inversion. 
That would render the use of such policies impotent and misleading. As 
such, this policy only makes sense for a complete system.</SPAN>&nbsp;</DIV>

<H4 Class="centered">Dynamic Semantics</H4>
<DIV Class="paranum">4/2</DIV>
<DIV Class="Normal">{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AIs/AI-00298.TXT">AI95-00298-01</A></I>} 
<SPAN class="insert2">When Non_Preemptive_FIFO_Within_Priorities is in 
effect, modifications to the ready queues occur only as follows:</SPAN></DIV>
<DIV Class="paranum">5/2</DIV>
<UL Class="Bulleted"><LI TYPE=DISC>{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AIs/AI-00298.TXT">AI95-00298-01</A></I>} 
<SPAN class="insert2">When a blocked task becomes ready, it is added 
at the tail of the ready queue for its active priority.</SPAN></LI></UL>
<DIV Class="paranum">6/2</DIV>
<UL Class="Bulleted"><LI TYPE=DISC><SPAN class="insert2">When the active 
priority of a ready task that is not running changes, or the setting 
of its base priority takes effect, the task is removed from the ready 
queue for its old active priority and is added at the tail of the ready 
queue for its new active priority.</SPAN></LI></UL>
<DIV Class="paranum">7/2</DIV>
<UL Class="Bulleted"><LI TYPE=DISC><SPAN class="insert2">When the setting 
of the base priority of a running task takes effect, the task is added 
to the tail of the ready queue for its active priority.</SPAN></LI></UL>
<DIV Class="paranum">8/2</DIV>
<UL Class="Bulleted"><LI TYPE=DISC><SPAN class="insert2">When a task 
executes a <SPAN Class="swiss"><A HREF="AA-9-6.html#S0209">delay_statement</A></SPAN> 
that does not result in blocking, it is added to the tail of the ready 
queue for its active priority.</SPAN>&nbsp;</LI></UL>
<DIV Class="paranum">8.a/2</DIV>
<DIV Class="Annotations"><SPAN class="insert2"><B>Ramification:&nbsp;</B>If 
the delay does result in blocking, the task moves to the &ldquo;delay 
queue&rdquo;, not to the ready queue.</SPAN>&nbsp;</DIV>
<DIV Class="paranum">9/2</DIV>
<DIV Class="Normal"><SPAN class="insert2">For this policy, a non-blocking 
<SPAN Class="swiss"><A HREF="AA-9-6.html#S0209">delay_statement</A></SPAN> 
is the only non-blocking event that is a task dispatching point (see 
<A HREF="AA-D-2-1.html">D.2.1</A>).<SPAN STYLE="font-size: 80%">{<I>task 
dispatching point</I> [partial]}</SPAN> <A NAME="I7458"></A><SPAN STYLE="font-size: 80%">{<I>dispatching 
point</I> [partial]}</SPAN> <A NAME="I7459"></A></SPAN></DIV>

<H4 Class="centered">Implementation Requirements</H4>
<DIV Class="paranum">10/2</DIV>
<DIV Class="Normal">&nbsp;{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AIs/AI-00333.TXT">AI95-00333-01</A></I>} 
<SPAN class="insert2">An implementation shall allow, for a single partition, 
both the task dispatching policy to be specified as Non_Preemptive_FIFO_Within_Priorities 
and also the locking policy (see <A HREF="AA-D-3.html">D.3</A>) to be 
specified as Ceiling_Locking.</SPAN>&nbsp;</DIV>
<DIV Class="paranum">10.a/2</DIV>
<DIV Class="Annotations"><SPAN class="insert2"><B>Reason:&nbsp;</B>This is 
the preferred combination of the Non_Preemptive_FIFO_Within_Priorities 
policy with a locking policy, and we want that combination to be portable.</SPAN> 
</DIV>

<H4 Class="centered">Implementation Permissions</H4>
<DIV Class="paranum">11/2</DIV>
<DIV Class="Normal">&nbsp;{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AIs/AI-00298.TXT">AI95-00298-01</A></I>} 
<SPAN class="insert2">Since implementations are allowed to round all 
ceiling priorities in subrange System.Priority to System.Priority'Last 
(see <A HREF="AA-D-3.html">D.3</A>), an implementation may allow a task 
to execute within a protected object without raising its active priority 
provided the associated protected unit does not contain pragma Interrupt_Priority, 
Interrupt_Handler, or Attach_Handler.</SPAN></DIV>

<H4 Class="centered">Extensions to Ada 95</H4>
<DIV Class="paranum">11.a/2</DIV>
<DIV Class="Annotations">{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AIs/AI-00298.TXT">AI95-00298-01</A></I>} 
<SPAN class="insert2"></SPAN>{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AIs/AI-00355.TXT">AI95-00355-01</A></I>} 
<SPAN class="insert2">{<I>extensions to Ada 95</I>} <A NAME="I7460"></A>Policy 
Non_Preemptive_FIFO_Within_Priorities is new.</SPAN>&nbsp;</DIV>

<HR>
<DIV Style="margin-top: 0.0em; margin-bottom: 0.6em"><A HREF="AA-TOC.html"><IMG SRC="cont.gif" ALT="Contents" BORDER=0></A>&nbsp;
&nbsp;<A HREF="AA-0-5.html"><IMG SRC="index.gif" ALT="Index" BORDER=0></A>&nbsp;
&nbsp;<A HREF="AA-STDS.html"><IMG SRC="lib.gif" ALT="References" BORDER=0></A>&nbsp;
&nbsp;<A HREF="AA-SRCH.html"><IMG SRC="find.gif" ALT="Search" BORDER=0></A>&nbsp;
&nbsp;<A HREF="AA-D-2-3.html"><IMG SRC="prev.gif" ALT="Previous" BORDER=0></A>&nbsp;
&nbsp;<A HREF="AA-D-2-5.html"><IMG SRC="next.gif" ALT="Next" BORDER=0></A>&nbsp;
</DIV>
<DIV Style="margin-top:0.0em"><IMG SRC="AE_logo.gif" height=100 width=113 align=right ALT="Ada-Europe">
<SPAN Style="font-size: 125%">Sponsored by <SPAN Style="font-size: 125%"><A HREF="http://www.ada-europe.org/"><B>Ada-Europe</B></A></SPAN></SPAN></DIV>
</BODY>
</HTML>
