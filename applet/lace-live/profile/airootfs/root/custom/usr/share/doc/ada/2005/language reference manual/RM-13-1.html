<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
"http://www.w3.org/TR/html4/loose.dtd">
<HTML>
<HEAD>
    <TITLE>Operational and Representation Items</TITLE>
    <META http-equiv="Content-Type" content="text/html; charset=iso-8859-1">
    <META NAME="Author" CONTENT="JTC1/SC22/WG9/ARG, by Randall Brukardt, ARG Editor">
    <META NAME="GENERATOR" CONTENT="Arm_Form.Exe, Ada Reference Manual generator">
    <STYLE type="text/css">
    H4.centered {text-align: center}
    SPAN.swiss {font-family: Arial, Helvetica, sans-serif; font-size: 92%}
    SPAN.roman {font-family: "Times New Roman", Times, serif}
    DIV.paranum {float: left; font-family: Arial, Helvetica, sans-serif; font-size: 64%; width: 2.8em; margin-left: -0.4em; margin-right: -3.0em; margin-top: 0.2em}
    TT {font-family: "Courier New", monospace}
    DT {display: compact}
    DIV.Normal {font-family: "Times New Roman", Times, serif; line-height: 122%; margin-left: 1.2em; margin-bottom: 0.6em}
    DIV.SyntaxIndented {font-family: "Times New Roman", Times, serif; line-height: 122%; margin-left: 3.2em; margin-bottom: 0.4em}
    UL.Bulleted {font-family: "Times New Roman", Times, serif; line-height: 122%; margin-left: 3.2em; margin-right: 2.0em; margin-top: 0em; margin-bottom: 0.5em}
    </STYLE>
</HEAD>
<BODY TEXT="#000000" BGCOLOR="#FFFFF0" LINK="#000080" VLINK="#330033" ALINK="#0000FF">
<DIV><SPAN Style="font-size:200%; color: rgb(0,0,153)"><B>Ada Reference Manual</B></SPAN> &mdash; <A HREF="RM-TTL.html"><B>Legal Information</B></A></DIV>
<DIV Style="margin-top: 0.6em; margin-bottom: 0.0em"><A HREF="RM-TOC.html"><IMG SRC="cont.gif" ALT="Contents" BORDER=0></A>&nbsp;
&nbsp;<A HREF="RM-0-5.html"><IMG SRC="index.gif" ALT="Index" BORDER=0></A>&nbsp;
&nbsp;<A HREF="RM-STDS.html"><IMG SRC="lib.gif" ALT="References" BORDER=0></A>&nbsp;
&nbsp;<A HREF="RM-SRCH.html"><IMG SRC="find.gif" ALT="Search" BORDER=0></A>&nbsp;
&nbsp;<A HREF="RM-13.html"><IMG SRC="prev.gif" ALT="Previous" BORDER=0></A>&nbsp;
&nbsp;<A HREF="RM-13-2.html"><IMG SRC="next.gif" ALT="Next" BORDER=0></A>&nbsp;
</DIV>
<HR>
<H1>13.1 Operational and Representation Items</H1>
<DIV Class="paranum">0.1/1</DIV>
<DIV Class="Normal">&nbsp;&nbsp;Representation and operational items can be used 
to specify aspects of entities. Two kinds of aspects of entities can 
be specified: aspects of representation and operational aspects. Representation 
items specify how the types and other entities of the language are to 
be mapped onto the underlying machine. Operational items specify other 
properties of entities.</DIV>
<DIV Class="paranum">1/1</DIV>
<DIV Class="Normal"><A NAME="I4413"></A><A NAME="I4414"></A><A NAME="I4415"></A>There 
are six kinds of <I>representation items</I>: <SPAN Class="swiss"><A HREF="RM-13-3.html#S0286">attribute_definition_clause</A></SPAN>s 
for representation attributes, <SPAN Class="swiss"><A HREF="RM-13-4.html#S0287">enumeration_representation_clause</A></SPAN>s, 
<SPAN Class="swiss"><A HREF="RM-13-5-1.html#S0289">record_representation_clause</A></SPAN>s, 
<SPAN Class="swiss"><A HREF="RM-J-7.html#S0298">at_clause</A></SPAN>s, 
<SPAN Class="swiss"><A HREF="RM-13-5-1.html#S0290">component_clause</A></SPAN>s, 
and <I>representation pragmas</I>. They can be provided to give more 
efficient representation or to interface with features that are outside 
the domain of the language (for example, peripheral hardware).&nbsp;</DIV>
<DIV Class="paranum">1.1/1</DIV>
<DIV Class="Normal">&nbsp;&nbsp;An <A NAME="I4416"></A><I>operational item</I> 
is an <SPAN Class="swiss"><A HREF="RM-13-3.html#S0286">attribute_definition_clause</A></SPAN> 
for an operational attribute.</DIV>
<DIV Class="paranum">1.2/1</DIV>
<DIV Class="Normal">&nbsp;&nbsp;An operational item or a representation item applies 
to an entity identified by a <SPAN Class="swiss"><A HREF="RM-13-1.html#S0285">local_name</A></SPAN>, 
which denotes an entity declared local to the current declarative region, 
or a library unit declared immediately preceding a representation pragma 
in a <SPAN Class="swiss"><A HREF="RM-10-1-1.html#S0228">compilation</A></SPAN>. 
</DIV>

<H4 Class="centered">Syntax</H4>
<DIV Class="paranum">2/1</DIV>
<DIV Class="SyntaxIndented"><SPAN Class="swiss">aspect_clause</SPAN><A NAME="I4417"></A><A NAME="S0283"></A><A NAME="S0284"></A><SPAN Class="swiss">&nbsp;::=&nbsp;</SPAN><A NAME="I4418"></A><SPAN Class="swiss"><A HREF="RM-13-3.html#S0286">attribute_definition_clause</A></SPAN><BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;|&nbsp;<A NAME="I4419"></A><SPAN Class="swiss"><A HREF="RM-13-4.html#S0287">enumeration_representation_clause</A></SPAN><BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;|&nbsp;<A NAME="I4420"></A><SPAN Class="swiss"><A HREF="RM-13-5-1.html#S0289">record_representation_clause</A></SPAN><BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;|&nbsp;<A NAME="I4421"></A><SPAN Class="swiss"><A HREF="RM-J-7.html#S0298">at_clause</A></SPAN></DIV>
<DIV Class="paranum">3</DIV>
<DIV Class="SyntaxIndented"><SPAN Class="swiss">local_name</SPAN><A NAME="I4422"></A><A NAME="S0285"></A><SPAN Class="swiss">&nbsp;::=&nbsp;</SPAN><A NAME="I4423"></A><SPAN Class="swiss"><A HREF="RM-4-1.html#S0092">direct_name</A></SPAN><BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;|&nbsp;<A NAME="I4424"></A><SPAN Class="swiss"><A HREF="RM-4-1.html#S0092">direct_name</A></SPAN>'<A NAME="I4425"></A><SPAN Class="swiss"><A HREF="RM-4-1-4.html#S0101">attribute_designator</A></SPAN><BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;|&nbsp;<I>library_unit_</I><A NAME="I4426"></A><SPAN Class="swiss"><A HREF="RM-4-1.html#S0091">name</A></SPAN></DIV>
<DIV Class="paranum">4/1</DIV>
<DIV Class="SyntaxIndented">A representation pragma is allowed only at 
places where an <SPAN Class="swiss"><A HREF="RM-13-1.html#S0283">aspect_clause</A></SPAN> 
or <SPAN Class="swiss"><A HREF="RM-10-1-1.html#S0229">compilation_unit</A></SPAN> 
is allowed. <A NAME="I4427"></A></DIV>

<H4 Class="centered">Name Resolution Rules</H4>
<DIV Class="paranum">5/1</DIV>
<DIV Class="Normal">In an operational item or representation item, if 
the <SPAN Class="swiss"><A HREF="RM-13-1.html#S0285">local_name</A></SPAN> 
is a <SPAN Class="swiss"><A HREF="RM-4-1.html#S0092">direct_name</A></SPAN>, 
then it shall resolve to denote a declaration (or, in the case of a <SPAN Class="swiss"><A HREF="RM-2-8.html#S0019">pragma</A></SPAN>, 
one or more declarations) that occurs immediately within the same declarative 
region as the item. If the <SPAN Class="swiss"><A HREF="RM-13-1.html#S0285">local_name</A></SPAN> 
has an <SPAN Class="swiss"><A HREF="RM-4-1-4.html#S0101">attribute_designator</A></SPAN>, 
then it shall resolve to denote an implementation-defined component (see 
<A HREF="RM-13-5-1.html">13.5.1</A>) or a class-wide type implicitly 
declared immediately within the same declarative region as the item. 
A <SPAN Class="swiss"><A HREF="RM-13-1.html#S0285">local_name</A></SPAN> 
that is a <I>library_unit_</I><SPAN Class="swiss"><A HREF="RM-4-1.html#S0091">name</A></SPAN> 
(only permitted in a representation pragma) shall resolve to denote the 
<SPAN Class="swiss"><A HREF="RM-10-1-1.html#S0230">library_item</A></SPAN> 
that immediately precedes (except for other pragmas) the representation 
pragma.&nbsp;</DIV>

<H4 Class="centered">Legality Rules</H4>
<DIV Class="paranum">6/1</DIV>
<DIV Class="Normal">The <SPAN Class="swiss"><A HREF="RM-13-1.html#S0285">local_name</A></SPAN> 
of an <SPAN Class="swiss"><A HREF="RM-13-1.html#S0283">aspect_clause</A></SPAN> 
or representation pragma shall statically denote an entity (or, in the 
case of a <SPAN Class="swiss"><A HREF="RM-2-8.html#S0019">pragma</A></SPAN>, 
one or more entities) declared immediately preceding it in a <SPAN Class="swiss"><A HREF="RM-10-1-1.html#S0228">compilation</A></SPAN>, 
or within the same <SPAN Class="swiss"><A HREF="RM-3-11.html#S0086">declarative_part</A></SPAN>, 
<SPAN Class="swiss"><A HREF="RM-7-1.html#S0174">package_specification</A></SPAN>, 
<SPAN Class="swiss"><A HREF="RM-9-1.html#S0190">task_definition</A></SPAN>, 
<SPAN Class="swiss"><A HREF="RM-9-4.html#S0195">protected_definition</A></SPAN>, 
or <SPAN Class="swiss"><A HREF="RM-3-8.html#S0067">record_definition</A></SPAN> 
as the representation or operational item. If a <SPAN Class="swiss"><A HREF="RM-13-1.html#S0285">local_name</A></SPAN> 
denotes a local callable entity, it may do so through a local <SPAN Class="swiss"><A HREF="RM-8-5-4.html#S0186">subprogram_renaming_declaration</A></SPAN> 
(as a way to resolve ambiguity in the presence of overloading); otherwise, 
the <SPAN Class="swiss"><A HREF="RM-13-1.html#S0285">local_name</A></SPAN> 
shall not denote a <SPAN Class="swiss"><A HREF="RM-8-5.html#S0182">renaming_declaration</A></SPAN>. 
</DIV>
<DIV Class="paranum">7/2</DIV>
<DIV Class="Normal"><A NAME="I4428"></A><A NAME="I4429"></A>The <I>representation</I> 
of an object consists of a certain number of bits (the <I>size</I> of 
the object). For an object of an elementary type, these are the bits 
that are normally read or updated by the machine code when loading, storing, 
or operating-on the value of the object. For an object of a composite 
type, these are the bits reserved for this object, and include bits occupied 
by subcomponents of the object. If the size of an object is greater than 
that of its subtype, the additional bits are padding bits. <A NAME="I4430"></A>For 
an elementary object, these padding bits are normally read and updated 
along with the others. For a composite object, padding bits might not 
be read or updated in any given composite operation, depending on the 
implementation.</DIV>
<DIV Class="paranum">8</DIV>
<DIV Class="Normal"><A NAME="I4431"></A><A NAME="I4432"></A><A NAME="I4433"></A>A 
representation item <I>directly specifies</I> an <I>aspect of representation</I> 
of the entity denoted by the <SPAN Class="swiss"><A HREF="RM-13-1.html#S0285">local_name</A></SPAN>, 
except in the case of a type-related representation item, whose <SPAN Class="swiss"><A HREF="RM-13-1.html#S0285">local_name</A></SPAN> 
shall denote a first subtype, and which directly specifies an aspect 
of the subtype's type. <A NAME="I4434"></A><A NAME="I4435"></A><A NAME="I4436"></A><A NAME="I4437"></A>A 
representation item that names a subtype is either <I>subtype-specific</I> 
(Size and Alignment clauses) or <I>type-related</I> (all others). Subtype-specific 
aspects may differ for different subtypes of the same type.&nbsp;</DIV>
<DIV Class="paranum">8.1/1</DIV>
<DIV Class="Normal">&nbsp;&nbsp;An operational item <I>directly specifies</I> an 
<I>operational aspect</I> of the type of the subtype denoted by the <SPAN Class="swiss"><A HREF="RM-13-1.html#S0285">local_name</A></SPAN>. 
The <SPAN Class="swiss"><A HREF="RM-13-1.html#S0285">local_name</A></SPAN> 
of an operational item shall denote a first subtype. An operational item 
that names a subtype is type-related. <A NAME="I4438"></A><A NAME="I4439"></A><A NAME="I4440"></A><A NAME="I4441"></A></DIV>
<DIV Class="paranum">9</DIV>
<DIV Class="Normal">A representation item that directly specifies an 
aspect of a subtype or type shall appear after the type is completely 
defined (see <A HREF="RM-3-11-1.html">3.11.1</A>), and before the subtype 
or type is frozen (see <A HREF="RM-13-14.html">13.14</A>). If a representation 
item is given that directly specifies an aspect of an entity, then it 
is illegal to give another representation item that directly specifies 
the same aspect of the entity.&nbsp;</DIV>
<DIV Class="paranum">9.1/1</DIV>
<DIV Class="Normal">&nbsp;&nbsp;An operational item that directly specifies an 
aspect of a type shall appear before the type is frozen (see <A HREF="RM-13-14.html">13.14</A>). 
If an operational item is given that directly specifies an aspect of 
a type, then it is illegal to give another operational item that directly 
specifies the same aspect of the type.&nbsp;</DIV>
<DIV Class="paranum">10</DIV>
<DIV Class="Normal">For an untagged derived type, no type-related representation 
items are allowed if the parent type is a by-reference type, or has any 
user-defined primitive subprograms.&nbsp;</DIV>
<DIV Class="paranum">11/2</DIV>
<DIV Class="Normal">&nbsp;Operational and representation aspects of a generic 
formal parameter are the same as those of the actual. Operational and 
representation aspects are the same for all views of a type. A type-related 
representation item is not allowed for a descendant of a generic formal 
untagged type.&nbsp;</DIV>
<DIV Class="paranum">12</DIV>
<DIV Class="Normal">A representation item that specifies the Size for 
a given subtype, or the size or storage place for an object (including 
a component) of a given subtype, shall allow for enough storage space 
to accommodate any value of the subtype.</DIV>
<DIV Class="paranum">13/1</DIV>
<DIV Class="Normal">&nbsp;A representation or operational item that is not 
supported by the implementation is illegal, or raises an exception at 
run time.</DIV>
<DIV Class="paranum">13.1/2</DIV>
<DIV Class="Normal">&nbsp;&nbsp;&nbsp;A <SPAN Class="swiss"><A HREF="RM-3-2-1.html#S0023">type_declaration</A></SPAN> 
is illegal if it has one or more progenitors, and a representation item 
applies to an ancestor, and this representation item conflicts with the 
representation of some other ancestor. The cases that cause conflicts 
are implementation defined.&nbsp;</DIV>

<H4 Class="centered">Static Semantics</H4>
<DIV Class="paranum">14</DIV>
<DIV Class="Normal">If two subtypes statically match, then their subtype-specific 
aspects (Size and Alignment) are the same. <A NAME="I4442"></A></DIV>
<DIV Class="paranum">15/1</DIV>
<DIV Class="Normal">&nbsp;A derived type inherits each type-related aspect 
of representation of its parent type that was directly specified before 
the declaration of the derived type, or (in the case where the parent 
is derived) that was inherited by the parent type from the grandparent 
type. A derived subtype inherits each subtype-specific aspect of representation 
of its parent subtype that was directly specified before the declaration 
of the derived type, or (in the case where the parent is derived) that 
was inherited by the parent subtype from the grandparent subtype, but 
only if the parent subtype statically matches the first subtype of the 
parent type. An inherited aspect of representation is overridden by a 
subsequent representation item that specifies the same aspect of the 
type or subtype.&nbsp;</DIV>
<DIV Class="paranum">15.1/2</DIV>
<DIV Class="Normal">&nbsp;&nbsp;&nbsp;In contrast, whether operational aspects are inherited 
by an untagged derived type depends on each specific aspect. Operational 
aspects are never inherited for a tagged type. When operational aspects 
are inherited by an untagged derived type, aspects that were directly 
specified by operational items that are visible at the point of the derived 
type declaration, or (in the case where the parent is derived) that were 
inherited by the parent type from the grandparent type are inherited. 
An inherited operational aspect is overridden by a subsequent operational 
item that specifies the same aspect of the type.&nbsp;</DIV>
<DIV Class="paranum">15.2/2</DIV>
<DIV Class="Normal">&nbsp;&nbsp;&nbsp;When an aspect that is a subprogram is inherited, 
the derived type inherits the aspect in the same way that a derived type 
inherits a user-defined primitive subprogram from its parent (see <A HREF="RM-3-4.html">3.4</A>). 
</DIV>
<DIV Class="paranum">16</DIV>
<DIV Class="Normal" Style="margin-bottom: 0.4em">Each aspect of representation 
of an entity is as follows:&nbsp;</DIV>
<DIV Class="paranum">17</DIV>
<UL Class="Bulleted"><LI TYPE=DISC><A NAME="I4443"></A>If the aspect 
is <I>specified</I> for the entity, meaning that it is either directly 
specified or inherited, then that aspect of the entity is as specified, 
except in the case of Storage_Size, which specifies a minimum.&nbsp;</LI></UL>
<DIV Class="paranum">18</DIV>
<UL Class="Bulleted"><LI TYPE=DISC><A NAME="I4444"></A>If an aspect of 
representation of an entity is not specified, it is chosen by default 
in an unspecified manner.&nbsp;</LI></UL>
<DIV Class="paranum">18.1/1</DIV>
<DIV Class="Normal">&nbsp;&nbsp;&nbsp;<A NAME="I4445"></A>If an operational aspect is 
<I>specified</I> for an entity (meaning that it is either directly specified 
or inherited), then that aspect of the entity is as specified. Otherwise, 
the aspect of the entity has the default value for that aspect.</DIV>
<DIV Class="paranum">18.2/2</DIV>
<DIV Class="Normal">&nbsp;&nbsp;&nbsp;A representation item that specifies an aspect 
of representation that would have been chosen in the absence of the representation 
item is said to be <I>confirming</I>.<A NAME="I4446"></A>&nbsp;</DIV>

<H4 Class="centered">Dynamic Semantics</H4>
<DIV Class="paranum">19/1</DIV>
<DIV Class="Normal">&nbsp;<A NAME="I4447"></A>For the elaboration of an <SPAN Class="swiss"><A HREF="RM-13-1.html#S0283">aspect_clause</A></SPAN>, 
any evaluable constructs within it are evaluated.&nbsp;</DIV>

<H4 Class="centered">Implementation Permissions</H4>
<DIV Class="paranum">20</DIV>
<DIV Class="Normal">An implementation may interpret aspects of representation 
in an implementation-defined manner. An implementation may place implementation-defined 
restrictions on representation items. <A NAME="I4448"></A>A <I>recommended 
level of support</I> is specified for representation items and related 
features in each subclause. These recommendations are changed to requirements 
for implementations that support the Systems Programming Annex (see <A HREF="RM-C-2.html">C.2</A>, 
&ldquo;<A HREF="RM-C-2.html">Required Representation Support</A>&rdquo;). 
</DIV>

<H4 Class="centered">Implementation Advice</H4>
<DIV Class="paranum">21</DIV>
<DIV Class="Normal" Style="margin-bottom: 0.4em"><A NAME="I4449"></A>The 
recommended level of support for all representation items is qualified 
as follows:&nbsp;</DIV>
<DIV Class="paranum">21.1/2</DIV>
<UL Class="Bulleted"><LI TYPE=DISC>A confirming representation item should 
be supported.&nbsp;</LI></UL>
<DIV Class="paranum">22</DIV>
<UL Class="Bulleted"><LI TYPE=DISC>An implementation need not support 
representation items containing nonstatic expressions, except that an 
implementation should support a representation item for a given entity 
if each nonstatic expression in the representation item is a name that 
statically denotes a constant declared before the entity.&nbsp;</LI></UL>
<DIV Class="paranum">23</DIV>
<UL Class="Bulleted"><LI TYPE=DISC>An implementation need not support 
a specification for the Size for a given composite subtype, nor the size 
or storage place for an object (including a component) of a given composite 
subtype, unless the constraints on the subtype and its composite subcomponents 
(if any) are all static constraints.</LI></UL>
<DIV Class="paranum">24/2</DIV>
<UL Class="Bulleted"><LI TYPE=DISC>An implementation need not support 
a nonconfirming representation item if it could cause an aliased object 
or an object of a by-reference type to be allocated at a nonaddressable 
location or, when the alignment attribute of the subtype of such an object 
is nonzero, at an address that is not an integral multiple of that alignment. 
</LI></UL>
<DIV Class="paranum">25/2</DIV>
<UL Class="Bulleted"><LI TYPE=DISC>An implementation need not support 
a nonconfirming representation item if it could cause an aliased object 
of an elementary type to have a size other than that which would have 
been chosen by default.&nbsp;</LI></UL>
<DIV Class="paranum">26/2</DIV>
<UL Class="Bulleted"><LI TYPE=DISC>An implementation need not support 
a nonconfirming representation item if it could cause an aliased object 
of a composite type, or an object whose type is by-reference, to have 
a size smaller than that which would have been chosen by default.&nbsp;</LI></UL>
<DIV Class="paranum">27/2</DIV>
<UL Class="Bulleted"><LI TYPE=DISC>An implementation need not support 
a nonconfirming subtype-specific representation item specifying an aspect 
of representation of an indefinite or abstract subtype.&nbsp;</LI></UL>
<DIV Class="paranum">28/2</DIV>
<DIV Class="Normal">&nbsp;For purposes of these rules, the determination of 
whether a representation item applied to a type <I>could cause</I> an 
object to have some property is based solely on the properties of the 
type itself, not on any available information about how the type is used. 
In particular, it presumes that minimally aligned objects of this type 
might be declared at some point.&nbsp;</DIV>

<HR>
<DIV Style="margin-top: 0.0em; margin-bottom: 0.6em"><A HREF="RM-TOC.html"><IMG SRC="cont.gif" ALT="Contents" BORDER=0></A>&nbsp;
&nbsp;<A HREF="RM-0-5.html"><IMG SRC="index.gif" ALT="Index" BORDER=0></A>&nbsp;
&nbsp;<A HREF="RM-STDS.html"><IMG SRC="lib.gif" ALT="References" BORDER=0></A>&nbsp;
&nbsp;<A HREF="RM-SRCH.html"><IMG SRC="find.gif" ALT="Search" BORDER=0></A>&nbsp;
&nbsp;<A HREF="RM-13.html"><IMG SRC="prev.gif" ALT="Previous" BORDER=0></A>&nbsp;
&nbsp;<A HREF="RM-13-2.html"><IMG SRC="next.gif" ALT="Next" BORDER=0></A>&nbsp;
</DIV>
<DIV Style="margin-top:0.0em"><IMG SRC="AE_logo.gif" height=100 width=113 align=right ALT="Ada-Europe">
<SPAN Style="vertical-align: middle">Sponsored by <SPAN Style="font-size: 125%"><A HREF="http://www.ada-europe.org/"><B>Ada-Europe</B></A></SPAN></SPAN></DIV>
</BODY>
</HTML>
