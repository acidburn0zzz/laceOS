<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
"http://www.w3.org/TR/html4/loose.dtd">
<HTML>
<HEAD>
    <TITLE>Statically Matching Constraints and Subtypes</TITLE>
    <META http-equiv="Content-Type" content="text/html; charset=iso-8859-1">
    <META NAME="Author" CONTENT="JTC1/SC22/WG9/ARG, by Randall Brukardt, ARG Editor">
    <META NAME="GENERATOR" CONTENT="Arm_Form.Exe, Ada Reference Manual generator">
    <STYLE type="text/css">
    H4.centered {text-align: center}
    SPAN.swiss {font-family: Arial, Helvetica, sans-serif; font-size: 92%}
    SPAN.roman {font-family: "Times New Roman", Times, serif}
    DIV.paranum {float: left; font-family: Arial, Helvetica, sans-serif; font-size: 64%; width: 2.8em; margin-left: -0.4em; margin-right: -3.0em; margin-top: 0.2em}
    TT {font-family: "Courier New", monospace}
    DT {display: compact}
    SPAN.insert2 {text-decoration: underline; color: rgb(0,102,0) }
    SPAN.delete2 {text-decoration: line-through; color: rgb(0,102,0) }
    DIV.Normal {font-family: "Times New Roman", Times, serif; line-height: 122%; margin-left: 1.2em; margin-bottom: 0.6em}
    DIV.Annotations {font-family: "Times New Roman", Times, serif; font-size: 80%; line-height: 122%; margin-left: 6.2em; margin-bottom: 0.6em}
    UL.Bulleted {font-family: "Times New Roman", Times, serif; line-height: 122%; margin-left: 3.2em; margin-right: 2.0em; margin-top: 0em; margin-bottom: 0.5em}
    </STYLE>
</HEAD>
<BODY TEXT="#000000" BGCOLOR="#FFFFF0" LINK="#000080" VLINK="#330033" ALINK="#0000FF">
<DIV><B><SPAN Style="font-size:200%; color: rgb(0,51,153)">Annotated</SPAN><SPAN Style="font-size:200%; color: rgb(0,0,102)">&nbsp;Ada Reference Manual</SPAN></B> &mdash; <A HREF="AA-TTL.html"><B>Legal Information</B></A></DIV>
<DIV Style="margin-top: 0.6em; margin-bottom: 0.0em"><A HREF="AA-TOC.html"><IMG SRC="cont.gif" ALT="Contents" BORDER=0></A>&nbsp;
&nbsp;<A HREF="AA-0-5.html"><IMG SRC="index.gif" ALT="Index" BORDER=0></A>&nbsp;
&nbsp;<A HREF="AA-STDS.html"><IMG SRC="lib.gif" ALT="References" BORDER=0></A>&nbsp;
&nbsp;<A HREF="AA-SRCH.html"><IMG SRC="find.gif" ALT="Search" BORDER=0></A>&nbsp;
&nbsp;<A HREF="AA-4-9.html"><IMG SRC="prev.gif" ALT="Previous" BORDER=0></A>&nbsp;
&nbsp;<A HREF="AA-5.html"><IMG SRC="next.gif" ALT="Next" BORDER=0></A>&nbsp;
</DIV>
<HR>
<H1>4.9.1 Statically Matching Constraints and Subtypes</H1>

<H4 Class="centered">Static Semantics</H4>
<DIV Class="paranum">1/2</DIV>
<DIV Class="Normal">{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AIs/AI-00311.TXT">AI95-00311-01</A></I>} 
<SPAN STYLE="font-size: 80%">{<I>statically matching (for constraints)</I>}</SPAN> 
<A NAME="I3171"></A>A constraint <I>statically matches</I> another constraint 
if<SPAN class="insert2">:</SPAN><SPAN class="delete2">&nbsp;both are null 
constraints, both are static and have equal corresponding bounds or discriminant 
values, or both are nonstatic and result from the same elaboration of 
a <SPAN Class="swiss"><A HREF="AA-3-2-2.html#S0029">constraint</A></SPAN> 
of a <SPAN Class="swiss"><A HREF="AA-3-2-2.html#S0027">subtype_indication</A></SPAN> 
or the same evaluation of a <SPAN Class="swiss"><A HREF="AA-3-5.html#S0037">range</A></SPAN> 
of a <SPAN Class="swiss"><A HREF="AA-3-6.html#S0055">discrete_subtype_definition</A></SPAN>.</SPAN> 
</DIV>
<DIV Class="paranum">1.1/2</DIV>
<UL Class="Bulleted"><LI TYPE=DISC><SPAN class="insert2">both are null 
constraints;</SPAN></LI></UL>
<DIV Class="paranum">1.2/2</DIV>
<UL Class="Bulleted"><LI TYPE=DISC><SPAN class="insert2">both are static 
and have equal corresponding bounds or discriminant values;</SPAN></LI></UL>
<DIV Class="paranum">1.3/2</DIV>
<UL Class="Bulleted"><LI TYPE=DISC><SPAN class="insert2">both are nonstatic 
and result from the same elaboration of a <SPAN Class="swiss"><A HREF="AA-3-2-2.html#S0029">constraint</A></SPAN> 
of a <SPAN Class="swiss"><A HREF="AA-3-2-2.html#S0027">subtype_indication</A></SPAN> 
or the same evaluation of a <SPAN Class="swiss"><A HREF="AA-3-5.html#S0037">range</A></SPAN> 
of a <SPAN Class="swiss"><A HREF="AA-3-6.html#S0055">discrete_subtype_definition</A></SPAN>; 
or</SPAN></LI></UL>
<DIV Class="paranum">1.4/2</DIV>
<UL Class="Bulleted"><LI TYPE=DISC>{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AIs/AI-00311.TXT">AI95-00311-01</A></I>} 
<SPAN class="insert2">both are nonstatic and come from the same <SPAN Class="swiss"><A HREF="AA-12-5.html#S0262">formal_type_declaration</A></SPAN>.</SPAN> 
</LI></UL>
<DIV Class="paranum">2/2</DIV>
<DIV Class="Normal">{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AIs/AI-00231.TXT">AI95-00231-01</A></I>} 
{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AIs/AI-00254.TXT">AI95-00254-01</A></I>} 
<SPAN STYLE="font-size: 80%">{<I>statically matching (for subtypes)</I>}</SPAN> 
<A NAME="I3172"></A>A subtype <I>statically matches</I> another subtype 
of the same type if they have statically matching constraints<SPAN class="insert2">, 
and, for access subtypes, either both or neither exclude null</SPAN>. 
Two anonymous access<SPAN class="insert2">-to-object</SPAN> subtypes 
statically match if their designated subtypes statically match<SPAN class="insert2">, 
and either both or neither exclude null, and either both or neither are 
access-to-constant. Two anonymous access-to-subprogram subtypes statically 
match if their designated profiles are subtype conformant, and either 
both or neither exclude null</SPAN>.&nbsp;</DIV>
<DIV Class="paranum">2.a</DIV>
<DIV Class="Annotations"><B>Ramification:&nbsp;</B>Statically matching constraints 
and subtypes are the basis for subtype conformance of profiles (see <A HREF="AA-6-3-1.html">6.3.1</A>). 
</DIV>
<DIV Class="paranum">2.b/2</DIV>
<DIV Class="Annotations"><SPAN class="insert2"><B>Reason:&nbsp;</B>Even though 
anonymous access types always represent different types, they can statically 
match. That's important so that they can be used widely. For instance, 
if this wasn't true, access parameters and access discriminants could 
never conform, so they couldn't be used in separate specifications.</SPAN> 
</DIV>
<DIV Class="paranum">3</DIV>
<DIV Class="Normal"><SPAN STYLE="font-size: 80%">{<I>statically matching 
(for ranges)</I>}</SPAN> <A NAME="I3173"></A>Two ranges of the same type 
<I>statically match</I> if both result from the same evaluation of a 
<SPAN Class="swiss"><A HREF="AA-3-5.html#S0037">range</A></SPAN>, or 
if both are static and have equal corresponding bounds.&nbsp;</DIV>
<DIV Class="paranum">3.a</DIV>
<DIV Class="Annotations"><B>Ramification:&nbsp;</B>The notion of static matching 
of ranges is used in <A HREF="AA-12-5-3.html">12.5.3</A>, &ldquo;<A HREF="AA-12-5-3.html">Formal 
Array Types</A>&rdquo;; the index ranges of formal and actual constrained 
array subtypes have to statically match.&nbsp;</DIV>
<DIV Class="paranum">4</DIV>
<DIV Class="Normal"><SPAN STYLE="font-size: 80%">{<I>statically compatible 
(for a constraint and a scalar subtype)</I>}</SPAN> <A NAME="I3174"></A>A 
constraint is <I>statically compatible</I> with a scalar subtype if it 
statically matches the constraint of the subtype, or if both are static 
and the constraint is compatible with the subtype. <SPAN STYLE="font-size: 80%">{<I>statically 
compatible (for a constraint and an access or composite subtype)</I>}</SPAN> 
<A NAME="I3175"></A>A constraint is <I>statically compatible</I> with 
an access or composite subtype if it statically matches the constraint 
of the subtype, or if the subtype is unconstrained. <SPAN STYLE="font-size: 80%">{<I>statically 
compatible (for two subtypes)</I>}</SPAN> <A NAME="I3176"></A>One subtype 
is <I>statically compatible</I> with a second subtype if the constraint 
of the first is statically compatible with the second subtype.&nbsp;</DIV>
<DIV Class="paranum">4.a</DIV>
<DIV Class="Annotations"><B>Discussion:&nbsp;</B>Static compatibility is required 
when constraining a parent subtype with a discriminant from a new <SPAN Class="swiss"><A HREF="AA-3-7.html#S0059">discriminant_part</A></SPAN>. 
See <A HREF="AA-3-7.html">3.7</A>. Static compatibility is also used 
in matching generic formal derived types.</DIV>
<DIV Class="paranum">4.b</DIV>
<DIV Class="Annotations">Note that statically compatible with a subtype 
does not imply compatible with a type. It is OK since the terms are used 
in different contexts.&nbsp;</DIV>

<H4 Class="centered">Wording Changes from Ada 83</H4>
<DIV Class="paranum">4.c</DIV>
<DIV Class="Annotations">This subclause is new to Ada 95.&nbsp;</DIV>

<H4 Class="centered">Wording Changes from Ada 95</H4>
<DIV Class="paranum">4.d/2</DIV>
<DIV Class="Annotations">{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AIs/AI-00231.TXT">AI95-00231-01</A></I>} 
{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AIs/AI-00254.TXT">AI95-00254-01</A></I>} 
<SPAN class="insert2">Added static matching rules for null exclusions 
and anonymous access-to-subprogram types; both of these are new in Ada 
2005.</SPAN></DIV>
<DIV Class="paranum">4.e/2</DIV>
<DIV Class="Annotations">{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AIs/AI-00311.TXT">AI95-00311-01</A></I>} 
<SPAN class="insert2">We clarify that the constraint of the first subtype 
of a scalar formal type statically matches itself.</SPAN>&nbsp;</DIV>

<HR>
<DIV Style="margin-top: 0.0em; margin-bottom: 0.6em"><A HREF="AA-TOC.html"><IMG SRC="cont.gif" ALT="Contents" BORDER=0></A>&nbsp;
&nbsp;<A HREF="AA-0-5.html"><IMG SRC="index.gif" ALT="Index" BORDER=0></A>&nbsp;
&nbsp;<A HREF="AA-STDS.html"><IMG SRC="lib.gif" ALT="References" BORDER=0></A>&nbsp;
&nbsp;<A HREF="AA-SRCH.html"><IMG SRC="find.gif" ALT="Search" BORDER=0></A>&nbsp;
&nbsp;<A HREF="AA-4-9.html"><IMG SRC="prev.gif" ALT="Previous" BORDER=0></A>&nbsp;
&nbsp;<A HREF="AA-5.html"><IMG SRC="next.gif" ALT="Next" BORDER=0></A>&nbsp;
</DIV>
<DIV Style="margin-top:0.0em"><IMG SRC="AE_logo.gif" height=100 width=113 align=right ALT="Ada-Europe">
<SPAN Style="font-size: 125%">Sponsored by <SPAN Style="font-size: 125%"><A HREF="http://www.ada-europe.org/"><B>Ada-Europe</B></A></SPAN></SPAN></DIV>
</BODY>
</HTML>
