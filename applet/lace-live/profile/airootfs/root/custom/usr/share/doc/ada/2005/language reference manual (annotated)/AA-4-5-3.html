<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
"http://www.w3.org/TR/html4/loose.dtd">
<HTML>
<HEAD>
    <TITLE>Binary Adding Operators</TITLE>
    <META http-equiv="Content-Type" content="text/html; charset=iso-8859-1">
    <META NAME="Author" CONTENT="JTC1/SC22/WG9/ARG, by Randall Brukardt, ARG Editor">
    <META NAME="GENERATOR" CONTENT="Arm_Form.Exe, Ada Reference Manual generator">
    <STYLE type="text/css">
    H4.centered {text-align: center}
    SPAN.swiss {font-family: Arial, Helvetica, sans-serif; font-size: 92%}
    SPAN.roman {font-family: "Times New Roman", Times, serif}
    DIV.paranum {float: left; font-family: Arial, Helvetica, sans-serif; font-size: 64%; width: 2.8em; margin-left: -0.4em; margin-right: -3.0em; margin-top: 0.2em}
    TT {font-family: "Courier New", monospace}
    DT {display: compact}
    DIV.Normal {font-family: "Times New Roman", Times, serif; line-height: 122%; margin-left: 1.2em; margin-bottom: 0.6em}
    DIV.Annotations {font-family: "Times New Roman", Times, serif; font-size: 80%; line-height: 122%; margin-left: 6.2em; margin-bottom: 0.6em}
    DIV.Notes {font-family: "Times New Roman", Times, serif; font-size: 80%; line-height: 122%; margin-left: 3.7em; margin-bottom: 0.6em}
    DIV.NotesHeader {font-family: "Times New Roman", Times, serif; font-size: 80%; line-height: 122%; margin-left: 3.7em}
    DIV.Examples {font-family: "Courier New", monospace; font-size: 90%; line-height: 122%; margin-left: 3.4em; margin-bottom: 0.6em}
    DIV.SmallExamples {font-family: "Courier New", monospace; font-size: 72%; line-height: 122%; margin-left: 9.6em; margin-bottom: 0.6em}
    UL.Bulleted {font-family: "Times New Roman", Times, serif; line-height: 122%; margin-left: 3.2em; margin-right: 2.0em; margin-top: 0em; margin-bottom: 0.5em}
    </STYLE>
</HEAD>
<BODY TEXT="#000000" BGCOLOR="#FFFFF0" LINK="#000080" VLINK="#330033" ALINK="#0000FF">
<DIV><B><SPAN Style="font-size:200%; color: rgb(0,51,153)">Annotated</SPAN><SPAN Style="font-size:200%; color: rgb(0,0,102)">&nbsp;Ada Reference Manual</SPAN></B> &mdash; <A HREF="AA-TTL.html"><B>Legal Information</B></A></DIV>
<DIV Style="margin-top: 0.6em; margin-bottom: 0.0em"><A HREF="AA-TOC.html"><IMG SRC="cont.gif" ALT="Contents" BORDER=0></A>&nbsp;
&nbsp;<A HREF="AA-0-5.html"><IMG SRC="index.gif" ALT="Index" BORDER=0></A>&nbsp;
&nbsp;<A HREF="AA-STDS.html"><IMG SRC="lib.gif" ALT="References" BORDER=0></A>&nbsp;
&nbsp;<A HREF="AA-SRCH.html"><IMG SRC="find.gif" ALT="Search" BORDER=0></A>&nbsp;
&nbsp;<A HREF="AA-4-5-2.html"><IMG SRC="prev.gif" ALT="Previous" BORDER=0></A>&nbsp;
&nbsp;<A HREF="AA-4-5-4.html"><IMG SRC="next.gif" ALT="Next" BORDER=0></A>&nbsp;
</DIV>
<HR>
<H1>4.5.3 Binary Adding Operators</H1>

<H4 Class="centered">Static Semantics</H4>
<DIV Class="paranum">1</DIV>
<DIV Class="Normal" Style="margin-bottom: 0.4em"><SPAN STYLE="font-size: 80%">{<I>binary 
adding operator</I>}</SPAN> <A NAME="I2886"></A><SPAN STYLE="font-size: 80%">{<I>operator 
(binary adding)</I>}</SPAN> <A NAME="I2887"></A><SPAN STYLE="font-size: 80%">{<I>+ 
operator</I>}</SPAN> <A NAME="I2888"></A><SPAN STYLE="font-size: 80%">{<I>operator 
(+)</I>}</SPAN> <A NAME="I2889"></A><SPAN STYLE="font-size: 80%">{<I>plus 
operator</I>}</SPAN> <A NAME="I2890"></A><SPAN STYLE="font-size: 80%">{<I>operator 
(plus)</I>}</SPAN> <A NAME="I2891"></A><SPAN STYLE="font-size: 80%">{<I>- 
operator</I>}</SPAN> <A NAME="I2892"></A><SPAN STYLE="font-size: 80%">{<I>operator 
(-)</I>}</SPAN> <A NAME="I2893"></A><SPAN STYLE="font-size: 80%">{<I>minus 
operator</I>}</SPAN> <A NAME="I2894"></A><SPAN STYLE="font-size: 80%">{<I>operator 
(minus)</I>}</SPAN> <A NAME="I2895"></A>The binary adding operators + 
(addition) and &ndash; (subtraction) are predefined for every specific 
numeric type <I>T</I> with their conventional meaning. They have the 
following specifications:&nbsp;</DIV>
<DIV Class="paranum">2</DIV>
<DIV Class="Examples"><B>function</B>&nbsp;&quot;+&quot;(Left,&nbsp;Right&nbsp;:&nbsp;<SPAN Class="roman"><I>T</I></SPAN>)&nbsp;<B>return</B>&nbsp;<SPAN Class="roman"><I>T</I></SPAN><BR>
<B>function</B>&nbsp;&quot;-&quot;(Left,&nbsp;Right&nbsp;:&nbsp;<SPAN Class="roman"><I>T</I></SPAN>)&nbsp;<B>return</B>&nbsp;<SPAN Class="roman"><I>T</I></SPAN></DIV>
<DIV Class="paranum">3</DIV>
<DIV Class="Normal" Style="margin-bottom: 0.4em"><SPAN STYLE="font-size: 80%">{<I>&amp; 
operator</I>}</SPAN> <A NAME="I2896"></A><SPAN STYLE="font-size: 80%">{<I>operator 
(&amp;)</I>}</SPAN> <A NAME="I2897"></A><SPAN STYLE="font-size: 80%">{<I>ampersand 
operator</I>}</SPAN> <A NAME="I2898"></A><SPAN STYLE="font-size: 80%">{<I>operator 
(ampersand)</I>}</SPAN> <A NAME="I2899"></A><SPAN STYLE="font-size: 80%">{<I>concatenation 
operator</I>}</SPAN> <A NAME="I2900"></A><SPAN STYLE="font-size: 80%">{<I>operator 
(concatenation)</I>}</SPAN> <A NAME="I2901"></A><SPAN STYLE="font-size: 80%">{<I>catenation 
operator: See concatenation operator</I>}</SPAN> <A NAME="I2902"></A>The 
concatenation operators &amp; are predefined for every nonlimited, one-dimensional 
array type <I>T</I> with component type <I>C</I>. They have the following 
specifications:&nbsp;</DIV>
<DIV Class="paranum">4</DIV>
<DIV Class="Examples"><B>function</B>&nbsp;&quot;&amp;&quot;(Left&nbsp;:&nbsp;<SPAN Class="roman"><I>T</I></SPAN>;&nbsp;Right&nbsp;:&nbsp;<SPAN Class="roman"><I>T</I></SPAN>)&nbsp;<B>return</B>&nbsp;<SPAN Class="roman"><I>T</I></SPAN><BR>
<B>function</B>&nbsp;&quot;&amp;&quot;(Left&nbsp;:&nbsp;<SPAN Class="roman"><I>T</I></SPAN>;&nbsp;Right&nbsp;:&nbsp;<SPAN Class="roman"><I>C</I></SPAN>)&nbsp;<B>return</B>&nbsp;<SPAN Class="roman"><I>T</I></SPAN><BR>
<B>function</B>&nbsp;&quot;&amp;&quot;(Left&nbsp;:&nbsp;<SPAN Class="roman"><I>C</I></SPAN>;&nbsp;Right&nbsp;:&nbsp;<SPAN Class="roman"><I>T</I></SPAN>)&nbsp;<B>return</B>&nbsp;<SPAN Class="roman"><I>T</I></SPAN><BR>
<B>function</B>&nbsp;&quot;&amp;&quot;(Left&nbsp;:&nbsp;<SPAN Class="roman"><I>C</I></SPAN>;&nbsp;Right&nbsp;:&nbsp;<SPAN Class="roman"><I>C</I></SPAN>)&nbsp;<B>return</B>&nbsp;<SPAN Class="roman"><I>T</I></SPAN></DIV>

<H4 Class="centered">Dynamic Semantics</H4>
<DIV Class="paranum">5</DIV>
<DIV Class="Normal" Style="margin-bottom: 0.4em"><SPAN STYLE="font-size: 80%">{<I>evaluation 
(concatenation)</I> [partial]}</SPAN> <A NAME="I2903"></A>For the evaluation 
of a concatenation with result type <I>T</I>, if both operands are of 
type <I>T</I>, the result of the concatenation is a one-dimensional array 
whose length is the sum of the lengths of its operands, and whose components 
comprise the components of the left operand followed by the components 
of the right operand. If the left operand is a null array, the result 
of the concatenation is the right operand. Otherwise, the lower bound 
of the result is determined as follows:&nbsp;</DIV>
<DIV Class="paranum">6</DIV>
<UL Class="Bulleted"><LI TYPE=DISC>If the ultimate ancestor of the array 
type was defined by a <SPAN Class="swiss"><A HREF="AA-3-6.html#S0054">constrained_array_definition</A></SPAN>, 
then the lower bound of the result is that of the index subtype;&nbsp;</LI></UL>
<DIV Class="paranum">6.a</DIV>
<DIV Class="Annotations"><B>Reason:&nbsp;</B>This rule avoids Constraint_Error 
when using concatenation on an array type whose first subtype is constrained. 
</DIV>
<DIV Class="paranum">7</DIV>
<UL Class="Bulleted"><LI TYPE=DISC>If the ultimate ancestor of the array 
type was defined by an <SPAN Class="swiss"><A HREF="AA-3-6.html#S0052">unconstrained_array_definition</A></SPAN>, 
then the lower bound of the result is that of the left operand.&nbsp;</LI></UL>
<DIV Class="paranum">8</DIV>
<DIV Class="Normal">[The upper bound is determined by the lower bound 
and the length.] <SPAN STYLE="font-size: 80%">{<I>Index_Check</I> [partial]}</SPAN> 
<A NAME="I2904"></A><SPAN STYLE="font-size: 80%">{<I>check, language-defined 
(Index_Check)</I>}</SPAN> <A NAME="I2905"></A>A check is made that the 
upper bound of the result of the concatenation belongs to the range of 
the index subtype, unless the result is a null array. <SPAN STYLE="font-size: 80%">{<I>Constraint_Error 
(raised by failure of run-time check)</I>}</SPAN> <A NAME="I2906"></A>Constraint_Error 
is raised if this check fails.</DIV>
<DIV Class="paranum">9</DIV>
<DIV Class="Normal">If either operand is of the component type <I>C</I>, 
the result of the concatenation is given by the above rules, using in 
place of such an operand an array having this operand as its only component 
(converted to the component subtype) and having the lower bound of the 
index subtype of the array type as its lower bound. <SPAN STYLE="font-size: 80%">{<I>implicit 
subtype conversion (operand of concatenation)</I> [partial]}</SPAN> <A NAME="I2907"></A></DIV>
<DIV Class="paranum">9.a</DIV>
<DIV Class="Annotations"><B>Ramification:&nbsp;</B>The conversion might raise 
Constraint_Error. The conversion provides &ldquo;sliding&rdquo; for the 
component in the case of an array-of-arrays, consistent with the normal 
Ada 95 rules that allow sliding during parameter passing.&nbsp;</DIV>
<DIV Class="paranum">10</DIV>
<DIV Class="Normal"><SPAN STYLE="font-size: 80%">{<I>assignment operation 
(during evaluation of concatenation)</I>}</SPAN> <A NAME="I2908"></A>The 
result of a concatenation is defined in terms of an assignment to an 
anonymous object, as for any function call (see <A HREF="AA-6-5.html">6.5</A>). 
</DIV>
<DIV Class="paranum">10.a</DIV>
<DIV Class="Annotations"><B>Ramification:&nbsp;</B>This implies that value 
adjustment is performed as appropriate &mdash; see <A HREF="AA-7-6.html">7.6</A>. 
We don't bother saying this for other predefined operators, even though 
they are all function calls, because this is the only one where it matters. 
It is the only one that can return a value having controlled parts.&nbsp;</DIV>
<DIV Class="NotesHeader">NOTES</DIV>
<DIV Class="paranum">11</DIV>
<DIV Class="Notes">15&nbsp;&nbsp;As for all predefined operators on modular 
types, the binary adding operators + and &ndash; on modular types include 
a final reduction modulo the modulus if the result is outside the base 
range of the type.&nbsp;</DIV>
<DIV Class="paranum">11.a</DIV>
<DIV Class="Annotations"><B>Implementation Note:&nbsp;</B>A full &quot;modulus&quot; 
operation need not be performed after addition or subtraction of modular 
types. For binary moduli, a simple mask is sufficient. For nonbinary 
moduli, a check after addition to see if the value is greater than the 
high bound of the base range can be followed by a conditional subtraction 
of the modulus. Conversely, a check after subtraction to see if a &quot;borrow&quot; 
was performed can be followed by a conditional addition of the modulus. 
</DIV>

<H4 Class="centered">Examples</H4>
<DIV Class="paranum">12</DIV>
<DIV Class="Normal" Style="margin-bottom: 0.4em"><I>Examples of expressions 
involving binary adding operators:</I>&nbsp;</DIV>
<DIV Class="paranum">13</DIV>
<DIV Class="Examples">Z&nbsp;+&nbsp;0.1&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;--<SPAN Class="roman"><I>&nbsp;&nbsp;Z&nbsp;has&nbsp;to&nbsp;be&nbsp;of&nbsp;a&nbsp;real&nbsp;type&nbsp;</I></SPAN></DIV>
<DIV Class="paranum">14</DIV>
<DIV Class="Examples">&quot;A&quot;&nbsp;&amp;&nbsp;&quot;BCD&quot;&nbsp;&nbsp;--<SPAN Class="roman"><I>&nbsp;&nbsp;concatenation&nbsp;of&nbsp;two&nbsp;string&nbsp;literals</I></SPAN><BR>
'A'&nbsp;&amp;&nbsp;&quot;BCD&quot;&nbsp;&nbsp;--<SPAN Class="roman"><I>&nbsp;&nbsp;concatenation&nbsp;of&nbsp;a&nbsp;character&nbsp;literal&nbsp;and&nbsp;a&nbsp;string&nbsp;literal</I></SPAN><BR>
'A'&nbsp;&amp;&nbsp;'A'&nbsp;&nbsp;&nbsp;&nbsp;--<SPAN Class="roman"><I>&nbsp;&nbsp;concatenation&nbsp;of&nbsp;two&nbsp;character&nbsp;literals&nbsp;</I></SPAN></DIV>

<H4 Class="centered">Inconsistencies With Ada 83</H4>
<DIV Class="paranum">14.a</DIV>
<DIV Class="Annotations">{<I>inconsistencies with Ada 83</I>} <A NAME="I2909"></A>The 
lower bound of the result of concatenation, for a type whose first subtype 
is constrained, is now that of the index subtype. This is inconsistent 
with Ada 83, but generally only for Ada 83 programs that raise Constraint_Error. 
For example, the concatenation operator in&nbsp;</DIV>
<DIV Class="paranum">14.b</DIV>
<DIV Class="SmallExamples">X&nbsp;:&nbsp;<B>array</B>(1..10)&nbsp;<B>of</B>&nbsp;Integer;<BR>
<B>begin</B><BR>
X&nbsp;:=&nbsp;X(6..10)&nbsp;&amp;&nbsp;X(1..5);</DIV>
<DIV Class="paranum">14.c</DIV>
<DIV Class="Annotations">would raise Constraint_Error in Ada 83 (because 
the bounds of the result of the concatenation would be 6..15, which is 
outside of 1..10), but would succeed and swap the halves of X (as expected) 
in Ada 95.&nbsp;</DIV>

<H4 Class="centered">Extensions to Ada 83</H4>
<DIV Class="paranum">14.d</DIV>
<DIV Class="Annotations">{<I>extensions to Ada 83</I>} <A NAME="I2910"></A>Concatenation 
is now useful for array types whose first subtype is constrained. When 
the result type of a concatenation is such an array type, Constraint_Error 
is avoided by effectively first sliding the left operand (if nonnull) 
so that its lower bound is that of the index subtype.&nbsp;</DIV>

<HR>
<DIV Style="margin-top: 0.0em; margin-bottom: 0.6em"><A HREF="AA-TOC.html"><IMG SRC="cont.gif" ALT="Contents" BORDER=0></A>&nbsp;
&nbsp;<A HREF="AA-0-5.html"><IMG SRC="index.gif" ALT="Index" BORDER=0></A>&nbsp;
&nbsp;<A HREF="AA-STDS.html"><IMG SRC="lib.gif" ALT="References" BORDER=0></A>&nbsp;
&nbsp;<A HREF="AA-SRCH.html"><IMG SRC="find.gif" ALT="Search" BORDER=0></A>&nbsp;
&nbsp;<A HREF="AA-4-5-2.html"><IMG SRC="prev.gif" ALT="Previous" BORDER=0></A>&nbsp;
&nbsp;<A HREF="AA-4-5-4.html"><IMG SRC="next.gif" ALT="Next" BORDER=0></A>&nbsp;
</DIV>
<DIV Style="margin-top:0.0em"><IMG SRC="AE_logo.gif" height=100 width=113 align=right ALT="Ada-Europe">
<SPAN Style="font-size: 125%">Sponsored by <SPAN Style="font-size: 125%"><A HREF="http://www.ada-europe.org/"><B>Ada-Europe</B></A></SPAN></SPAN></DIV>
</BODY>
</HTML>
