<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
"http://www.w3.org/TR/html4/loose.dtd">
<HTML>
<HEAD>
    <TITLE>Task Dispatching Pragmas</TITLE>
    <META http-equiv="Content-Type" content="text/html; charset=iso-8859-1">
    <META NAME="Author" CONTENT="JTC1/SC22/WG9/ARG, by Randall Brukardt, ARG Editor">
    <META NAME="GENERATOR" CONTENT="Arm_Form.Exe, Ada Reference Manual generator">
    <STYLE type="text/css">
    H4.centered {text-align: center}
    SPAN.swiss {font-family: Arial, Helvetica, sans-serif; font-size: 92%}
    SPAN.roman {font-family: "Times New Roman", Times, serif}
    DIV.paranum {float: left; font-family: Arial, Helvetica, sans-serif; font-size: 64%; width: 2.8em; margin-left: -0.4em; margin-right: -3.0em; margin-top: 0.2em}
    TT {font-family: "Courier New", monospace}
    DT {display: compact}
    SPAN.insert2 {text-decoration: underline; color: rgb(0,102,0) }
    SPAN.delete2 {text-decoration: line-through; color: rgb(0,102,0) }
    DIV.Normal {font-family: "Times New Roman", Times, serif; line-height: 122%; margin-left: 1.2em; margin-bottom: 0.6em}
    DIV.Annotations {font-family: "Times New Roman", Times, serif; font-size: 80%; line-height: 122%; margin-left: 6.2em; margin-bottom: 0.6em}
    DIV.Notes {font-family: "Times New Roman", Times, serif; font-size: 80%; line-height: 122%; margin-left: 3.7em; margin-bottom: 0.6em}
    DIV.NotesHeader {font-family: "Times New Roman", Times, serif; font-size: 80%; line-height: 122%; margin-left: 3.7em}
    DIV.SyntaxIndented {font-family: "Times New Roman", Times, serif; line-height: 122%; margin-left: 3.2em; margin-bottom: 0.4em}
    UL.Bulleted {font-family: "Times New Roman", Times, serif; line-height: 122%; margin-left: 3.2em; margin-right: 2.0em; margin-top: 0em; margin-bottom: 0.5em}
    </STYLE>
</HEAD>
<BODY TEXT="#000000" BGCOLOR="#FFFFF0" LINK="#000080" VLINK="#330033" ALINK="#0000FF">
<DIV><B><SPAN Style="font-size:200%; color: rgb(0,51,153)">Annotated</SPAN><SPAN Style="font-size:200%; color: rgb(0,0,102)">&nbsp;Ada Reference Manual</SPAN></B> &mdash; <A HREF="AA-TTL.html"><B>Legal Information</B></A></DIV>
<DIV Style="margin-top: 0.6em; margin-bottom: 0.0em"><A HREF="AA-TOC.html"><IMG SRC="cont.gif" ALT="Contents" BORDER=0></A>&nbsp;
&nbsp;<A HREF="AA-0-5.html"><IMG SRC="index.gif" ALT="Index" BORDER=0></A>&nbsp;
&nbsp;<A HREF="AA-STDS.html"><IMG SRC="lib.gif" ALT="References" BORDER=0></A>&nbsp;
&nbsp;<A HREF="AA-SRCH.html"><IMG SRC="find.gif" ALT="Search" BORDER=0></A>&nbsp;
&nbsp;<A HREF="AA-D-2-1.html"><IMG SRC="prev.gif" ALT="Previous" BORDER=0></A>&nbsp;
&nbsp;<A HREF="AA-D-2-3.html"><IMG SRC="next.gif" ALT="Next" BORDER=0></A>&nbsp;
</DIV>
<HR>
<H1>&nbsp;D.2.2 <SPAN class="insert2">Task Dispatching Pragmas</SPAN> <SPAN class="delete2">The Standard Task Dispatching Policy</SPAN></H1>
<DIV Class="paranum">0.1/2</DIV>
<DIV Class="Normal">&nbsp;&nbsp;{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AIs/AI-00355.TXT">AI95-00355-01</A></I>} 
<SPAN class="insert2">[This clause allows a single task dispatching policy 
to be defined for all priorities, or the range of priorities to be split 
into subranges that are assigned individual dispatching policies.]</SPAN> 
</DIV>

<H4 Class="centered">Syntax</H4>
<DIV Class="paranum">1</DIV>
<DIV Class="SyntaxIndented" Style="margin-bottom: 0.2em">The form of 
a <SPAN Class="swiss"><A HREF="AA-2-8.html#S0019">pragma</A></SPAN> Task_Dispatching_Policy 
is as follows:&nbsp;</DIV>
<DIV Class="paranum">2</DIV>
<DIV Class="SyntaxIndented">&nbsp;&nbsp;<B>pragma</B> <A NAME="I7433"></A><A NAME="I7434"></A>Task_Dispatching_Policy(<I>policy_</I><A NAME="I7435"></A><SPAN Class="swiss"><A HREF="AA-2-3.html#S0002">identifier</A></SPAN>);</DIV>
<DIV Class="paranum">2.1/2</DIV>
<DIV Class="SyntaxIndented" Style="margin-bottom: 0.2em">{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AIs/AI-00355.TXT">AI95-00355-01</A></I>} 
<SPAN class="insert2">The form of a <SPAN Class="swiss"><A HREF="AA-2-8.html#S0019">pragma</A></SPAN> 
Priority_Specific_Dispatching is as follows:</SPAN>&nbsp;</DIV>
<DIV Class="paranum">2.2/2</DIV>
<DIV Class="SyntaxIndented"><SPAN class="insert2">&nbsp;&nbsp;<B>pragma</B> 
<A NAME="I7436"></A><A NAME="I7437"></A>Priority_Specific_Dispatching 
(<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<I>policy_</I><A NAME="I7438"></A><SPAN Class="swiss"><A HREF="AA-2-3.html#S0002">identifier</A></SPAN>, 
<I>first_priority_</I><A NAME="I7439"></A><SPAN Class="swiss"><A HREF="AA-4-4.html#S0115">expression</A></SPAN>, 
<I>last_priority_</I><A NAME="I7440"></A><SPAN Class="swiss"><A HREF="AA-4-4.html#S0115">expression</A></SPAN>);</SPAN></DIV>

<H4 Class="centered">Name Resolution Rules</H4>
<DIV Class="paranum">2.3/2</DIV>
<DIV Class="Normal">&nbsp;&nbsp;{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AIs/AI-00355.TXT">AI95-00355-01</A></I>} 
<SPAN class="insert2">The expected type for <I>first_priority_</I><SPAN Class="swiss"><A HREF="AA-4-4.html#S0115">expression</A></SPAN> 
and <I>last_priority_</I><SPAN Class="swiss"><A HREF="AA-4-4.html#S0115">expression</A></SPAN> 
is Integer.</SPAN>&nbsp;</DIV>

<H4 Class="centered">Legality Rules</H4>
<DIV Class="paranum">3/2</DIV>
<DIV Class="Normal">{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AIs/AI-00321.TXT">AI95-00321-01</A></I>} 
{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AIs/AI-00355.TXT">AI95-00355-01</A></I>} 
The <I>policy_</I><SPAN Class="swiss"><A HREF="AA-2-3.html#S0002">identifier</A></SPAN> 
<SPAN class="insert2">used in a <SPAN Class="swiss"><A HREF="AA-2-8.html#S0019">pragma</A></SPAN> 
Task_Dispatching_Policy shall be the name of a task dispatching policy</SPAN><SPAN class="delete2">&nbsp;shall 
either be FIFO_Within_Priorities or an implementation-defined <A NAME="I7441"></A><SPAN Class="swiss"><A HREF="AA-2-3.html#S0002">identifier</A></SPAN></SPAN>. 
</DIV>
<DIV Class="paranum">3.a/2</DIV>
<DIV Class="Annotations"><SPAN STYLE="font-size: 80%"><I>This paragraph 
was deleted.</I></SPAN><SPAN class="delete2"><B>Implementation defined: 
</B></SPAN><SPAN class="delete2">Implementation-defined <I>policy_</I><A NAME="I7442"></A><SPAN Class="swiss"><A HREF="AA-2-3.html#S0002">identifier</A></SPAN>s 
allowed in a <SPAN Class="swiss"><A HREF="AA-2-8.html#S0019">pragma</A></SPAN> 
Task_Dispatching_Policy.</SPAN></DIV>
<DIV Class="paranum">3.1/2</DIV>
<DIV Class="Normal">&nbsp;&nbsp;{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AIs/AI-00355.TXT">AI95-00355-01</A></I>} 
<SPAN class="insert2">The <I>policy_</I><SPAN Class="swiss"><A HREF="AA-2-3.html#S0002">identifier</A></SPAN> 
used in a <SPAN Class="swiss"><A HREF="AA-2-8.html#S0019">pragma</A></SPAN> 
Priority_Specific_Dispatching shall be the name of a task dispatching 
policy.</SPAN></DIV>
<DIV Class="paranum">3.2/2</DIV>
<DIV Class="Normal">&nbsp;&nbsp;{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AIs/AI-00355.TXT">AI95-00355-01</A></I>} 
<SPAN class="insert2">Both <I>first_priority_</I><SPAN Class="swiss"><A HREF="AA-4-4.html#S0115">expression</A></SPAN> 
and <I>last_priority_</I><SPAN Class="swiss"><A HREF="AA-4-4.html#S0115">expression</A></SPAN> 
shall be static expressions in the range of System.Any_Priority; <I>last_priority_</I><SPAN Class="swiss"><A HREF="AA-4-4.html#S0115">expression</A></SPAN> 
shall have a value greater than or equal to <I>first_priority_</I><SPAN Class="swiss"><A HREF="AA-4-4.html#S0115">expression</A></SPAN>.</SPAN></DIV>

<H4 Class="centered">Static Semantics</H4>
<DIV Class="paranum">3.3/2</DIV>
<DIV Class="Normal">&nbsp;&nbsp;{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AIs/AI-00355.TXT">AI95-00355-01</A></I>} 
<SPAN class="insert2"><SPAN Class="swiss"><A HREF="AA-2-8.html#S0019">Pragma</A></SPAN> 
Task_Dispatching_Policy specifies the single task dispatching policy.</SPAN></DIV>
<DIV Class="paranum">3.4/2</DIV>
<DIV Class="Normal">&nbsp;&nbsp;{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AIs/AI-00355.TXT">AI95-00355-01</A></I>} 
<SPAN class="insert2"><SPAN Class="swiss"><A HREF="AA-2-8.html#S0019">Pragma</A></SPAN> 
Priority_Specific_Dispatching specifies the task dispatching policy for 
the specified range of priorities. Tasks with base priorities within 
the range of priorities specified in a Priority_Specific_Dispatching 
pragma have their active priorities determined according to the specified 
dispatching policy. Tasks with active priorities within the range of 
priorities specified in a Priority_Specific_Dispatching pragma are dispatched 
according to the specified dispatching policy.</SPAN>&nbsp;</DIV>
<DIV Class="paranum">3.b/2</DIV>
<DIV Class="Annotations"><SPAN class="insert2"><B>Reason:&nbsp;</B></SPAN>{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AIs/AI-00355.TXT">AI95-00355-01</A></I>} 
<SPAN class="insert2">Each ready queue is managed by exactly one policy. 
Anything else would be chaos. The ready queue is determined by the active 
priority. However, how the active priority is calculated is determined 
by the policy; in order to break out of this circle, we have to say that 
the active priority is calculated by the method determined by the policy 
of the base priority.</SPAN>&nbsp;</DIV>
<DIV Class="paranum">3.5/2</DIV>
<DIV Class="Normal">&nbsp;&nbsp;{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AIs/AI-00355.TXT">AI95-00355-01</A></I>} 
<SPAN class="insert2">If a partition contains one or more Priority_Specific_Dispatching 
pragmas the dispatching policy for priorities not covered by any Priority_Specific_Dispatching 
pragmas is FIFO_Within_Priorities.</SPAN></DIV>

<H4 Class="centered">Post-Compilation Rules</H4>
<DIV Class="paranum">4/2</DIV>
<DIV Class="Normal">{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AIs/AI-00355.TXT">AI95-00355-01</A></I>} 
<SPAN STYLE="font-size: 80%">{<I>configuration pragma (Task_Dispatching_Policy)</I> 
[partial]}</SPAN> <A NAME="I7443"></A><SPAN STYLE="font-size: 80%">{<I>pragma, 
configuration (Task_Dispatching_Policy)</I> [partial]}</SPAN> <A NAME="I7444"></A>A 
Task_Dispatching_Policy pragma is a configuration pragma.<SPAN class="insert2">&nbsp;A Priority_Specific_Dispatching pragma is a configuration pragma. <SPAN STYLE="font-size: 80%">{<I>configuration 
pragma (Priority_Specific_Dispatching)</I> [partial]}</SPAN> <A NAME="I7445"></A><SPAN STYLE="font-size: 80%">{<I>pragma, 
configuration (Priority_Specific_Dispatching)</I> [partial]}</SPAN> <A NAME="I7446"></A></SPAN></DIV>
<DIV Class="paranum">4.1/2</DIV>
<DIV Class="Normal">&nbsp;&nbsp;{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AIs/AI-00355.TXT">AI95-00355-01</A></I>} 
<SPAN class="insert2">The priority ranges specified in more than one 
Priority_Specific_Dispatching pragma within the same partition shall 
not be overlapping.</SPAN></DIV>
<DIV Class="paranum">4.2/2</DIV>
<DIV Class="Normal">&nbsp;&nbsp;{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AIs/AI-00355.TXT">AI95-00355-01</A></I>} 
<SPAN class="insert2">If a partition contains one or more Priority_Specific_Dispatching 
pragmas it shall not contain a Task_Dispatching_Policy pragma.</SPAN></DIV>
<DIV Class="paranum">5/2</DIV>
<DIV Class="Normal"><SPAN STYLE="font-size: 80%"><I>This paragraph was 
deleted.</I></SPAN><SPAN class="delete2"></SPAN>{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AIs/AI-00333.TXT">AI95-00333-01</A></I>} 
<SPAN class="delete2">If the FIFO_Within_Priorities policy is specified 
for a partition, then the Ceiling_Locking policy (see <A HREF="AA-D-3.html">D.3</A>) 
shall also be specified for the partition.</SPAN></DIV>

<H4 Class="centered">Dynamic Semantics</H4>
<DIV Class="paranum">6/2</DIV>
<DIV Class="Normal">{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AIs/AI-00355.TXT">AI95-00355-01</A></I>} 
<SPAN STYLE="font-size: 80%">{<I>task dispatching policy</I>}</SPAN> 
<A NAME="I7447"></A>[A <I>task dispatching policy</I> specifies the details 
of task dispatching that are not covered by the basic task dispatching 
model. These rules govern when tasks are inserted into and deleted from 
the ready queues<SPAN class="delete2">, and whether a task is inserted 
at the head or the tail of the queue for its active priority</SPAN>.] 
<SPAN class="insert2">A single</SPAN><SPAN class="delete2">&nbsp;The</SPAN> 
task dispatching policy is specified by a Task_Dispatching_Policy <SPAN class="delete2">configuration 
</SPAN>pragma. <SPAN class="insert2">Pragma Priority_Specific_Dispatching 
assigns distinct dispatching policies to subranges of System.Any_Priority.</SPAN><SPAN class="delete2"><SPAN STYLE="font-size: 80%">&nbsp;{<I>unspecified</I> 
[partial]}</SPAN> <A NAME="I7448"></A>If no such pragma appears in any 
of the program units comprising a partition, the task dispatching policy 
for that partition is unspecified.</SPAN></DIV>
<DIV Class="paranum">6.1/2</DIV>
<DIV Class="Normal">&nbsp;&nbsp;{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AIs/AI-00355.TXT">AI95-00355-01</A></I>} 
<SPAN class="insert2"><SPAN STYLE="font-size: 80%">{<I>unspecified</I> 
[partial]}</SPAN> <A NAME="I7449"></A>If neither <SPAN Class="swiss"><A HREF="AA-2-8.html#S0019">pragma</A></SPAN> 
applies to any of the program units comprising a partition, the task 
dispatching policy for that partition is unspecified.</SPAN></DIV>
<DIV Class="paranum">6.2/2</DIV>
<DIV Class="Normal">&nbsp;&nbsp;{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AIs/AI-00355.TXT">AI95-00355-01</A></I>} 
<SPAN class="insert2">If a partition contains one or more Priority_Specific_Dispatching 
pragmas a task dispatching point occurs for the currently running task 
of a processor whenever there is a non-empty ready queue for that processor 
with a higher priority than the priority of the running task.</SPAN></DIV>
<DIV Class="paranum">6.a/2</DIV>
<DIV Class="Annotations"><SPAN class="insert2"><B>Discussion:&nbsp;</B>If 
we have priority specific dispatching then we want preemption across 
the entire range of priorities. That prevents higher priority tasks from 
being blocked by lower priority tasks that have a different policy. On 
the other hand, if we have a single policy for the entire partition, 
we want the characteristics of that policy to apply for preemption; specifically, 
we may not require any preemption. Note that policy Non_Preemptive_FIFO_Within_Priorities 
is not allowed in a priority specific dispatching pragma.</SPAN>&nbsp;</DIV>
<DIV Class="paranum">6.3/2</DIV>
<DIV Class="Normal">&nbsp;&nbsp;{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AIs/AI-00355.TXT">AI95-00355-01</A></I>} 
<SPAN class="insert2">A task that has its base priority changed may move 
from one dispatching policy to another. It is immediately subject to 
the new dispatching policy.</SPAN></DIV>
<DIV Class="paranum">6.b/2</DIV>
<DIV Class="Annotations"><SPAN class="insert2"><B>Ramification:&nbsp;</B>Once 
subject to the new dispatching policy, it may be immediately preempted 
or dispatched, according the rules of the new policy.</SPAN>&nbsp;</DIV>
<DIV Class="Normal"><SPAN class="insert2"><SPAN STYLE="font-size: 80%"><I>Paragraphs 
7 through 13 were moved to D.2.3.</I></SPAN></SPAN>&nbsp;</DIV>
<DIV Class="paranum">7/2</DIV>
<DIV Class="Normal" Style="margin-bottom: 0.4em">{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AIs/AI-00321.TXT">AI95-00321-01</A></I>} 
<SPAN class="delete2">The language defines only one task dispatching 
policy, FIFO_Within_Priorities; when this policy is in effect, modifications 
to the ready queues occur only as follows:</SPAN></DIV>
<DIV Class="paranum">8/2</DIV>
<UL Class="Bulleted"><LI TYPE=DISC>{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AIs/AI-00321.TXT">AI95-00321-01</A></I>} 
<SPAN class="delete2">When a blocked task becomes ready, it is added 
at the tail of the ready queue for its active priority.</SPAN></LI></UL>
<DIV Class="paranum">9/2</DIV>
<UL Class="Bulleted"><LI TYPE=DISC>{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AIs/AI-00321.TXT">AI95-00321-01</A></I>} 
<SPAN class="delete2">When the active priority of a ready task that is 
not running changes, or the setting of its base priority takes effect, 
the task is removed from the ready queue for its old active priority 
and is added at the tail of the ready queue for its new active priority, 
except in the case where the active priority is lowered due to the loss 
of inherited priority, in which case the task is added at the head of 
the ready queue for its new active priority.</SPAN></LI></UL>
<DIV Class="paranum">10/2</DIV>
<UL Class="Bulleted"><LI TYPE=DISC>{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AIs/AI-00321.TXT">AI95-00321-01</A></I>} 
<SPAN class="delete2">When the setting of the base priority of a running 
task takes effect, the task is added to the tail of the ready queue for 
its active priority.</SPAN></LI></UL>
<DIV Class="paranum">11/2</DIV>
<UL Class="Bulleted"><LI TYPE=DISC>{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AIs/AI-00321.TXT">AI95-00321-01</A></I>} 
<SPAN class="delete2">When a task executes a <SPAN Class="swiss"><A HREF="AA-9-6.html#S0209">delay_statement</A></SPAN> 
that does not result in blocking, it is added to the tail of the ready 
queue for its active priority.</SPAN>&nbsp;</LI></UL>
<DIV Class="paranum">11.a/2</DIV>
<DIV Class="Annotations"><SPAN class="delete2"><B>Ramification:&nbsp;</B>If 
the delay does result in blocking, the task moves to the &ldquo;delay 
queue&rdquo;, not to the ready queue.</SPAN>&nbsp;</DIV>
<DIV Class="paranum">12/2</DIV>
<DIV Class="Normal">&nbsp;{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AIs/AI-00321.TXT">AI95-00321-01</A></I>} 
<SPAN class="delete2"><SPAN STYLE="font-size: 80%">{<I>task dispatching 
point</I> [partial]}</SPAN> <A NAME="I7450"></A><SPAN STYLE="font-size: 80%">{<I>dispatching 
point</I> [partial]}</SPAN> <A NAME="I7451"></A>Each of the events specified 
above is a task dispatching point (see <A HREF="AA-D-2-1.html">D.2.1</A>).</SPAN></DIV>
<DIV Class="paranum">13/2</DIV>
<DIV Class="Normal">&nbsp;{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AIs/AI-00321.TXT">AI95-00321-01</A></I>} 
<SPAN class="delete2">In addition, when a task is preempted, it is added 
at the head of the ready queue for its active priority.</SPAN></DIV>

<H4 Class="centered">Implementation Requirements</H4>
<DIV Class="paranum">13.1/2</DIV>
<DIV Class="Normal">&nbsp;&nbsp;&nbsp;{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AIs/AI-00333.TXT">AI95-00333-01</A></I>} 
<SPAN class="insert2"></SPAN>{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AIs/AI-00355.TXT">AI95-00355-01</A></I>} 
<SPAN class="insert2">An implementation shall allow, for a single partition, 
both the locking policy (see <A HREF="AA-D-3.html">D.3</A>) to be specified 
as Ceiling_Locking and also one or more Priority_Specific_Dispatching 
pragmas to be given.</SPAN>&nbsp;</DIV>

<H4 Class="centered">Documentation Requirements</H4>
<DIV Class="Normal"><SPAN class="insert2"><SPAN STYLE="font-size: 80%"><I>Paragraphs 
14 through 16 were moved to D.2.3.</I></SPAN></SPAN>&nbsp;</DIV>
<DIV Class="paranum">14/2</DIV>
<DIV Class="Normal" Style="margin-bottom: 0.4em">&nbsp;{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AIs/AI-00321.TXT">AI95-00321-01</A></I>} 
<SPAN class="delete2"><SPAN STYLE="font-size: 80%">{<I>priority inversion</I>}</SPAN> 
<A NAME="I7452"></A><I>Priority inversion</I> is the duration for which 
a task remains at the head of the highest priority ready queue while 
the processor executes a lower priority task. The implementation shall 
document:</SPAN>&nbsp;</DIV>
<DIV Class="paranum">15/2</DIV>
<UL Class="Bulleted"><LI TYPE=DISC>{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AIs/AI-00321.TXT">AI95-00321-01</A></I>} 
<SPAN class="delete2">The maximum priority inversion a user task can 
experience due to activity of the implementation (on behalf of lower 
priority tasks), and</SPAN></LI></UL>
<DIV Class="paranum">16/2</DIV>
<UL Class="Bulleted"><LI TYPE=DISC>{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AIs/AI-00321.TXT">AI95-00321-01</A></I>} 
<SPAN class="delete2">whether execution of a task can be preempted by 
the implementation processing of delay expirations for lower priority 
tasks, and if so, for how long.</SPAN>&nbsp;</LI></UL>
<DIV Class="paranum">16.a/2</DIV>
<DIV Class="Annotations"><SPAN STYLE="font-size: 80%"><I>This paragraph 
was deleted.</I></SPAN><SPAN class="delete2"><B>Implementation defined: 
</B></SPAN><SPAN class="delete2">Implementation-defined aspects of priority 
inversion.</SPAN></DIV>

<H4 Class="centered">Implementation Permissions</H4>
<DIV Class="paranum">17/2</DIV>
<DIV Class="Normal">&nbsp;{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AIs/AI-00256.TXT">AI95-00256-01</A></I>} 
Implementations are allowed to define other task dispatching policies, 
but need not support more than one <SPAN class="insert2">task dispatching</SPAN><SPAN class="delete2">&nbsp;such</SPAN> 
policy per partition.</DIV>
<DIV Class="paranum">18/2</DIV>
<DIV Class="Normal">&nbsp;{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AIs/AI-00355.TXT">AI95-00355-01</A></I>} 
<SPAN class="insert2">An implementation need not support <SPAN Class="swiss"><A HREF="AA-2-8.html#S0019">pragma</A></SPAN> 
Priority_Specific_Dispatching if it is infeasible to support it in the 
target environment.</SPAN><SPAN class="delete2">&nbsp;[For optimization purposes,] 
an implementation may alter the points at which task dispatching occurs, 
in an implementation defined manner. However, a <SPAN Class="swiss"><A HREF="AA-9-6.html#S0209">delay_statement</A></SPAN> 
always corresponds to at least one task dispatching point.</SPAN></DIV>
<DIV Class="paranum">18.a/2</DIV>
<DIV Class="Annotations"><B>Implementation defined:&nbsp;</B>Implementation 
defined task dispatching<SPAN class="insert2">&nbsp;policies</SPAN>.</DIV>
<DIV Class="NotesHeader">NOTES</DIV>
<DIV Class="Notes"><SPAN class="insert2"><SPAN STYLE="font-size: 80%"><I>Paragraphs 
19 through 21 were deleted.</I></SPAN></SPAN>&nbsp;</DIV>
<DIV Class="paranum">19/2</DIV>
<DIV Class="Notes">14&nbsp;&nbsp;{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AIs/AI-00321.TXT">AI95-00321-01</A></I>} 
<SPAN class="delete2">If the active priority of a running task is lowered 
due to loss of inherited priority (as it is on completion of a protected 
operation) and there is a ready task of the same active priority that 
is not running, the running task continues to run (provided that there 
is no higher priority task).</SPAN></DIV>
<DIV Class="paranum">20/2</DIV>
<DIV Class="Notes">15&nbsp;&nbsp;{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AIs/AI-00321.TXT">AI95-00321-01</A></I>} 
<SPAN class="delete2">The setting of a task's base priority as a result 
of a call to Set_Priority does not always take effect immediately when 
Set_Priority is called. The effect of setting the task's base priority 
is deferred while the affected task performs a protected action.</SPAN></DIV>
<DIV Class="paranum">21/2</DIV>
<DIV Class="Notes">16&nbsp;&nbsp;{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AIs/AI-00321.TXT">AI95-00321-01</A></I>} 
<SPAN class="delete2">Setting the base priority of a ready task causes 
the task to move to the end of the queue for its active priority, regardless 
of whether the active priority of the task actually changes.</SPAN></DIV>

<H4 Class="centered">Extensions to Ada 95</H4>
<DIV Class="paranum">21.a/2</DIV>
<DIV Class="Annotations">{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AIs/AI-00333.TXT">AI95-00333-01</A></I>} 
<SPAN class="insert2">{<I>extensions to Ada 95</I>} <A NAME="I7453"></A><B>Amendment 
Correction:</B> It is no longer required to specify Ceiling_Locking with 
the language-defined task dispatching policies; we only require that 
implementations <I>allow</I> them to be used together.</SPAN></DIV>
<DIV Class="paranum">21.b/2</DIV>
<DIV Class="Annotations">{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AIs/AI-00355.TXT">AI95-00355-01</A></I>} 
<SPAN class="insert2"><B>Pragma</B> Priority_Specific_Dispatching is 
new; it allows specifying different policies for different priorities.</SPAN> 
</DIV>

<H4 Class="centered">Wording Changes from Ada 95</H4>
<DIV Class="paranum">21.c/2</DIV>
<DIV Class="Annotations">{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AIs/AI-00256.TXT">AI95-00256-01</A></I>} 
<SPAN class="insert2">Clarified that an implementation need support only 
one task dispatching policy (of any kind, language-defined or otherwise) 
per partition.</SPAN></DIV>
<DIV Class="paranum">21.d/2</DIV>
<DIV Class="Annotations">{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AIs/AI-00321.TXT">AI95-00321-01</A></I>} 
<SPAN class="insert2">This description is simplified to describe only 
the rules for the Task_Dispatching_Policy pragma that are common to all 
policies. In particular, rules about preemption are moved elsewhere. 
This makes it easier to add other policies (which may not involve preemption).</SPAN> 
</DIV>

<HR>
<DIV Style="margin-top: 0.0em; margin-bottom: 0.6em"><A HREF="AA-TOC.html"><IMG SRC="cont.gif" ALT="Contents" BORDER=0></A>&nbsp;
&nbsp;<A HREF="AA-0-5.html"><IMG SRC="index.gif" ALT="Index" BORDER=0></A>&nbsp;
&nbsp;<A HREF="AA-STDS.html"><IMG SRC="lib.gif" ALT="References" BORDER=0></A>&nbsp;
&nbsp;<A HREF="AA-SRCH.html"><IMG SRC="find.gif" ALT="Search" BORDER=0></A>&nbsp;
&nbsp;<A HREF="AA-D-2-1.html"><IMG SRC="prev.gif" ALT="Previous" BORDER=0></A>&nbsp;
&nbsp;<A HREF="AA-D-2-3.html"><IMG SRC="next.gif" ALT="Next" BORDER=0></A>&nbsp;
</DIV>
<DIV Style="margin-top:0.0em"><IMG SRC="AE_logo.gif" height=100 width=113 align=right ALT="Ada-Europe">
<SPAN Style="font-size: 125%">Sponsored by <SPAN Style="font-size: 125%"><A HREF="http://www.ada-europe.org/"><B>Ada-Europe</B></A></SPAN></SPAN></DIV>
</BODY>
</HTML>
