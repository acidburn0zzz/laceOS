<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
"http://www.w3.org/TR/html4/loose.dtd">
<HTML>
<HEAD>
    <TITLE>Pragmas Assert and Assertion_Policy</TITLE>
    <META http-equiv="Content-Type" content="text/html; charset=iso-8859-1">
    <META NAME="Author" CONTENT="JTC1/SC22/WG9/ARG, by Randall Brukardt, ARG Editor">
    <META NAME="GENERATOR" CONTENT="Arm_Form.Exe, Ada Reference Manual generator">
    <STYLE type="text/css">
    H4.centered {text-align: center}
    SPAN.swiss {font-family: Arial, Helvetica, sans-serif; font-size: 92%}
    SPAN.roman {font-family: "Times New Roman", Times, serif}
    DIV.paranum {float: left; font-family: Arial, Helvetica, sans-serif; font-size: 64%; width: 2.8em; margin-left: -0.4em; margin-right: -3.0em; margin-top: 0.2em}
    TT {font-family: "Courier New", monospace}
    DT {display: compact}
    SPAN.insert2 {text-decoration: underline; color: rgb(0,102,0) }
    SPAN.delete2 {text-decoration: line-through; color: rgb(0,102,0) }
    DIV.Normal {font-family: "Times New Roman", Times, serif; line-height: 122%; margin-left: 1.2em; margin-bottom: 0.6em}
    DIV.Annotations {font-family: "Times New Roman", Times, serif; font-size: 80%; line-height: 122%; margin-left: 6.2em; margin-bottom: 0.6em}
    DIV.Notes {font-family: "Times New Roman", Times, serif; font-size: 80%; line-height: 122%; margin-left: 3.7em; margin-bottom: 0.6em}
    DIV.NotesHeader {font-family: "Times New Roman", Times, serif; font-size: 80%; line-height: 122%; margin-left: 3.7em}
    DIV.SyntaxIndented {font-family: "Times New Roman", Times, serif; line-height: 122%; margin-left: 3.2em; margin-bottom: 0.4em}
    DIV.Examples {font-family: "Courier New", monospace; font-size: 90%; line-height: 122%; margin-left: 3.4em; margin-bottom: 0.6em}
    </STYLE>
</HEAD>
<BODY TEXT="#000000" BGCOLOR="#FFFFF0" LINK="#000080" VLINK="#330033" ALINK="#0000FF">
<DIV><B><SPAN Style="font-size:200%; color: rgb(0,51,153)">Annotated</SPAN><SPAN Style="font-size:200%; color: rgb(0,0,102)">&nbsp;Ada Reference Manual</SPAN></B> &mdash; <A HREF="AA-TTL.html"><B>Legal Information</B></A></DIV>
<DIV Style="margin-top: 0.6em; margin-bottom: 0.0em"><A HREF="AA-TOC.html"><IMG SRC="cont.gif" ALT="Contents" BORDER=0></A>&nbsp;
&nbsp;<A HREF="AA-0-5.html"><IMG SRC="index.gif" ALT="Index" BORDER=0></A>&nbsp;
&nbsp;<A HREF="AA-STDS.html"><IMG SRC="lib.gif" ALT="References" BORDER=0></A>&nbsp;
&nbsp;<A HREF="AA-SRCH.html"><IMG SRC="find.gif" ALT="Search" BORDER=0></A>&nbsp;
&nbsp;<A HREF="AA-11-4-1.html"><IMG SRC="prev.gif" ALT="Previous" BORDER=0></A>&nbsp;
&nbsp;<A HREF="AA-11-4-3.html"><IMG SRC="next.gif" ALT="Next" BORDER=0></A>&nbsp;
</DIV>
<HR>
<H1>&nbsp;11.4.2 <SPAN class="insert2">Pragmas Assert and Assertion_Policy</SPAN> <SPAN class="delete2"></SPAN></H1>
<DIV Class="paranum">1/2</DIV>
<DIV Class="Normal">{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AIs/AI-00286.TXT">AI95-00286-01</A></I>} 
<SPAN class="insert2">Pragma Assert is used to assert the truth of a 
Boolean expression at any point within a sequence of declarations or 
statements. Pragma Assertion_Policy is used to control whether such assertions<SPAN STYLE="font-size: 80%">{<I>Assertions</I>}</SPAN> 
<A NAME="I4596"></A>are to be ignored by the implementation, checked 
at run-time, or handled in some implementation-defined manner.</SPAN> 
</DIV>

<H4 Class="centered">Syntax</H4>
<DIV Class="paranum">2/2</DIV>
<DIV Class="SyntaxIndented" Style="margin-bottom: 0.2em">{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AIs/AI-00286.TXT">AI95-00286-01</A></I>} 
<SPAN class="insert2">The form of a <SPAN Class="swiss"><A HREF="AA-2-8.html#S0019">pragma</A></SPAN> 
Assert is as follows:</SPAN>&nbsp;</DIV>
<DIV Class="paranum">3/2</DIV>
<DIV Class="SyntaxIndented"><SPAN class="insert2">&nbsp;&nbsp;<B>pragma</B> 
<A NAME="I4597"></A><A NAME="I4598"></A>Assert([Check =&gt;] <I>boolean_</I><A NAME="I4599"></A><SPAN Class="swiss"><A HREF="AA-4-4.html#S0115">expression</A></SPAN>[, 
[Message =&gt;] <I>string_</I><A NAME="I4600"></A><SPAN Class="swiss"><A HREF="AA-4-4.html#S0115">expression</A></SPAN>]);</SPAN></DIV>
<DIV Class="paranum">4/2</DIV>
<DIV Class="SyntaxIndented"><SPAN class="insert2">A <SPAN Class="swiss"><A HREF="AA-2-8.html#S0019">pragma</A></SPAN> 
Assert is allowed at the place where a <SPAN Class="swiss"><A HREF="AA-3-11.html#S0087">declarative_item</A></SPAN> 
or a <SPAN Class="swiss"><A HREF="AA-5-1.html#S0131">statement</A></SPAN> 
is allowed.</SPAN></DIV>
<DIV Class="paranum">5/2</DIV>
<DIV Class="SyntaxIndented" Style="margin-bottom: 0.2em">{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AIs/AI-00286.TXT">AI95-00286-01</A></I>} 
<SPAN class="insert2">The form of a <SPAN Class="swiss"><A HREF="AA-2-8.html#S0019">pragma</A></SPAN> 
Assertion_Policy is as follows:</SPAN>&nbsp;</DIV>
<DIV Class="paranum">6/2</DIV>
<DIV Class="SyntaxIndented"><SPAN class="insert2">&nbsp;&nbsp;<B>pragma</B> 
<A NAME="I4601"></A><A NAME="I4602"></A>Assertion_Policy(<I>policy_</I><A NAME="I4603"></A><SPAN Class="swiss"><A HREF="AA-2-3.html#S0002">identifier</A></SPAN>);</SPAN></DIV>
<DIV Class="paranum">7/2</DIV>
<DIV Class="SyntaxIndented"><SPAN class="insert2"><SPAN STYLE="font-size: 80%">{<I>configuration 
pragma (Assertion_Policy)</I> [partial]}</SPAN> <A NAME="I4604"></A><SPAN STYLE="font-size: 80%">{<I>pragma, 
configuration (Assertion_Policy)</I> [partial]}</SPAN> <A NAME="I4605"></A>A 
<SPAN Class="swiss"><A HREF="AA-2-8.html#S0019">pragma</A></SPAN> Assertion_Policy 
is a configuration pragma.</SPAN></DIV>

<H4 Class="centered">Name Resolution Rules</H4>
<DIV Class="paranum">8/2</DIV>
<DIV Class="Normal">{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AIs/AI-00286.TXT">AI95-00286-01</A></I>} 
<SPAN class="insert2">The expected type for the <I>boolean_</I><SPAN Class="swiss"><A HREF="AA-4-4.html#S0115">expression</A></SPAN> 
of a <SPAN Class="swiss"><A HREF="AA-2-8.html#S0019">pragma</A></SPAN> 
Assert is any boolean type. The expected type for the <I>string_</I><SPAN Class="swiss"><A HREF="AA-4-4.html#S0115">expression</A></SPAN> 
of a <SPAN Class="swiss"><A HREF="AA-2-8.html#S0019">pragma</A></SPAN> 
Assert is type String.</SPAN>&nbsp;</DIV>
<DIV Class="paranum">8.a/2</DIV>
<DIV Class="Annotations"><SPAN class="insert2"><B>Reason:&nbsp;</B>We allow 
any boolean type to be like <SPAN Class="swiss"><A HREF="AA-5-3.html#S0138">if_statement</A></SPAN>s 
and other conditionals; we only allow String for the message in order 
to match <SPAN Class="swiss"><A HREF="AA-11-3.html#S0251">raise_statement</A></SPAN>s.</SPAN> 
</DIV>

<H4 Class="centered">Legality Rules</H4>
<DIV Class="paranum">9/2</DIV>
<DIV Class="Normal">{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AIs/AI-00286.TXT">AI95-00286-01</A></I>} 
<SPAN class="insert2">The <I>policy_</I><SPAN Class="swiss"><A HREF="AA-2-3.html#S0002">identifier</A></SPAN> 
of a <SPAN Class="swiss"><A HREF="AA-2-8.html#S0019">pragma</A></SPAN> 
Assertion_Policy shall be either Check, Ignore, or an implementation-defined 
identifier.</SPAN>&nbsp;</DIV>
<DIV Class="paranum">9.a/2</DIV>
<DIV Class="Annotations"><SPAN class="insert2"><B>Implementation defined: 
</B></SPAN><SPAN class="insert2">Implementation-defined <I>policy_</I><SPAN Class="swiss"><A HREF="AA-2-3.html#S0002">identifier</A></SPAN>s 
allowed in a <SPAN Class="swiss"><A HREF="AA-2-8.html#S0019">pragma</A></SPAN> 
Assertion_Policy.</SPAN></DIV>

<H4 Class="centered">Static Semantics</H4>
<DIV Class="paranum">10/2</DIV>
<DIV Class="Normal">&nbsp;{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AIs/AI-00286.TXT">AI95-00286-01</A></I>} 
<SPAN class="insert2">A <SPAN Class="swiss"><A HREF="AA-2-8.html#S0019">pragma</A></SPAN> 
Assertion_Policy is a configuration pragma that specifies the assertion 
policy in effect for the compilation units to which it applies. Different 
policies may apply to different compilation units within the same partition. 
The default assertion policy is implementation-defined.</SPAN>&nbsp;</DIV>
<DIV Class="paranum">10.a/2</DIV>
<DIV Class="Annotations"><SPAN class="insert2"><B>Implementation defined: 
</B></SPAN><SPAN class="insert2">The default assertion policy.</SPAN></DIV>
<DIV Class="paranum">11/2</DIV>
<DIV Class="Normal" Style="margin-bottom: 0.4em">&nbsp;{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AIs/AI-00286.TXT">AI95-00286-01</A></I>} 
<SPAN class="insert2">The following language-defined library package 
exists:</SPAN></DIV>
<DIV Class="paranum">12/2</DIV>
<DIV Class="Examples"><SPAN class="insert2"><A NAME="I4606"></A><B>package</B>&nbsp;Ada.Assertions&nbsp;<B>is</B><BR>
&nbsp;&nbsp;&nbsp;<B>pragma</B>&nbsp;Pure(Assertions);</SPAN></DIV>
<DIV Class="paranum">13/2</DIV>
<DIV Class="Examples"><SPAN class="insert2">&nbsp;&nbsp;&nbsp;Assertion_Error&nbsp;:&nbsp;<B>exception</B>;</SPAN></DIV>
<DIV Class="paranum">14/2</DIV>
<DIV Class="Examples"><SPAN class="insert2">&nbsp;&nbsp;&nbsp;<B>procedure</B>&nbsp;Assert(Check&nbsp;:&nbsp;<B>in</B>&nbsp;Boolean);<BR>
&nbsp;&nbsp;&nbsp;<B>procedure</B>&nbsp;Assert(Check&nbsp;:&nbsp;<B>in</B>&nbsp;Boolean;&nbsp;Message&nbsp;:&nbsp;<B>in</B>&nbsp;String);</SPAN></DIV>
<DIV Class="paranum">15/2</DIV>
<DIV Class="Examples"><SPAN class="insert2"><B>end</B>&nbsp;Ada.Assertions;</SPAN></DIV>
<DIV Class="paranum">16/2</DIV>
<DIV Class="Normal">&nbsp;{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AIs/AI-00286.TXT">AI95-00286-01</A></I>} 
<SPAN class="insert2">A compilation unit containing a <SPAN Class="swiss"><A HREF="AA-2-8.html#S0019">pragma</A></SPAN> 
Assert has a semantic dependence on the Assertions library unit.</SPAN></DIV>
<DIV Class="paranum">17/2</DIV>
<DIV Class="Normal">&nbsp;{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AIs/AI-00286.TXT">AI95-00286-01</A></I>} 
<SPAN class="insert2">The assertion policy that applies to a generic 
unit also applies to all its instances.</SPAN>&nbsp;</DIV>

<H4 Class="centered">Dynamic Semantics</H4>
<DIV Class="paranum">18/2</DIV>
<DIV Class="Normal">&nbsp;{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AIs/AI-00286.TXT">AI95-00286-01</A></I>} 
<SPAN class="insert2">An assertion policy <SPAN STYLE="font-size: 80%">{<I>assertion 
policy</I>}</SPAN> <A NAME="I4607"></A>specifies how a <SPAN Class="swiss"><A HREF="AA-2-8.html#S0019">pragma</A></SPAN> 
Assert is interpreted by the implementation. If the assertion policy 
is Ignore at the point of a <SPAN Class="swiss"><A HREF="AA-2-8.html#S0019">pragma</A></SPAN> 
Assert, the pragma is ignored. If the assertion policy is Check at the 
point of a <SPAN Class="swiss"><A HREF="AA-2-8.html#S0019">pragma</A></SPAN> 
Assert, the elaboration of the pragma consists of evaluating the boolean 
expression, and if the result is False, evaluating the Message argument, 
if any, and raising the exception Assertions.Assertion_Error, with a 
message if the Message argument is provided.</SPAN></DIV>
<DIV Class="paranum">19/2</DIV>
<DIV Class="Normal" Style="margin-bottom: 0.4em">&nbsp;{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AIs/AI-00286.TXT">AI95-00286-01</A></I>} 
<SPAN class="insert2">Calling the procedure Assertions.Assert without 
a Message parameter is equivalent to:</SPAN></DIV>
<DIV Class="paranum">20/2</DIV>
<DIV Class="Examples"><SPAN class="insert2"><B>if</B>&nbsp;Check&nbsp;=&nbsp;False&nbsp;<B>then</B><BR>
&nbsp;&nbsp;&nbsp;<B>raise</B>&nbsp;Ada.Assertions.Assertion_Error;<BR>
<B>end</B>&nbsp;<B>if</B>;</SPAN></DIV>
<DIV Class="paranum">21/2</DIV>
<DIV Class="Normal" Style="margin-bottom: 0.4em">&nbsp;{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AIs/AI-00286.TXT">AI95-00286-01</A></I>} 
<SPAN class="insert2">Calling the procedure Assertions.Assert with a 
Message parameter is equivalent to:</SPAN></DIV>
<DIV Class="paranum">22/2</DIV>
<DIV Class="Examples"><SPAN class="insert2"><B>if</B>&nbsp;Check&nbsp;=&nbsp;False&nbsp;<B>then</B><BR>
&nbsp;&nbsp;&nbsp;<B>raise</B>&nbsp;Ada.Assertions.Assertion_Error&nbsp;<B>with</B>&nbsp;Message;<BR>
<B>end</B>&nbsp;<B>if</B>;</SPAN></DIV>
<DIV Class="paranum">23/2</DIV>
<DIV Class="Normal">&nbsp;{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AIs/AI-00286.TXT">AI95-00286-01</A></I>} 
<SPAN class="insert2">The procedures Assertions.Assert have these effects 
independently of the assertion policy in effect.</SPAN></DIV>

<H4 Class="centered">Implementation Permissions</H4>
<DIV Class="paranum">24/2</DIV>
<DIV Class="Normal">&nbsp;{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AIs/AI-00286.TXT">AI95-00286-01</A></I>} 
<SPAN class="insert2">Assertion_Error may be declared by renaming an 
implementation-defined exception from another package.</SPAN>&nbsp;</DIV>
<DIV Class="paranum">24.a/2</DIV>
<DIV Class="Annotations"><SPAN class="insert2"><B>Reason:&nbsp;</B>This permission 
is intended to allow implementations which had an implementation-defined 
Assert pragma to continue to use their originally defined exception. 
Without this permission, such an implementation would be incorrect, as 
Exception_Name would return the wrong name.</SPAN>&nbsp;</DIV>
<DIV Class="paranum">25/2</DIV>
<DIV Class="Normal">&nbsp;{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AIs/AI-00286.TXT">AI95-00286-01</A></I>} 
<SPAN class="insert2">Implementations may define their own assertion 
policies.</SPAN>&nbsp;</DIV>
<DIV Class="NotesHeader">NOTES</DIV>
<DIV Class="paranum">26/2</DIV>
<DIV Class="Notes">2&nbsp;&nbsp;{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AIs/AI-00286.TXT">AI95-00286-01</A></I>} 
<SPAN class="insert2">Normally, the boolean expression in a <SPAN Class="swiss"><A HREF="AA-2-8.html#S0019">pragma</A></SPAN> 
Assert should not call functions that have significant side-effects when 
the result of the expression is True, so that the particular assertion 
policy in effect will not affect normal operation of the program.</SPAN> 
</DIV>

<H4 Class="centered">Extensions to Ada 95</H4>
<DIV Class="paranum">26.a/2</DIV>
<DIV Class="Annotations">{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AIs/AI-00286.TXT">AI95-00286-01</A></I>} 
<SPAN class="insert2">{<I>extensions to Ada 95</I>} <A NAME="I4608"></A>Pragmas 
Assert and Assertion_Policy, and package Assertions are new.</SPAN>&nbsp;</DIV>

<HR>
<DIV Style="margin-top: 0.0em; margin-bottom: 0.6em"><A HREF="AA-TOC.html"><IMG SRC="cont.gif" ALT="Contents" BORDER=0></A>&nbsp;
&nbsp;<A HREF="AA-0-5.html"><IMG SRC="index.gif" ALT="Index" BORDER=0></A>&nbsp;
&nbsp;<A HREF="AA-STDS.html"><IMG SRC="lib.gif" ALT="References" BORDER=0></A>&nbsp;
&nbsp;<A HREF="AA-SRCH.html"><IMG SRC="find.gif" ALT="Search" BORDER=0></A>&nbsp;
&nbsp;<A HREF="AA-11-4-1.html"><IMG SRC="prev.gif" ALT="Previous" BORDER=0></A>&nbsp;
&nbsp;<A HREF="AA-11-4-3.html"><IMG SRC="next.gif" ALT="Next" BORDER=0></A>&nbsp;
</DIV>
<DIV Style="margin-top:0.0em"><IMG SRC="AE_logo.gif" height=100 width=113 align=right ALT="Ada-Europe">
<SPAN Style="font-size: 125%">Sponsored by <SPAN Style="font-size: 125%"><A HREF="http://www.ada-europe.org/"><B>Ada-Europe</B></A></SPAN></SPAN></DIV>
</BODY>
</HTML>
